/*! glpk.js - v4.47.0 - 2012-12-29
* https://github.com/hgourvest/glpk.js
* Copyright (c) 2012 Henri Gourvest; Licensed GPLv2 */
(function(e){function h(e){throw new Error(e)}function p(e){if(!e)throw new Error("assert")}function v(e,t){for(var n in t)e[n]=t[n]}function m(e,t,n,r,i){for(;i>0;t++,r++,i--)e[t]=n[r]}function g(e,t,n,r){for(;r>0;t++,r--)e[t]=n}function y(e,t,n){for(;n>0;t++,n--)e[t]={}}function b(){var e=new Date;return e.getTime()}function w(e,t){return(e-t)/1e3}function E(e,t,n,r){var i=new Array(n);m(i,0,e,t,n),i.sort(r),m(e,t,i,0,n)}function x(){return S}function N(e){return" 	\n\f\r".indexOf(e)>=0}function C(e){var t=typeof e=="string"?e.charCodeAt(0):-1;return t>=0&&t<=31||t==127}function k(e){var t=typeof e=="string"?e.charCodeAt(0):-1;return t>=65&&t<=90||t>=97&&t<=122}function L(e){var t=typeof e=="string"?e.charCodeAt(0):-1;return t>=65&&t<=90||t>=97&&t<=122||t>=48&&t<=57}function A(e){var t=typeof e=="string"?e.charCodeAt(0):-1;return t>=48&&t<=57}function O(e,t){return e.indexOf(t)}function M(e){return e.toLowerCase()}function _(){var e=/%%|%(\d+\$)?([-+\'#0 ]*)(\*\d+\$|\*|\d+)?(\.(\*\d+\$|\*|\d+))?([scboxXuideEfFgG])/g,t=arguments,n=0,r=t[n++],i=function(e,t,n,r){n||(n=" ");var i=e.length>=t?"":Array(1+t-e.length>>>0).join(n);return r?e+i:i+e},s=function(e,t,n,r,s,o){var u=r-e.length;return u>0&&(n||!s?e=i(e,r,o,n):e=e.slice(0,t.length)+i("",u,"0",!0)+e.slice(t.length)),e},o=function(e,t,n,r,o,u,a){var f=e>>>0;return n=n&&f&&{2:"0b",8:"0",16:"0x"}[t]||"",e=n+i(f.toString(t),u||0,"0",!1),s(e,n,r,o,a)},u=function(e,t,n,r,i,o){return r!=null&&(e=e.slice(0,r)),s(e,"",t,n,i,o)},a=function(e,r,a,f,l,c,h){var p,d,v,m,g;if(e=="%%")return"%";var y=!1,b="",w=!1,E=!1,S=" ",x=a.length;for(var T=0;a&&T<x;T++)switch(a.charAt(T)){case" ":b=" ";break;case"+":b="+";break;case"-":y=!0;break;case"'":S=a.charAt(T+1);break;case"0":w=!0;break;case"#":E=!0}f?f=="*"?f=+t[n++]:f.charAt(0)=="*"?f=+t[f.slice(1,-1)]:f=+f:f=0,f<0&&(f=-f,y=!0);if(!isFinite(f))throw new Error("sprintf: (minimum-)width must be finite");c?c=="*"?c=+t[n++]:c.charAt(0)=="*"?c=+t[c.slice(1,-1)]:c=+c:c="fFeE".indexOf(h)>-1?6:h=="d"?0:undefined,g=r?t[r.slice(0,-1)]:t[n++];switch(h){case"s":return u(String(g),y,f,c,w,S);case"c":return u(String.fromCharCode(+g),y,f,c,w);case"b":return o(g,2,E,y,f,c,w);case"o":return o(g,8,E,y,f,c,w);case"x":return o(g,16,E,y,f,c,w);case"X":return o(g,16,E,y,f,c,w).toUpperCase();case"u":return o(g,10,E,y,f,c,w);case"i":case"d":return p=+g||0,p=Math.round(p-p%1),d=p<0?"-":b,g=d+i(String(Math.abs(p)),c,"0",!1),s(g,d,y,f,w);case"e":case"E":case"f":case"F":case"g":case"G":return p=+g,d=p<0?"-":b,v=["toExponential","toFixed","toPrecision"]["efg".indexOf(h.toLowerCase())],m=["toString","toUpperCase"]["eEfFgG".indexOf(h)%2],g=d+Math.abs(p)[v](c),s(g,d,y,f,w)[m]();default:return e}};return r.replace(e,a)}function P(e){e.magic=D,e.parms=null,e.tree=null,e.name=null,e.obj=null,e.dir=Pi,e.c0=0,e.m_max=100,e.n_max=200,e.m=e.n=0,e.nnz=0,e.row=new Array(1+e.m_max),e.col=new Array(1+e.n_max),e.r_tree={},e.c_tree={},e.valid=0,e.head=new Array(1+e.m_max),e.bfcp=null,e.bfd=null,e.pbs_stat=e.dbs_stat=rs,e.obj_val=0,e.it_cnt=0,e.some=0,e.ipt_stat=rs,e.ipt_obj=0,e.mip_stat=rs,e.mip_obj=0}function tt(e){e.magic=1061109567,e.parms=null,p(e.tree==null),e.row=null,e.col=null,e.r_tree=null,e.c_tree=null,e.head=null,e.bfcp=null,e.bfd=null}function en(e,t,n,r){var i=e.m,s=e.n,o,u,a,f,l,c,d,v,m,g,y,b,w;t!=es&&t!=ts&&t!=ns&&h("glp_check_kkt: sol = "+t+"; invalid solution indicator"),n!=No&&n!=Co&&n!=ko&&n!=Lo&&n!=Ao&&h("glp_check_kkt: cond = "+n+"; invalid condition indicator "),b=w=0,c=d=0;if(n==No)for(f=1;f<=i;f++){o=e.row[f],m=g=0,t==es?y=o.prim:t==ts?y=o.pval:t==ns?y=o.mipx:p(t!=t),y>=0?m+=y:g-=y;for(a=o.ptr;a!=null;a=a.r_next)u=a.col,t==es?y=-a.val*u.prim:t==ts?y=-a.val*u.pval:t==ns?y=-a.val*u.mipx:p(t!=t),y>=0?m+=y:g-=y;v=Math.abs(m-g),b<v&&(b=v,c=f),v/=1+m+g,w<v&&(w=v,d=f)}else if(n==Co){for(f=1;f<=i;f++)o=e.row[f],t==es?y=o.prim:t==ts?y=o.pval:t==ns?y=o.mipx:p(t!=t),(o.type==qi||o.type==Ui||o.type==zi)&&y<o.lb&&(v=o.lb-y,b<v&&(b=v,c=f),v/=1+Math.abs(o.lb),w<v&&(w=v,d=f)),(o.type==Ri||o.type==Ui||o.type==zi)&&y>o.ub&&(v=y-o.ub,b<v&&(b=v,c=f),v/=1+Math.abs(o.ub),w<v&&(w=v,d=f));for(l=1;l<=s;l++)u=e.col[l],t==es?y=u.prim:t==ts?y=u.pval:t==ns?y=u.mipx:p(t!=t),(u.type==qi||u.type==Ui||u.type==zi)&&y<u.lb&&(v=u.lb-y,b<v&&(b=v,c=i+l),v/=1+Math.abs(u.lb),w<v&&(w=v,d=i+l)),(u.type==Ri||u.type==Ui||u.type==zi)&&y>u.ub&&(v=y-u.ub,b<v&&(b=v,c=i+l),v/=1+Math.abs(u.ub),w<v&&(w=v,d=i+l))}else if(n==ko)for(l=1;l<=s;l++){u=e.col[l],m=g=0,t==es?y=u.dual-u.coef:t==ts?y=u.dval-u.coef:p(t!=t),y>=0?m+=y:g-=y;for(a=u.ptr;a!=null;a=a.c_next)o=a.row,t==es?y=a.val*o.dual:t==ts?y=a.val*o.dval:p(t!=t),y>=0?m+=y:g-=y;v=Math.abs(m-g),b<v&&(b=v,c=i+l),v/=1+m+g,w<v&&(w=v,d=i+l)}else if(n==Lo){for(f=1;f<=i;f++)o=e.row[f],t==es?y=o.dual:t==ts?y=o.dval:p(t!=t),e.dir==Pi?y=+y:e.dir==Hi?y=-y:p(e!=e),(o.type==Ii||o.type==qi)&&y<0&&(v=-y,b<v&&(b=w=v,c=d=f)),(o.type==Ii||o.type==Ri)&&y>0&&(v=+y,b<v&&(b=w=v,c=d=f));for(l=1;l<=s;l++)u=e.col[l],t==es?y=u.dual:t==ts?y=u.dval:p(t!=t),e.dir==Pi?y=+y:e.dir==Hi?y=-y:p(e!=e),(u.type==Ii||u.type==qi)&&y<0&&(v=-y,b<v&&(b=w=v,c=d=i+l)),(u.type==Ii||u.type==Ri)&&y>0&&(v=+y,b<v&&(b=w=v,c=d=i+l))}else p(n!=n);r(b,c,w,d)}function on(e){var t={};sn(e,t),or(e.bfd,t)}function wn(e,t,n,r,i,s,o,u){var a,f,l,c,d=0,v,m,g,y,b;e.pbs_stat==rs&&h("glp_analyze_row: primal basic solution components are undefined"),e.dbs_stat!=is&&h("glp_analyze_row: basic solution is not dual feasible"),0<=t&&t<=e.n||h("glp_analyze_row: len = "+t+"; invalid row length"),g=0;for(a=1;a<=t;a++)f=n[a],1<=f&&f<=e.m+e.n||h("glp_analyze_row: ind["+a+"] = "+f+"; row/column index out of range"),f<=e.m?(e.row[f].stat==Wi&&h("glp_analyze_row: ind["+a+"] = "+f+"; basic auxiliary variable is not allowed"),v=e.row[f].prim):(e.col[f-e.m].stat==Wi&&h("glp_analyze_row: ind["+a+"] = "+f+"; basic structural variable is not allowed"),v=e.col[f-e.m].prim),g+=r[a]*v;if(i==qi){if(g>=s)return d=1,d;l=1}else if(i==Ri){if(g<=s)return d=1,d;l=-1}else h("glp_analyze_row: type = "+i+"; invalid parameter");return y=s-g,c=bn(e,t,n,r,l,o),c==0?(d=2,d):(f=n[c],p(1<=f&&f<=e.m+e.n),f<=e.m?v=e.row[f].prim:v=e.col[f-e.m].prim,p(r[c]!=0),m=y/r[c],f<=e.m?b=e.row[f].dual*m:b=e.col[f-e.m].dual*m,u(c,v,m,g,y,b),d)}function xn(e){return e.reason}function Tn(e){return e.mip}function Nn(e,t){t(e.a_cnt,e.n_cnt,e.t_cnt)}function Cn(e){var t=e.curr;return t==null?0:t.p}function kn(e,t){function n(){h("glp_ios_next_node: p = "+t+"; invalid subproblem reference number")}var r;return t==0?r=e.head:(1<=t&&t<=e.nslots||n(),r=e.slot[t].node,r==null&&n(),r.count!=0&&h("glp_ios_next_node: p = "+t+"; subproblem not in the active list"),r=r.next),r==null?0:r.p}function Ln(e,t){function r(){h("glp_ios_prev_node: p = "+t+"; invalid subproblem reference number")}var n;return t==0?n=e.tail:(1<=t&&t<=e.nslots||r(),n=e.slot[t].node,n==null&&r(),n.count!=0&&h("glp_ios_prev_node: p = "+t+"; subproblem not in the active list"),n=n.prev),n==null?0:n.p}function An(e,t){function r(){h("glp_ios_up_node: p = "+t+"; invalid subproblem reference number")}var n;return 1<=t&&t<=e.nslots||r(),n=e.slot[t].node,n==null&&r(),n=n.up,n==null?0:n.p}function On(e,t){function r(){h("glp_ios_node_level: p = "+t+"; invalid subproblem reference number")}var n;return 1<=t&&t<=e.nslots||r(),n=e.slot[t].node,n==null&&r(),n.level}function Mn(e,t){function r(){h("glp_ios_node_bound: p = "+t+"; invalid subproblem reference number")}var n;return 1<=t&&t<=e.nslots||r(),n=e.slot[t].node,n==null&&r(),n.bound}function _n(e){return Ur(e)}function Dn(e){return zr(e)}function Pn(e,t){function r(){h("glp_ios_node_level: p = "+t+"; invalid subproblem reference number")}var n;return 1<=t&&t<=e.nslots||r(),n=e.slot[t].node,n==null&&r(),n.data}function Hn(e,t,n){var r;1<=t&&t<=e.mip.m||h("glp_ios_row_attr: i = "+t+"; row number out of range"),r=e.mip.row[t],n.level=r.level,n.origin=r.origin,n.klass=r.klass}function Bn(e){return e.reason!=Ys&&h("glp_ios_pool_size: operation not allowed"),p(e.local!=null),e.local.size}function jn(e,t,n,r,i,s,o,u,a){var f;return e.reason!=Ys&&h("glp_ios_add_row: operation not allowed"),p(e.local!=null),f=Vr(e,e.local,t,n,r,i,s,o,u,a),f}function Fn(e,t){e.reason!=Ys&&h("glp_ios_del_row: operation not allowed"),Jr(e.local,t)}function In(e){e.reason!=Ys&&h("glp_ios_clear_pool: operation not allowed"),Kr(e.local)}function qn(e,t){return 1<=t&&t<=e.mip.n||h("glp_ios_can_branch: j = "+t+"; column number out of range"),e.non_int[t]}function Rn(e,t,n){1<=t&&t<=e.mip.n||h("glp_ios_branch_upon: j = "+t+"; column number out of range"),n!=ro&&n!=io&&n!=no&&h("glp_ios_branch_upon: sel = "+n+": invalid branch selection flag"),e.non_int[t]||h("glp_ios_branch_upon: j = "+t+"; variable cannot be used to branch upon"),e.br_var!=0&&h("glp_ios_branch_upon: branching variable already chosen"),e.br_var=t,e.br_sel=n}function Un(e,t){function r(){h("glp_ios_select_node: p = "+t+"; invalid subproblem reference number")}var n;1<=t&&t<=e.nslots||r(),n=e.slot[t].node,n==null&&r(),n.count!=0&&h("glp_ios_select_node: p = "+t+"; subproblem not in the active list"),e.next_p!=0&&h("glp_ios_select_node: subproblem already selected"),e.next_p=t}function zn(e,t){var n=e.mip,r=e.orig_m,i=e.n,s,o,u;p(n.m>=r),p(n.n==i),u=n.c0;for(o=1;o<=i;o++){var a=n.col[o];if(a.kind==ji&&t[o]!=Math.floor(t[o]))return 1;u+=a.coef*t[o]}if(n.mip_stat==is)switch(n.dir){case Pi:if(u>=e.mip.mip_obj)return 1;break;case Hi:if(u<=e.mip.mip_obj)return 1;break;default:p(n!=n)}e.parm.msg_lev>=ds&&d("Solution found by heuristic: "+u+""),n.mip_stat=is,n.mip_obj=u;for(o=1;o<=i;o++)n.col[o].mipx=t[o];for(s=1;s<=r;s++){var f=n.row[s],l;f.mipx=0;for(l=f.ptr;l!=null;l=l.r_next)f.mipx+=l.val*l.col.mipx}return 0}function Wn(e){e.parm.msg_lev>=ms&&d("The search is prematurely terminated due to application request"),e.stop=1}function sr(){var e={};return e.valid=0,e.type=fs,e.fhv=null,e.lpf=null,e.lu_size=0,e.piv_tol=.1,e.piv_lim=4,e.suhl=1,e.eps_tol=1e-15,e.max_gro=1e10,e.nfs_max=100,e.upd_tol=1e-6,e.nrs_max=100,e.rs_size=1e3,e.upd_lim=-1,e.upd_cnt=0,e}function or(e,t){p(e!=null),e.type=t.type,e.lu_size=t.lu_size,e.piv_tol=t.piv_tol,e.piv_lim=t.piv_lim,e.suhl=t.suhl,e.eps_tol=t.eps_tol,e.max_gro=t.max_gro,e.nfs_max=t.nfs_max,e.upd_tol=t.upd_tol,e.nrs_max=t.nrs_max,e.rs_size=t.rs_size}function ur(e,t,n,r,i){var s,o,u;p(e!=null),p(1<=t&&t<=a),e.valid=0,o=0;switch(e.type){case fs:e.lpf=null,e.fhv==null&&(e.fhv=Sr(),o=1);break;case ls:case cs:e.fhv=null,e.lpf==null&&(e.lpf=Na(),o=1);break;default:p(e!=e)}e.fhv!=null?s=e.fhv.luf:e.lpf!=null?s=e.lpf.luf:p(e!=e),o&&(s.new_sva=e.lu_size),s.piv_tol=e.piv_tol,s.piv_lim=e.piv_lim,s.suhl=e.suhl,s.eps_tol=e.eps_tol,s.max_gro=e.max_gro,e.fhv!=null&&(o&&(e.fhv.hh_max=e.nfs_max),e.fhv.upd_tol=e.upd_tol),e.lpf!=null&&(o&&(e.lpf.n_max=e.nrs_max),o&&(e.lpf.v_size=e.rs_size));if(e.fhv!=null)switch(xr(e.fhv,t,r,i)){case 0:break;case gr:return u=er,u;case yr:return u=tr,u;default:p(e!=e)}else if(e.lpf!=null)switch(Ca(e.lpf,t,n,r,i)){case 0:switch(e.type){case ls:e.lpf.scf.t_opt=Xw;break;case cs:e.lpf.scf.t_opt=Vw;break;default:p(e!=e)}break;case xa:return u=er,u;case LPF_ECOND:return u=tr,u;default:p(e!=e)}else p(e!=e);return e.valid=1,e.upd_cnt=0,u=0,u}function ar(e,t){p(e!=null),p(e.valid),e.fhv!=null?Nr(e.fhv,t):e.lpf!=null?_a(e.lpf,t):p(e!=e)}function fr(e,t){p(e!=null),p(e.valid),e.fhv!=null?Cr(e.fhv,t):e.lpf!=null?Da(e.lpf,t):p(e!=e)}function lr(e,t,n,r,i,s,o){var u;p(e!=null),p(e.valid);if(e.fhv!=null)switch(kr(e.fhv,t,r,i,s,o)){case 0:break;case gr:return e.valid=0,u=er,u;case br:return e.valid=0,u=nr,u;case wr:return e.valid=0,u=rr,u;case Er:return e.valid=0,u=ir,u;default:p(e!=e)}else if(e.lpf!=null)switch(Ha(e.lpf,t,n,r,i,s,o)){case 0:break;case xa:return e.valid=0,u=er,u;case LPF_ELIMIT:return e.valid=0,u=rr,u;default:p(e!=e)}else p(e!=e);return e.upd_cnt++,u=0,u}function cr(e){return p(e!=null),p(e.valid),e.upd_cnt}function hr(e,t){p(e!=null),p(t!=null)}function Sr(){var e;return e={},e.m_max=e.m=0,e.valid=0,e.luf=Xl(),e.hh_max=50,e.hh_nfs=0,e.hh_ind=e.hh_ptr=e.hh_len=null,e.p0_row=e.p0_col=null,e.cc_ind=null,e.cc_val=null,e.upd_tol=1e-6,e.nnz_h=0,e}function xr(e,t,n,r){var i;t<1&&h("fhv_factorize: m = "+t+"; invalid parameter"),t>a&&h("fhv_factorize: m = "+t+"; matrix too big"),e.m=t,e.valid=0,e.hh_ind==null&&(e.hh_ind=new Array(1+e.hh_max)),e.hh_ptr==null&&(e.hh_ptr=new Array(1+e.hh_max)),e.hh_len==null&&(e.hh_len=new Array(1+e.hh_max)),e.m_max<t&&(e.m_max=t+100,e.p0_row=new Array(1+e.m_max),e.p0_col=new Array(1+e.m_max),e.cc_ind=new Array(1+e.m_max),e.cc_val=new Array(1+e.m_max));switch(tc(e.luf,t,n,r)){case 0:break;case zl:return i=gr,i;case Wl:return i=yr,i;default:p(e!=e)}return e.valid=1,e.hh_nfs=0,m(e.p0_row,1,e.luf.pp_row,1,t),m(e.p0_col,1,e.luf.pp_col,1,t),e.nnz_h=0,i=0,i}function Tr(e,t,n){var r=e.hh_nfs,i=e.hh_ind,s=e.hh_ptr,o=e.hh_len,u=e.luf.sv_ind,a=e.luf.sv_val,f,l,c,p,d,v;e.valid||h("fhv_h_solve: the factorization is not valid");if(!t)for(l=1;l<=r;l++){f=i[l],v=n[f],c=s[l],p=c+o[l]-1;for(d=c;d<=p;d++)v-=a[d]*n[u[d]];n[f]=v}else for(l=r;l>=1;l--){f=i[l],v=n[f];if(v==0)continue;c=s[l],p=c+o[l]-1;for(d=c;d<=p;d++)n[u[d]]-=a[d]*v}}function Nr(e,t){var n=e.luf.pp_row,r=e.luf.pp_col,i=e.p0_row,s=e.p0_col;e.valid||h("fhv_ftran: the factorization is not valid"),e.luf.pp_row=i,e.luf.pp_col=s,nc(e.luf,0,t),e.luf.pp_row=n,e.luf.pp_col=r,Tr(e,0,t),rc(e.luf,0,t)}function Cr(e,t){var n=e.luf.pp_row,r=e.luf.pp_col,i=e.p0_row,s=e.p0_col;e.valid||h("fhv_btran: the factorization is not valid"),rc(e.luf,1,t),Tr(e,1,t),e.luf.pp_row=i,e.luf.pp_col=s,nc(e.luf,1,t),e.luf.pp_row=n,e.luf.pp_col=r}function kr(e,t,n,r,i,s){var o=e.m,u=e.luf,a=u.vr_ptr,f=u.vr_len,l=u.vr_cap,c=u.vr_piv,d=u.vc_ptr,v=u.vc_len,g=u.vc_cap,y=u.pp_row,b=u.pp_col,w=u.qq_row,E=u.qq_col,S=u.sv_ind,x=u.sv_val,T=u.work,N=u.eps_tol,C=e.hh_ind,k=e.hh_ptr,L=e.hh_len,A=e.p0_row,O=e.p0_col,M=e.cc_ind,_=e.cc_val,D=e.upd_tol,P,H,B,j,F,I,q,R,U,z,W,X,V,$,J,K,Q,G,Y;e.valid||h("fhv_update_it: the factorization is not valid"),1<=t&&t<=o||h("fhv_update_it: j = "+t+"; column number out of range");if(e.hh_nfs==e.hh_max)return e.valid=0,Q=wr,Q;for(P=1;P<=o;P++)_[P]=0;for(R=1;R<=n;R++)P=r[i+R],1<=P&&P<=o||h("fhv_update_it: ind["+R+"] = "+P+"; row number out of range"),_[P]!=0&&h("fhv_update_it: ind["+R+"] = "+P+"; duplicate row index not allowed"),s[R]==0&&h("fhv_update_it: val["+R+"] = "+s[R]+"; zero element not allowed"),_[P]=s[R];e.luf.pp_row=A,e.luf.pp_col=O,nc(e.luf,0,_),e.luf.pp_row=y,e.luf.pp_col=b,Tr(e,0,_),n=0;for(P=1;P<=o;P++){Y=_[P];if(Y==0||Math.abs(Y)<N)continue;n++,M[n]=P,_[n]=Y}F=d[t],I=F+v[t]-1;for(q=F;q<=I;q++){P=S[q],H=a[P],B=H+f[P]-1;for(j=H;S[j]!=t;j++);p(j<=B),S[j]=S[B],x[j]=x[B],f[P]--}u.nnz_v-=v[t],v[t]=0,U=w[t],z=0;for(K=1;K<=n;K++){P=M[K];if(f[P]+1>l[P]&&$l(u,P,f[P]+10))return e.valid=0,u.new_sva=u.sv_size+u.sv_size,p(u.new_sva>u.sv_size),Q=Er,Q;j=a[P]+f[P],S[j]=t,x[j]=_[K],f[P]++,z<b[P]&&(z=b[P])}if(g[t]<n&&Jl(u,t,n))return e.valid=0,u.new_sva=u.sv_size+u.sv_size,p(u.new_sva>u.sv_size),Q=Er,Q;q=d[t],m(S,q,M,1,n),m(x,q,_,1,n),v[t]=n,u.nnz_v+=n;if(U>z)return e.valid=0,Q=gr,Q;P=y[U],t=E[U];for(R=U;R<z;R++)y[R]=y[R+1],b[y[R]]=R,E[R]=E[R+1],w[E[R]]=R;y[z]=P,b[P]=z,E[z]=t,w[t]=z;for(t=1;t<=o;t++)T[t]=0;H=a[P],B=H+f[P]-1;for(j=H;j<=B;j++){t=S[j],T[t]=x[j],F=d[t],I=F+v[t]-1;for(q=F;S[q]!=P;q++);p(q<=I),S[q]=S[I],x[q]=x[I],v[t]--}u.nnz_v-=f[P],f[P]=0,e.hh_nfs++,C[e.hh_nfs]=P,L[e.hh_nfs]=0;if(u.sv_end-u.sv_beg<z-U){Vl(u);if(u.sv_end-u.sv_beg<z-U)return e.valid=u.valid=0,u.new_sva=u.sv_size+u.sv_size,p(u.new_sva>u.sv_size),Q=Er,Q}for(R=U;R<z;R++){W=y[R],X=E[R];if(T[X]==0)continue;G=T[X]/c[W],V=a[W],$=V+f[W]-1;for(J=V;J<=$;J++)T[S[J]]-=G*x[J];u.sv_end--,S[u.sv_end]=W,x[u.sv_end]=G,L[e.hh_nfs]++}L[e.hh_nfs]==0?e.hh_nfs--:(k[e.hh_nfs]=u.sv_end,e.nnz_h+=L[e.hh_nfs]),c[P]=T[E[z]],n=0;for(R=z+1;R<=o;R++){t=E[R],Y=T[t];if(Math.abs(Y)<N)continue;if(v[t]+1>g[t]&&Jl(u,t,v[t]+10))return e.valid=0,u.new_sva=u.sv_size+u.sv_size,p(u.new_sva>u.sv_size),Q=Er,Q;q=d[t]+v[t],S[q]=P,x[q]=Y,v[t]++,n++,M[n]=t,_[n]=Y}if(l[P]<n&&$l(u,P,n))return e.valid=0,u.new_sva=u.sv_size+u.sv_size,p(u.new_sva>u.sv_size),Q=Er,Q;j=a[P],m(S,j,M,1,n),m(x,j,_,1,n),f[P]=n,u.nnz_v+=n,Y=0,P=y[z],H=a[P],B=H+f[P]-1;for(j=H;j<=B;j++)Y<Math.abs(x[j])&&(Y=Math.abs(x[j]));t=E[z],F=d[t],I=F+v[t]-1;for(q=F;q<=I;q++)Y<Math.abs(x[q])&&(Y=Math.abs(x[q]));return Math.abs(c[P])<D*Y?(e.valid=0,Q=br,Q):(Q=0,Q)}function Lr(e,t){function n(e,t,n,r,i,s){var o,u,a,f,l,c,d,v,m,g,y,b,w,E,S,x,T=0,N,C,k;e>0&&t>0||h("triang: m = "+e+"; n = "+t+"; invalid dimension"),o=new Array(1+(e>=t?e:t)),u=new Array(1+e),a=new Array(1+t),f=new Array(1+e),l=new Array(1+e),d=new Array(1+t),v=new Array(1+t),N=u;for(S=0;S<=e;S++)N[S]=0;for(g=1;g<=t;g++)S=r(n,-g,o),p(0<=S&&S<=e),d[g]=N[S],N[S]=g;c=0;for(S=0;S<=e;S++)for(g=N[S];g!=0;g=d[g])v[g]=c,c=g;b=0;for(g=c;g!=0;g=v[g])d[g]=b,b=g;for(S=0;S<=t;S++)a[S]=0;for(m=1;m<=e;m++)u[m]=S=r(n,+m,o),p(0<=S&&S<=t),f[m]=0,l[m]=a[S],l[m]!=0&&(f[l[m]]=m),a[S]=m;for(m=1;m<=e;m++)i[m]=0;for(g=1;g<=t;g++)s[g]=0;w=1,E=t;while(w<=E){m=a[1];if(m!=0){p(u[m]==1),g=0,x=r(n,+m,o),p(0<=x&&x<=t);for(;x>=1;x--)b=o[x],p(1<=b&&b<=t),s[b]==0&&(p(g==0),g=b);p(g!=0),i[m]=s[g]=w,w++,T++}else g=c,p(g!=0),s[g]=E,E--;d[g]==0?c=v[g]:v[d[g]]=v[g],v[g]!=0&&(d[v[g]]=d[g]),x=r(n,-g,o),p(0<=x&&x<=e);for(;x>=1;x--)m=o[x],p(1<=m&&m<=e),S=u[m],p(S>=1),f[m]==0?a[S]=l[m]:l[f[m]]=l[m],l[m]!=0&&(f[l[m]]=f[m]),u[m]=--S,f[m]=0,l[m]=a[S],l[m]!=0&&(f[l[m]]=m),a[S]=m}for(m=1;m<=e;m++)i[m]==0&&(i[m]=w++);for(g=1;g<=t;g++)p(s[g]!=0);C=u;for(y=1;y<=e;y++)C[y]=0;for(m=1;m<=e;m++)y=i[m],p(1<=y&&y<=e),p(C[y]==0),C[y]=m;k=a;for(b=1;b<=t;b++)k[b]=0;for(g=1;g<=t;g++)b=s[g],p(1<=b&&b<=t),p(k[b]==0),k[b]=g;for(y=1;y<=T;y++){var L=0;m=C[y],x=r(n,+m,o),p(0<=x&&x<=t);for(;x>=1;x--)g=o[x],p(1<=g&&g<=t),b=s[g],b<=T&&p(b<=y),b==y&&(p(!L),L=1);p(L)}return T}function r(e,t,n){var r=tf(e),i=nf(e),s,o,u,a=0;if(t>0){s=+t,p(1<=s&&s<=r),u=mf(e,s,n,null);for(t=1;t<=u;t++)pf(e,n[t],function(e){e!=Ro&&(n[++a]=r+n[t])});ff(e,s,function(e){e!=Ro&&(n[++a]=s)})}else{o=-t,p(1<=o&&o<=r+i);function f(t){t!=Ro&&(o<=r?n[++a]=o:a=gf(e,o-r,n,null))}o<=r?ff(e,o,f):pf(e,o-r,f)}return a}function i(e){var t=tf(e),i=nf(e),s,o,u,a,f,l,c,h,v,m=new Array(1+t+i);d("Constructing initial basis...");if(t==0||i==0){Ot(e);return}l=new Array(1+t),c=new Array(1+t+i),f=n(t,t+i,e,r,l,c),Tl(e,Du)>=3&&d("Size of triangular part = "+f+""),h=new Array(1+t),v=new Array(1+t+i);for(s=1;s<=t;s++)h[l[s]]=s;for(o=1;o<=t+i;o++)v[c[o]]=o;for(a=1;a<=t+i;a++)m[a]=-1;for(u=1;u<=f;u++)o=v[u],m[o]=Yo;for(u=f+1;u<=t;u++)s=h[u],p(1<=s&&s<=t),p(c[s]>f),m[s]=Yo;for(a=1;a<=t+i;a++)if(m[a]!=Yo){function g(e,t,n){switch(e){case jo:m[a]=tu;break;case Fo:m[a]=Zo;break;case Io:m[a]=eu;break;case qo:m[a]=Math.abs(t)<=Math.abs(n)?Zo:eu;break;case Ro:m[a]=nu;break;default:p(e!=e)}}a<=t?ff(e,a,g):pf(e,a-t,g)}for(a=1;a<=t+i;a++)a<=t?Tf(e,a,m[a]):Nf(e,a-t,m[a])}t!=0&&h("glp_adv_basis: flags = "+t+"; invalid flags"),e.m==0||e.n==0?Ot(e):i(e)}function Ar(e){function _(e,t){return e.q<t.q?-1:e.q>t.q?1:0}function D(e,t,n,r){var i,s=yt(e,t,n,r),o=0;for(i=1;i<=s;i++)o<Math.abs(r[i])&&(o=Math.abs(r[i]));o==0&&(o=1);for(i=1;i<=s;i++)r[i]/=o;return s}var t,r,i,s,o,u,a,f,l,c,h,v,m,g,y,b,w,S,x,T,N,C,k,L,A,O,M;d("Constructing initial basis..."),o=st(e),u=ot(e),t=new Array(1+u),x=new Array(1+o),T=new Array(1+o),O=new Array(1+o),N=new Array(1+o),M=new Array(1+o);for(a=1;a<=o;a++)ft(e,a)!=Ui?Lt(e,a,Ji):Math.abs(lt(e,a))<=Math.abs(ct(e,a))?Lt(e,a,Xi):Lt(e,a,Vi);for(f=1;f<=u;f++)ht(e,f)!=Ui?At(e,f,Ji):Math.abs(pt(e,f))<=Math.abs(dt(e,f))?At(e,f,Xi):At(e,f,Vi);g=0,r=0;for(f=1;f<=u;f++)w=ht(e,f),w==Ii&&(g++,t[r+g].j=f,t[r+g].q=0);y=0,i=r+g;for(f=1;f<=u;f++)w=ht(e,f),w==qi?(y++,t[i+y].j=f,t[i+y].q=+pt(e,f)):w==Ri&&(y++,t[i+y].j=f,t[i+y].q=-dt(e,f));b=0,s=i+y;for(f=1;f<=u;f++)w=ht(e,f),w==Ui&&(b++,t[s+b].j=f,t[s+b].q=pt(e,f)-dt(e,f));k=0;for(f=1;f<=u;f++)A=Math.abs(vt(e,f)),k<A&&(k=A);L=k==0?1:1e3*k;switch(it(e)){case Pi:A=1;break;case Hi:A=-1;break;default:p(e!=e)}for(c=1;c<=g+y+b;c++)f=t[c].j,t[c].q+=A*vt(e,f)/L;E(t,r+1+g,_);for(c=1;c<g;c++)p(t[r+c].q<=t[r+c+1].q);E(t,i+1+y,_);for(c=1;c<y;c++)p(t[i+c].q<=t[i+c+1].q);E(t,s+1+b,_);for(c=1;c<b;c++)p(t[s+c].q<=t[s+c+1].q);for(a=1;a<=o;a++)w=ft(e,a),w!=zi?(Lt(e,a,Wi),x[a]=1,T[a]=1):(x[a]=0,T[a]=0),O[a]=+n;for(c=1;c<=g+y+b;c++){l=t[c].j,S=D(e,l,N,M),C=0,v=0;for(m=1;m<=S;m++)h=N[m],T[h]==0&&C<Math.abs(M[m])&&(C=Math.abs(M[m]),v=h);if(C>=.99){At(e,l,Wi),x[v]=1,O[v]=C;for(m=1;m<=S;m++)h=N[m],M[m]!=0&&T[h]++;continue}for(m=1;m<=S;m++){h=N[m];if(Math.abs(M[m])>.01*O[h])break}if(m<=S)continue;C=0,v=0;for(m=1;m<=S;m++)h=N[m],x[h]==0&&C<Math.abs(M[m])&&(C=Math.abs(M[m]),v=h);if(C==0)continue;At(e,l,Wi),x[v]=1,O[v]=C;for(m=1;m<=S;m++)h=N[m],M[m]!=0&&T[h]++}for(a=1;a<=o;a++)x[a]==0&&Lt(e,a,Wi)}function Or(e){e.m==0||e.n==0?Ot(e):Ar(e)}function Mr(e,t){var r=_r(e),i={};return e.slot[r].node=i,i.p=r,i.up=t,i.level=t==null?0:t.level+1,i.count=0,i.b_ptr=null,i.s_ptr=null,i.r_ptr=null,i.solved=0,i.lp_obj=t==null?e.mip.dir==Pi?-n:+n:t.lp_obj,i.bound=t==null?e.mip.dir==Pi?-n:+n:t.bound,i.br_var=0,i.br_val=0,i.ii_cnt=0,i.ii_sum=0,i.changed=0,e.parm.cb_size==0?i.data=null:i.data={},i.temp=null,i.prev=e.tail,i.next=null,e.head==null?e.head=i:e.tail.next=i,e.tail=i,e.a_cnt++,e.n_cnt++,e.t_cnt++,t==null?p(r==1):t.count++,i}function _r(e){var t;if(e.avail==0){var n=e.nslots,r=e.slot;n==0?e.nslots=20:(e.nslots=n+n,p(e.nslots>n)),e.slot=new Array(1+e.nslots),y(e.slot,0,1+e.nslots),r!=null&&m(e.slot,1,r,1,n);for(t=e.nslots;t>n;t--)e.slot[t].node=null,e.slot[t].next=e.avail,e.avail=t}return t=e.avail,e.avail=e.slot[t].next,p(e.slot[t].node==null),e.slot[t].next=0,t}function Dr(e,t){var n=e.m,r=e.n,i,s,o;p(e.tree==null),e.tree=i={},i.n=r,i.orig_m=n,i.orig_type=new Array(1+n+r),i.orig_lb=new Array(1+n+r),i.orig_ub=new Array(1+n+r),i.orig_stat=new Array(1+n+r),i.orig_prim=new Array(1+n+r),i.orig_dual=new Array(1+n+r);for(s=1;s<=n;s++){var u=e.row[s];i.orig_type[s]=u.type,i.orig_lb[s]=u.lb,i.orig_ub[s]=u.ub,i.orig_stat[s]=u.stat,i.orig_prim[s]=u.prim,i.orig_dual[s]=u.dual}for(o=1;o<=r;o++){var a=e.col[o];i.orig_type[n+o]=a.type,i.orig_lb[n+o]=a.lb,i.orig_ub[n+o]=a.ub,i.orig_stat[n+o]=a.stat,i.orig_prim[n+o]=a.prim,i.orig_dual[n+o]=a.dual}return i.orig_obj=e.obj_val,i.nslots=0,i.avail=0,i.slot=null,i.head=i.tail=null,i.a_cnt=i.n_cnt=i.t_cnt=0,i.root_m=0,i.root_type=null,i.root_lb=i.root_ub=null,i.root_stat=null,i.curr=null,i.mip=e,i.non_int=new Array(1+r),g(i.non_int,1,0,r),i.pred_m=i.pred_max=0,i.pred_type=null,i.pred_lb=i.pred_ub=null,i.pred_stat=null,i.local=Xr(i),i.mir_gen=null,i.clq_gen=null,i.pcost=null,i.iwrk=new Array(1+r),i.dwrk=new Array(1+r),i.parm=t,i.tm_beg=b(),i.tm_lag=0,i.sol_cnt=0,i.reason=0,i.reopt=0,i.reinv=0,i.br_var=0,i.br_sel=0,i.child=0,i.next_p=0,i.stop=0,Mr(i,null),i}function Pr(e,t){var n=e.mip,r,i,s,o,u,a;p(1<=t&&t<=e.nslots),r=e.slot[t].node,p(r!=null),p(r.count==0),p(e.curr==null),e.curr=r,i=e.slot[1].node,p(i!=null);if(r==i)return;p(n.m==e.root_m),r.temp=null;for(;r!=null;r=r.up)r.up==null?p(r==i):r.up.temp=r;for(r=i;r!=null;r=r.temp){var f=n.m,l=n.n;if(r.temp==null){var c,h;e.pred_m=f;if(e.pred_max<f+l){var d=f+l+100;e.pred_max=d,e.pred_type=new Array(1+d),e.pred_lb=new Array(1+d),e.pred_ub=new Array(1+d),e.pred_stat=new Array(1+d)}for(c=1;c<=f;c++){var v=n.row[c];e.pred_type[c]=v.type,e.pred_lb[c]=v.lb,e.pred_ub[c]=v.ub,e.pred_stat[c]=v.stat}for(h=1;h<=l;h++){var m=n.col[h];e.pred_type[n.m+h]=m.type,e.pred_lb[n.m+h]=m.lb,e.pred_ub[n.m+h]=m.ub,e.pred_stat[n.m+h]=m.stat}}for(s=r.b_ptr;s!=null;s=s.next)s.k<=f?z(n,s.k,s.type,s.lb,s.ub):W(n,s.k-f,s.type,s.lb,s.ub);for(u=r.s_ptr;u!=null;u=u.next)u.k<=f?Lt(n,u.k,u.stat):At(n,u.k-f,u.stat);if(r.r_ptr!=null){var g,y,b;y=new Array(1+l),b=new Array(1+l);for(o=r.r_ptr;o!=null;o=o.next){c=I(n,1),R(n,c,o.name),p(n.row[c].level==0),n.row[c].level=r.level,n.row[c].origin=o.origin,n.row[c].klass=o.klass,z(n,c,o.type,o.lb,o.ub),g=0;for(a=o.ptr;a!=null;a=a.next)g++,y[g]=a.j,b[g]=a.val;V(n,c,g,y,b),xt(n,c,o.rii),Lt(n,c,o.stat)}}}r=e.curr;while(r.b_ptr!=null)s=r.b_ptr,r.b_ptr=s.next;while(r.s_ptr!=null)u=r.s_ptr,r.s_ptr=u.next;while(r.r_ptr!=null){o=r.r_ptr,r.r_ptr=o.next,p(o.name==null);while(o.ptr!=null)a=o.ptr,o.ptr=a.next}}function Hr(e){var t=e.mip,n=t.m,r=t.n,i=e.curr;p(i!=null);var s,o,u,a;if(i.up==null){p(i.p==1),p(e.root_m==0),p(e.root_type==null),p(e.root_lb==null),p(e.root_ub==null),p(e.root_stat==null),e.root_m=n,e.root_type=new Array(1+n+r),e.root_lb=new Array(1+n+r),e.root_ub=new Array(1+n+r),e.root_stat=new Array(1+n+r);for(s=1;s<=n+r;s++)s<=n?(u=t.row[s],e.root_type[s]=u.type,e.root_lb[s]=u.lb,e.root_ub[s]=u.ub,e.root_stat[s]=u.stat):(a=t.col[s-n],e.root_type[s]=a.type,e.root_lb[s]=a.lb,e.root_ub[s]=a.ub,e.root_stat[s]=a.stat)}else{var f=e.root_m,l=e.pred_m,c;p(l<=n),p(i.b_ptr==null),p(i.s_ptr==null);for(s=1;s<=l+r;s++){var h,d,v,m,g,y,b,w;h=e.pred_type[s],g=e.pred_lb[s],y=e.pred_ub[s],d=e.pred_stat[s],s<=l?(u=t.row[s],v=u.type,b=u.lb,w=u.ub,m=u.stat):(a=t.col[s-l],v=a.type,b=a.lb,w=a.ub,m=a.stat);if(h!=v||g!=b||y!=w){var E={};E.k=s,E.type=v,E.lb=b,E.ub=w,E.next=i.b_ptr,i.b_ptr=E}if(d!=m){var S={};S.k=s,S.stat=m,S.next=i.s_ptr,i.s_ptr=S}}p(i.r_ptr==null);if(l<n){var x,T,N;T=new Array(1+r),N=new Array(1+r);for(o=n;o>l;o--){u=t.row[o];var C={},k=ut(t,o);k==null?C.name=null:C.name=k,C.type=u.type,C.lb=u.lb,C.ub=u.ub,C.ptr=null,x=gt(t,o,T,N);for(s=1;s<=x;s++){var L={};L.j=T[s],L.val=N[s],L.next=C.ptr,C.ptr=L}C.rii=u.rii,C.stat=u.stat,C.next=i.r_ptr,i.r_ptr=C}}if(n!=f){var A=n-f;p(A>0);var O=new Array(1+A);for(o=1;o<=A;o++)O[o]=f+o;G(t,A,O)}n=t.m,p(n==f);for(o=1;o<=n;o++)z(t,o,e.root_type[o],e.root_lb[o],e.root_ub[o]),Lt(t,o,e.root_stat[o]);for(c=1;c<=r;c++)W(t,c,e.root_type[n+c],e.root_lb[n+c],e.root_ub[n+c]),At(t,c,e.root_stat[n+c])}e.curr=null}function Br(e,t,n,r){var i,s;p(1<=t&&t<=e.nslots),i=e.slot[t].node,p(i!=null),p(i.count==0),p(e.curr!=i),i.prev==null?e.head=i.next:i.prev.next=i.next,i.next==null?e.tail=i.prev:i.next.prev=i.prev,i.prev=i.next=null,e.a_cnt--,p(n>0);for(s=1;s<=n;s++)r[s]=Mr(e,i).p}function jr(e,t){var n,r;p(1<=t&&t<=e.nslots),n=e.slot[t].node,p(n!=null),p(n.count==0),p(e.curr!=n),n.prev==null?e.head=n.next:n.prev.next=n.next,n.next==null?e.tail=n.prev:n.next.prev=n.prev,n.prev=n.next=null,e.a_cnt--;for(;;){var i;while(n.b_ptr!=null)i=n.b_ptr,n.b_ptr=i.next;var s;while(n.s_ptr!=null)s=n.s_ptr,n.s_ptr=s.next;while(n.r_ptr!=null){var o;o=n.r_ptr,o.name=null;while(o.ptr!=null){var u;u=o.ptr,o.ptr=u.next}n.r_ptr=o.next}e.parm.cb_size==0&&p(n.data==null),t=n.p,p(e.slot[t].node==n),e.slot[t].node=null,e.slot[t].next=e.avail,e.avail=t,r=n.up,e.n_cnt--,n=r;if(n!=null){p(n.count>0),n.count--;if(n.count==0)continue}break}}function Fr(e){var t=e.mip,n,r,i=t.m,s=t.n;p(t.tree==e);if(i!=e.orig_m){var o,u;o=i-e.orig_m,p(o>0),u=new Array(1+o);for(n=1;n<=o;n++)u[n]=e.orig_m+n;G(t,o,u)}i=e.orig_m,p(i==e.orig_m),p(s==e.n);for(n=1;n<=i;n++)z(t,n,e.orig_type[n],e.orig_lb[n],e.orig_ub[n]),Lt(t,n,e.orig_stat[n]),t.row[n].prim=e.orig_prim[n],t.row[n].dual=e.orig_dual[n];for(r=1;r<=s;r++)W(t,r,e.orig_type[i+r],e.orig_lb[i+r],e.orig_ub[i+r]),At(t,r,e.orig_stat[i+r]),t.col[r].prim=e.orig_prim[i+r],t.col[r].dual=e.orig_dual[i+r];t.pbs_stat=t.dbs_stat=is,t.obj_val=e.orig_obj,p(e.local!=null),Qr(e.local),p(e.mir_gen==null),p(e.clq_gen==null),t.tree=null}function Ir(e,t,r){var i=e.mip,s=i.m,o=i.n,u,a,f,l,c,h,d,v,m,g,y=e.iwrk,b=e.dwrk,w,E;p(Dt(i)==us),p(tn(i)),p(1<=t&&t<=o),d=i.col[t].prim,u=$f(i,s+t,y,b);for(a=-1;a<=1;a+=2){f=Yf(i,u,y,b,a,1e-9);if(f==0){i.dir==Pi?a<0?w=+n:E=+n:i.dir==Hi?a<0?w=-n:E=-n:p(i!=i);continue}p(1<=f&&f<=s+o);for(l=1;l<=u;l++)if(y[l]==f)break;p(1<=l&&l<=u),h=b[l],f<=s?(c=i.row[f].stat,v=i.row[f].dual):(c=i.col[f-s].stat,v=i.col[f-s].dual),p(c==Xi||c==Vi||c==$i);if(i.dir==Pi){if(c==Xi&&v<0||c==Vi&&v>0||c==$i)v=0}else if(i.dir==Hi){if(c==Xi&&v>0||c==Vi&&v<0||c==$i)v=0}else p(i!=i);m=(a<0?Math.floor(d):Math.ceil(d))-d,m/=h,g=v*m,i.dir==Pi?p(g>=0):i.dir==Hi?p(g<=0):p(i!=i),a<0?w=i.obj_val+g:E=i.obj_val+g}r(w,E)}function qr(e,t){var r=e.mip,i=r.n,o,u,a,f=e.iwrk,l,c;a=0,l=r.c0,o=0;for(u=1;u<=i;u++){var h=r.col[u];if(h.coef==0)continue;if(h.type==zi)l+=h.coef*h.prim;else{if(h.kind!=ji)return t;if(h.coef!=Math.floor(h.coef))return t;Math.abs(h.coef)<=s?f[++a]=Math.abs(h.coef)|0:o=1}}if(o==0){if(a==0)return t;o=ga(a,f)}return p(o>0),r.dir==Pi?t!=+n&&(c=(t-l)/o,c>=Math.floor(c)+.001&&(c=Math.ceil(c),t=o*c+l)):r.dir==Hi?t!=-n&&(c=(t-l)/o,c<=Math.ceil(c)-.001&&(c=Math.floor(c),t=o*c+l)):p(r!=r),t}function Rr(e,t){var r=e.mip,i=1,s;if(r.mip_stat==is){s=e.parm.tol_obj*(1+Math.abs(r.mip_obj));switch(r.dir){case Pi:t>=r.mip_obj-s&&(i=0);break;case Hi:t<=r.mip_obj+s&&(i=0);break;default:p(r!=r)}}else switch(r.dir){case Pi:t==+n&&(i=0);break;case Hi:t==-n&&(i=0);break;default:p(r!=r)}return i}function Ur(e){var t,n=null;switch(e.mip.dir){case Pi:for(t=e.head;t!=null;t=t.next)if(n==null||n.bound>t.bound)n=t;break;case Hi:for(t=e.head;t!=null;t=t.next)if(n==null||n.bound<t.bound)n=t;break;default:p(e!=e)}return n==null?0:n.p}function zr(e){var t=e.mip,r,i,s,u;return t.mip_stat==is?(i=t.mip_obj,r=Ur(e),r==0?u=0:(s=e.slot[r].node.bound,u=Math.abs(i-s)/(Math.abs(i)+o))):u=n,u}function Wr(e){var t=e.mip,n={},r;p(e.curr!=null),_t(n);switch(e.parm.msg_lev){case hs:n.msg_lev=hs;break;case ps:n.msg_lev=ps;break;case ds:case vs:n.msg_lev=ds;break;case ms:n.msg_lev=vs;break;default:p(e!=e)}n.meth=ys,e.parm.msg_lev<ms?n.out_dly=e.parm.out_dly:n.out_dly=0;if(t.mip_stat==is)switch(e.mip.dir){case Pi:n.obj_ul=t.mip_obj;break;case Hi:n.obj_ll=t.mip_obj;break;default:p(t!=t)}return r=Mt(t,n),e.curr.solved++,r}function Xr(e){p(e==e);var t={};return t.size=0,t.head=t.tail=null,t.ord=0,t.curr=null,t}function Vr(e,t,n,r,i,s,o,u,a,f){var l,c,d;p(t!=null),l={},n==null||n[0]=="\0"?l.name=null:l.name=n,0<=r&&r<=255||h("glp_ios_add_row: klass = "+r+"; invalid cut class"),l.klass=r,i!=0&&h("glp_ios_add_row: flags = "+i+"; invalid cut flags"),l.ptr=null,0<=s&&s<=e.n||h("glp_ios_add_row: len = "+s+"; invalid cut length");for(d=1;d<=s;d++)c={},1<=o[d]&&o[d]<=e.n||h("glp_ios_add_row: ind["+d+"] = "+o[d]+"; column index out of range"),c.j=o[d],c.val=u[d],c.next=l.ptr,l.ptr=c;return a!=qi&&a!=Ri&&a!=zi&&h("glp_ios_add_row: type = "+a+"; invalid cut type"),l.type=a,l.rhs=f,l.prev=t.tail,l.next=null,l.prev==null?t.head=l:l.prev.next=l,t.tail=l,t.size++,t.size}function $r(e,t){p(e!=null),p(1<=t&&t<=e.size),e.ord==0&&(p(e.curr==null),e.ord=1,e.curr=e.head),p(e.curr!=null);if(t<e.ord)if(t<e.ord-t){e.ord=1,e.curr=e.head;while(e.ord!=t)e.ord++,p(e.curr!=null),e.curr=e.curr.next}else while(e.ord!=t)e.ord--,p(e.curr!=null),e.curr=e.curr.prev;else if(t>e.ord)if(t-e.ord<e.size-t)while(e.ord!=t)e.ord++,p(e.curr!=null),e.curr=e.curr.next;else{e.ord=e.size,e.curr=e.tail;while(e.ord!=t)e.ord--,p(e.curr!=null),e.curr=e.curr.prev}return p(e.ord==t),p(e.curr!=null),e.curr}function Jr(e,t){var n,r;p(e!=null),1<=t&&t<=e.size||h("glp_ios_del_row: i = "+t+"; cut number out of range"),n=$r(e,t),p(e.curr==n),n.next!=null?e.curr=n.next:n.prev!=null?(e.ord--,e.curr=n.prev):(e.ord=0,e.curr=null),n.prev==null?(p(e.head==n),e.head=n.next):(p(n.prev.next==n),n.prev.next=n.next),n.next==null?(p(e.tail==n),e.tail=n.prev):(p(n.next.prev==n),n.next.prev=n.prev);while(n.ptr!=null)r=n.ptr,n.ptr=r.next;e.size--}function Kr(e){p(e!=null);while(e.head!=null){var t=e.head;e.head=t.next;while(t.ptr!=null){var n=t.ptr;t.ptr=n.next}}e.size=0,e.head=e.tail=null,e.ord=0,e.curr=null}function Qr(e){p(e!=null),Kr(e)}function Gr(e,t){function r(e,t,r,i,s){var o,u,a,f,l;p(e>=0),f=0,u=0;for(o=1;o<=e;o++)if(t[o]>0)if(r[o]==-n){if(u!=0){f=-n,u=0;break}u=o}else f+=t[o]*r[o];else if(t[o]<0)if(i[o]==+n){if(u!=0){f=-n,u=0;break}u=o}else f+=t[o]*i[o];else p(t!=t);s.f_min=f,s.j_min=u,l=0,a=0;for(o=1;o<=e;o++)if(t[o]>0)if(i[o]==+n){if(a!=0){l=+n,a=0;break}a=o}else l+=t[o]*i[o];else if(t[o]<0)if(r[o]==-n){if(a!=0){l=+n,a=0;break}a=o}else l+=t[o]*r[o];else p(t!=t);s.f_max=l,s.j_max=a}function i(e,t){t(e.j_min==0?e.f_min:-n,e.j_max==0?e.f_max:+n)}function s(e,t,r,i,s,o,u,a,f){var l,c,h,d;p(t>=0),p(1<=a&&a<=t),i==-n||e.f_max==+n?l=-n:e.j_max==0?r[a]>0?(p(u[a]!=+n),l=i-(e.f_max-r[a]*u[a])):r[a]<0?(p(o[a]!=-n),l=i-(e.f_max-r[a]*o[a])):p(r!=r):e.j_max==a?l=i-e.f_max:l=-n,s==+n||e.f_min==-n?c=+n:e.j_min==0?r[a]>0?(p(o[a]!=-n),c=s-(e.f_min-r[a]*o[a])):r[a]<0?(p(u[a]!=+n),c=s-(e.f_min-r[a]*u[a])):p(r!=r):e.j_min==a?c=s-e.f_min:c=+n,Math.abs(r[a])<1e-6?(h=-n,d=+n):r[a]>0?(h=l==-n?-n:l/r[a],d=c==+n?+n:c/r[a]):r[a]<0?(h=c==+n?-n:c/r[a],d=l==-n?+n:l/r[a]):p(r!=r),f(h,d)}function o(e,t,r,s,o){var u,a=0,f=t[r],l=s[o],c=null,h=null;i(e,function(e,t){c=e,h=t});if(f!=-n){u=.001*(1+Math.abs(f));if(h<f-u)return a=1,a}if(l!=+n){u=.001*(1+Math.abs(l));if(c>l+u)return a=1,a}return f!=-n&&(u=1e-12*(1+Math.abs(f)),c>f-u&&(t[r]=-n)),l!=+n&&(u=1e-12*(1+Math.abs(l)),h<l+u&&(s[o]=+n)),a}function u(e,t,r,i,o,u,a,f,l,c){var h,d=0,v,m,g=null,y=null;p(t>=0),p(1<=l&&l<=t),v=u[l],m=a[l],s(e,t,r,i,o,u,a,l,function(e,t){g=e,y=t}),f&&(g!=-n&&(g=g-Math.floor(g)<.001?Math.floor(g):Math.ceil(g)),y!=+n&&(y=Math.ceil(y)-y<.001?Math.ceil(y):Math.floor(y)));if(v!=-n){h=.001*(1+Math.abs(v));if(y<v-h)return d=1,d}if(m!=+n){h=.001*(1+Math.abs(m));if(g>m+h)return d=1,d}g!=-n&&(h=.001*(1+Math.abs(g)),v<g-h&&(v=g)),y!=+n&&(h=.001*(1+Math.abs(y)),m>y+h&&(m=y));if(v!=-n&&m!=+n){var b=Math.abs(v),w=Math.abs(m);h=1e-10*(1+(b<=w?b:w)),v>m-h&&(v==u[l]?m=v:m==a[l]?v=m:b<=w?m=v:v=m)}return c(v,m),d}function a(e,t,r,i,s){var o,u=0;return t<i&&(e||t==-n?u++:(r==+n?o=1+Math.abs(t):o=1+(r-t),i-t>=.25*o&&u++)),r>s&&(e||r==+n?u++:(t==-n?o=1+Math.abs(r):o=1+(r-t),r-s>=.25*o&&u++)),u}function f(e,t,i,s,f,l,c,h){var d=e.m,v=e.n,m={},y,b,w,E,S,x=0,T,N,C,k,L,A,O,M,_;p(0<=l&&l<=d+1),p(h>0),T=new Array(1+v),N=new Array(1+d+1),C=new Array(1+d+1),g(C,0,0,d+1),k=new Array(1+d+1),g(k,0,0,d+1),L=new Array(1+v),A=new Array(1+v),O=new Array(1+v),S=0;for(w=1;w<=l;w++)y=c[w],p(0<=y&&y<=d),p(!C[y]),N[++S]=y,C[y]=1;p(S==l);while(S>0){y=N[S--],C[y]=0,k[y]++;if(t[y]==-n&&i[y]==+n)continue;E=0;if(y==0)for(b=1;b<=v;b++)_=e.col[b],_.coef!=0&&(E++,T[E]=b,L[E]=_.coef);else{var D=e.row[y];for(M=D.ptr;M!=null;M=M.r_next)E++,T[E]=M.col.j,L[E]=M.val}for(w=1;w<=E;w++)b=T[w],A[w]=s[b],O[w]=f[b];r(E,L,A,O,m);if(o(m,t,y,i,y))return x=1,x;if(t[y]==-n&&i[y]==+n)continue;for(w=1;w<=E;w++){var P,H,B=null,j=null;b=T[w],_=e.col[b],P=_.kind!=Bi;if(u(m,E,L,t[y],i[y],A,O,P,w,function(e,t){B=e,j=t}))return x=1,x;H=a(P,s[b],f[b],B,j),s[b]=B,f[b]=j;if(H>0)for(M=_.ptr;M!=null;M=M.c_next){var F=M.row.i;if(k[F]>=h)continue;if(t[F]==-n&&i[F]==+n)continue;C[F]==0&&(p(S<=d),N[++S]=F,C[F]=1)}}}return x}var l=e.mip,c=l.m,h=l.n,d,v,m,y,b=0,w,E,S,x;p(e.curr!=null),w=new Array(1+c),E=new Array(1+c);switch(l.mip_stat){case rs:w[0]=-n,E[0]=+n;break;case is:switch(l.dir){case Pi:w[0]=-n,E[0]=l.mip_obj-l.c0;break;case Hi:w[0]=l.mip_obj-l.c0,E[0]=+n;break;default:p(l!=l)}break;default:p(l!=l)}for(d=1;d<=c;d++)w[d]=lt(l,d),E[d]=ct(l,d);S=new Array(1+h),x=new Array(1+h);for(v=1;v<=h;v++)S[v]=pt(l,v),x[v]=dt(l,v);m=c+1,y=new Array(1+m);for(d=1;d<=m;d++)y[d]=d-1;if(f(l,w,E,S,x,m,y,t))return b=1,b;for(d=1;d<=c;d++)jt(l,d)==Wi&&(w[d]==-n&&E[d]==+n?z(l,d,Ii,0,0):E[d]==+n?z(l,d,qi,w[d],0):w[d]==-n&&z(l,d,Ri,0,E[d]));for(v=1;v<=h;v++){var T;S[v]==-n&&x[v]==+n?T=Ii:x[v]==+n?T=qi:S[v]==-n?T=Ri:S[v]!=x[v]?T=Ui:T=zi,W(l,v,T,S[v],x[v])}return b}function Yr(e){function t(e,t){var r,i,s,o,u,a;e.mip.mip_stat==is?s=String(e.mip.mip_obj):s="not found yet",r=Ur(e),r==0?o="tree is empty":(i=e.slot[r].node.bound,i==-n?o="-inf":i==+n?o="+inf":o=i),e.mip.dir==Pi?u=">=":e.mip.dir==Hi?u="<=":p(e!=e),i=zr(e),i==0?a="  0.0%":i<.001?a=" < 0.1%":i<=9.999?a="  "+Number(100*i).toFixed(1)+"%":a="",d("+"+e.mip.it_cnt+": "+(t?">>>>>":"mip =")+" "+s+" "+u+" "+o+" "+a+" ("+e.a_cnt+"; "+(e.t_cnt-e.n_cnt)+")"),e.tm_lag=b()}function r(e,t){return p(1<=t&&t<=e.nslots),p(e.slot[t].node!=null),Rr(e,e.slot[t].node.bound)}function i(e){var t=e.mip,n,r,i=0,s,o,u,a,f,l=0;for(n=1;n<=t.n;n++){var c=t.col[n];e.non_int[n]=0;if(c.kind!=ji)continue;if(c.stat!=Wi)continue;r=c.type,s=c.lb,o=c.ub,u=c.prim;if(r==qi||r==Ui||r==zi){a=s-e.parm.tol_int,f=s+e.parm.tol_int;if(a<=u&&u<=f)continue;if(u<s)continue}if(r==Ri||r==Ui||r==zi){a=o-e.parm.tol_int,f=o+e.parm.tol_int;if(a<=u&&u<=f)continue;if(u>o)continue}a=Math.floor(u+.5)-e.parm.tol_int,f=Math.floor(u+.5)+e.parm.tol_int;if(a<=u&&u<=f)continue;e.non_int[n]=1,i++,a=u-Math.floor(u),f=Math.ceil(u)-u,p(a>0&&f>0),l+=a<=f?a:f}p(e.curr!=null),e.curr.ii_cnt=i,e.curr.ii_sum=l,e.parm.msg_lev>=ms&&(i==0?d("There are no fractional columns"):i==1?d("There is one fractional column, integer infeasibility is "+l+""):d("There are "+i+" fractional columns, integer infeasibility is "+l+""))}function o(e){var t=e.mip,n,r;t.mip_stat=is,t.mip_obj=t.obj_val;for(n=1;n<=t.m;n++){var i=t.row[n];i.mipx=i.prim}for(r=1;r<=t.n;r++){var s=t.col[r];s.kind==Bi?s.mipx=s.prim:s.kind==ji?s.mipx=Math.floor(s.prim+.5):p(s!=s)}e.sol_cnt++}function u(e,t,n){var r=e.mip,i,s=r.m,o=r.n,u,a,f,l,c,h,v,m=new Array(3),g,y,b,w,E,S=null,x=null,T,N;p(1<=t&&t<=o),u=r.col[t].type,g=r.col[t].lb,y=r.col[t].ub,b=r.col[t].prim,w=Math.floor(b),E=Math.ceil(b);switch(u){case Ii:a=Ri,f=qi;break;case qi:p(g<=w),a=g==w?zi:Ui,p(g+1<=E),f=qi;break;case Ri:p(w<=y-1),a=Ri,p(E<=y),f=E==y?zi:Ui;break;case Ui:p(g<=w&&w<=y-1),a=g==w?zi:Ui,p(g+1<=E&&E<=y),f=E==y?zi:Ui;break;default:p(u!=u)}return Ir(e,t,function(e,t){S=e,x=t}),T=qr(e,S),N=qr(e,x),l=!Rr(e,T),c=!Rr(e,N),l&&c?(e.parm.msg_lev>=ms&&d("Both down- and up-branches are hopeless"),v=2,v):c?(e.parm.msg_lev>=ms&&d("Up-branch is hopeless"),W(r,t,a,g,w),e.curr.lp_obj=S,r.dir==Pi?e.curr.bound<T&&(e.curr.bound=T):r.dir==Hi?e.curr.bound>T&&(e.curr.bound=T):p(r!=r),v=1,v):l?(e.parm.msg_lev>=ms&&d("Down-branch is hopeless"),W(r,t,f,E,y),e.curr.lp_obj=x,r.dir==Pi?e.curr.bound<N&&(e.curr.bound=N):r.dir==Hi?e.curr.bound>N&&(e.curr.bound=N):p(r!=r),v=1,v):(e.parm.msg_lev>=ms&&d("Branching on column "+t+", primal value is "+b+""),p(e.curr!=null),h=e.curr.p,e.curr.br_var=t,e.curr.br_val=b,Hr(e),Br(e,h,2,m),e.parm.msg_lev>=ms&&d("Node "+m[1]+" begins down branch, node "+m[2]+" begins up branch "),i=e.slot[m[1]].node,p(i!=null),p(i.up!=null),p(i.b_ptr==null),i.b_ptr={},i.b_ptr.k=s+t,i.b_ptr.type=a,i.b_ptr.lb=g,i.b_ptr.ub=w,i.b_ptr.next=null,i.lp_obj=S,r.dir==Pi?i.bound<T&&(i.bound=T):r.dir==Hi?i.bound>T&&(i.bound=T):p(r!=r),i=e.slot[m[2]].node,p(i!=null),p(i.up!=null),p(i.b_ptr==null),i.b_ptr={},i.b_ptr.k=s+t,i.b_ptr.type=f,i.b_ptr.lb=E,i.b_ptr.ub=y,i.b_ptr.next=null,i.lp_obj=x,r.dir==Pi?i.bound<N&&(i.bound=N):r.dir==Hi?i.bound>N&&(i.bound=N):p(r!=r),p(e.child==0),n==no?e.child=0:n==ro?e.child=m[1]:n==io?e.child=m[2]:p(n!=n),v=0,v)}function a(e){var t=e.mip,n,r,i=0,s,o,u,a;p(e.mip.mip_stat==is),p(t.pbs_stat==is&&t.dbs_stat==is),s=t.obj_val;for(n=1;n<=t.n;n++){var f=t.col[n];if(f.kind!=ji)continue;o=f.lb,u=f.ub,r=f.stat,a=f.dual;switch(t.dir){case Pi:r==Xi?(a<0&&(a=0),s+a>=t.mip_obj&&(W(t,n,zi,o,o),i++)):r==Vi&&(a>0&&(a=0),s-a>=t.mip_obj&&(W(t,n,zi,u,u),i++));break;case Hi:r==Xi?(a>0&&(a=0),s+a<=t.mip_obj&&(W(t,n,zi,o,o),i++)):r==Vi&&(a<0&&(a=0),s-a<=t.mip_obj&&(W(t,n,zi,u,u),i++));break;default:p(e!=e)}}e.parm.msg_lev>=ms&&i!=0&&(i==1?d("One column has been fixed by reduced cost"):d(i+" columns have been fixed by reduced costs")),p(t.pbs_stat==is&&t.dbs_stat==is)}function f(e){var t,n=0,r=null;p(e.curr!=null);for(t=e.orig_m+1;t<=e.mip.m;t++)e.mip.row[t].origin==Us&&e.mip.row[t].level==e.curr.level&&e.mip.row[t].stat==Wi&&(r==null&&(r=new Array(1+e.mip.m)),r[++n]=t);n>0&&(G(e.mip,n,r),p(nn(e.mip)==0))}function l(e){var t=e.mip,n,r=0,i=0,s=0,o=0,u=0;for(n=t.m;n>0;n--){var a=t.row[n];a.origin==Us&&(a.klass==zs?r++:a.klass==Ws?i++:a.klass==Xs?s++:a.klass==Vs?o++:u++)}p(e.curr!=null),r+i+s+o+u>0&&(d("Cuts on level "+e.curr.level+":"),r>0&&d(" gmi = "+r+";"),i>0&&d(" mir = "+i+";"),s>0&&d(" cov = "+s+";"),o>0&&d(" clq = "+o+";"),u>0&&d(" app = "+u+";"),d(""))}function c(e){if(e.parm.mir_cuts!=$s&&e.parm.gmi_cuts!=$s&&e.parm.cov_cuts!=$s&&e.parm.clq_cuts!=$s)return;var t,n,r;n=e.n,n<1e3&&(n=1e3),r=0;for(t=e.orig_m+1;t<=e.mip.m;t++)e.mip.row[t].origin==Us&&r++;if(r>=n)return;e.parm.gmi_cuts==$s&&e.curr.changed<5&&ui(e),e.parm.mir_cuts==$s&&(p(e.mir_gen!=null),ci(e,e.mir_gen)),e.parm.cov_cuts==$s&&di(e),e.parm.clq_cuts==$s&&e.clq_gen!=null&&(e.curr.level==0&&e.curr.changed<50||e.curr.level>0&&e.curr.changed<5)&&bi(e,e.clq_gen)}function h(e){var t,n,i=0;p(e.mip.mip_stat==is);for(t=e.head;t!=null;t=n)n=t.next,r(e,t.p)||(jr(e,t.p),i++);e.parm.msg_lev>=ms&&(i==1?d("One hopeless branch has been pruned"):i>1&&d(i+" hopeless branches have been pruned"))}var v,m,g,y,E,S=0,x=e.tm_beg;const T=0,N=1,C=2,k=3;var L=T;for(;;){var A=null;switch(L){case T:p(e.curr==null);if(e.head==null){e.parm.msg_lev>=ms&&d("Active list is empty!"),E=0,A=k;break}p(e.next_p==0);if(e.parm.cb_func!=null){p(e.reason==0),e.reason=eo,e.parm.cb_func(e,e.parm.cb_info),e.reason=0;if(e.stop){E=yo,A=k;break}}e.next_p==0&&(e.a_cnt==1?(p(e.head.next==null),e.next_p=e.head.p):e.child!=0?e.next_p=e.child:e.next_p=Mi(e)),Pr(e,e.next_p),e.next_p=e.child=0,e.curr.up!=null&&e.curr.up.p!=S&&(S=0),v=e.curr.p,e.parm.msg_lev>=ms&&(d("------------------------------------------------------------------------"),d("Processing node "+v+" at level "+e.curr.level+"")),v==1&&(e.parm.gmi_cuts==$s&&e.parm.msg_lev>=vs&&d("Gomory's cuts enabled"),e.parm.mir_cuts==$s&&(e.parm.msg_lev>=vs&&d("MIR cuts enabled"),p(e.mir_gen==null),e.mir_gen=li(e)),e.parm.cov_cuts==$s&&e.parm.msg_lev>=vs&&d("Cover cuts enabled"),e.parm.clq_cuts==$s&&(p(e.clq_gen==null),e.parm.msg_lev>=vs&&d("Clique cuts enabled"),e.clq_gen=yi(e)));case N:(e.parm.msg_lev>=ms||e.parm.msg_lev>=ds&&e.parm.out_frq-1<=1e3*w(b(),e.tm_lag))&&t(e,0),e.parm.msg_lev>=vs&&w(b(),x)>=60&&(d("Time used: "+w(b(),e.tm_beg)+" secs"),x=b());if(e.parm.mip_gap>0&&zr(e)<=e.parm.mip_gap){e.parm.msg_lev>=ms&&d("Relative gap tolerance reached; search terminated "),E=bo,A=k;break}if(e.parm.tm_lim<s&&e.parm.tm_lim-1<=1e3*w(b(),e.tm_beg)){e.parm.msg_lev>=ms&&d("Time limit exhausted; search terminated"),E=po,A=k;break}if(e.parm.cb_func!=null){p(e.reason==0),e.reason=to,e.parm.cb_func(e,e.parm.cb_info),e.reason=0;if(e.stop){E=yo,A=k;break}}if(e.parm.pp_tech!=js)if(e.parm.pp_tech==Fs){if(e.curr.level==0&&Gr(e,100)){A=C;break}}else if(e.parm.pp_tech==Is){if(Gr(e,e.curr.level==0?100:10)){A=C;break}}else p(e!=e);if(!r(e,v)){d("*** not tested yet ***"),A=C;break}e.parm.msg_lev>=ms&&d("Solving LP relaxation..."),E=Wr(e);if(E!=0&&E!=lo&&E!=co){e.parm.msg_lev>=ps&&d("ios_driver: unable to solve current LP relaxation; glp_simplex returned "+E+""),E=fo,A=k;break}g=e.mip.pbs_stat,y=e.mip.dbs_stat;if(g==is&&y==is)e.parm.msg_lev>=ms&&d("Found optimal solution to LP relaxation");else{if(y==os){e.parm.msg_lev>=ps&&d("ios_driver: current LP relaxation has no dual feasible solution"),E=fo,A=k;break}if(g==ss&&y==is){p(e.mip.mip_stat==is),e.parm.msg_lev>=ms&&d("LP relaxation has no solution better than incumbent objective value"),A=C;break}if(g==os){e.parm.msg_lev>=ms&&d("LP relaxation has no feasible solution"),A=C;break}p(e.mip!=e.mip)}p(g==is&&y==is),p(e.curr!=null),e.curr.lp_obj=e.mip.obj_val;var O=e.mip.obj_val;O=qr(e,O),e.mip.dir==Pi?e.curr.bound<O&&(e.curr.bound=O):e.mip.dir==Hi?e.curr.bound>O&&(e.curr.bound=O):p(e.mip!=e.mip),e.parm.msg_lev>=ms&&d("Local bound is "+O+"");if(!r(e,v)){e.parm.msg_lev>=ms&&d("Current branch is hopeless and can be pruned"),A=C;break}p(e.reopt==0),p(e.reinv==0);if(e.parm.cb_func!=null){p(e.reason==0),e.reason=Ks,e.parm.cb_func(e,e.parm.cb_info),e.reason=0;if(e.stop){E=yo,A=k;break}if(e.reopt){e.reopt=e.reinv=0,A=N;break}e.reinv&&(e.reinv=0,p(nn(e.mip)==0))}i(e);if(e.curr.ii_cnt==0){e.parm.msg_lev>=ms&&d("New integer feasible solution found"),e.parm.msg_lev>=vs&&l(e),o(e),e.parm.msg_lev>=ds&&t(e,1);if(e.parm.cb_func!=null){p(e.reason==0),e.reason=Qs,e.parm.cb_func(e,e.parm.cb_info),e.reason=0;if(e.stop){E=yo,A=k;break}}A=C;break}e.mip.mip_stat==is&&a(e);if(e.parm.cb_func!=null){p(e.reason==0),e.reason=Gs,e.parm.cb_func(e,e.parm.cb_info),e.reason=0;if(e.stop){E=yo,A=k;break}if(!r(e,v)){e.parm.msg_lev>=ms&&d("Current branch became hopeless and can be pruned"),A=C;break}}if(e.parm.fp_heur){p(e.reason==0),e.reason=Gs,Ai(e),e.reason=0;if(!r(e,v)){e.parm.msg_lev>=ms&&d("Current branch became hopeless and can be pruned"),A=C;break}}p(e.local!=null),p(e.local.size==0);if(e.parm.cb_func!=null){p(e.reason==0),e.reason=Ys,e.parm.cb_func(e,e.parm.cb_info),e.reason=0;if(e.stop){E=yo,A=k;break}}if(e.curr.level==0||S==0)p(e.reason==0),e.reason=Ys,c(e),e.reason=0;e.local.size>0&&(p(e.reason==0),e.reason=Ys,Oi(e),e.reason=0),Kr(e.local);if(e.reopt){e.reopt=0,e.curr.changed++,A=N;break}f(e),e.parm.msg_lev>=vs&&e.curr.level==0&&l(e),e.pcost!=null&&Ci(e),p(e.br_var==0),p(e.br_sel==0);if(e.parm.cb_func!=null){p(e.reason==0),p(e.br_var==0),p(e.br_sel==0),e.reason=Zs,e.parm.cb_func(e,e.parm.cb_info),e.reason=0;if(e.stop){E=yo,A=k;break}}e.br_var==0&&(e.br_var=wi(e,function(t){e.br_sel=t})),m=e.curr.p,E=u(e,e.br_var,e.br_sel),e.br_var=e.br_sel=0;if(E==0){S=m,A=T;break}if(E==1){e.curr.solved=e.curr.changed=0,A=N;break}if(E==2){A=C;break}p(E!=E);case C:e.parm.msg_lev>=ms&&d("Node "+v+" fathomed"),Hr(e),jr(e,v),e.mip.mip_stat==is&&h(e),S=0,A=T;break;case k:return e.parm.msg_lev>=ds&&t(e,0),e.mir_gen=null,e.clq_gen=null,E}if(A==null)break;L=A}}function Zr(e){var t;return p(e>=0),t={},t.n=e,t.nnz=0,t.pos=new Array(1+e),g(t.pos,1,0,e),t.ind=new Array(1+e),t.val=new Array(1+e),t}function ei(e){var t,n,r;p(e.n>=0),r=0;for(t=e.n;t>=1;t--)n=e.pos[t],p(0<=n&&n<=e.nnz),n!=0&&(p(e.ind[n]==t),r++);p(e.nnz==r)}function ti(e,t){var n;return p(1<=t&&t<=e.n),n=e.pos[t],p(0<=n&&n<=e.nnz),n==0?0:e.val[n]}function ni(e,t,n){p(1<=t&&t<=e.n);var r=e.pos[t];n==0?r!=0&&(e.pos[t]=0,r<e.nnz&&(e.pos[e.ind[e.nnz]]=r,e.ind[r]=e.ind[e.nnz],e.val[r]=e.val[e.nnz]),e.nnz--):(r==0&&(r=++e.nnz,e.pos[t]=r,e.ind[r]=t),e.val[r]=n)}function ri(e){for(var t=1;t<=e.nnz;t++)e.pos[e.ind[t]]=0;e.nnz=0}function ii(e,t){var n=0;for(var r=1;r<=e.nnz;r++)Math.abs(e.val[r])==0||Math.abs(e.val[r])<t?e.pos[e.ind[r]]=0:(n++,e.pos[e.ind[r]]=n,e.ind[n]=e.ind[r],e.val[n]=e.val[r]);e.nnz=n}function si(e,t){p(e!=t),p(e.n==t.n),ri(e),e.nnz=t.nnz,m(e.ind,1,t.ind,1,e.nnz),m(e.val,1,t.val,1,e.nnz);for(var n=1;n<=e.nnz;n++)e.pos[e.ind[n]]=n}function oi(e,t,n){var r,i,s;p(e!=n),p(e.n==n.n);for(var o=1;o<=n.nnz;o++)r=n.ind[o],i=ti(e,r),s=n.val[o],ni(e,r,i+t*s)}function ui(e){function n(e){return e-Math.floor(e)}function r(e,t,r){var i=e.mip,s=i.m,o=i.n,u=t.ind,a=t.val,f=t.phi,l,c,h,d,v,m,g,y,b,w,E,S,x,T;h=dn(i,s+r,u,a),b=i.col[r].prim;for(c=1;c<=s+o;c++)f[c]=0;S=n(b);for(r=1;r<=h;r++){c=u[r],p(1<=c&&c<=s+o),c<=s?(x=i.row[c],d=Bi,m=x.lb,g=x.ub,v=x.stat):(T=i.col[c-s],d=T.kind,m=T.lb,g=T.ub,v=T.stat),p(v!=Wi),w=a[r];if(Math.abs(w)>1e5)return;if(Math.abs(w)<1e-10)continue;switch(v){case $i:return;case Xi:y=-w;break;case Vi:y=+w;break;case Ji:continue;default:p(v!=v)}switch(d){case ji:if(Math.abs(y-Math.floor(y+.5))<1e-10)continue;n(y)<=n(b)?E=n(y):E=n(b)/(1-n(b))*(1-n(y));break;case Bi:y>=0?E=+y:E=n(b)/(1-n(b))*-y;break;default:p(d!=d)}switch(v){case Xi:f[c]=+E,S+=E*m;break;case Vi:f[c]=-E,S-=E*g;break;default:p(v!=v)}}for(l=1;l<=s;l++){var N;if(Math.abs(f[l])<1e-10)continue;x=i.row[l],p(x.type!=zi);for(N=x.ptr;N!=null;N=N.r_next)f[s+N.col.j]+=f[l]*N.val}h=0;for(r=1;r<=o;r++){if(Math.abs(f[s+r])<1e-10)continue;T=i.col[r],T.type==zi?S-=f[s+r]*T.lb:(h++,u[h]=r,a[h]=f[s+r])}Math.abs(S)<1e-12&&(S=0);for(c=1;c<=h;c++){if(Math.abs(a[c])<.001)return;if(Math.abs(a[c])>1e3)return}jn(e,null,zs,0,h,u,a,qi,S)}const t=50;var i=e.mip,s=i.m,o=i.n,u,a,f,l,c,h={};u=new Array(1+o),h.ind=new Array(1+o),h.val=new Array(1+o),h.phi=new Array(1+s+o),f=0;for(l=1;l<=o;l++){var d=i.col[l],v;if(d.kind!=ji)continue;if(d.type==zi)continue;if(d.stat!=Wi)continue;v=n(d.prim);if(!(.05<=v&&v<=.95))continue;f++,u[f].j=l,u[f].f=v}E(u,1,f,function(e,t){return e.f>t.f?-1:e.f<t.f?1:0}),c=Bn(e);for(a=1;a<=f;a++){if(Bn(e)-c>=t)break;r(e,h,u[a].j)}}function li(e){function t(e,t){var r=e.mip,i=t.m,s;for(s=1;s<=i;s++){var o=r.row[s];t.skip[s]=0,t.isint[s]=0;switch(o.type){case Ii:t.lb[s]=-n,t.ub[s]=+n;break;case qi:t.lb[s]=o.lb,t.ub[s]=+n;break;case Ri:t.lb[s]=-n,t.ub[s]=o.ub;break;case Ui:t.lb[s]=o.lb,t.ub[s]=o.ub;break;case zi:t.lb[s]=t.ub[s]=o.lb;break;default:p(o!=o)}t.vlb[s]=t.vub[s]=0}}function r(e,t){var r=e.mip,i=t.m,s=t.n,o;for(o=i+1;o<=i+s;o++){var u=r.col[o-i];switch(u.kind){case Bi:t.isint[o]=0;break;case ji:t.isint[o]=1;break;default:p(u!=u)}switch(u.type){case Ii:t.lb[o]=-n,t.ub[o]=+n;break;case qi:t.lb[o]=u.lb,t.ub[o]=+n;break;case Ri:t.lb[o]=-n,t.ub[o]=u.ub;break;case Ui:t.lb[o]=u.lb,t.ub[o]=u.ub;break;case zi:t.lb[o]=t.ub[o]=u.lb;break;default:p(u!=u)}t.vlb[o]=t.vub[o]=0}}function i(e,t){var r=e.mip,i=t.m,s,o,u,a,f,l;for(o=1;o<=i;o++){if(!(t.lb[o]==0&&t.ub[o]==+n||t.lb[o]==-n&&t.ub[o]==0))continue;s=r.row[o].ptr;if(s==null)continue;u=i+s.col.j,f=s.val,s=s.r_next;if(s==null)continue;a=i+s.col.j,l=s.val;if(s.r_next!=null)continue;if(!!t.isint[u]||!t.isint[a]){if(!t.isint[u]||!!t.isint[a])continue;a=u,l=f,u=i+s.col.j,f=s.val}if(t.lb[a]==-n||t.ub[a]==+n||t.lb[a]==t.ub[a])continue;t.ub[o]==0&&(f=-f,l=-l),f>0?t.vlb[u]==0&&(t.lb[u]=-l/f,t.vlb[u]=a,t.skip[o]=1):t.vub[u]==0&&(t.ub[u]=-l/f,t.vub[u]=a,t.skip[o]=1)}}function s(e,t){var r=e.mip,i=t.m,s,o,u,a;for(o=1;o<=i;o++){if(t.lb[o]==-n&&t.ub[o]==+n){t.skip[o]=1;continue}a=0;for(s=r.row[o].ptr;s!=null;s=s.r_next){u=i+s.col.j;if(t.lb[u]==-n&&t.ub[u]==+n){t.skip[o]=1;break}if(t.isint[u]&&t.lb[u]==-n||t.isint[u]&&t.ub[u]==+n){t.skip[o]=1;break}(t.vlb[u]!=0||t.vub[u]!=0||t.lb[u]!=t.ub[u])&&a++}a==0&&(t.skip[o]=1)}}var o=e.mip,u=o.m,a=o.n,f;return ai&&d("ios_mir_init: warning: debug mode enabled"),f={},f.m=u,f.n=a,f.skip=new Array(1+u),f.isint=new Array(1+u+a),f.lb=new Array(1+u+a),f.vlb=new Array(1+u+a),f.ub=new Array(1+u+a),f.vub=new Array(1+u+a),f.x=new Array(1+u+a),f.agg_row=new Array(1+fi),f.agg_vec=Zr(u+a),f.subst=new Array(1+u+a),f.mod_vec=Zr(u+a),f.cut_vec=Zr(u+a),t(e,f),r(e,f),i(e,f),s(e,f),f}function ci(e,t){function s(e,t,n,s,o,u,a){function f(e,t){return e.v<t.v?-1:e.v>t.v?1:0}function l(e,t,n,s,o,u,a){function f(e,t,n,s){var o,u,a;if(Math.abs(n-Math.floor(n+.5))<.01)return 1;u=n-Math.floor(n);for(o=1;o<=e;o++)a=t[o]-Math.floor(t[o])-u,a<=0?s[o]=Math.floor(t[o]):s[o]=Math.floor(t[o])+a/(1-u);return r=Math.floor(n),i=1/(1-u),0}var l,c,h;c=a,h=n;for(l=1;l<=e;l++)c[l]=t[l]/u,o[l]&&(c[l]=-c[l]),h-=t[l]*s[l];h/=u;if(f(e,c,h,a))return 1;for(l=1;l<=e;l++)o[l]&&(a[l]=-a[l],r+=a[l]*s[l]);return i/=u,0}var c,h,d,v,m,g,y,b=new Array(4),w,S,x,T;x=new Array(1+e),T=new Array(1+e);for(h=1;h<=e;h++)x[h]=o[h]>=.5*s[h];S=g=0;for(h=1;h<=e;h++){p(t[h]!=0),y=1e-9*(1+Math.abs(s[h]));if(o[h]<y||o[h]>s[h]-y)continue;c=l(e,t,n,s,x,Math.abs(t[h]),a);if(c)continue;w=-r-i*u;for(d=1;d<=e;d++)w+=a[d]*o[d];S<w&&(S=w,g=Math.abs(t[h]))}S<.001&&(S=0);if(S==0)return S;p(g>0),b[1]=g/2,b[2]=g/4,b[3]=g/8;for(h=1;h<=3;h++){c=l(e,t,n,s,x,b[h],a);if(c)continue;w=-r-i*u;for(d=1;d<=e;d++)w+=a[d]*o[d];S<w&&(S=w,g=b[h])}v=0;for(h=1;h<=e;h++){y=1e-9*(1+Math.abs(s[h]));if(o[h]<y||o[h]>s[h]-y)continue;v++,T[v].j=h,T[v].v=Math.abs(o[h]-.5*s[h])}E(T,1,v,f);for(m=1;m<=v;m++){h=T[m].j,x[h]=!x[h],c=l(e,t,n,s,x,g,a),x[h]=!x[h];if(c)continue;w=-r-i*u;for(d=1;d<=e;d++)w+=a[d]*o[d];S<w&&(S=w,x[h]=!x[h])}return c=l(e,t,n,s,x,g,a),p(!c),S}function u(e,t){var n=e.mip,r=t.m,i=t.n,s;for(s=1;s<=r;s++)t.x[s]=n.row[s].prim;for(s=r+1;s<=r+i;s++)t.x[s]=n.col[s-r].prim}function f(e,t,n){var r=e.mip,i=t.m,s;p(1<=n&&n<=i),p(!t.skip[n]),t.skip[n]=2,t.agg_cnt=1,t.agg_row[1]=n,ri(t.agg_vec),ni(t.agg_vec,n,1);for(s=r.row[n].ptr;s!=null;s=s.r_next)ni(t.agg_vec,i+s.col.j,-s.val);t.agg_rhs=0,ai&&ei(t.agg_vec)}function c(e){var t=e.m,n=e.n,r,i;for(r=1;r<=e.agg_vec.nnz;r++)i=e.agg_vec.ind[r],p(1<=i&&i<=t+n),e.vlb[i]==0&&e.vub[i]==0&&e.lb[i]==e.ub[i]&&(e.agg_rhs-=e.agg_vec.val[r]*e.lb[i],e.agg_vec.val[r]=0);ii(e.agg_vec,o),ai&&ei(e.agg_vec)}function h(e){var t=e.m,r=e.n,i,s,o,u,a;for(i=1;i<=e.agg_vec.nnz;i++){s=e.agg_vec.ind[i],p(1<=s&&s<=t+r);if(e.isint[s])continue;o=e.vlb[s],o==0?e.lb[s]==-n?u=n:u=e.x[s]-e.lb[s]:(p(1<=o&&o<=t+r),p(e.isint[o]),p(e.lb[s]!=-n),u=e.x[s]-e.lb[s]*e.x[o]),o=e.vub[s],o==0?e.vub[s]==+n?a=n:a=e.ub[s]-e.x[s]:(p(1<=o&&o<=t+r),p(e.isint[o]),p(e.ub[s]!=+n),a=e.ub[s]*e.x[o]-e.x[s]),p(u!=n||a!=n),p(e.subst[s]=="?"),u<=a?e.subst[s]="L":e.subst[s]="U"}}function d(e){var t=e.m,r=e.n,i,s,o,u;si(e.mod_vec,e.agg_vec),e.mod_rhs=e.agg_rhs,ai&&ei(e.mod_vec);for(i=e.mod_vec.nnz;i>=1;i--){o=e.mod_vec.ind[i],p(1<=o&&o<=t+r);if(e.isint[o])continue;e.subst[o]=="L"?(p(e.lb[o]!=-n),u=e.vlb[o],u==0?e.mod_rhs-=e.mod_vec.val[i]*e.lb[o]:(p(e.isint[u]),s=e.mod_vec.pos[u],s==0&&(ni(e.mod_vec,u,1),s=e.mod_vec.pos[u],e.mod_vec.val[s]=0),e.mod_vec.val[s]+=e.mod_vec.val[i]*e.lb[o])):e.subst[o]=="U"?(p(e.ub[o]!=+n),u=e.vub[o],u==0?e.mod_rhs-=e.mod_vec.val[i]*e.ub[o]:(p(e.isint[u]),s=e.mod_vec.pos[u],s==0&&(ni(e.mod_vec,u,1),s=e.mod_vec.pos[u],e.mod_vec.val[s]=0),e.mod_vec.val[s]+=e.mod_vec.val[i]*e.ub[o]),e.mod_vec.val[i]=-e.mod_vec.val[i]):p(o!=o)}ai&&ei(e.mod_vec);for(i=1;i<=e.mod_vec.nnz;i++){o=e.mod_vec.ind[i],p(1<=o&&o<=t+r);if(!e.isint[o])continue;p(e.subst[o]=="?"),p(e.vlb[o]==0&&e.vub[o]==0),p(e.lb[o]!=-n&&e.ub[o]!=+n),Math.abs(e.lb[o])<=Math.abs(e.ub[o])?(e.subst[o]="L",e.mod_rhs-=e.mod_vec.val[i]*e.lb[o]):(e.subst[o]="U",e.mod_rhs-=e.mod_vec.val[i]*e.ub[o],e.mod_vec.val[i]=-e.mod_vec.val[i])}ai&&ei(e.mod_vec)}function m(e){var t=e.m,r=e.n,i,u,a,f,l,c,h,d,v=0,m,g=null,y=null;si(e.cut_vec,e.mod_vec),e.cut_rhs=e.mod_rhs,ii(e.cut_vec,o),ai&&ei(e.cut_vec);for(i=1;i<=e.cut_vec.nnz;i++)u=e.cut_vec.ind[i],p(1<=u&&u<=t+r),!e.isint[u]&&e.cut_vec.val[i]>0&&(e.cut_vec.val[i]=0);ii(e.cut_vec,0),ai&&ei(e.cut_vec),f=0;for(i=1;i<=e.cut_vec.nnz;i++){u=e.cut_vec.ind[i],p(1<=u&&u<=t+r);if(e.isint[u]){var b;f++,a=e.cut_vec.ind[f],e.cut_vec.pos[u]=f,e.cut_vec.pos[a]=i,e.cut_vec.ind[f]=u,e.cut_vec.ind[i]=a,b=e.cut_vec.val[f],e.cut_vec.val[f]=e.cut_vec.val[i],e.cut_vec.val[i]=b}}ai&&ei(e.cut_vec);if(f==0)return v;c=new Array(1+f),h=new Array(1+f),d=new Array(1+f);for(i=1;i<=f;i++)u=e.cut_vec.ind[i],p(t+1<=u&&u<=t+r),p(e.isint[u]),c[i]=e.ub[u]-e.lb[u],p(c[i]>=1),e.subst[u]=="L"?h[i]=e.x[u]-e.lb[u]:e.subst[u]=="U"?h[i]=e.ub[u]-e.x[u]:p(u!=u),p(h[i]>=-0.001),h[i]<0&&(h[i]=0);l=0;for(i=f+1;i<=e.cut_vec.nnz;i++)u=e.cut_vec.ind[i],p(1<=u&&u<=t+r),p(!e.isint[u]),e.subst[u]=="L"?(p(e.lb[u]!=-n),a=e.vlb[u],a==0?h=e.x[u]-e.lb[u]:h=e.x[u]-e.lb[u]*e.x[a]):e.subst[u]=="U"?(p(e.ub[u]!=+n),a=e.vub[u],a==0?h=e.ub[u]-e.x[u]:h=e.ub[u]*e.x[a]-e.x[u]):p(u!=u),p(h>=-0.001),h<0&&(h=0),l-=e.cut_vec.val[i]*h;p(l>=0),m=e.cut_rhs,v=s(f,e.cut_vec.val,m,c,h,l,d);if(v==0)return v;p(v>0);for(i=1;i<=f;i++)e.cut_vec.val[i]=d[i];for(i=f+1;i<=e.cut_vec.nnz;i++)u=e.cut_vec.ind[i],u<=t+r&&(e.cut_vec.val[i]*=y);return e.cut_rhs=g,ai&&ei(e.cut_vec),v}function b(e){var t=e.m,r=e.n,i,s,o,u;for(i=1;i<=e.cut_vec.nnz;i++){o=e.cut_vec.ind[i],p(1<=o&&o<=t+r);if(!e.isint[o])continue;e.subst[o]=="L"?(p(e.lb[o]!=-n),p(e.vlb[o]==0),e.cut_rhs+=e.cut_vec.val[i]*e.lb[o]):e.subst[o]=="U"?(p(e.ub[o]!=+n),p(e.vub[o]==0),e.cut_rhs-=e.cut_vec.val[i]*e.ub[o],e.cut_vec.val[i]=-e.cut_vec.val[i]):p(o!=o)}for(i=1;i<=e.cut_vec.nnz;i++){o=e.cut_vec.ind[i],p(1<=o&&o<=t+r);if(e.isint[o])continue;e.subst[o]=="L"?(p(e.lb[o]!=-n),u=e.vlb[o],u==0?e.cut_rhs+=e.cut_vec.val[i]*e.lb[o]:(s=e.cut_vec.pos[u],s==0&&(ni(e.cut_vec,u,1),s=e.cut_vec.pos[u],p(s!=0),e.cut_vec.val[s]=0),e.cut_vec.val[s]-=e.cut_vec.val[i]*e.lb[o])):e.subst[o]=="U"?(p(e.ub[o]!=+n),u=e.vub[o],u==0?e.cut_rhs-=e.cut_vec.val[i]*e.ub[o]:(s=e.cut_vec.pos[u],s==0&&(ni(e.cut_vec,u,1),s=e.cut_vec.pos[u],p(s!=0),e.cut_vec.val[s]=0),e.cut_vec.val[s]+=e.cut_vec.val[i]*e.ub[o]),e.cut_vec.val[i]=-e.cut_vec.val[i]):p(o!=o)}ai&&ei(e.cut_vec)}function S(e,t){var n=e.mip,r=t.m,i=t.n,s,o,u,a,f;for(o=t.cut_vec.nnz;o>=1;o--){u=t.cut_vec.ind[o],p(1<=u&&u<=r+i);if(u>r)continue;for(s=n.row[u].ptr;s!=null;s=s.r_next)a=r+s.col.j,f=t.cut_vec.pos[a],f==0&&(ni(t.cut_vec,a,1),f=t.cut_vec.pos[a],t.cut_vec.val[f]=0),t.cut_vec.val[f]+=t.cut_vec.val[o]*s.val;t.cut_vec.val[o]=0}ii(t.cut_vec,0)}function x(e,t){var n=t.m,r=t.n,i,s,o,u=new Array(1+r),a=new Array(1+r);o=0;for(i=t.cut_vec.nnz;i>=1;i--)s=t.cut_vec.ind[i],p(n+1<=s&&s<=n+r),o++,u[o]=s-n,a[o]=t.cut_vec.val[i];jn(e,null,Ws,0,o,u,a,Ri,t.cut_rhs)}function T(e,t){var r=e.mip,i=t.m,s=t.n,o,u,a,f,l,c,h,d=0,v=0,m,g,y,b=0;for(f=1;f<=t.agg_vec.nnz;f++){c=t.agg_vec.ind[f],p(1<=c&&c<=i+s);if(c<=i)continue;if(t.isint[c])continue;if(Math.abs(t.agg_vec.val[f])<.001)continue;h=t.vlb[c],h==0?t.lb[c]==-n?m=n:m=t.x[c]-t.lb[c]:(p(1<=h&&h<=i+s),p(t.isint[h]),p(t.lb[c]!=-n),m=t.x[c]-t.lb[c]*t.x[h]),h=t.vub[c],h==0?t.vub[c]==+n?g=n:g=t.ub[c]-t.x[c]:(p(1<=h&&h<=i+s),p(t.isint[h]),p(t.ub[c]!=+n),g=t.ub[c]*t.x[h]-t.x[c]),p(m!=n||g!=n),y=m<=g?m:g,p(y!=n);if(y<.001)continue;b<y&&(b=y,d=c)}if(d==0)return v=1,v;p(i+1<=d&&d<=i+s),p(!t.isint[d]);for(a=1;a<=i;a++){if(t.skip[a])continue;for(o=r.row[a].ptr;o!=null;o=o.r_next)if(o.col.j==d-i)break;if(o!=null&&Math.abs(o.val)>=.001)break}if(a>i)return v=2,v;t.agg_cnt++,p(t.agg_cnt<=fi),t.agg_row[t.agg_cnt]=a,t.skip[a]=2,u=Zr(i+s),ni(u,a,1);for(o=r.row[a].ptr;o!=null;o=o.r_next)ni(u,i+o.col.j,-o.val);return ai&&ei(u),f=t.agg_vec.pos[d],p(f!=0),l=u.pos[d],p(l!=0),oi(t.agg_vec,-t.agg_vec.val[f]/u.val[l],u),ni(t.agg_vec,d,0),ai&&ei(t.agg_vec),v}var r,i;if(ai)function a(e){var t=e.m,r=e.n,i,s,o,u,a;for(i=1;i<=t+r;i++)o=e.lb[i],s=e.vlb[i],s!=0&&(p(o!=-n),p(!e.isint[i]),p(e.isint[s]),o*=e.x[s]),o!=-n&&(a=1e-6*(1+Math.abs(o)),p(e.x[i]>=o-a)),u=e.ub[i],s=e.vub[i],s!=0&&(p(u!=+n),p(!e.isint[i]),p(e.isint[s]),u*=e.x[s]),u!=+n&&(a=1e-6*(1+Math.abs(u)),p(e.x[i]<=u+a))}if(ai)function l(e){var t=e.m,n=e.n,r,i,s,o;s=0,o=1;for(r=1;r<=e.agg_vec.nnz;r++)i=e.agg_vec.ind[r],p(1<=i&&i<=t+n),s+=e.agg_vec.val[r]*e.x[i],o<Math.abs(e.agg_vec.val[r])&&(o=Math.abs(e.agg_vec.val[r]));s-=e.agg_rhs,o<Math.abs(e.agg_rhs)&&(o=Math.abs(e.agg_rhs)),p(Math.abs(s)<=1e-6*o)}if(ai)function v(e){var t=e.m,r=e.n,i,s,o,u,a,f;u=0,a=1;for(i=1;i<=e.mod_vec.nnz;i++)s=e.mod_vec.ind[i],p(1<=s&&s<=t+r),e.subst[s]=="L"?(p(e.lb[s]!=-n),o=e.vlb[s],o==0?f=e.x[s]-e.lb[s]:f=e.x[s]-e.lb[s]*e.x[o]):e.subst[s]=="U"?(p(e.ub[s]!=+n),o=e.vub[s],o==0?f=e.ub[s]-e.x[s]:f=e.ub[s]*e.x[o]-e.x[s]):p(s!=s),u+=e.mod_vec.val[i]*f,a<Math.abs(e.mod_vec.val[i])&&(a=Math.abs(e.mod_vec.val[i]));u-=e.mod_rhs,a<Math.abs(e.mod_rhs)&&(a=Math.abs(e.mod_rhs)),p(Math.abs(u)<=1e-6*a)}if(ai)function y(e,t){var r=e.m,i=e.n,s,o,u,a,f,l;a=0,f=1;for(s=1;s<=e.cut_vec.nnz;s++)o=e.cut_vec.ind[s],p(1<=o&&o<=r+i),e.subst[o]=="L"?(p(e.lb[o]!=-n),u=e.vlb[o],u==0?l=e.x[o]-e.lb[o]:l=e.x[o]-e.lb[o]*e.x[u]):e.subst[o]=="U"?(p(e.ub[o]!=+n),u=e.vub[o],u==0?l=e.ub[o]-e.x[o]:l=e.ub[o]*e.x[u]-e.x[o]):p(o!=o),a+=e.cut_vec.val[s]*l,f<Math.abs(e.cut_vec.val[s])&&(f=Math.abs(e.cut_vec.val[s]));a-=e.cut_rhs,f<Math.abs(e.cut_rhs)&&(f=Math.abs(e.cut_rhs)),p(Math.abs(a-t)<=1e-6*f)}if(ai)function w(e,t){var n=e.m,r=e.n,i,s,o,u;o=0,u=1;for(i=1;i<=e.cut_vec.nnz;i++)s=e.cut_vec.ind[i],p(1<=s&&s<=n+r),o+=e.cut_vec.val[i]*e.x[s],u<Math.abs(e.cut_vec.val[i])&&(u=Math.abs(e.cut_vec.val[i]));o-=e.cut_rhs,u<Math.abs(e.cut_rhs)&&(u=Math.abs(e.cut_rhs)),p(Math.abs(o-t)<=1e-6*u)}var N=e.mip,C=t.m,k=t.n,L,A,O;p(N.m>=C),p(N.n==k),u(e,t),ai&&a(t),g(t.subst,1,"?",C+k);for(L=1;L<=C;L++){if(t.skip[L])continue;f(e,t,L);for(;;){ai&&l(t),c(t);if(ai){l(t);for(A=1;A<=C+k;A++)p(t.subst[A]=="?")}h(t),d(t),ai&&v(t),O=m(t),O>0&&(ai&&y(t,O),b(t),ai&&w(t,O),S(e,t),ai&&w(t,O),x(e,t));for(var M=1;M<=t.mod_vec.nnz;M++)A=t.mod_vec.ind[M],p(1<=A&&A<=C+k),p(t.subst[A]!="?"),t.subst[A]="?";if(O==0&&t.agg_cnt<fi&&T(e,t)==0)continue;break}var _;for(A=1;A<=t.agg_cnt;A++)_=t.agg_row[A],p(1<=_&&_<=C),p(t.skip[_]==2),t.skip[_]=0}}function hi(e,t,n,r,i){function a(e,t,n,r,i,a,f){var l,c,h=0,p=0,d,v,m=.001;d=.001*(1+Math.abs(n));for(l=1;l<=e;l++)for(c=l+1;c<=e;c++){h++;if(h>u)return p;t[l]+t[c]+a>n+d&&(v=t[l]+t[c]-n,s=1/(v+r),o=2-s*v,v=i[l]+i[c]+s*a-o,m<v&&(m=v,f[1]=l,f[2]=c,p=1))}return p}function f(e,t,n,r,i,a,f){var l,c,h,p=0,d=0,v,m,g=.001;v=.001*(1+Math.abs(n));for(l=1;l<=e;l++)for(c=l+1;c<=e;c++)for(h=c+1;h<=e;h++){p++;if(p>u)return d;t[l]+t[c]+t[h]+a>n+v&&(m=t[l]+t[c]+t[h]-n,s=1/(m+r),o=3-s*m,m=i[l]+i[c]+i[h]+s*a-o,g<m&&(g=m,f[1]=l,f[2]=c,f[3]=h,d=1))}return d}function l(e,t,n,r,i,a,f){var l,c,h,p,d=0,v=0,m,g,y=.001;m=.001*(1+Math.abs(n));for(l=1;l<=e;l++)for(c=l+1;c<=e;c++)for(h=c+1;h<=e;h++)for(p=h+1;p<=e;p++){d++;if(d>u)return v;t[l]+t[c]+t[h]+t[p]+a>n+m&&(g=t[l]+t[c]+t[h]+t[p]-n,s=1/(g+r),o=4-s*g,g=i[l]+i[c]+i[h]+i[p]+s*a-o,y<g&&(y=g,f[1]=l,f[2]=c,f[3]=h,f[4]=p,v=1))}return v}function c(e,t,n,r,i,s,o){var u;p(e>=2);for(u=1;u<=e;u++)p(t[u]>0);p(n>-0.00001),p(r>=0);for(u=1;u<=e;u++)p(0<=i[u]&&i[u]<=1);return p(0<=s&&s<=r),a(e,t,n,r,i,s,o)?2:f(e,t,n,r,i,s,o)?3:l(e,t,n,r,i,s,o)?4:0}var s=null,o=null;const u=1e3;var h=new Array(5),d,v,m,g,y,b,w,E,S;g=0;for(v=1;v<=t;v++)d=n[v],lf(e,d)==Ro?r[0]-=r[v]*cf(e,d):(g++,n[g]=n[v],r[g]=r[v]);t=g,m=0;for(v=1;v<=t;v++){d=n[v];if(fl(e,d)==ou&&lf(e,d)==qo&&cf(e,d)==0&&hf(e,d)==1){var x,T;m++,x=n[m],T=r[m],n[m]=n[v],r[m]=r[v],n[v]=x,r[v]=T}}if(m<2)return 0;b=w=0;for(v=m+1;v<=t;v++){d=n[v];if(lf(e,d)!=qo)return 0;r[v]>0?(b+=r[v]*cf(e,d),w+=r[v]*hf(e,d)):(b+=r[v]*hf(e,d),w+=r[v]*cf(e,d))}E=w-b,S=0;for(v=m+1;v<=t;v++)d=n[v],S+=r[v]*Rf(e,d);S-=b,S<0&&(S=0),S>E&&(S=E),r[0]-=b;for(v=1;v<=m;v++)d=n[v],i[v]=Rf(e,d),i[v]<0&&(i[v]=0),i[v]>1&&(i[v]=1);for(v=1;v<=m;v++)r[v]<0&&(n[v]=-n[v],r[v]=-r[v],r[0]+=r[v],i[v]=1-i[v]);y=c(m,r,r[0],E,i,S,h);if(y==0)return 0;p(2<=y&&y<=4),n[0]=0,r[0]=o;for(d=1;d<=y;d++)h[d]=n[h[d]];p(y<=m);for(v=1;v<=y;v++)h[v]>0?(n[v]=+h[v],r[v]=1):(n[v]=-h[v],r[v]=-1,r[0]-=1);for(v=m+1;v<=t;v++)y++,n[y]=n[v],r[y]=s*r[v];return r[0]+=s*b,p(y<=t),t=y,t}function pi(e,t,n,r){var i=nf(e),s,o,u=0;t<0&&h("lpx_eval_row: len = "+t+"; invalid row length");for(o=1;o<=t;o++)s=n[o],1<=s&&s<=i||h("lpx_eval_row: j = "+s+"; column number out of range"),u+=r[o]*Rf(e,s);return u}function di(e){var t=e.mip,n=tf(t),r=nf(t),i,s,o,u,a,f,l,c,h;p(_f(t)==cu),f=new Array(1+r),c=new Array(1+r),h=new Array(1+r);for(i=1;i<=n;i++)for(u=1;u<=2;u++){o=of(t,i);if(u==1){if(o!=Io&&o!=qo)continue;a=mf(t,i,f,c),c[0]=af(t,i)}else{if(o!=Fo&&o!=qo)continue;a=mf(t,i,f,c);for(s=1;s<=a;s++)c[s]=-c[s];c[0]=-uf(t,i)}a=hi(t,a,f,c,h);if(a==0)continue;l=pi(t,a,f,c)-c[0];if(l<.001)continue;jn(e,null,Xs,0,a,f,c,Ri,c[0])}}function vi(e){function i(e,t){var r;switch(of(e,t)){case jo:case Io:r=-n;break;case Fo:case qo:case Ro:r=uf(e,t);break;default:p(e!=e)}return r}function s(e,t){var r;switch(of(e,t)){case jo:case Fo:r=+n;break;case Io:case qo:case Ro:r=af(e,t);break;default:p(e!=e)}return r}function o(e,t){var r;switch(lf(e,t)){case jo:case Io:r=-n;break;case Fo:case qo:case Ro:r=cf(e,t);break;default:p(e!=e)}return r}function a(e,t){var r;switch(lf(e,t)){case jo:case Fo:r=+n;break;case Io:case qo:case Ro:r=hf(e,t);break;default:p(e!=e)}return r}function f(e,t){return fl(e,t)==ou&&lf(e,t)==qo&&cf(e,t)==0&&hf(e,t)==1}function l(e,t,r,i){var s,u,f,l,c;c=0;for(u=1;u<=t;u++){s=r[u];if(i[u]>0){f=o(e,s);if(f==-n){c=-n;break}c+=i[u]*f}else if(i[u]<0){l=a(e,s);if(l==+n){c=-n;break}c+=i[u]*l}else p(i!=i)}return c}function c(e,t,r,i){var s,u,f,l,c;c=0;for(u=1;u<=t;u++){s=r[u];if(i[u]>0){l=a(e,s);if(l==+n){c=+n;break}c+=i[u]*l}else if(i[u]<0){f=o(e,s);if(f==-n){c=+n;break}c+=i[u]*f}else p(i!=i)}return c}function h(e,t,r,i,s,o,u,a,f){var l;return p(1<=u&&u<f&&f<=e),r!=-n&&a&&(r-=t[u]),i!=+n&&a&&(i-=t[u]),s!=-n&&(t[u]<0&&(s-=t[u]),t[f]<0&&(s-=t[f])),o!=+n&&(t[u]>0&&(o-=t[u]),t[f]>0&&(o-=t[f])),t[f]>0?r==-n||o==+n?l=-n:l=(r-o)/t[f]:i==+n||s==-n?l=-n:l=(i-s)/t[f],l>.001?2:(t[f]>0?i==+n||s==-n?l=+n:l=(i-s)/t[f]:r==-n||o==+n?l=+n:l=(r-o)/t[f],l<.999?1:0)}const t=4e3,r=500;var v=null,m,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_;d("Creating the conflict graph..."),m=tf(e),y=nf(e),b=0,C=new Array(1+y);for(E=1;E<=y;E++)C[E]=0;k=new Array(1+y),N=new Array(1+y),_=new Array(1+y);for(w=1;w<=m;w++){L=i(e,w),A=s(e,w);if(L==-n&&A==+n)continue;T=mf(e,w,N,_);if(T>r)continue;O=l(e,T,N,_),M=c(e,T,N,_);for(S=1;S<=T;S++){if(!f(e,N[S]))continue;for(x=S+1;x<=T;x++){if(!f(e,N[x]))continue;if(h(T,_,L,A,O,M,S,0,x)||h(T,_,L,A,O,M,S,1,x))E=N[S],C[E]==0&&(b++,C[E]=b,k[b]=E),E=N[x],C[E]==0&&(b++,C[E]=b,k[b]=E)}}}if(b==0||b>t)return d("The conflict graph is either empty or too big"),v;v={},v.n=y,v.nb=b,v.ne=0,v.vert=C,v.orig=k,T=b+b,T=T*(T-1)/2,T=(T+(u-1))/u,v.a=new Array(T),g(v.a,0,0,T);for(E=1;E<=b;E++)mi(v,+k[E],-k[E]);for(w=1;w<=m;w++){L=i(e,w),A=s(e,w);if(L==-n&&A==+n)continue;T=mf(e,w,N,_);if(T>r)continue;O=l(e,T,N,_),M=c(e,T,N,_);for(S=1;S<=T;S++){if(!f(e,N[S]))continue;for(x=S+1;x<=T;x++){if(!f(e,N[x]))continue;switch(h(T,_,L,A,O,M,S,0,x)){case 0:break;case 1:mi(v,-N[S],+N[x]);break;case 2:mi(v,-N[S],-N[x]);break;default:p(e!=e)}switch(h(T,_,L,A,O,M,S,1,x)){case 0:break;case 1:mi(v,+N[S],+N[x]);break;case 2:mi(v,+N[S],-N[x]);break;default:p(e!=e)}}}}return d("The conflict graph has 2*"+v.nb+" vertices and "+v.ne+" edges"),v}function mi(e,t,n){var r;p(t!=n),t>0?(p(1<=t&&t<=e.n),t=e.vert[t],p(t!=0)):(t=-t,p(1<=t&&t<=e.n),t=e.vert[t],p(t!=0),t+=e.nb),n>0?(p(1<=n&&n<=e.n),n=e.vert[n],p(n!=0)):(n=-n,p(1<=n&&n<=e.n),n=e.vert[n],p(n!=0),n+=e.nb),t<n&&(r=t,t=n,n=r),r=(t-1)*(t-2)/2+(n-1),e.a[r/u]|=1<<u-1-r%u,e.ne++}function gi(e,t,n,r){function i(e,t,n){return t==n?0:t>n?s(e,t,n):s(e,n,t)}function s(e,t,n){return o(e,t*(t-1)/2+n)}function o(e,t){return e.a[t/u]&1<<u-1-t%u}function a(e,t,n,r,s,o){var u,f,l,c,h,p,d,v;v=new Array(e.n);if(t<=0){t==0&&(e.set[r++]=n[0],s+=o);if(s>e.record){e.record=s,e.rec_level=r;for(u=0;u<r;u++)e.rec[u+1]=e.set[u]}return}for(u=t;u>=0;u--){if(r==0&&u<t)return;l=n[u];if(r>0&&e.clique[l]<=e.record-s)return;e.set[r]=l,c=s+e.wt[l+1],o-=e.wt[l+1];if(o<=e.record-c)return;p=0,d=0,h=0;while(d<n+u)f=n[d],d++,i(e,f,l)&&(v[p]=f,p++,h+=e.wt[f+1]);if(h<=e.record-c)continue;a(e,p-1,v,r+1,c,h)}}function f(e,t,n,r){var s={},o,u,f,l,c,h,p,v,m,g;s.n=e,s.wt=t,s.a=n,s.record=0,s.rec_level=0,s.rec=r,s.clique=new Array(s.n),s.set=new Array(s.n),p=new Array(s.n),v=new Array(s.n),m=new Array(s.n),g=b();for(o=0;o<s.n;o++){v[o]=0;for(u=0;u<s.n;u++)i(s,o,u)&&(v[o]+=s.wt[u+1])}for(o=0;o<s.n;o++)p[o]=0;for(o=s.n-1;o>=0;o--){l=-1,c=-1;for(u=0;u<s.n;u++)!p[u]&&(s.wt[u+1]>l||s.wt[u+1]==l&&v[u]>c)&&(l=s.wt[u+1],c=v[u],f=u);m[o]=f,p[f]=1;for(u=0;u<s.n;u++)!p[u]&&u!=f&&i(s,f,u)&&(v[u]-=s.wt[f+1])}h=0;for(o=0;o<s.n;o++)h+=s.wt[m[o]+1],a(s,o,m,0,0,h),s.clique[m[o]]=s.record,w(b(),g)>=4.999&&(d("level = "+o+1+" ("+s.n+"); best = "+s.record+""),g=b());for(o=1;o<=s.rec_level;o++)r[o]++;return s.rec_level}var l=nf(e),c,h,v,m,g,y=0,E,S,x,T,N,C;E=new Array(1+2*t.nb),S=new Array(1+2*t.nb),C=new Array(1+l);for(h=1;h<=t.nb;h++)c=t.orig[h],x=Rf(e,c),g=100*x+.5|0,g<0&&(g=0),g>100&&(g=100),E[h]=g,E[t.nb+h]=100-g;m=f(2*t.nb,E,t.a,S),T=0;for(h=1;h<=m;h++)v=S[h],p(1<=v&&v<=2*t.nb),v<=t.nb?(c=t.orig[v],x=Rf(e,c),T+=x):(c=t.orig[v-t.nb],x=Rf(e,c),T+=1-x);if(T>=1.01){for(c=1;c<=l;c++)C[c]=0;N=1;for(h=1;h<=m;h++)v=S[h],v<=t.nb?(c=t.orig[v],p(1<=c&&c<=l),C[c]+=1):(c=t.orig[v-t.nb],p(1<=c&&c<=l),C[c]-=1,N-=1);p(y==0);for(c=1;c<=l;c++)C[c]!=0&&(y++,n[y]=c,r[y]=C[c]);n[0]=0,r[0]=N}return y}function yi(e){var t=e.mip;return p(t!=null),vi(t)}function bi(e,t){var n=nf(e.mip),r,i,s;p(t!=null),i=new Array(1+n),s=new Array(1+n),r=gi(e.mip,t,i,s),r>0&&jn(e,null,Vs,0,r,i,s,Ri,s[0])}function wi(e,t){var n;return e.parm.br_tech==Ls?n=Ei(e,t):e.parm.br_tech==As?n=Si(e,t):e.parm.br_tech==Os?n=xi(e,t):e.parm.br_tech==Ms?n=Ti(e,t):e.parm.br_tech==_s?n=Li(e,t):p(e!=e),n}function Ei(e,t){var n,r,i;for(n=1;n<=e.n;n++)if(e.non_int[n])break;return p(1<=n&&n<=e.n),i=Rt(e.mip,n),i-Math.floor(i)<Math.ceil(i)-i?r=ro:r=io,t(r),n}function Si(e,t){var n,r,i;for(n=e.n;n>=1;n--)if(e.non_int[n])break;return p(1<=n&&n<=e.n),i=Rt(e.mip,n),i-Math.floor(i)<Math.ceil(i)-i?r=ro:r=io,t(r),n}function xi(e,t){var r,i,s,o,u,a;i=0,u=n;for(r=1;r<=e.n;r++)e.non_int[r]&&(o=Rt(e.mip,r),a=Math.floor(o)+.5,u>Math.abs(o-a)&&(i=r,u=Math.abs(o-a),o<a?s=ro:s=io));return t(s),i}function Ti(e,t){var r=e.mip,i=r.m,s=r.n,o=e.non_int,u,a,f,l,c,h,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A;p(Dt(r)==us),g=new Array(1+s),A=new Array(1+s),a=0,L=-1;for(u=1;u<=s;u++){if(!o[u])continue;y=Rt(r,u),v=dn(r,i+u,g,A);for(h=-1;h<=1;h+=2){f=bn(r,v,g,A,h,1e-9),f!=0&&(f=g[f]);if(f==0)x=e.mip.dir==Pi?+n:-n;else{for(l=1;l<=v;l++)if(g[l]==f)break;p(1<=l&&l<=v),w=A[l],E=(h<0?Math.floor(y):Math.ceil(y))-y,S=E/w,f>i&&Xt(r,f-i)!=Bi&&Math.abs(S-Math.floor(S+.5))>.001&&(S>0?S=Math.ceil(S):S=Math.floor(S)),f<=i?(m=jt(r,f),b=It(r,f)):(m=qt(r,f-i),b=Ut(r,f-i));switch(e.mip.dir){case Pi:if(m==Xi&&b<0||m==Vi&&b>0||m==$i)b=0;break;case Hi:if(m==Xi&&b>0||m==Vi&&b<0||m==$i)b=0;break;default:p(e!=e)}x=b*S}switch(e.mip.dir){case Pi:p(x>=0);break;case Hi:p(x<=0);break;default:p(e!=e)}h<0?T=x:N=x}if(L<Math.abs(T)||L<Math.abs(N)){a=u,Math.abs(T)<Math.abs(N)?(c=ro,L=Math.abs(N)):(c=io,L=Math.abs(T)),C=T,k=N;if(L==n)break}}return p(1<=a&&a<=s),L<1e-6*(1+.001*Math.abs(r.obj_val))?(a=xi(e,t),a):(e.parm.msg_lev>=ms&&(d("branch_drtom: column "+a+" chosen to branch on"),Math.abs(C)==n?d("branch_drtom: down-branch is infeasible"):d("branch_drtom: down-branch bound is "+(Hf(r)+C)+""),Math.abs(k)==n?d("branch_drtom: up-branch   is infeasible"):d("branch_drtom: up-branch   bound is "+(Hf(r)+k)+"")),t(c),a)}function Ni(e){var t=e.n,n,r={};r.dn_cnt=new Array(1+t),r.dn_sum=new Array(1+t),r.up_cnt=new Array(1+t),r.up_sum=new Array(1+t);for(n=1;n<=t;n++)r.dn_cnt[n]=r.up_cnt[n]=0,r.dn_sum[n]=r.up_sum[n]=0;return r}function Ci(e){var t,n,r,i,s=e.pcost;p(s!=null),p(e.curr!=null);if(e.curr.up==null)return;t=e.curr.up.br_var,p(1<=t&&t<=e.n),n=e.mip.col[t].prim-e.curr.up.br_val,p(n!=0),r=e.mip.obj_val-e.curr.up.lp_obj,i=Math.abs(r/n),n<0?(s.dn_cnt[t]++,s.dn_sum[t]+=i):(s.up_cnt[t]++,s.up_sum[t]+=i)}function ki(e){var t=e.pcost;p(t!=null),e.pcost=null}function Li(e,t){function r(e,t,r){var i,s={},o,u;return p(Dt(e)==us),i=H(),Z(i,e,0),W(i,t,zi,r,r),_t(s),s.msg_lev=hs,s.meth=bs,s.it_lim=30,s.out_dly=1e3,s.meth=bs,o=Mt(i,s),o==0||o==ho?Pt(i)==os?u=n:Ht(i)==is?(e.dir==Pi?u=i.obj_val-e.obj_val:e.dir==Hi?u=e.obj_val-i.obj_val:p(e!=e),u<1e-6*(1+.001*Math.abs(e.obj_val))&&(u=0)):u=0:u=0,u}function i(e,t,i){var s=e.pcost,o,u,a;p(s!=null),p(1<=t&&t<=e.n);if(i==ro){if(s.dn_cnt[t]==0){o=e.mip.col[t].prim,u=r(e.mip,t,Math.floor(o));if(u==n)return a=n,a;s.dn_cnt[t]=1,s.dn_sum[t]=u/(o-Math.floor(o))}a=s.dn_sum[t]/s.dn_cnt[t]}else if(i==io){if(s.up_cnt[t]==0){o=e.mip.col[t].prim,u=r(e.mip,t,Math.ceil(o));if(u==n)return a=n,a;s.up_cnt[t]=1,s.up_sum[t]=u/(Math.ceil(o)-o)}a=s.up_sum[t]/s.up_cnt[t]}else p(i!=i);return a}function s(e){var t=e.pcost,n,r=0,i=0;for(n=1;n<=e.n;n++)qn(e,n)&&(r++,t.dn_cnt[n]>0&&t.up_cnt[n]>0&&i++);d("Pseudocosts initialized for "+i+" of "+r+" variables")}var o=b(),u,a,f,l,c,h,v,m,g;e.pcost==null&&(e.pcost=Ni(e)),a=0,g=-1;for(u=1;u<=e.n;u++){if(!qn(e,u))continue;l=e.mip.col[u].prim,c=i(e,u,ro);if(c==n)return a=u,f=ro,t(f),a;h=c*(l-Math.floor(l)),c=i(e,u,io);if(c==n)return a=u,f=io,t(f),a;v=c*(Math.ceil(l)-l),m=h>v?h:v,g<m&&(g=m,a=u,f=h<=v?ro:io),e.parm.msg_lev>=$s&&w(b(),o)>=10&&(s(e),o=b())}return g==0?(a=xi(e,t),a):(t(f),a)}function Ai(e){var t=e.mip,r=t.n,i=null,o=null,u=null,a,f={},l,c,h,v,m,g,S,x,T,N;const C=0,k=1,L=2,A=3,O=4,M=5;var _=C;for(;;){var D=null;switch(_){case C:p(Dt(t)==us);if(e.curr.level!=0||e.curr.solved!=1){D=M;break}g=0;for(l=1;l<=r;l++){a=t.col[l];if(a.kind==Bi)continue;if(a.type==zi)continue;p(a.kind==ji);if(a.type!=Ui||a.lb!=0||a.ub!=1){e.parm.msg_lev>=vs&&d("FPUMP heuristic cannot be applied due to general integer variables"),D=M;break}g++}if(D!=null)break;if(g==0){D=M;break}e.parm.msg_lev>=vs&&d("Applying FPUMP heuristic..."),o=new Array(1+g),y(o,1,g),c=0;for(l=1;l<=r;l++)a=t.col[l],a.kind==ji&&a.type==Ui&&(o[++c].j=l);p(c==g),i=H();case k:Z(i,t,Js);if(t.mip_stat==is){var P,B,j;I(i,1),P=new Array(1+r),B=new Array(1+r);for(l=1;l<=r;l++)P[l]=l,B[l]=t.col[l].coef;V(i,i.m,r,P,B),j=.1*t.obj_val+.9*t.mip_obj,t.dir==Pi?z(i,i.m,Ri,0,j-t.c0):t.dir==Hi?z(i,i.m,qi,j-t.c0,0):p(t!=t)}m=0;for(c=1;c<=g;c++)o[c].x=-1;case L:m++,e.parm.msg_lev>=vs&&d("Pass "+m+""),T=n,v=0;if(m>1){var F,q;u==null&&(u=Iw());for(c=1;c<=g;c++)l=o[c].j,a=i.col[l],F=Ww(u,-0.3,.7),F<0&&(F=0),q=Math.abs(o[c].x-a.prim),q+F>.5&&(o[c].x=1-o[c].x);D=O;break};case A:x=1;for(c=1;c<=g;c++)a=i.col[o[c].j],a.prim<.5?h=0:h=1,o[c].x!=h&&(x=0,o[c].x=h);if(x){for(c=1;c<=g;c++)a=i.col[o[c].j],o[c].d=Math.abs(a.prim-o[c].x);E(o,1,g,function(e,t){return e.d>t.d?-1:e.d<t.d?1:0});for(c=1;c<=g;c++){if(c>=5&&o[c].d<.35||c>=10)break;o[c].x=1-o[c].x}};case O:if(e.parm.tm_lim<s&&e.parm.tm_lim-1<=1e3*w(b(),e.tm_beg)){D=M;break}i.dir=Pi,i.c0=0;for(l=1;l<=r;l++)i.col[l].coef=0;for(c=1;c<=g;c++)l=o[c].j,o[c].x==0?i.col[l].coef=1:(i.col[l].coef=-1,i.c0+=1);_t(f),e.parm.msg_lev<=ps?f.msg_lev=e.parm.msg_lev:e.parm.msg_lev<=vs&&(f.msg_lev=ds,f.out_dly=1e4),S=Mt(i,f);if(S!=0){e.parm.msg_lev>=ps&&d("Warning: glp_simplex returned "+S+""),D=M;break}S=Dt(i);if(S!=us){e.parm.msg_lev>=ps&&d("Warning: glp_get_status returned "+S+""),D=M;break}e.parm.msg_lev>=ms&&d("delta = "+i.obj_val+""),N=.3*e.parm.tol_int;for(c=1;c<=g;c++){a=i.col[o[c].j];if(N<a.prim&&a.prim<1-N)break}if(c>g){var R=new Array(1+r);for(l=1;l<=r;l++)R[l]=i.col[l].prim,t.col[l].kind==ji&&(R[l]=Math.floor(R[l]+.5));i.c0=t.c0,i.dir=t.dir;for(c=1;c<=g;c++)i.col[o[c].j].lb=R[o[c].j],i.col[o[c].j].ub=R[o[c].j],i.col[o[c].j].type=zi;for(l=1;l<=r;l++)i.col[l].coef=t.col[l].coef;S=Mt(i,f);if(S!=0){e.parm.msg_lev>=ps&&d("Warning: glp_simplex returned "+S+""),D=M;break}S=Dt(i);if(S!=us){e.parm.msg_lev>=ps&&d("Warning: glp_get_status returned "+S+""),D=M;break}for(l=1;l<=r;l++)t.col[l].kind!=ji&&(R[l]=i.col[l].prim);S=zn(e,R);if(S==0){if(Rr(e,e.curr.bound)){D=k;break}D=M;break}}T==n||i.obj_val<=T-1e-6*(1+T)?(v=0,T=i.obj_val):v++;if(v<3){D=A;break}if(m<5){D=L;break};case M:}if(D==null)break;_=D}}function Oi(e){function t(e,t,n){var r,i=0,s=0,u=0,a;for(r=e.ptr;r!=null;r=r.next)n[r.j]=r.val,s+=r.val*r.val;for(r=t.ptr;r!=null;r=r.next)i+=n[r.j]*r.val,u+=r.val*r.val;for(r=e.ptr;r!=null;r=r.next)n[r.j]=0;return a=Math.sqrt(s)*Math.sqrt(u),a<o*o&&(a=o),i/a}var r,i,s,u,a,f,l,c,h,d,v,m;p(e.curr!=null),r=e.local,p(r!=null),p(r.size>0),u=new Array(1+r.size),d=new Array(1+e.n),v=new Array(1+e.n),m=new Array(1+e.n);for(a=1;a<=e.n;a++)m[a]=0;for(a=0,i=r.head;i!=null;i=i.next)a++,u[a].cut=i,u[a].flag=0;p(a==r.size);for(a=1;a<=r.size;a++){var g,y=null,b=null;i=u[a].cut,c=0,g=0;for(s=i.ptr;s!=null;s=s.next)p(1<=s.j&&s.j<=e.n),c++,d[c]=s.j,v[c]=s.val,g+=s.val*s.val;g<o*o&&(g=o),c=mn(e.mip,c,d,v),h=wn(e.mip,c,d,v,i.type,i.rhs,1e-9,function(e,t,n,r,i,s){y=i,b=s}),h==0?(u[a].eff=Math.abs(y)/Math.sqrt(g),e.mip.dir==Pi?(b<0&&(b=0),u[a].deg=+b):(b>0&&(b=0),u[a].deg=-b)):h==1?u[a].eff=u[a].deg=0:h==2?(u[a].eff=1,u[a].deg=n):p(h!=h),u[a].deg<.01&&(u[a].deg=0)}E(u,1,r.size,function(e,t){if(e.deg==0&&t.deg==0){if(e.eff>t.eff)return-1;if(e.eff<t.eff)return 1}else{if(e.deg>t.deg)return-1;if(e.deg<t.deg)return 1}return 0}),l=e.curr.level==0?90:10,l>r.size&&(l=r.size);for(a=1;a<=l;a++){var w;if(u[a].deg<.01&&u[a].eff<.01)continue;for(f=1;f<a;f++)if(u[f].flag&&t(u[a].cut,u[f].cut,m)>.9)break;if(f<a)continue;i=u[a].cut,u[a].flag=1,w=I(e.mip,1),i.name!=null&&R(e.mip,w,i.name),p(e.mip.row[w].origin==Us),e.mip.row[w].klass=i.klass,c=0;for(s=i.ptr;s!=null;s=s.next)c++,d[c]=s.j,v[c]=s.val;V(e.mip,w,c,d,v),p(i.type==qi||i.type==Ri),z(e.mip,w,i.type,i.rhs,i.rhs)}}function Mi(e){function t(e){var t,r,i;r=0,i=n;for(t=e.head;t!=null;t=t.next)p(t.up!=null),i>t.up.ii_sum&&(r=t.p,i=t.up.ii_sum);return r}function r(e){var t,r,i,s,o,u;p(e.mip.mip_stat==is),t=e.slot[1].node,p(t!=null),p(t.ii_sum>0),o=(e.mip.mip_obj-t.bound)/t.ii_sum,i=0,s=n;for(r=e.head;r!=null;r=r.next)p(r.up!=null),u=r.up.bound+o*r.up.ii_sum,e.mip.dir==Hi&&(u=-u),s>u&&(i=r.p,s=u);return i}function i(e){var t,r=null,i,s;switch(e.mip.dir){case Pi:i=+n;for(t=e.head;t!=null;t=t.next)i>t.bound&&(i=t.bound);p(i!=+n),s=.001*(1+Math.abs(i));for(t=e.head;t!=null;t=t.next)if(t.bound<=i+s){p(t.up!=null);if(r==null||r.up.ii_sum>t.up.ii_sum)r=t}break;case Hi:i=-n;for(t=e.head;t!=null;t=t.next)i<t.bound&&(i=t.bound);p(i!=-n),s=.001*(1+Math.abs(i));for(t=e.head;t!=null;t=t.next)if(t.bound>=i-s){p(t.up!=null);if(r==null||r.lp_obj<t.lp_obj)r=t}break;default:p(e!=e)}return p(r!=null),r.p}var s;return e.parm.bt_tech==Ds?(p(e.tail!=null),s=e.tail.p):e.parm.bt_tech==Ps?(p(e.head!=null),s=e.head.p):e.parm.bt_tech==Hs?s=i(e):e.parm.bt_tech==Bs?e.mip.mip_stat==rs?s=t(e):s=r(e):p(e!=e),s}function ma(e,t){var n;p(e>0&&t>0);while(t>0)n=e%t,e=t,t=n;return e}function ga(e,t){var n=0,r;p(e>0);for(r=1;r<=e;r++){p(t[r]>0),r==1?n=t[1]:n=ma(n,t[r]);if(n==1)break}return n}function ya(e){p(e>0);var t=Math.floor(Math.log(e)/Math.log(2))+1,n=e/Math.pow(2,t);return Math.pow(2,n<=.75?t-1:t)}function ba(e,t){var n=Number(e);if(isNaN(n))return 2;switch(n){case Number.POSITIVE_INFINITY:case Number.NEGATIVE_INFINITY:return 1;default:return t(n),0}}function wa(e,t){var n=Number(e);if(isNaN(n))return 2;switch(n){case Number.POSITIVE_INFINITY:case Number.NEGATIVE_INFINITY:return 1;default:return n%1==0?(t(n),0):2}}function Ea(e,t,n){var r,i,s,o;return 1<=e&&e<=31&&1<=t&&t<=12&&1<=n&&n<=4e3?(t>=3?t-=3:(t+=9,n--),r=n/100|0,i=n-100*r,s=146097*r/4|0,s+=1461*i/4|0,s+=(153*t+2)/5|0,s+=e+1721119,Sa(s,function(e){o=e}),e!=o&&(s=-1),s):-1}function Sa(e,t){var n,r,i,s=0;return 1721426<=e&&e<=3182395?(e-=1721119,i=(4*e-1)/146097|0,e=(4*e-1)%146097,n=e/4|0,e=(4*n+3)/1461|0,n=(4*n+3)%1461,n=(n+4)/4|0,r=(5*n-3)/153|0,n=(5*n-3)%153,n=(n+5)/5|0,i=100*i+e,r<=9?r+=3:(r-=9,i++),t(n,r,i),s):1}function Na(){var e;return Ta&&d("lpf_create_it: warning: debug mode enabled"),e={},e.valid=0,e.m0_max=e.m0=0,e.luf=Xl(),e.m=0,e.B=null,e.n_max=50,e.n=0,e.R_ptr=e.R_len=null,e.S_ptr=e.S_len=null,e.scf=null,e.P_row=e.P_col=null,e.Q_row=e.Q_col=null,e.v_size=1e3,e.v_ptr=0,e.v_ind=null,e.v_val=null,e.work1=e.work2=null,e}function Ca(e,t,n,r,i){var s,o;if(Ta)var u,f,l,c,d,v;p(n==n),t<1&&h("lpf_factorize: m = "+t+"; invalid parameter"),t>a&&h("lpf_factorize: m = "+t+"; matrix too big"),e.m0=e.m=t,e.valid=0,e.R_ptr==null&&(e.R_ptr=new Array(1+e.n_max)),e.R_len==null&&(e.R_len=new Array(1+e.n_max)),e.S_ptr==null&&(e.S_ptr=new Array(1+e.n_max)),e.S_len==null&&(e.S_len=new Array(1+e.n_max)),e.scf==null&&(e.scf=Gw(e.n_max)),e.v_ind==null&&(e.v_ind=new Array(1+e.v_size)),e.v_val==null&&(e.v_val=new Array(1+e.v_size)),e.m0_max<t&&(e.m0_max=t+100,e.P_row=new Array(1+e.m0_max+e.n_max),e.P_col=new Array(1+e.m0_max+e.n_max),e.Q_row=new Array(1+e.m0_max+e.n_max),e.Q_col=new Array(1+e.m0_max+e.n_max),e.work1=new Array(1+e.m0_max+e.n_max),e.work2=new Array(1+e.m0_max+e.n_max));switch(tc(e.luf,t,r,i)){case 0:break;case zl:return o=xa,o;case Wl:return o=LPF_ECOND,o;default:p(e!=e)}e.valid=1;if(Ta){p(t<=32767),e.B=d=new Array(1+t*t),c=new Array(1+t),v=new Array(1+t);for(s=1;s<=t*t;s++)d[s]=0;for(f=1;f<=t;f++){l=r(i,f,c,v),p(0<=l&&l<=t);for(s=1;s<=l;s++)u=c[s],p(1<=u&&u<=t),p(d[(u-1)*t+f]==0),p(v[s]!=0),d[(u-1)*t+f]=v[s]}}e.n=0,fE(e.scf);for(s=1;s<=t;s++)e.P_row[s]=e.P_col[s]=s,e.Q_row[s]=e.Q_col[s]=s;return e.v_ptr=1,o=0,o}function ka(e,t,n,r,i){var s=e.n,o=e.R_ptr,u=e.R_len,a=e.v_ind,f=e.v_val,l,c,h,p,d;for(l=1;l<=s;l++){if(r[l+i]==0)continue;d=n*r[l+i],c=o[l],h=c+u[l];for(p=c;p<h;p++)t[a[p]]+=d*f[p]}}function La(e,t,n,r,i){var s=e.n,o=e.R_ptr,u=e.R_len,a=e.v_ind,f=e.v_val,l,c,h,p,d;for(l=1;l<=s;l++){d=0,c=o[l],h=c+u[l];for(p=c;p<h;p++)d+=f[p]*i[a[p]];t[l+n]+=r*d}}function Aa(e,t,n,r,i){var s=e.n,o=e.S_ptr,u=e.S_len,a=e.v_ind,f=e.v_val,l,c,h,p,d;for(l=1;l<=s;l++){d=0,c=o[l],h=c+u[l];for(p=c;p<h;p++)d+=f[p]*i[a[p]];t[l+n]+=r*d}}function Oa(e,t,n,r,i){var s=e.n,o=e.S_ptr,u=e.S_len,a=e.v_ind,f=e.v_val,l,c,h,p,d;for(l=1;l<=s;l++){if(r[l+i]==0)continue;d=n*r[l+i],c=o[l],h=c+u[l];for(p=c;p<h;p++)t[a[p]]+=d*f[p]}}function _a(e,t){var n=e.m0,r=e.m,i=e.n,s=e.P_col,o=e.Q_col,u=e.work1,a=u,f=u,l,c;if(Ta)var d;e.valid||h("lpf_ftran: the factorization is not valid"),p(0<=r&&r<=n+i);if(Ta){d=new Array(1+r);for(l=1;l<=r;l++)d[l]=t[l]}for(l=1;l<=n+i;l++)u[l]=(c=s[l])<=r?t[c]:0;nc(e.luf,0,a),Aa(e,f,n,-1,a),aE(e.scf,0,f,n),ka(e,a,-1,f,n),rc(e.luf,0,a);for(l=1;l<=r;l++)t[l]=u[o[l]];Ta&&Ma(e,0,t,d)}function Da(e,t){var n=e.m0,r=e.m,i=e.n,s=e.P_row,o=e.Q_row,u=e.work1,a=u,f=u,l,c;if(Ta)var d;e.valid||h("lpf_btran: the factorization is not valid"),p(0<=r&&r<=n+i);if(Ta){d=new Array(1+r);for(l=1;l<=r;l++)d[l]=t[l]}for(l=1;l<=n+i;l++)u[l]=(c=o[l])<=r?t[c]:0;rc(e.luf,1,a),La(e,f,n,-1,a),aE(e.scf,1,f,n),Oa(e,a,-1,f,n),nc(e.luf,1,a);for(l=1;l<=r;l++)t[l]=u[s[l]];Ta&&Ma(e,1,t,d)}function Pa(e,t){var n=e.v_size,r=e.v_ptr-1,i=e.v_ind,s=e.v_val;p(n<t);while(n<t)n+=n;e.v_size=n,e.v_ind=new Array(1+n),e.v_val=new Array(1+n),p(r>=0),m(e.v_ind,1,i,1,r),m(e.v_val,1,s,1,r)}function Ha(e,t,n,r,i,s,o){var u=e.m0,a=e.m;if(Ta)var f=e.B;var l=e.n,c=e.R_ptr,d=e.R_len,v=e.S_ptr,m=e.S_len,g=e.P_row,y=e.P_col,b=e.Q_row,w=e.Q_col,E=e.v_ptr,S=e.v_ind,x=e.v_val,T=e.work2,N=e.work1,C=N,k=N,L=e.work2,A=L,O=L,M=k,_=O,D,P,H,B,j;p(n==n),e.valid||h("lpf_update_it: the factorization is not valid"),1<=t&&t<=a||h("lpf_update_it: j = "+t+"; column number out of range"),p(0<=a&&a<=u+l);if(l==e.n_max)return e.valid=0,j=LPF_ELIMIT,j;for(P=1;P<=a;P++)T[P]=0;for(B=1;B<=r;B++)P=i[s+B],1<=P&&P<=a||h("lpf_update_it: ind["+B+"] = "+P+"; row number out of range"),T[P]!=0&&h("lpf_update_it: ind["+B+"] = "+P+"; duplicate row index not allowed"),o[B]==0&&h("lpf_update_it: val["+B+"] = "+o[B]+"; zero element not allowed"),T[P]=o[B];if(Ta)for(P=1;P<=a;P++)f[(P-1)*a+t]=T[P];for(P=1;P<=u+l;P++)N[P]=(H=y[P])<=a?T[H]:0;for(P=1;P<=u+l;P++)L[P]=0;L[w[t]]=1,nc(e.luf,0,C),rc(e.luf,1,A),e.v_size<E+u+u&&(Pa(e,E+u+u),S=e.v_ind,x=e.v_val),c[l+1]=E;for(P=1;P<=u;P++)C[P]!=0&&(S[E]=P,x[E]=C[P],E++);d[l+1]=E-e.v_ptr,e.v_ptr=E,v[l+1]=E;for(P=1;P<=u;P++)A[P]!=0&&(S[E]=P,x[E]=A[P],E++);m[l+1]=E-e.v_ptr,e.v_ptr=E,Aa(e,M,0,-1,C),La(e,_,0,-1,A),D=0;for(P=1;P<=u;P++)D-=A[P]*C[P];switch(sE(e.scf,M,u,_,u,D)){case 0:break;case $w:return e.valid=0,j=xa,j;case Jw:p(e!=e);default:p(e!=e)}return g[u+l+1]=y[u+l+1]=u+l+1,b[u+l+1]=w[u+l+1]=u+l+1,P=w[t],H=w[u+l+1],b[P]=u+l+1,w[u+l+1]=P,b[H]=t,w[t]=H,e.n++,p(e.n<=e.n_max),j=0,j}function Ba(){return H()}function ja(e,t){B(e,t)}function Fa(e,t){j(e,t)}function Ia(e,t){F(e,t-Uo+Pi)}function qa(e,t){return I(e,t)}function Ra(e,t){return q(e,t)}function Ua(e,t,n){R(e,t,n)}function za(e,t,n){U(e,t,n)}function Wa(e,t,n,r,i){z(e,t,n-jo+Ii,r,i)}function Xa(e,t,n,r,i){W(e,t,n-jo+Ii,r,i)}function Va(e,t,n){X(e,t,n)}function $a(e,t,n,r,i){V(e,t,n,r,i)}function Ja(e,t,n,r,i){$(e,t,n,r,i)}function Ka(e,t,n,r,i){J(e,t,n,r,i)}function Qa(e,t,n){G(e,t,n)}function Ga(e,t,n){Y(e,t,n)}function Ya(e){return nt(e)}function Za(e){return rt(e)}function ef(e){return it(e)-Pi+Uo}function tf(e){return st(e)}function nf(e){return ot(e)}function rf(e,t){return ut(e,t)}function sf(e,t){return at(e,t)}function of(e,t){return ft(e,t)-Ii+jo}function uf(e,t){var r=lt(e,t);return r==-n&&(r=0),r}function af(e,t){var r=ct(e,t);return r==+n&&(r=0),r}function ff(e,t,n){n(of(e,t),uf(e,t),af(e,t))}function lf(e,t){return ht(e,t)-Ii+jo}function cf(e,t){var r=pt(e,t);return r==-n&&(r=0),r}function hf(e,t){var r=dt(e,t);return r==+n&&(r=0),r}function pf(e,t,n){n(lf(e,t),cf(e,t),hf(e,t))}function df(e,t){return vt(e,t)}function vf(e){return mt(e)}function mf(e,t,n,r){return gt(e,t,n,r)}function gf(e,t,n,r){return yt(e,t,n,r)}function yf(e){bt(e)}function bf(e,t){return wt(e,t)}function wf(e,t){return Et(e,t)}function Ef(e){St(e)}function Sf(e){switch(Tl(e,Pu)){case 0:kt(e);break;case 1:lE(e,Qi);break;case 2:lE(e,Ki);break;case 3:lE(e,Ki|Qi);break;default:p(e!=e)}}function xf(e){kt(e)}function Tf(e,t,n){Lt(e,t,n-Yo+Wi)}function Nf(e,t,n){At(e,t,n-Yo+Wi)}function Cf(e){Ot(e)}function kf(e){Lr(e,0)}function Lf(e){Or(e)}function Af(e,t){_t(t);switch(Tl(e,Du)){case 0:t.msg_lev=hs;break;case 1:t.msg_lev=ps;break;case 2:t.msg_lev=ds;break;case 3:t.msg_lev=vs;break;default:p(e!=e)}switch(Tl(e,Hu)){case 0:t.meth=gs;break;case 1:t.meth=bs;break;default:p(e!=e)}switch(Tl(e,Bu)){case 0:t.pricing=ws;break;case 1:t.pricing=Es;break;default:p(e!=e)}Cl(e,ju)==0?t.r_test=Ss:t.r_test=xs,t.tol_bnd=Cl(e,Fu),t.tol_dj=Cl(e,Iu),t.tol_piv=Cl(e,qu),t.obj_ll=Cl(e,Uu),t.obj_ul=Cl(e,zu),Tl(e,Wu)<0?t.it_lim=s:t.it_lim=Tl(e,Wu),Cl(e,Vu)<0?t.tm_lim=s:t.tm_lim=1e3*Cl(e,Vu)|0,t.out_frq=Tl(e,$u),t.out_dly=1e3*Cl(e,Ju)|0;switch(Tl(e,oa)){case 0:t.presolve=Js;break;case 1:t.presolve=$s;break;default:p(e!=e)}}function Of(e){var t={},n;Af(e,t),n=Mt(e,t);switch(n){case 0:n=gu;break;case so:case oo:case uo:case ao:n=Eu;break;case fo:n=Lu;break;case lo:n=Su;break;case co:n=xu;break;case ho:n=Tu;break;case po:n=Nu;break;case vo:n=Ou;break;case mo:n=Mu;break;default:p(n!=n)}return n}function Mf(e){var t={},n;Af(e,t),n=glp_exact(e,t);switch(n){case 0:n=gu;break;case so:case oo:case ao:case fo:n=Eu;break;case ho:n=Tu;break;case po:n=Nu;break;default:p(n!=n)}return n}function _f(e){var t;switch(Dt(e)){case us:t=cu;break;case is:t=hu;break;case ss:t=pu;break;case os:t=du;break;case as:t=vu;break;case rs:t=mu;break;default:p(e!=e)}return t}function Df(e){return Pt(e)-rs+Wo}function Pf(e){return Ht(e)-rs+Jo}function Hf(e){return Bt(e)}function Bf(e,t){return jt(e,t)-Wi+Yo}function jf(e,t){return Ft(e,t)}function Ff(e,t){return It(e,t)}function If(e,t,n){n(Bf(e,t),jf(e,t),Ff(e,t))}function qf(e,t){return qt(e,t)-Wi+Yo}function Rf(e,t){return Rt(e,t)}function Uf(e,t){return Ut(e,t)}function zf(e,t,n){n(qf(e,t),Rf(e,t),Uf(e,t))}function Wf(e){return zt(e)}function Xf(e,t,n){p(t==t),en(e,es,No,function(e,t,r,i){n.pe_ae_max=e,n.pe_ae_row=t,n.pe_re_max=r,n.pe_re_row=i,r<=1e-9?n.pe_quality="H":r<=1e-6?n.pe_quality="M":r<=.001?n.pe_quality="L":n.pe_quality="?"}),en(e,es,Co,function(e,t,r,i){n.pb_ae_max=e,n.pb_ae_ind=t,n.pb_re_max=r,n.pb_re_ind=i,r<=1e-9?n.pb_quality="H":r<=1e-6?n.pb_quality="M":r<=.001?n.pb_quality="L":n.pb_quality="?"}),en(e,es,ko,function(t,r,i,s){n.de_ae_max=t,r==0?n.de_ae_col=0:n.de_ae_col=r-e.m,n.de_re_max=i,s==0?n.de_re_col=0:n.de_re_col=r-e.m,i<=1e-9?n.de_quality="H":i<=1e-6?n.de_quality="M":i<=.001?n.de_quality="L":n.de_quality="?"}),en(e,es,Lo,function(e,t,r,i){n.db_ae_max=e,n.db_ae_ind=t,n.db_re_max=r,n.db_re_ind=i,r<=1e-9?n.db_quality="H":r<=1e-6?n.db_quality="M":r<=.001?n.db_quality="L":n.db_quality="?",n.cs_ae_max=0,n.cs_ae_ind=0,n.cs_re_max=0,n.cs_re_ind=0,n.cs_quality="H"})}function Vf(e){var t=pn(e);return t==0?t=gu:t==so?t=bu:t==oo?t=Lu:t==uo?t=Lu:p(t!=t),t}function $f(e,t,n,r){return dn(e,t,n,r)}function Jf(e,t,n,r){return vn(e,t,n,r)}function Kf(e,t,n,r){return mn(e,t,n,r)}function Qf(e,t,n,r){return gn(e,t,n,r)}function Gf(e,t,n,r,i,s){var o=yn(e,t,n,r,i,s);return p(0<=o&&o<=t),o==0?0:n[o]}function Yf(e,t,n,r,i,s){var o=bn(e,t,n,r,i,s);return p(0<=o&&o<=t),o==0?0:n[o]}function Zf(e){var t=glp_interior(e,null);switch(t){case 0:t=gu;break;case fo:t=Eu;break;case wo:t=Cu;break;case Eo:t=Au;break;case ho:t=Tu;break;case So:t=ku;break;default:p(t!=t)}return t}function el(e){var t;switch(glp_ipt_status(e)){case rs:t=ru;break;case us:t=iu;break;default:p(e!=e)}return t}function tl(e){return glp_ipt_obj_val(e)}function nl(e,t){return glp_ipt_row_prim(e,t)}function rl(e,t){return glp_ipt_row_dual(e,t)}function il(e,t){return glp_ipt_col_prim(e,t)}function sl(e,t){return glp_ipt_col_dual(e,t)}function ol(e,t){p(e==e),t!=Ho&&t!=Bo&&h("lpx_set_class: invalid problem class")}function ul(e){return Vt(e)==0?Ho:Bo}function al(e,t,n){Wt(e,t,n-su+Bi)}function fl(e,t){return Xt(e,t)==Bi?su:ou}function ll(e){return Vt(e)}function cl(e){return $t(e)}function hl(e,t){var n={},r;Kt(n);switch(Tl(e,Du)){case 0:n.msg_lev=hs;break;case 1:n.msg_lev=ps;break;case 2:n.msg_lev=ds;break;case 3:n.msg_lev=vs;break;default:p(e!=e)}switch(Tl(e,Ku)){case 0:n.br_tech=Ls;break;case 1:n.br_tech=As;break;case 2:n.br_tech=Ms;break;case 3:n.br_tech=Os;break;default:p(e!=e)}switch(Tl(e,Qu)){case 0:n.bt_tech=Ds;break;case 1:n.bt_tech=Ps;break;case 2:n.bt_tech=Bs;break;case 3:n.bt_tech=Hs;break;default:p(e!=e)}n.tol_int=Cl(e,Gu),n.tol_obj=Cl(e,Yu),Cl(e,Vu)<0||Cl(e,Vu)>1e6?n.tm_lim=s:n.tm_lim=1e3*Cl(e,Vu)|0,n.mip_gap=Cl(e,la),Tl(e,aa)&pa?n.gmi_cuts=$s:n.gmi_cuts=Js,Tl(e,aa)&da?n.mir_cuts=$s:n.mir_cuts=Js,Tl(e,aa)&ca?n.cov_cuts=$s:n.cov_cuts=Js,Tl(e,aa)&ha?n.clq_cuts=$s:n.clq_cuts=Js,n.presolve=t,Tl(e,ua)&&(n.binarize=$s),r=Jt(e,n);switch(r){case 0:r=gu;break;case vo:r=Ou;break;case mo:r=Mu;break;case ao:case go:r=Eu;break;case fo:r=Lu;break;case bo:r=_u;break;case po:r=Nu;break;default:p(r!=r)}return r}function pl(e){return hl(e,Js)}function dl(e){return hl(e,$s)}function vl(e){var t;switch(Qt(e)){case rs:t=uu;break;case us:t=au;break;case is:t=fu;break;case os:t=lu;break;default:p(e!=e)}return t}function ml(e){return Gt(e)}function gl(e,t){return Yt(e,t)}function yl(e,t){return Zt(e,t)}function bl(e,t){en(e,ns,No,function(e,n,r,i){t.pe_ae_max=e,t.pe_ae_row=n,t.pe_re_max=r,t.pe_re_row=i,r<=1e-9?t.pe_quality="H":r<=1e-6?t.pe_quality="M":r<=.001?t.pe_quality="L":t.pe_quality="?"}),en(e,ns,Co,function(e,n,r,i){t.pb_ae_max=e,t.pb_ae_ind=n,t.pb_re_max=r,t.pb_re_ind=i,r<=1e-9?t.pb_quality="H":r<=1e-6?t.pb_quality="M":r<=.001?t.pb_quality="L":t.pb_quality="?"})}function wl(e){var t=e.parms;p(t!=null),t.msg_lev=3,t.scale=1,t.dual=0,t.price=1,t.relax=.07,t.tol_bnd=1e-7,t.tol_dj=1e-7,t.tol_piv=1e-9,t.round=0,t.obj_ll=-n,t.obj_ul=+n,t.it_lim=-1,t.tm_lim=-1,t.out_frq=200,t.out_dly=0,t.branch=2,t.btrack=3,t.tol_int=1e-5,t.tol_obj=1e-7,t.mps_info=1,t.mps_obj=2,t.mps_orig=0,t.mps_wide=1,t.mps_free=0,t.mps_skip=0,t.lpt_orig=0,t.presol=0,t.binarize=0,t.use_cuts=0,t.mip_gap=0}function El(e){return e.parms==null&&(e.parms={},wl(e)),e.parms}function Sl(e){El(e),wl(e)}function xl(e,t,n){var r=El(e);switch(t){case Du:0<=n&&n<=3||h("lpx_set_int_parm: MSGLEV = "+n+"; invalid value"),r.msg_lev=n;break;case Pu:0<=n&&n<=3||h("lpx_set_int_parm: SCALE = "+n+"; invalid value"),r.scale=n;break;case Hu:n!=0&&n!=1&&h("lpx_set_int_parm: DUAL = "+n+"; invalid value"),r.dual=n;break;case Bu:n!=0&&n!=1&&h("lpx_set_int_parm: PRICE = "+n+"; invalid value"),r.price=n;break;case Ru:n!=0&&n!=1&&h("lpx_set_int_parm: ROUND = "+n+"; invalid value"),r.round=n;break;case Wu:r.it_lim=n;break;case Xu:e.it_cnt=n;break;case $u:n>0||h("lpx_set_int_parm: OUTFRQ = "+n+"; invalid value"),r.out_frq=n;break;case Ku:n!=0&&n!=1&&n!=2&&n!=3&&h("lpx_set_int_parm: BRANCH = "+n+"; invalid value"),r.branch=n;break;case Qu:n!=0&&n!=1&&n!=2&&n!=3&&h("lpx_set_int_parm: BTRACK = "+n+"; invalid value"),r.btrack=n;break;case Zu:n!=0&&n!=1&&h("lpx_set_int_parm: MPSINFO = "+n+"; invalid value"),r.mps_info=n;break;case ea:n!=0&&n!=1&&n!=2&&h("lpx_set_int_parm: MPSOBJ = "+n+"; invalid value"),r.mps_obj=n;break;case ta:n!=0&&n!=1&&h("lpx_set_int_parm: MPSORIG = "+n+"; invalid value"),r.mps_orig=n;break;case na:n!=0&&n!=1&&h("lpx_set_int_parm: MPSWIDE = "+n+"; invalid value"),r.mps_wide=n;break;case ra:n!=0&&n!=1&&h("lpx_set_int_parm: MPSFREE = "+n+"; invalid value"),r.mps_free=n;break;case ia:n!=0&&n!=1&&h("lpx_set_int_parm: MPSSKIP = "+n+"; invalid value"),r.mps_skip=n;break;case sa:n!=0&&n!=1&&h("lpx_set_int_parm: LPTORIG = "+n+"; invalid value"),r.lpt_orig=n;break;case oa:n!=0&&n!=1&&h("lpx_set_int_parm: PRESOL = "+n+"; invalid value"),r.presol=n;break;case ua:n!=0&&n!=1&&h("lpx_set_int_parm: BINARIZE = "+n+"; invalid value"),r.binarize=n;break;case aa:n&~va&&h("lpx_set_int_parm: USECUTS = "+n+"; invalid value"),r.use_cuts=n;break;case fa:t={},sn(e,t);switch(n){case 1:t.type=fs;break;case 2:t.type=ls;break;case 3:t.type=cs;break;default:h("lpx_set_int_parm: BFTYPE = "+n+"; invalid value")}un(e,t);break;default:h("lpx_set_int_parm: parm = "+t+"; invalid parameter")}}function Tl(e,t){var n=El(e),r=0;switch(t){case Du:r=n.msg_lev;break;case Pu:r=n.scale;break;case Hu:r=n.dual;break;case Bu:r=n.price;break;case Ru:r=n.round;break;case Wu:r=n.it_lim;break;case Xu:r=e.it_cnt;break;case $u:r=n.out_frq;break;case Ku:r=n.branch;break;case Qu:r=n.btrack;break;case Zu:r=n.mps_info;break;case ea:r=n.mps_obj;break;case ta:r=n.mps_orig;break;case na:r=n.mps_wide;break;case ra:r=n.mps_free;break;case ia:r=n.mps_skip;break;case sa:r=n.lpt_orig;break;case oa:r=n.presol;break;case ua:r=n.binarize;break;case aa:r=n.use_cuts;break;case fa:t={},sn(e,t);switch(t.type){case fs:r=1;break;case ls:r=2;break;case cs:r=3;break;default:p(e!=e)}break;default:h("lpx_get_int_parm: parm = "+t+"; invalid parameter")}return r}function Nl(e,t,n){var r=El(e);switch(t){case ju:0<=n&&n<=1||h("lpx_set_real_parm: RELAX = "+n+"; invalid value"),r.relax=n;break;case Fu:o<=n&&n<=.001||h("lpx_set_real_parm: TOLBND = "+n+"; invalid value"),r.tol_bnd=n;break;case Iu:o<=n&&n<=.001||h("lpx_set_real_parm: TOLDJ = "+n+"; invalid value"),r.tol_dj=n;break;case qu:o<=n&&n<=.001||h("lpx_set_real_parm: TOLPIV = "+n+"; invalid value"),r.tol_piv=n;break;case Uu:r.obj_ll=n;break;case zu:r.obj_ul=n;break;case Vu:r.tm_lim=n;break;case Ju:r.out_dly=n;break;case Gu:o<=n&&n<=.001||h("lpx_set_real_parm: TOLINT = "+n+"; invalid value"),r.tol_int=n;break;case Yu:o<=n&&n<=.001||h("lpx_set_real_parm: TOLOBJ = "+n+"; invalid value"),r.tol_obj=n;break;case la:n<0&&h("lpx_set_real_parm: MIPGAP = "+n+"; invalid value"),r.mip_gap=n;break;default:h("lpx_set_real_parm: parm = "+t+"; invalid parameter")}}function Cl(e,t){var n=El(e),r=0;switch(t){case ju:r=n.relax;break;case Fu:r=n.tol_bnd;break;case Iu:r=n.tol_dj;break;case qu:r=n.tol_piv;break;case Uu:r=n.obj_ll;break;case zu:r=n.obj_ul;break;case Vu:r=n.tm_lim;break;case Ju:r=n.out_dly;break;case Gu:r=n.tol_int;break;case Yu:r=n.tol_obj;break;case la:r=n.mip_gap;break;default:h("lpx_get_real_parm: parm = "+t+"; invalid parameter")}return r}function kl(e){var t=Ba();return glp_read_mps(t,Oo,null,e)&&(t=null),t}function Ll(e,t){return glp_write_mps(e,Oo,null,t)}function Al(e,t){return p(e==e),p(t==t),h("lpx_read_bas: operation not supported"),0}function Ol(e,t){return p(e==e),p(t==t),h("lpx_write_bas: operation not supported"),0}function Ml(e){var t=Ba();return glp_read_mps(t,Mo,null,e)&&(t=null),t}function _l(e,t){return glp_write_mps(e,Mo,null,t)}function Dl(e){var t=Ba();return dr(t,null,e)&&(t=null),t}function Pl(e,t){return vr(e,null,t)}function Hl(e,t,n){function s(){return r}var r=null,i=Xn();return $n(i,e,t!=null)?s():t!=null&&Kn(i,t)?s():Gn(i,n)?s():(r=H(),Yn(i,r),s())}function Bl(e,t){return vr(e,null,t)}function jl(e,t){return glp_print_sol(e,t)}function Fl(e,t){return Dt(e)==us&&!tn(e)&&nn(e),glp_print_ranges(e,0,null,0,t)}function Il(e,t){return glp_print_ipt(e,t)}function ql(e,t){return glp_print_mip(e,t)}function Rl(e){return tn(e)}function Ul(e,t){return glp_main(e,t)}function Xl(){var e={};return e.n_max=e.n=0,e.valid=0,e.fr_ptr=e.fr_len=null,e.fc_ptr=e.fc_len=null,e.vr_ptr=e.vr_len=e.vr_cap=null,e.vr_piv=null,e.vc_ptr=e.vc_len=e.vc_cap=null,e.pp_row=e.pp_col=null,e.qq_row=e.qq_col=null,e.sv_size=0,e.sv_beg=e.sv_end=0,e.sv_ind=null,e.sv_val=null,e.sv_head=e.sv_tail=0,e.sv_prev=e.sv_next=null,e.vr_max=null,e.rs_head=e.rs_prev=e.rs_next=null,e.cs_head=e.cs_prev=e.cs_next=null,e.flag=null,e.work=null,e.new_sva=0,e.piv_tol=.1,e.piv_lim=4,e.suhl=1,e.eps_tol=1e-15,e.max_gro=1e10,e.nnz_a=e.nnz_f=e.nnz_v=0,e.max_a=e.big_v=0,e.rank=0,e}function Vl(e){var t=e.n,n=e.vr_ptr,r=e.vr_len,i=e.vr_cap,s=e.vc_ptr,o=e.vc_len,u=e.vc_cap,a=e.sv_ind,f=e.sv_val,l=e.sv_next,c=1,h,p,d;for(d=e.sv_head;d!=0;d=l[d])if(d<=t){h=d;if(n[h]!=c)break;i[h]=r[h],c+=i[h]}else{p=d-t;if(s[p]!=c)break;u[p]=o[p],c+=u[p]}for(;d!=0;d=l[d])d<=t?(h=d,m(a,c,a,n[h],r[h]),m(f,c,f,n[h],r[h]),n[h]=c,i[h]=r[h],c+=i[h]):(p=d-t,m(a,c,a,s[p],o[p]),m(f,c,f,s[p],o[p]),s[p]=c,u[p]=o[p],c+=u[p]);e.sv_beg=c}function $l(e,t,n){var r=e.n,i=e.vr_ptr,s=e.vr_len,o=e.vr_cap,u=e.vc_cap,a=e.sv_ind,f=e.sv_val,l=e.sv_prev,c=e.sv_next,h=0,d,v,g;p(1<=t&&t<=r),p(o[t]<n);if(e.sv_end-e.sv_beg<n){Vl(e);if(e.sv_end-e.sv_beg<n)return h=1,h}return d=o[t],m(a,e.sv_beg,a,i[t],s[t]),m(f,e.sv_beg,f,i[t],s[t]),i[t]=e.sv_beg,o[t]=n,e.sv_beg+=n,v=t,l[v]==0?e.sv_head=c[v]:(g=l[v],g<=r?o[g]+=d:u[g-r]+=d,c[l[v]]=c[v]),c[v]==0?e.sv_tail=l[v]:l[c[v]]=l[v],l[v]=e.sv_tail,c[v]=0,l[v]==0?e.sv_head=v:c[l[v]]=v,e.sv_tail=v,h}function Jl(e,t,n){var r=e.n,i=e.vr_cap,s=e.vc_ptr,o=e.vc_len,u=e.vc_cap,a=e.sv_ind,f=e.sv_val,l=e.sv_prev,c=e.sv_next,h=0,d,v,g;p(1<=t&&t<=r),p(u[t]<n);if(e.sv_end-e.sv_beg<n){Vl(e);if(e.sv_end-e.sv_beg<n)return h=1,h}return d=u[t],m(a,e.sv_beg,a,s[t],o[t]),m(f,e.sv_beg,f,s[t],o[t]),s[t]=e.sv_beg,u[t]=n,e.sv_beg+=n,v=r+t,l[v]==0?e.sv_head=c[v]:(g=l[v],g<=r?i[g]+=d:u[g-r]+=d,c[l[v]]=c[v]),c[v]==0?e.sv_tail=l[v]:l[c[v]]=l[v],l[v]=e.sv_tail,c[v]=0,l[v]==0?e.sv_head=v:c[l[v]]=v,e.sv_tail=v,h}function Kl(e,t){var n=e.n_max;e.n=t;if(t<=n)return;e.n_max=n=t+100,e.fr_ptr=new Array(1+n),e.fr_len=new Array(1+n),e.fc_ptr=new Array(1+n),e.fc_len=new Array(1+n),e.vr_ptr=new Array(1+n),e.vr_len=new Array(1+n),e.vr_cap=new Array(1+n),e.vr_piv=new Array(1+n),e.vc_ptr=new Array(1+n),e.vc_len=new Array(1+n),e.vc_cap=new Array(1+n),e.pp_row=new Array(1+n),e.pp_col=new Array(1+n),e.qq_row=new Array(1+n),e.qq_col=new Array(1+n),e.sv_prev=new Array(1+n+n),e.sv_next=new Array(1+n+n),e.vr_max=new Array(1+n),e.rs_head=new Array(1+n),e.rs_prev=new Array(1+n),e.rs_next=new Array(1+n),e.cs_head=new Array(1+n),e.cs_prev=new Array(1+n),e.cs_next=new Array(1+n),e.flag=new Array(1+n),e.work=new Array(1+n)}function Ql(e,t,n){var r=e.n,i=e.fc_ptr,s=e.fc_len,o=e.vr_ptr,u=e.vr_len,a=e.vr_cap,f=e.vc_ptr,l=e.vc_len,c=e.vc_cap,p=e.pp_row,d=e.pp_col,v=e.qq_row,m=e.qq_col,g=e.sv_ind,y=e.sv_val,b=e.sv_prev,w=e.sv_next,E=e.vr_max,S=e.rs_head,x=e.rs_prev,T=e.rs_next,N=e.cs_head,C=e.cs_prev,k=e.cs_next,L=e.flag,A=e.work,O=0,M,_,D,P,H,B,j,F,I,q,R,U,z;I=1,q=e.sv_size+1;for(D=1;D<=r;D++)i[D]=q,s[D]=0;for(M=1;M<=r;M++)u[M]=a[M]=0,L[M]=0;F=0,U=0;for(D=1;D<=r;D++){var W=p,X=A;j=t(n,D,W,X),0<=j&&j<=r||h("luf_factorize: j = "+D+"; len = "+j+"; invalid column length");if(q-I<j)return O=1,O;f[D]=I,l[D]=c[D]=j,F+=j;for(R=1;R<=j;R++)M=W[R],z=X[R],1<=M&&M<=r||h("luf_factorize: i = "+M+"; j = "+D+"; invalid row index"),L[M]&&h("luf_factorize: i = "+M+"; j = "+D+"; duplicate element not allowed"),z==0&&h("luf_factorize: i = "+M+"; j = "+D+"; zero element not allowed"),g[I]=M,y[I]=z,I++,z<0&&(z=-z),U<z&&(U=z),L[M]=1,a[M]++;for(R=1;R<=j;R++)L[W[R]]=0}for(M=1;M<=r;M++){j=a[M];if(q-I<j)return O=1,O;o[M]=I,I+=j}for(D=1;D<=r;D++){P=f[D],H=P+l[D]-1;for(B=P;B<=H;B++)M=g[B],z=y[B],_=o[M]+u[M],g[_]=D,y[_]=z,u[M]++}for(B=1;B<=r;B++)p[B]=d[B]=v[B]=m[B]=B;e.sv_beg=I,e.sv_end=q,e.sv_head=r+1,e.sv_tail=r;for(M=1;M<=r;M++)b[M]=M-1,w[M]=M+1;b[1]=r+r,w[r]=0;for(D=1;D<=r;D++)b[r+D]=r+D-1,w[r+D]=r+D+1;b[r+1]=0,w[r+r]=1;for(B=1;B<=r;B++)L[B]=0,A[B]=0;e.nnz_a=F,e.nnz_f=0,e.nnz_v=F,e.max_a=U,e.big_v=U,e.rank=-1;for(M=1;M<=r;M++)E[M]=-1;for(j=0;j<=r;j++)S[j]=0;for(M=1;M<=r;M++)j=u[M],x[M]=0,T[M]=S[j],T[M]!=0&&(x[T[M]]=M),S[j]=M;for(j=0;j<=r;j++)N[j]=0;for(D=1;D<=r;D++)j=l[D],C[D]=0,k[D]=N[j],k[D]!=0&&(C[k[D]]=D),N[j]=D;return O}function Gl(e,t){function R(){return t(E,S),E==0}var r=e.n,i=e.vr_ptr,o=e.vr_len,u=e.vc_ptr,a=e.vc_len,f=e.sv_ind,l=e.sv_val,c=e.vr_max,h=e.rs_head,d=e.rs_next,v=e.cs_head,m=e.cs_prev,g=e.cs_next,y=e.piv_tol,b=e.piv_lim,w=e.suhl,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j,F,I,q;E=S=0,j=n,_=0,L=v[1];if(L!=0)return p(a[L]==1),E=f[u[L]],S=L,R();T=h[1];if(T!=0)return p(o[T]==1),E=T,S=f[i[T]],R();for(x=2;x<=r;x++){for(L=v[x];L!=0;L=D){A=u[L],O=A+a[L]-1,D=g[L],P=H=0,B=s;for(M=A;M<=O;M++){T=f[M],N=i[T],C=N+o[T]-1;if(o[T]>=B)continue;I=c[T];if(I<0){for(k=N;k<=C;k++)q=l[k],q<0&&(q=-q),I<q&&(I=q);c[T]=I}for(k=i[T];f[k]!=L;k++);p(k<=C),q=l[k],q<0&&(q=-q);if(q<y*I)continue;P=T,H=L,B=o[T];if(B<=x)return E=P,S=H,R()}if(P!=0){_++,F=(B-1)*(x-1),F<j&&(E=P,S=H,j=F);if(_==b)return R()}else w&&(m[L]==0?v[x]=g[L]:g[m[L]]=g[L],g[L]!=0&&(m[g[L]]=m[L]),m[L]=g[L]=L)}for(T=h[x];T!=0;T=d[T]){N=i[T],C=N+o[T]-1,I=c[T];if(I<0){for(k=N;k<=C;k++)q=l[k],q<0&&(q=-q),I<q&&(I=q);c[T]=I}P=H=0,B=s;for(k=N;k<=C;k++){L=f[k];if(a[L]>=B)continue;q=l[k],q<0&&(q=-q);if(q<y*I)continue;P=T,H=L,B=a[L];if(B<=x)return E=P,S=H,R()}if(P!=0){_++,F=(x-1)*(B-1),F<j&&(E=P,S=H,j=F);if(_==b)return R()}else p(P!=P)}}return R()}function Yl(e,t,n){var r=e.n,i=e.fc_ptr,s=e.fc_len,o=e.vr_ptr,u=e.vr_len,a=e.vr_cap,f=e.vr_piv,l=e.vc_ptr,c=e.vc_len,h=e.vc_cap,d=e.sv_ind,v=e.sv_val,m=e.sv_prev,g=e.sv_next,y=e.vr_max,b=e.rs_head,w=e.rs_prev,E=e.rs_next,S=e.cs_head,x=e.cs_prev,T=e.cs_next,N=e.flag,C=e.work,k=e.eps_tol,L=e.fr_len,A=0,O,M,_,D,P,H,B,j,F,I,q,R,U,z,W,X,V,$,J,K,Q;p(1<=t&&t<=r),p(1<=n&&n<=r),w[t]==0?b[u[t]]=E[t]:E[w[t]]=E[t],E[t]!=0&&(w[E[t]]=w[t]),x[n]==0?S[c[n]]=T[n]:T[x[n]]=T[n],T[n]!=0&&(x[T[n]]=x[n]),R=o[t],U=R+u[t]-1;for(z=R;d[z]!=n;z++);p(z<=U),K=f[t]=v[z],d[z]=d[U],v[z]=v[U],u[t]--,U--,W=l[n],X=W+c[n]-1;for(V=W;d[V]!=t;V++);p(V<=X),d[V]=d[X],c[n]--,X--;for(z=R;z<=U;z++){B=d[z],N[B]=1,C[B]=v[z],x[B]==0?S[c[B]]=T[B]:T[x[B]]=T[B],T[B]!=0&&(x[T[B]]=x[B]),j=l[B],F=j+c[B]-1;for(I=j;d[I]!=t;I++);p(I<=F),d[I]=d[F],c[B]--}while(W<=X){_=d[W],w[_]==0?b[u[_]]=E[_]:E[w[_]]=E[_],E[_]!=0&&(w[E[_]]=w[_]),D=o[_],P=D+u[_]-1;for(H=D;d[H]!=n;H++);p(H<=P),$=v[H]/K,d[H]=d[P],v[H]=v[P],u[_]--,P--,d[W]=d[X],c[n]--,X--,M=u[t];for(H=D;H<=P;H++){B=d[H];if(N[B]){Q=v[H]-=$*C[B],Q<0&&(Q=-Q),N[B]=0,M--;if(Q==0||Q<k){d[H]=d[P],v[H]=v[P],u[_]--,H--,P--,j=l[B],F=j+c[B]-1;for(I=j;d[I]!=_;I++);p(I<=F),d[I]=d[F],c[B]--}else e.big_v<Q&&(e.big_v=Q)}}if(u[_]+M>a[_]){if($l(e,_,u[_]+M))return A=1,A;R=o[t],U=R+u[t]-1,W=l[n],X=W+c[n]-1}O=0;for(z=R;z<=U;z++)B=d[z],N[B]?(Q=J=-$*C[B],Q<0&&(Q=-Q),Q==0||Q<k||(H=o[_]+u[_],d[H]=B,v[H]=J,u[_]++,L[++O]=B,e.big_v<Q&&(e.big_v=Q))):N[B]=1;for(q=1;q<=O;q++){B=L[q];if(c[B]+1>h[B]){if(Jl(e,B,c[B]+10))return A=1,A;R=o[t],U=R+u[t]-1,W=l[n],X=W+c[n]-1}I=l[B]+c[B],d[I]=_,c[B]++}w[_]=0,E[_]=b[u[_]],E[_]!=0&&(w[E[_]]=_),b[u[_]]=_,y[_]=-1;if(e.sv_end-e.sv_beg<1){Vl(e);if(e.sv_end-e.sv_beg<1)return A=1,A;R=o[t],U=R+u[t]-1,W=l[n],X=W+c[n]-1}e.sv_end--,d[e.sv_end]=_,v[e.sv_end]=$,s[t]++}p(c[n]==0),h[n]=0,q=r+n,m[q]==0?e.sv_head=g[q]:g[m[q]]=g[q],g[q]==0?e.sv_tail=m[q]:m[g[q]]=m[q],i[t]=e.sv_end;for(z=R;z<=U;z++){B=d[z],N[B]=0,C[B]=0;if(c[B]==1||x[B]!=B||T[B]!=B)x[B]=0,T[B]=S[c[B]],T[B]!=0&&(x[T[B]]=B),S[c[B]]=B}return A}function Zl(e){var t=e.n,n=e.vr_ptr,r=e.vr_len,i=e.vc_ptr,s=e.vc_len,o=e.vc_cap,u=e.sv_ind,a=e.sv_val,f=e.sv_prev,l=e.sv_next,c=0,h,p,d,v,m,g,y,b;b=0;for(h=1;h<=t;h++){p=n[h],d=p+r[h]-1;for(v=p;v<=d;v++)o[u[v]]++;b+=r[h]}e.nnz_v=b;if(e.sv_end-e.sv_beg<b)return c=1,c;for(m=1;m<=t;m++)i[m]=e.sv_beg,e.sv_beg+=o[m];for(h=1;h<=t;h++){p=n[h],d=p+r[h]-1;for(v=p;v<=d;v++)m=u[v],g=i[m]+s[m],u[g]=h,a[g]=a[v],s[m]++}for(y=t+1;y<=t+t;y++)f[y]=y-1,l[y]=y+1;return f[t+1]=e.sv_tail,l[e.sv_tail]=t+1,l[t+t]=0,e.sv_tail=t+t,c}function ec(e){var t=e.n,n=e.fr_ptr,r=e.fr_len,i=e.fc_ptr,s=e.fc_len,o=e.sv_ind,u=e.sv_val,a=0,f,l,c,h,p,d,v;for(f=1;f<=t;f++)r[f]=0;v=0;for(l=1;l<=t;l++){c=i[l],h=c+s[l]-1;for(p=c;p<=h;p++)r[o[p]]++;v+=s[l]}e.nnz_f=v;if(e.sv_end-e.sv_beg<v)return a=1,a;for(f=1;f<=t;f++)n[f]=e.sv_end,e.sv_end-=r[f];for(l=1;l<=t;l++){c=i[l],h=c+s[l]-1;for(p=c;p<=h;p++)f=o[p],d=--n[f],o[d]=l,u[d]=u[p]}return a}function tc(e,t,n,r){function b(){e.new_sva>0&&(e.sv_size=e.new_sva,e.sv_ind=new Array(1+e.sv_size),e.sv_val=new Array(1+e.sv_size),e.new_sva=0);if(Ql(e,n,r))return e.new_sva=e.sv_size+e.sv_size,p(e.new_sva>e.sv_size),!0;for(d=1;d<=t;d++){if(Gl(e,function(e,t){v=e,m=t}))return e.rank=d-1,y=zl,!1;l=s[v],c=o[m],p(d<=l&&l<=t&&d<=c&&c<=t),g=i[d],i[l]=g,s[g]=l,i[d]=v,s[v]=d,g=u[d],u[c]=g,o[g]=c,u[d]=m,o[m]=d;if(Yl(e,v,m))return e.new_sva=e.sv_size+e.sv_size,p(e.new_sva>e.sv_size),!0;if(e.big_v>a*e.max_a)return e.rank=d-1,y=Wl,!1}return Vl(e),Zl(e)?(e.new_sva=e.sv_size+e.sv_size,p(e.new_sva>e.sv_size),!0):ec(e)?(e.new_sva=e.sv_size+e.sv_size,p(e.new_sva>e.sv_size),!0):!1}var i,s,o,u,a=e.max_gro,l,c,d,v,m,g,y=null;t<1&&h("luf_factorize: n = "+t+"; invalid parameter"),t>f&&h("luf_factorize: n = "+t+"; matrix too big"),e.valid=0,Kl(e,t),i=e.pp_row,s=e.pp_col,o=e.qq_row,u=e.qq_col,e.sv_size==0&&e.new_sva==0&&(e.new_sva=5*(t+10));while(b());if(y!=null)return y;e.valid=1,e.rank=t,y=0,g=3*(t+e.nnz_v)+2*e.nnz_f;if(e.sv_size<g){e.new_sva=e.sv_size;while(e.new_sva<g)d=e.new_sva,e.new_sva=d+d,p(e.new_sva>d)}return y}function nc(e,t,n){var r=e.n,i=e.fr_ptr,s=e.fr_len,o=e.fc_ptr,u=e.fc_len,a=e.pp_row,f=e.sv_ind,l=e.sv_val,c,p,d,v,m,g,y;e.valid||h("luf_f_solve: LU-factorization is not valid");if(!t)for(p=1;p<=r;p++){d=a[p],y=n[d];if(y!=0){v=o[d],m=v+u[d]-1;for(g=v;g<=m;g++)n[f[g]]-=l[g]*y}}else for(c=r;c>=1;c--){d=a[c],y=n[d];if(y!=0){v=i[d],m=v+s[d]-1;for(g=v;g<=m;g++)n[f[g]]-=l[g]*y}}}function rc(e,t,n){var r=e.n,i=e.vr_ptr,s=e.vr_len,o=e.vr_piv,u=e.vc_ptr,a=e.vc_len,f=e.pp_row,l=e.qq_col,c=e.sv_ind,p=e.sv_val,d=e.work,v,m,g,y,b,w,E;e.valid||h("luf_v_solve: LU-factorization is not valid");for(g=1;g<=r;g++)d[g]=n[g],n[g]=0;if(!t)for(g=r;g>=1;g--){v=f[g],m=l[g],E=d[v];if(E!=0){n[m]=E/=o[v],y=u[m],b=y+a[m]-1;for(w=y;w<=b;w++)d[c[w]]-=p[w]*E}}else for(g=1;g<=r;g++){v=f[g],m=l[g],E=d[m];if(E!=0){n[v]=E/=o[v],y=i[v],b=y+s[v]-1;for(w=y;w<=b;w++)d[c[w]]-=p[w]*E}}}function ic(e,t,n){e.valid||h("luf_a_solve: LU-factorization is not valid"),t?(rc(e,1,n),nc(e,1,n)):(nc(e,0,n),rc(e,0,n))}function kd(){return{index:{},par:{},set:{},"var":{},con:{},arg:{},loop:{}}}function Ld(e){var t;e.token==Bc?t="_|_":e.token==qc?t="'...'":t=e.image,p(0<=e.c_ptr&&e.c_ptr<Pc),e.context[e.c_ptr++]=" ",e.c_ptr==Pc&&(e.c_ptr=0);for(var n=0;n<t.length;n++)e.context[e.c_ptr++]=t[n],e.c_ptr==Pc&&(e.c_ptr=0)}function Ad(e){var t;while(e.c_ptr>0)e.c_ptr--,t=e.context[0],m(e.context,0,e.context,1,Pc-1),e.context[Pc-1]=t;d("Context: "+e.line+" > "+(e.context[0]==" "?"":"...")+e.context.join("").trim())}function Od(e){var t;if(e.c==sc)return;e.c=="\n"&&e.line++,t=Ry(e),t==sc?e.c=="\n"?e.line--:Jy(e,"final NL missing before end of file"):t!="\n"&&(N(t)?t=" ":C(t)&&(Ld(e),$y(e,"control character "+t+" not allowed"))),e.c=t}function Md(e){p(0<=e.imlen&&e.imlen<=Dc);if(e.imlen==Dc)switch(e.token){case jc:Ld(e),$y(e,"symbolic name "+e.image+"... too long");break;case Fc:Ld(e),$y(e,"symbol "+e.image+"... too long");break;case Ic:Ld(e),$y(e,"numeric literal "+e.image+"... too long");break;case qc:Ld(e),$y(e,"string literal too long");break;default:p(e!=e)}e.image+=e.c,e.imlen++,Od(e)}function _d(e){function t(){Ld(e),$y(e,"keyword s.t. incomplete")}function n(){Ld(e),$y(e,"cannot convert numeric literal "+e.image+" to floating-point number")}function r(){if(e.c=="e"||e.c=="E"){Md(e),(e.c=="+"||e.c=="-")&&Md(e),A(e.c)||(Ld(e),$y(e,"numeric literal "+e.image+" incomplete"));while(A(e.c))Md(e)}if(k(e.c)||e.c=="_")Ld(e),$y(e,"symbol "+e.image+e.c+"... should be enclosed in quotes")}e.b_token=e.token,e.b_imlen=e.imlen,e.b_image=e.image,e.b_value=e.value;if(e.f_scan){e.f_scan=0,e.token=e.f_token,e.imlen=e.f_imlen,e.image=e.f_image,e.value=e.f_value;return}for(;;){e.token=0,e.imlen=0,e.image="",e.value=0;while(e.c==" "||e.c=="\n")Od(e);if(e.c==sc)e.token=Bc;else{if(e.c=="#"){while(e.c!="\n"&&e.c!=sc)Od(e);continue}if(!e.flag_d&&(k(e.c)||e.c=="_")){e.token=jc;while(L(e.c)||e.c=="_")Md(e);e.image=="and"?e.token=Rc:e.image=="by"?e.token=Uc:e.image=="cross"?e.token=zc:e.image=="diff"?e.token=Wc:e.image=="div"?e.token=Xc:e.image=="else"?e.token=Vc:e.image=="if"?e.token=$c:e.image=="in"?e.token=Jc:e.image=="Infinity"?e.token=Kc:e.image=="inter"?e.token=Qc:e.image=="less"?e.token=Gc:e.image=="mod"?e.token=Yc:e.image=="not"?e.token=Zc:e.image=="or"?e.token=eh:e.image=="s"&&e.c=="."?(e.token=th,Md(e),e.c!="t"&&t(),Md(e),e.c!="."&&t(),Md(e)):e.image=="symdiff"?e.token=nh:e.image=="then"?e.token=rh:e.image=="union"?e.token=ih:e.image=="within"&&(e.token=sh)}else if(!e.flag_d&&A(e.c)){e.token=Ic;while(A(e.c))Md(e);var i=!1;if(e.c=="."){Md(e);if(e.c==".")e.imlen--,e.image=e.image.substr(0,e.image.length-1),e.f_dots=1,i=!0;else while(A(e.c))Md(e)}i||r(),ba(e.image,function(t){e.value=t})&&n()}else if(e.c=="'"||e.c=='"'){var s=e.c;e.token=qc,Od(e);for(;;){if(e.c=="\n"||e.c==sc)Ld(e),$y(e,"unexpected end of line; string literal incomplete");if(e.c==s){Od(e);if(e.c!=s)break}Md(e)}}else if(!e.flag_d&&e.c=="+")e.token=oh,Md(e);else if(!e.flag_d&&e.c=="-")e.token=uh,Md(e);else if(e.c=="*")e.token=ah,Md(e),e.c=="*"&&(e.token=lh,Md(e));else if(e.c=="/"){e.token=fh,Md(e);if(e.c=="*"){Od(e);for(;;)if(e.c==sc)$y(e,"unexpected end of file; comment sequence incomplete");else if(e.c=="*"){Od(e);if(e.c=="/")break}else Od(e);Od(e);continue}}else if(e.c=="^")e.token=lh,Md(e);else if(e.c=="<")e.token=ch,Md(e),e.c=="="?(e.token=hh,Md(e)):e.c==">"?(e.token=mh,Md(e)):e.c=="-"&&(e.token=Dh,Md(e));else if(e.c=="=")e.token=ph,Md(e),e.c=="="&&Md(e);else if(e.c==">")e.token=vh,Md(e),e.c=="="?(e.token=dh,Md(e)):e.c==">"&&(e.token=Mh,Md(e));else if(e.c=="!")e.token=Zc,Md(e),e.c=="="&&(e.token=mh,Md(e));else if(e.c=="&")e.token=gh,Md(e),e.c=="&"&&(e.token=Rc,Md(e));else if(e.c=="|")e.token=yh,Md(e),e.c=="|"&&(e.token=eh,Md(e));else if(!e.flag_d&&e.c=="."){e.token=bh,Md(e);if(e.f_dots)e.token=Th,e.imlen=2,e.image="..",e.f_dots=0;else if(e.c==".")e.token=Th,Md(e);else if(A(e.c)){e.token=Ic,Md(e);while(A(e.c))Md(e);r()}}else if(e.c==",")e.token=wh,Md(e);else if(e.c==":")e.token=Eh,Md(e),e.c=="="&&(e.token=xh,Md(e));else if(e.c==";")e.token=Sh,Md(e);else if(e.c=="(")e.token=Nh,Md(e);else if(e.c==")")e.token=Ch,Md(e);else if(e.c=="[")e.token=kh,Md(e);else if(e.c=="]")e.token=Lh,Md(e);else if(e.c=="{")e.token=Ah,Md(e);else if(e.c=="}")e.token=Oh,Md(e);else if(e.c=="~")e.token=_h,Md(e);else if(L(e.c)||O("+-._",e.c)>=0){p(e.flag_d),e.token=Fc;while(L(e.c)||O("+-._",e.c)>=0)Md(e);switch(ba(e.image,function(t){e.value=t})){case 0:e.token=Ic;break;case 1:n();break;case 2:break;default:p(e!=e)}}else Ld(e),$y(e,"character "+e.c+" not allowed")}break}Ld(e),e.flag_x=0}function Dd(e){p(!e.f_scan),e.f_scan=1,e.f_token=e.token,e.f_imlen=e.imlen,e.f_image=e.image,e.f_value=e.value,e.token=e.b_token,e.imlen=e.b_imlen,e.image=e.b_image,e.value=e.b_value}function Pd(e,t){return e.token==jc&&e.image==t}function Hd(e){return e.token==Rc&&e.image[0]=="a"||e.token==Uc||e.token==zc||e.token==Wc||e.token==Xc||e.token==Vc||e.token==$c||e.token==Jc||e.token==Qc||e.token==Gc||e.token==Yc||e.token==Zc&&e.image[0]=="n"||e.token==eh&&e.image[0]=="o"||e.token==nh||e.token==rh||e.token==ih||e.token==sh}function Bd(e,t,n,r,i){var s={},o,u,a;s.op=t,s.vflag=0,s.arg=kd(),s.value={};switch(t){case qh:s.arg.num=n.num;break;case Rh:s.arg.str=n.str;break;case Uh:s.arg.index.slot=n.index.slot,s.arg.index.next=n.index.next;break;case zh:case Wh:for(a=n.par.list;a!=null;a=a.next)p(a.x!=null),p(a.x.up==null),a.x.up=s,s.vflag|=a.x.vflag;s.arg.par.par=n.par.par,s.arg.par.list=n.par.list;break;case Xh:for(a=n.set.list;a!=null;a=a.next)p(a.x!=null),p(a.x.up==null),a.x.up=s,s.vflag|=a.x.vflag;s.arg.set.set=n.set.set,s.arg.set.list=n.set.list;break;case Vh:for(a=n.var.list;a!=null;a=a.next)p(a.x!=null),p(a.x.up==null),a.x.up=s,s.vflag|=a.x.vflag;s.arg.var.var=n.var.var,s.arg.var.list=n.var.list,s.arg.var.suff=n.var.suff;break;case $h:for(a=n.con.list;a!=null;a=a.next)p(a.x!=null),p(a.x.up==null),a.x.up=s,s.vflag|=a.x.vflag;s.arg.con.con=n.con.con,s.arg.con.list=n.con.list,s.arg.con.suff=n.con.suff;break;case Jh:case Kh:for(a=n.list;a!=null;a=a.next)p(a.x!=null),p(a.x.up==null),a.x.up=s,s.vflag|=a.x.vflag;s.arg.list=n.list;break;case Qh:p(n.slice!=null),s.arg.slice=n.slice;break;case Gh:case Yh:case Zh:case ep:s.vflag=1;break;case tp:case np:case rp:case ip:case sp:case op:case up:case ap:case fp:case lp:case cp:case hp:case pp:case dp:case vp:case mp:case gp:case yp:case bp:case wp:case Ep:case Sp:p(n.arg.x!=null),p(n.arg.x.up==null),n.arg.x.up=s,s.vflag|=n.arg.x.vflag,s.arg.arg.x=n.arg.x;break;case xp:case Tp:case Np:case Cp:case kp:case Lp:case Ap:case Op:case Mp:case _p:case Dp:case Pp:t==Pp&&(s.vflag=1);case Hp:t==Hp&&(s.vflag=1);case Bp:case jp:case Fp:case Ip:case qp:case Rp:case Up:case zp:case Wp:case Xp:case Vp:case $p:case Jp:case Kp:case Qp:case Gp:case Yp:case Zp:case ed:case td:case nd:p(n.arg.x!=null),p(n.arg.x.up==null),n.arg.x.up=s,s.vflag|=n.arg.x.vflag,p(n.arg.y!=null),p(n.arg.y.up==null),n.arg.y.up=s,s.vflag|=n.arg.y.vflag,s.arg.arg.x=n.arg.x,s.arg.arg.y=n.arg.y;break;case rd:case id:case sd:p(n.arg.x!=null),p(n.arg.x.up==null),n.arg.x.up=s,s.vflag|=n.arg.x.vflag,p(n.arg.y!=null),p(n.arg.y.up==null),n.arg.y.up=s,s.vflag|=n.arg.y.vflag,n.arg.z!=null&&(p(n.arg.z.up==null),n.arg.z.up=s,s.vflag|=n.arg.z.vflag),s.arg.arg.x=n.arg.x,s.arg.arg.y=n.arg.y,s.arg.arg.z=n.arg.z;break;case od:case ud:for(a=n.list;a!=null;a=a.next)p(a.x!=null),p(a.x.up==null),a.x.up=s,s.vflag|=a.x.vflag;s.arg.list=n.list;break;case ad:case fd:case ld:case cd:case hd:case pd:case dd:case vd:o=n.loop.domain,p(o!=null),o.code!=null&&(p(o.code.up==null),o.code.up=s,s.vflag|=o.code.vflag);for(u=o.list;u!=null;u=u.next)p(u.code!=null),p(u.code.up==null),u.code.up=s,s.vflag|=u.code.vflag;n.loop.x!=null&&(p(n.loop.x.up==null),n.loop.x.up=s,s.vflag|=n.loop.x.vflag),s.arg.loop.domain=n.loop.domain,s.arg.loop.x=n.loop.x;break;default:p(t!=t)}return s.type=r,s.dim=i,s.up=null,s.valid=0,s.value={},s}function jd(e,t,n,r,i){var s,o=kd();return p(n!=null),o.arg.x=n,s=Bd(e,t,o,r,i),s}function Fd(e,t,n,r,i,s){var o,u=kd();return p(n!=null),p(r!=null),u.arg.x=n,u.arg.y=r,o=Bd(e,t,u,i,s),o}function Id(e,t,n,r,i,s,o){var u,a=kd();return p(n!=null),p(r!=null),a.arg.x=n,a.arg.y=r,a.arg.z=i,u=Bd(e,t,a,s,o),u}function qd(e){var t,n=kd();return p(e.token==Ic),n.num=e.value,t=Bd(e,qh,n,xc,0),_d(e),t}function Rd(e){var t,n=kd();return p(e.token==qc),n.str=e.image,t=Bd(e,Rh,n,Ac,0),_d(e),t}function Ud(e,t,n){var r={},i;p(n!=null),r.x=n,r.next=null;if(t==null)t=r;else{for(i=t;i.next!=null;i=i.next);i.next=r}return t}function zd(e,t){var n,r;r=0;for(n=t;n!=null;n=n.next)r++;return r}function Wd(e){var t,n=null;for(;;){t=mv(e),t.type==xc&&(t=jd(e,np,t,Ac,0)),t.type!=Ac&&$y(e,"subscript expression has invalid type"),p(t.dim==0),n=Ud(e,n,t);if(e.token==wh)_d(e);else{if(e.token==Lh)break;$y(e,"syntax error in subscript list")}}return n}function Xd(e){var t,n,r,i,s,o,u,a,f,l,c=kd();p(e.token==jc);var h=e.tree[e.image];h==null&&$y(e,e.image+" not defined");switch(h.type){case mc:t=h.link,a=t.name,f=0;break;case kc:n=h.link,a=n.name,f=n.dim,n.dimen==0&&(n.dimen=1);break;case Nc:r=h.link,a=r.name,f=r.dim;break;case _c:i=h.link,a=i.name,f=i.dim;break;case ac:s=h.link,a=s.name,f=s.dim;break;default:p(h!=h)}_d(e),e.token==kh?(f==0&&$y(e,a+" cannot be subscripted"),_d(e),o=Wd(e),f!=zd(e,o)&&$y(e,a+" must have "+f+" subscript"+(f==1?"":"s")+" rather than "+zd(e,o)),p(e.token==Lh),_d(e)):(f!=0&&$y(e,a+" must be subscripted"),o=null),!e.flag_s&&h.type==_c?l=Ph:l=Fh,e.token==bh&&(_d(e),e.token!=jc&&$y(e,"invalid use of period"),h.type!=_c&&h.type!=ac&&$y(e,a+" cannot have a suffix"),e.image=="lb"?l=Hh:e.image=="ub"?l=Bh:e.image=="status"?l=jh:e.image=="val"?l=Fh:e.image=="dual"?l=Ih:$y(e,"suffix ."+e.image+" invalid"),_d(e));switch(h.type){case mc:c.index.slot=t,c.index.next=t.list,u=Bd(e,Uh,c,Ac,0),t.list=u;break;case kc:c.set.set=n,c.set.list=o,u=Bd(e,Xh,c,cc,n.dimen);break;case Nc:c.par.par=r,c.par.list=o,r.type==Ac?u=Bd(e,Wh,c,Ac,0):u=Bd(e,zh,c,xc,0);break;case _c:!e.flag_s&&(l==jh||l==Fh||l==Ih)&&$y(e,"invalid reference to status, primal value, or dual value of variable "+i.name+" above solve statement"),c.var.var=i,c.var.list=o,c.var.suff=l,u=Bd(e,Vh,c,l==Ph?vc:xc,0);break;case ac:!e.flag_s&&(l==jh||l==Fh||l==Ih)&&$y(e,"invalid reference to status, primal value, or dual value of "+(s.type==ac?"constraint":"objective")+" "+s.name+" above solve statement"),c.con.con=s,c.con.list=o,c.con.suff=l,u=Bd(e,$h,c,xc,0);break;default:p(h!=h)}return u}function Vd(e,t){var n=mv(e);return n.type==Ac&&(n=jd(e,tp,n,xc,0)),n.type!=xc&&$y(e,"argument for "+t+" has invalid type"),p(n.dim==0),n}function $d(e,t){var n=mv(e);return n.type==xc&&(n=jd(e,np,n,Ac,0)),n.type!=Ac&&$y(e,"argument for "+t+" has invalid type"),p(n.dim==0),n}function Jd(e,t){var n=wv(e);return n.type!=cc&&$y(e,"argument for "+t+" has invalid type"),p(n.dim>0),n}function Kd(e){var t,n=kd(),r,i;p(e.token==jc),e.image=="abs"?r=fp:e.image=="ceil"?r=lp:e.image=="floor"?r=cp:e.image=="exp"?r=hp:e.image=="log"?r=pp:e.image=="log10"?r=dp:e.image=="sqrt"?r=vp:e.image=="sin"?r=mp:e.image=="cos"?r=gp:e.image=="atan"?r=yp:e.image=="min"?r=od:e.image=="max"?r=ud:e.image=="round"?r=bp:e.image=="trunc"?r=wp:e.image=="Irand224"?r=Gh:e.image=="Uniform01"?r=Yh:e.image=="Uniform"?r=Pp:e.image=="Normal01"?r=Zh:e.image=="Normal"?r=Hp:e.image=="card"?r=Ep:e.image=="length"?r=Sp:e.image=="substr"?r=ed:e.image=="str2time"?r=td:e.image=="time2str"?r=nd:e.image=="gmtime"?r=ep:$y(e,"function "+e.image+" unknown"),i=e.image,p(i.length<16),_d(e),p(e.token==Nh),_d(e);if(r==od||r==ud){n.list=null;for(;;){n.list=Ud(e,n.list,Vd(e,i));if(e.token==wh)_d(e);else{if(e.token==Ch)break;$y(e,"syntax error in argument list for "+i)}}}else if(r==Gh||r==Yh||r==Zh||r==ep)e.token!=Ch&&$y(e,i+" needs no arguments");else if(r==Pp||r==Hp)n.arg.x=Vd(e,i),e.token!=wh&&(e.token==Ch?$y(e,i+" needs two arguments"):$y(e,"syntax error in argument for "+i)),_d(e),n.arg.y=Vd(e,i),e.token==wh?$y(e,i+" needs two argument"):e.token!=Ch&&$y(e,"syntax error in argument for "+i);else if(r==yp||r==bp||r==wp){n.arg.x=Vd(e,i);if(e.token==wh){switch(r){case yp:r=Mp;break;case bp:r=_p;break;case wp:r=Dp;break;default:p(r!=r)}_d(e),n.arg.y=Vd(e,i)}e.token==wh?$y(e,i+" needs one or two arguments"):e.token!=Ch&&$y(e,"syntax error in argument for "+i)}else r==ed?(n.arg.x=$d(e,i),e.token!=wh&&(e.token==Ch?$y(e,i+" needs two or three arguments"):$y(e,"syntax error in argument for "+i)),_d(e),n.arg.y=Vd(e,i),e.token==wh&&(r=sd,_d(e),n.arg.z=Vd(e,i)),e.token==wh?$y(e,i+" needs two or three arguments"):e.token!=Ch&&$y(e,"syntax error in argument for "+i)):r==td?(n.arg.x=$d(e,i),e.token!=wh&&(e.token==Ch?$y(e,i+" needs two arguments"):$y(e,"syntax error in argument for "+i)),_d(e),n.arg.y=$d(e,i),e.token==wh?$y(e,i+" needs two argument"):e.token!=Ch&&$y(e,"syntax error in argument for "+i)):r==nd?(n.arg.x=Vd(e,i),e.token!=wh&&(e.token==Ch?$y(e,i+" needs two arguments"):$y(e,"syntax error in argument for "+i)),_d(e),n.arg.y=$d(e,i),e.token==wh?$y(e,i+" needs two argument"):e.token!=Ch&&$y(e,"syntax error in argument for "+i)):(r==Ep?n.arg.x=Jd(e,i):r==Sp?n.arg.x=$d(e,i):n.arg.x=Vd(e,i),e.token==wh?$y(e,i+" needs one argument"):e.token!=Ch&&$y(e,"syntax error in argument for "+i));return r==ed||r==sd||r==nd?t=Bd(e,r,n,Ac,0):t=Bd(e,r,n,xc,0),p(e.token==Ch),_d(e),t}function Qd(e,t,n){var r;p(t!=null),p(n!=null),p(n.next==null);if(t.list==null)t.list=n;else{for(r=t.list;r.next!=null;r=r.next);r.next=n}}function Gd(e,t,n,r){var i={},s;p(t!=null),i.name=n,i.code=r,i.value=null,i.list=null,i.next=null;if(t.list==null)t.list=i;else{for(s=t.list;s.next!=null;s=s.next);s.next=i}return i}function Yd(e){var t,n=kd();const r=20;var i=new Array(r+1);y(i,0,r+1);var s,o,u,a,f=0;p(e.token==Nh),s=e.flag_x,_d(e);for(u=1;;u++){u>r&&$y(e,"too many components within parentheses");function l(){t=Tv(e);if(e.token==wh||u>1)t.type==xc&&(t=jd(e,np,t,Ac,0)),t.type!=Ac&&$y(e,"component expression has invalid type"),p(t.dim==0);i[u].name=null,i[u].code=t}if(e.token==jc){_d(e),o=e.token,Dd(e);if(!s||o!=wh&&o!=Ch||e.tree[e.image]!=null)l();else{for(a=1;a<u;a++)i[a].name!=null&&i[a].name==e.image&&$y(e,"duplicate dummy index "+e.image+" not allowed");i[u].name=e.image,i[u].code=null,_d(e),f=1,u==1&&e.token==Ch&&$y(e,i[u].name+" not defined")}}else l();if(e.token==wh)_d(e);else{if(e.token==Ch)break;$y(e,"right parenthesis missing where expected")}}if(u==1&&!f)t=i[1].code;else if(!f){n.list=null;for(a=1;a<=u;a++)n.list=Ud(e,n.list,i[a].code);t=Bd(e,Jh,n,Mc,u)}else{n.slice={};for(a=1;a<=u;a++)Gd(e,n.slice,i[a].name,i[a].code);t=Bd(e,Qh,n,Mc,u)}return _d(e),f&&e.token!=Jc&&$y(e,"keyword in missing where expected"),s&&e.token==Jc&&!f&&(u==1?$y(e,"syntax error in indexing expression"):$y(e,"0-ary slice not allowed")),t}function Zd(e,t){var n=kd(),r;p(t!=null),n.list=null;for(r=1;;r++){t.type==xc&&(t=jd(e,np,t,Ac,0)),t.type==Ac&&(t=jd(e,ip,t,Mc,1)),t.type!=Mc&&$y(e,"member expression has invalid type"),n.list!=null&&n.list.x.dim!=t.dim&&$y(e,"member "+(r-1)+" has "+n.list.x.dim+" component"+(n.list.x.dim==1?"":"s")+" while member "+r+" has "+t.dim+" component"+(t.dim==1?"":"s")),n.list=Ud(e,n.list,t);if(e.token==wh)_d(e);else{if(e.token==Oh)break;$y(e,"syntax error in literal set")}t=mv(e)}return t=Bd(e,Kh,n,cc,n.list.x.dim),t}function ev(e){var t,n,r,i;p(e.token==Ah),_d(e),e.token==Oh&&$y(e,"empty indexing expression not allowed"),t={};for(;;){n=null,i=null;if(e.token==jc){var s,o;_d(e),s=e.token,Dd(e),s==Jc&&e.tree[e.image]==null&&(n={},o=e.image,Gd(e,n,o,null),_d(e),p(e.token==Jc),_d(e))}else e.token==Nh&&(e.flag_x=1,i=wv(e),i.op==Qh&&(n=i.arg.slice,i=null,p(e.token==Jc),_d(e)));i==null&&(i=wv(e)),i.type!=cc&&(n!=null&&$y(e,"domain expression has invalid type"),i=Zd(e,i)),p(i!=null),p(i.type==cc),p(i.dim>0);if(n==null){var u;n={};for(u=1;u<=i.dim;u++)Gd(e,n,null,null)}var a=0;for(r=n.list;r!=null;r=r.next)a++;a!=i.dim&&$y(e,a+" "+(a==1?"index":"indices")+" specified for set of dimension "+i.dim),p(n.code==null),n.code=i,Qd(e,t,n);for(r=n.list;r!=null;r=r.next)if(r.name!=null){var f;p(e.tree[r.name]==null),e.tree[r.name]=f={type:mc,link:r}}if(e.token==wh)_d(e);else{if(e.token==Eh||e.token==Oh)break;$y(e,"syntax error in indexing expression")}}return e.token==Eh&&(_d(e),i=Tv(e),i.type==Ac&&(i=jd(e,tp,i,xc,0)),i.type==xc&&(i=jd(e,rp,i,bc,0)),i.type!=bc&&$y(e,"expression following colon has invalid type"),p(i.dim==0),t.code=i,e.token!=Oh&&$y(e,"syntax error in indexing expression")),_d(e),t}function tv(e,t){var n,r,i;p(t!=null);for(n=t.list;n!=null;n=n.next)for(r=n.list;r!=null;r=r.next)r.name!=null&&(i=e.tree[r.name],p(i!=null),p(i.type==mc),delete e.tree[r.name])}function nv(e){var t,n;for(t=e.arg.loop.domain.list;t!=null;t=t.next)for(n=t.list;n!=null;n=n.next)n.code!=null&&(p(n.code.up==null),n.code.up=e)}function rv(e){function s(){$y(e,"integrand following "+i+"{...} has invalid type")}var t,n=kd(),r,i;p(e.token==jc),e.image=="sum"?r=ad:e.image=="prod"?r=fd:e.image=="min"?r=ld:e.image=="max"?r=cd:e.image=="forall"?r=hd:e.image=="exists"?r=pd:e.image=="setof"?r=dd:$y(e,"operator "+e.image+" unknown"),i=e.image,p(i.length<8),_d(e),p(e.token==Ah),n.loop.domain=ev(e);switch(r){case ad:case fd:case ld:case cd:n.loop.x=dv(e),n.loop.x.type==Ac&&(n.loop.x=jd(e,tp,n.loop.x,xc,0)),n.loop.x.type!=xc&&(r!=ad||n.loop.x.type!=vc)&&s(),p(n.loop.x.dim==0),t=Bd(e,r,n,n.loop.x.type,0);break;case hd:case pd:n.loop.x=xv(e),n.loop.x.type==Ac&&(n.loop.x=jd(e,tp,n.loop.x,xc,0)),n.loop.x.type==xc&&(n.loop.x=jd(e,rp,n.loop.x,bc,0)),n.loop.x.type!=bc&&s(),p(n.loop.x.dim==0),t=Bd(e,r,n,bc,0);break;case dd:n.loop.x=mv(e),n.loop.x.type==xc&&(n.loop.x=jd(e,np,n.loop.x,Ac,0)),n.loop.x.type==Ac&&(n.loop.x=jd(e,ip,n.loop.x,Mc,1)),n.loop.x.type!=Mc&&s(),p(n.loop.x.dim>0),t=Bd(e,r,n,cc,n.loop.x.dim);break;default:p(r!=r)}return tv(e,n.loop.domain),nv(t),t}function iv(e,t){var n=0;for(var r=t.list;r!=null;r=r.next)for(var i=r.list;i!=null;i=i.next)i.code==null&&n++;return n}function sv(e){var t,n=kd();return p(e.token==Ah),_d(e),e.token==Oh?(n.list=null,t=Bd(e,Kh,n,cc,1),_d(e)):(Dd(e),n.loop.domain=ev(e),n.loop.x=null,tv(e,n.loop.domain),t=Bd(e,vd,n,cc,iv(e,n.loop.domain)),nv(t)),t}function ov(e){var t,n,r;p(e.token==$c),_d(e),t=Tv(e),t.type==Ac&&(t=jd(e,tp,t,xc,0)),t.type==xc&&(t=jd(e,rp,t,bc,0)),t.type!=bc&&$y(e,"expression following if has invalid type"),p(t.dim==0),e.token!=rh&&$y(e,"keyword then missing where expected"),_d(e),n=wv(e),n.type!=xc&&n.type!=Ac&&n.type!=cc&&n.type!=vc&&$y(e,"expression following then has invalid type");if(e.token!=Vc)n.type==cc&&$y(e,"keyword else missing where expected"),r=null;else{_d(e),r=wv(e),r.type!=xc&&r.type!=Ac&&r.type!=cc&&r.type!=vc&&$y(e,"expression following else has invalid type");if(n.type==vc||r.type==vc)n.type==Ac&&(n=jd(e,tp,n,xc,0)),n.type==xc&&(n=jd(e,sp,n,vc,0)),r.type==Ac&&(r=jd(e,tp,r,xc,0)),r.type==xc&&(r=jd(e,sp,r,vc,0));if(n.type==Ac||r.type==Ac)n.type==xc&&(n=jd(e,np,n,Ac,0)),r.type==xc&&(r=jd(e,np,r,Ac,0));n.type!=r.type&&$y(e,"expressions following then and else have incompatible types"),n.dim!=r.dim&&$y(e,"expressions following then and else have different dimensions "+n.dim+" and "+r.dim+", respectively")}return Id(e,id,t,n,r,n.type,n.dim)}function uv(e){var t;if(e.token==Ic)t=qd(e);else if(e.token==Kc){var r=kd();r.num=n,t=Bd(e,qh,r,xc,0),_d(e)}else if(e.token==qc)t=Rd(e);else if(e.token==jc){var i;_d(e),i=e.token,Dd(e);switch(i){case kh:t=Xd(e);break;case Nh:t=Kd(e);break;case Ah:t=rv(e);break;default:t=Xd(e)}}else e.token==Nh?t=Yd(e):e.token==Ah?t=sv(e):e.token==$c?t=ov(e):Hd(e)?$y(e,"invalid use of reserved keyword "+e.image):$y(e,"syntax error in expression");return t}function av(e,t){$y(e,"operand preceding "+t+" has invalid type")}function fv(e,t){$y(e,"operand following "+t+" has invalid type")}function lv(e,t,n,r){$y(e,"operands preceding and following "+t+" have different di"+"mensions "+n+" and "+r+", respectively")}function cv(e){return uv(e)}function hv(e){var t,n=cv(e);if(e.token==lh){var r=e.image;p(r.length<8),n.type==Ac&&(n=jd(e,tp,n,xc,0)),n.type!=xc&&av(e,r),_d(e),e.token==oh||e.token==uh?t=pv(e):t=hv(e),t.type==Ac&&(t=jd(e,tp,t,xc,0)),t.type!=xc&&fv(e,r),n=Fd(e,Op,n,t,xc,0)}return n}function pv(e){var t;return e.token==oh?(_d(e),t=hv(e),t.type==Ac&&(t=jd(e,tp,t,xc,0)),t.type!=xc&&t.type!=vc&&fv(e,"+"),t=jd(e,op,t,t.type,0)):e.token==uh?(_d(e),t=hv(e),t.type==Ac&&(t=jd(e,tp,t,xc,0)),t.type!=xc&&t.type!=vc&&fv(e,"-"),t=jd(e,up,t,t.type,0)):t=hv(e),t}function dv(e){var t,n=pv(e);for(;;)if(e.token==ah)n.type==Ac&&(n=jd(e,tp,n,xc,0)),n.type!=xc&&n.type!=vc&&av(e,"*"),_d(e),t=pv(e),t.type==Ac&&(t=jd(e,tp,t,xc,0)),t.type!=xc&&t.type!=vc&&fv(e,"*"),n.type==vc&&t.type==vc&&$y(e,"multiplication of linear forms not allowed"),n.type==xc&&t.type==xc?n=Fd(e,Cp,n,t,xc,0):n=Fd(e,Cp,n,t,vc,0);else if(e.token==fh)n.type==Ac&&(n=jd(e,tp,n,xc,0)),n.type!=xc&&n.type!=vc&&av(e,"/"),_d(e),t=pv(e),t.type==Ac&&(t=jd(e,tp,t,xc,0)),t.type!=xc&&fv(e,"/"),n.type==xc?n=Fd(e,kp,n,t,xc,0):n=Fd(e,kp,n,t,vc,0);else if(e.token==Xc)n.type==Ac&&(n=jd(e,tp,n,xc,0)),n.type!=xc&&av(e,"div"),_d(e),t=pv(e),t.type==Ac&&(t=jd(e,tp,t,xc,0)),t.type!=xc&&fv(e,"div"),n=Fd(e,Lp,n,t,xc,0);else{if(e.token!=Yc)break;n.type==Ac&&(n=jd(e,tp,n,xc,0)),n.type!=xc&&av(e,"mod"),_d(e),t=pv(e),t.type==Ac&&(t=jd(e,tp,t,xc,0)),t.type!=xc&&fv(e,"mod"),n=Fd(e,Ap,n,t,xc,0)}return n}function vv(e){var t,n=dv(e);for(;;)if(e.token==oh)n.type==Ac&&(n=jd(e,tp,n,xc,0)),n.type!=xc&&n.type!=vc&&av(e,"+"),_d(e),t=dv(e),t.type==Ac&&(t=jd(e,tp,t,xc,0)),t.type!=xc&&t.type!=vc&&fv(e,"+"),n.type==xc&&t.type==vc&&(n=jd(e,sp,n,vc,0)),n.type==vc&&t.type==xc&&(t=jd(e,sp,t,vc,0)),n=Fd(e,xp,n,t,n.type,0);else if(e.token==uh)n.type==Ac&&(n=jd(e,tp,n,xc,0)),n.type!=xc&&n.type!=vc&&av(e,"-"),_d(e),t=dv(e),t.type==Ac&&(t=jd(e,tp,t,xc,0)),t.type!=xc&&t.type!=vc&&fv(e,"-"),n.type==xc&&t.type==vc&&(n=jd(e,sp,n,vc,0)),n.type==vc&&t.type==xc&&(t=jd(e,sp,t,vc,0)),n=Fd(e,Tp,n,t,n.type,0);else{if(e.token!=Gc)break;n.type==Ac&&(n=jd(e,tp,n,xc,0)),n.type!=xc&&av(e,"less"),_d(e),t=dv(e),t.type==Ac&&(t=jd(e,tp,t,xc,0)),t.type!=xc&&fv(e,"less"),n=Fd(e,Np,n,t,xc,0)}return n}function mv(e){var t,n=vv(e);for(;;){if(e.token!=gh)break;n.type==xc&&(n=jd(e,np,n,Ac,0)),n.type!=Ac&&av(e,"&"),_d(e),t=vv(e),t.type==xc&&(t=jd(e,np,t,Ac,0)),t.type!=Ac&&fv(e,"&"),n=Fd(e,Bp,n,t,Ac,0)}return n}function gv(e){var t,n,r=mv(e);return e.token==Th&&(r.type==Ac&&(r=jd(e,tp,r,xc,0)),r.type!=xc&&av(e,".."),_d(e),t=mv(e),t.type==Ac&&(t=jd(e,tp,t,xc,0)),t.type!=xc&&fv(e,".."),e.token==Uc?(_d(e),n=mv(e),n.type==Ac&&(n=jd(e,tp,n,xc,0)),n.type!=xc&&fv(e,"by")):n=null,r=Id(e,rd,r,t,n,cc,1)),r}function yv(e){var t,n=gv(e);for(;;){if(e.token!=zc)break;n.type!=cc&&av(e,"cross"),_d(e),t=gv(e),t.type!=cc&&fv(e,"cross"),n=Fd(e,Kp,n,t,cc,n.dim+t.dim)}return n}function bv(e){var t,n=yv(e);for(;;){if(e.token!=Qc)break;n.type!=cc&&av(e,"inter"),_d(e),t=yv(e),t.type!=cc&&fv(e,"inter"),n.dim!=t.dim&&lv(e,"inter",n.dim,t.dim),n=Fd(e,Jp,n,t,cc,n.dim)}return n}function wv(e){var t,n=bv(e);for(;;)if(e.token==ih)n.type!=cc&&av(e,"union"),_d(e),t=bv(e),t.type!=cc&&fv(e,"union"),n.dim!=t.dim&&lv(e,"union",n.dim,t.dim),n=Fd(e,Xp,n,t,cc,n.dim);else if(e.token==Wc)n.type!=cc&&av(e,"diff"),_d(e),t=bv(e),t.type!=cc&&fv(e,"diff"),n.dim!=t.dim&&lv(e,"diff",n.dim,t.dim),n=Fd(e,Vp,n,t,cc,n.dim);else{if(e.token!=nh)break;n.type!=cc&&av(e,"symdiff"),_d(e),t=bv(e),t.type!=cc&&fv(e,"symdiff"),n.dim!=t.dim&&lv(e,"symdiff",n.dim,t.dim),n=Fd(e,$p,n,t,cc,n.dim)}return n}function Ev(e){var t,n=-1,r="",i=wv(e);switch(e.token){case ch:n=jp;break;case hh:n=Fp;break;case ph:n=Ip;break;case dh:n=qp;break;case vh:n=Rp;break;case mh:n=Up;break;case Jc:n=Qp;break;case sh:n=Yp;break;case Zc:r=e.image,_d(e),e.token==Jc?n=Gp:e.token==sh?n=Zp:$y(e,"invalid use of "+r),r+=" ";break;default:return i}r+=e.image,p(r.length<16);switch(n){case Ip:case Up:case jp:case Fp:case Rp:case qp:i.type!=xc&&i.type!=Ac&&av(e,r),_d(e),t=wv(e),t.type!=xc&&t.type!=Ac&&fv(e,r),i.type==xc&&t.type==Ac&&(i=jd(e,np,i,Ac,0)),i.type==Ac&&t.type==xc&&(t=jd(e,np,t,Ac,0)),i=Fd(e,n,i,t,bc,0);break;case Qp:case Gp:i.type==xc&&(i=jd(e,np,i,Ac,0)),i.type==Ac&&(i=jd(e,ip,i,Mc,1)),i.type!=Mc&&av(e,r),_d(e),t=wv(e),t.type!=cc&&fv(e,r),i.dim!=t.dim&&lv(e,r,i.dim,t.dim),i=Fd(e,n,i,t,bc,0);break;case Yp:case Zp:i.type!=cc&&av(e,r),_d(e),t=wv(e),t.type!=cc&&fv(e,r),i.dim!=t.dim&&lv(e,r,i.dim,t.dim),i=Fd(e,n,i,t,bc,0);break;default:p(n!=n)}return i}function Sv(e){var t,n;return e.token==Zc?(n=e.image,p(n.length<8),_d(e),t=Ev(e),t.type==Ac&&(t=jd(e,tp,t,xc,0)),t.type==xc&&(t=jd(e,rp,t,bc,0)),t.type!=bc&&fv(e,n),t=jd(e,ap,t,bc,0)):t=Ev(e),t}function xv(e){var t,n="",r=Sv(e);for(;;){if(e.token!=Rc)break;n=e.image,p(n.length<8),r.type==Ac&&(r=jd(e,tp,r,xc,0)),r.type==xc&&(r=jd(e,rp,r,bc,0)),r.type!=bc&&av(e,n),_d(e),t=Sv(e),t.type==Ac&&(t=jd(e,tp,t,xc,0)),t.type==xc&&(t=jd(e,rp,t,bc,0)),t.type!=bc&&fv(e,n),r=Fd(e,zp,r,t,bc,0)}return r}function Tv(e){var t,n=xv(e);for(;;){if(e.token!=eh)break;var r=e.image;p(r.length<8),n.type==Ac&&(n=jd(e,tp,n,xc,0)),n.type==xc&&(n=jd(e,rp,n,bc,0)),n.type!=bc&&av(e,r),_d(e),t=xv(e),t.type==Ac&&(t=jd(e,tp,t,xc,0)),t.type==xc&&(t=jd(e,rp,t,bc,0)),t.type!=bc&&fv(e,r),n=Fd(e,Wp,n,t,bc,0)}return n}function Nv(e){function s(){$y(e,"at most one := or default/data allowed")}function o(){$y(e,e.image+" not a plain set")}function u(){$y(e,"dimension of "+e.image+" too small")}function a(){$y(e,"component number must be integer between 1 and "+i.set.dimen)}var t,n,r=0,i;p(Pd(e,"set")),_d(e),e.token!=jc&&(Hd(e)?$y(e,"invalid use of reserved keyword "+e.image):$y(e,"symbolic name missing where expected")),e.tree[e.image]!=null&&$y(e,e.image+" multiply declared"),t={},t.name=e.image,t.alias=null,t.dim=0,t.domain=null,t.dimen=0,t.within=null,t.assign=null,t.option=null,t.gadget=null,t.data=0,t.array=null,_d(e),e.token==qc&&(t.alias=e.image,_d(e)),e.token==Ah&&(t.domain=ev(e),t.dim=iv(e,t.domain)),n=e.tree[t.name]={},n.type=kc,n.link=t;for(;;){if(e.token==wh)_d(e);else if(e.token==Sh)break;if(Pd(e,"dimen")){var f;_d(e),e.token==Ic&&1<=e.value&&e.value<=20&&Math.floor(e.value)==e.value||$y(e,"dimension must be integer between 1 and 20"),f=e.value+.5|0,r&&$y(e,"at most one dimension attribute allowed"),t.dimen>0&&$y(e,"dimension "+f+" conflicts with dimension "+t.dimen+" already determined"),t.dimen=f,r=1,_d(e)}else if(e.token==sh||e.token==Jc){var l,c;e.token==Jc&&!e.as_within&&(Jy(e,"keyword in understood as within"),e.as_within=1),_d(e),l={},l.code=null,l.next=null;if(t.within==null)t.within=l;else{for(c=t.within;c.next!=null;c=c.next);c.next=l}l.code=wv(e),l.code.type!=cc&&$y(e,"expression following within has invalid type"),p(l.code.dim>0),t.dimen==0&&(t.dimen=l.code.dim),t.dimen!=l.code.dim&&$y(e,"set expression following within must have dimension "+t.dimen+" rather than "+l.code.dim)}else if(e.token==xh)(t.assign!=null||t.option!=null||t.gadget!=null)&&s(),_d(e),t.assign=wv(e),t.assign.type!=cc&&$y(e,"expression following := has invalid type"),p(t.assign.dim>0),t.dimen==0&&(t.dimen=t.assign.dim),t.dimen!=t.assign.dim&&$y(e,"set expression following := must have dimension "+t.dimen+" rather than "+t.assign.dim);else if(Pd(e,"default"))(t.assign!=null||t.option!=null)&&s(),_d(e),t.option=wv(e),t.option.type!=cc&&$y(e,"expression following default has invalid type"),p(t.option.dim>0),t.dimen==0&&(t.dimen=t.option.dim),t.dimen!=t.option.dim&&$y(e,"set expression following default must have dimension "+t.dimen+" rather than "+t.option.dim);else if(Pd(e,"data")){var h=0,d,v=new Array(20);(t.assign!=null||t.gadget!=null)&&s(),_d(e),t.gadget=i={},e.token!=jc&&(Hd(e)?$y(e,"invalid use of reserved keyword "+e.image):$y(e,"set name missing where expected")),n=e.tree[e.image],n==null&&$y(e,e.image+" not defined"),n.type!=kc&&o(),i.set=n.link,i.set.dim!=0&&o(),i.set==t&&$y(e,"set cannot be initialized by itself"),t.dim>=i.set.dimen&&u(),t.dimen==0&&(t.dimen=i.set.dimen-t.dim),t.dim+t.dimen>i.set.dimen?u():t.dim+t.dimen<i.set.dimen&&$y(e,"dimension of "+e.image+" too big"),_d(e),e.token==Nh?_d(e):$y(e,"left parenthesis missing where expected");for(d=0;d<i.set.dimen;d++)v[d]=0;d=0;for(;;){e.token!=Ic&&$y(e,"component number missing where expected"),wa(e.image,function(e){h=e})!=0&&a(),1<=h&&h<=i.set.dimen||a(),v[h-1]!=0&&$y(e,"component "+h+" multiply specified"),i.ind[d++]=h,v[h-1]=1,p(d<=i.set.dimen),_d(e);if(e.token==wh)_d(e);else{if(e.token==Ch)break;$y(e,"syntax error in data attribute")}}d<i.set.dimen&&$y(e,"there are must be "+i.set.dimen+" components rather than "+d),_d(e)}else $y(e,"syntax error in set statement")}return t.domain!=null&&tv(e,t.domain),t.dimen==0&&(t.dimen=1),p(e.token==Sh),_d(e),t}function Cv(e){function o(){i&&$y(e,"at most one binary allowed"),t.type==Ac&&$y(e,"symbolic parameter cannot be binary"),t.type=oc,i=1,_d(e)}function u(){$y(e,"at most one := or default allowed")}var t,n,r=0,i=0,s=0;p(Pd(e,"param")),_d(e),e.token!=jc&&(Hd(e)?$y(e,"invalid use of reserved keyword "+e.image):$y(e,"symbolic name missing where expected")),e.tree[e.image]!=null&&$y(e,e.image+" multiply declared"),t={},t.name=e.image,t.alias=null,t.dim=0,t.domain=null,t.type=xc,t.cond=null,t.in=null,t.assign=null,t.option=null,t.data=0,t.defval=null,t.array=null,_d(e),e.token==qc&&(t.alias=e.image,_d(e)),e.token==Ah&&(t.domain=ev(e),t.dim=iv(e,t.domain));var a=e.tree[t.name]={};a.type=Nc,a.link=t;for(;;){if(e.token==wh)_d(e);else if(e.token==Sh)break;if(Pd(e,"integer"))r&&$y(e,"at most one integer allowed"),t.type==Ac&&$y(e,"symbolic parameter cannot be integer"),t.type!=oc&&(t.type=yc),r=1,_d(e);else if(Pd(e,"binary"))o();else if(Pd(e,"logical"))e.as_binary||(Jy(e,"keyword logical understood as binary"),e.as_binary=1),o();else if(Pd(e,"symbolic"))s&&$y(e,"at most one symbolic allowed"),t.type!=xc&&$y(e,"integer or binary parameter cannot be symbolic"),(t.cond!=null||t.in!=null||t.assign!=null||t.option!=null)&&$y(e,"keyword symbolic must precede any other parameter attributes"),t.type=Ac,s=1,_d(e);else if(e.token==ch||e.token==hh||e.token==ph||e.token==dh||e.token==vh||e.token==mh){var f,l={};switch(e.token){case ch:l.rho=jp,f=e.image;break;case hh:l.rho=Fp,f=e.image;break;case ph:l.rho=Ip,f=e.image;break;case dh:l.rho=qp,f=e.image;break;case vh:l.rho=Rp,f=e.image;break;case mh:l.rho=Up,f=e.image;break;default:p(e.token!=e.token)}p(f.length<8),l.code=null,l.next=null;if(t.cond==null)t.cond=l;else{for(n=t.cond;n.next!=null;n=n.next);n.next=l}_d(e),l.code=mv(e),l.code.type!=xc&&l.code.type!=Ac&&$y(e,"expression following "+f+" has invalid type"),p(l.code.dim==0),t.type!=Ac&&l.code.type==Ac&&(l.code=jd(e,tp,l.code,xc,0)),t.type==Ac&&l.code.type!=Ac&&(l.code=jd(e,np,l.code,Ac,0))}else if(e.token==Jc||e.token==sh){var c;e.token==sh&&!e.as_in&&(Jy(e,"keyword within understood as in"),e.as_in=1),_d(e),c={},c.code=null,c.next=null;if(t.in==null)t.in=c;else{for(n=t.in;n.next!=null;n=n.next);n.next=c}c.code=wv(e),c.code.type!=cc&&$y(e,"expression following in has invalid type"),p(c.code.dim>0),c.code.dim!=1&&$y(e,"set expression following in must have dimension 1 rather than "+c.code.dim)}else e.token==xh?((t.assign!=null||t.option!=null)&&u(),_d(e),t.assign=mv(e),t.assign.type!=xc&&t.assign.type!=Ac&&$y(e,"expression following := has invalid type"),p(t.assign.dim==0),t.type!=Ac&&t.assign.type==Ac&&(t.assign=jd(e,tp,t.assign,xc,0)),t.type==Ac&&t.assign.type!=Ac&&(t.assign=jd(e,np,t.assign,Ac,0))):Pd(e,"default")?((t.assign!=null||t.option!=null)&&u(),_d(e),t.option=mv(e),t.option.type!=xc&&t.option.type!=Ac&&$y(e,"expression following default has invalid type"),p(t.option.dim==0),t.type!=Ac&&t.option.type==Ac&&(t.option=jd(e,tp,t.option,xc,0)),t.type==Ac&&t.option.type!=Ac&&(t.option=jd(e,np,t.option,Ac,0))):$y(e,"syntax error in parameter statement")}return t.domain!=null&&tv(e,t.domain),p(e.token==Sh),_d(e),t}function kv(e){function r(){n&&$y(e,"at most one binary allowed"),i.type=oc,n=1,_d(e)}var t=0,n=0;p(Pd(e,"var")),e.flag_s&&$y(e,"variable statement must precede solve statement"),_d(e),e.token!=jc&&(Hd(e)?$y(e,"invalid use of reserved keyword "+e.image):$y(e,"symbolic name missing where expected")),e.tree[e.image]!=null&&$y(e,e.image+" multiply declared");var i={};i.name=e.image,i.alias=null,i.dim=0,i.domain=null,i.type=xc,i.lbnd=null,i.ubnd=null,i.array=null,_d(e),e.token==qc&&(i.alias=e.image,_d(e)),e.token==Ah&&(i.domain=ev(e),i.dim=iv(e,i.domain));var s=e.tree[i.name]={};s.type=_c,s.link=i;for(;;){if(e.token==wh)_d(e);else if(e.token==Sh)break;if(Pd(e,"integer"))t&&$y(e,"at most one integer allowed"),i.type!=oc&&(i.type=yc),t=1,_d(e);else if(Pd(e,"binary"))r();else if(Pd(e,"logical"))e.as_binary||(Jy(e,"keyword logical understood as binary"),e.as_binary=1),r();else if(Pd(e,"symbolic"))$y(e,"variable cannot be symbolic");else if(e.token==dh)i.lbnd!=null&&(i.lbnd==i.ubnd?$y(e,"both fixed value and lower bound not allowed"):$y(e,"at most one lower bound allowed")),_d(e),i.lbnd=mv(e),i.lbnd.type==Ac&&(i.lbnd=jd(e,tp,i.lbnd,xc,0)),i.lbnd.type!=xc&&$y(e,"expression following >= has invalid type"),p(i.lbnd.dim==0);else if(e.token==hh)i.ubnd!=null&&(i.ubnd==i.lbnd?$y(e,"both fixed value and upper bound not allowed"):$y(e,"at most one upper bound allowed")),_d(e),i.ubnd=mv(e),i.ubnd.type==Ac&&(i.ubnd=jd(e,tp,i.ubnd,xc,0)),i.ubnd.type!=xc&&$y(e,"expression following <= has invalid type"),p(i.ubnd.dim==0);else if(e.token==ph){var o;if(i.lbnd!=null||i.ubnd!=null)i.lbnd==i.ubnd?$y(e,"at most one fixed value allowed"):i.lbnd!=null?$y(e,"both lower bound and fixed value not allowed"):$y(e,"both upper bound and fixed value not allowed");o=e.image,p(o.length<8),_d(e),i.lbnd=mv(e),i.lbnd.type==Ac&&(i.lbnd=jd(e,tp,i.lbnd,xc,0)),i.lbnd.type!=xc&&$y(e,"expression following "+o+" has invalid type"),p(i.lbnd.dim==0),i.ubnd=i.lbnd}else e.token==ch||e.token==vh||e.token==mh?$y(e,"strict bound not allowed"):$y(e,"syntax error in variable statement")}return i.domain!=null&&tv(e,i.domain),p(e.token==Sh),_d(e),i}function Lv(e){function o(){$y(e,"syntax error in constraint statement")}var t,n,r,i,s;e.flag_s&&$y(e,"constraint statement must precede solve statement"),Pd(e,"subject")?(_d(e),Pd(e,"to")||$y(e,"keyword subject to incomplete"),_d(e)):Pd(e,"subj")?(_d(e),Pd(e,"to")||$y(e,"keyword subj to incomplete"),_d(e)):e.token==th&&_d(e),e.token!=jc&&(Hd(e)?$y(e,"invalid use of reserved keyword "+e.image):$y(e,"symbolic name missing where expected")),e.tree[e.image]!=null&&$y(e,e.image+" multiply declared");var u={};u.name=e.image,u.alias=null,u.dim=0,u.domain=null,u.type=ac,u.code=null,u.lbnd=null,u.ubnd=null,u.array=null,_d(e),e.token==qc&&(u.alias=e.image,_d(e)),e.token==Ah&&(u.domain=ev(e),u.dim=iv(e,u.domain));var a=e.tree[u.name]={};a.type=ac,a.link=u,e.token!=Eh&&$y(e,"colon missing where expected"),_d(e),t=mv(e),t.type==Ac&&(t=jd(e,tp,t,xc,0)),t.type!=xc&&t.type!=vc&&$y(e,"expression following colon has invalid type"),p(t.dim==0),e.token==wh&&_d(e);switch(e.token){case hh:case dh:case ph:break;case ch:case vh:case mh:$y(e,"strict inequality not allowed");break;case Sh:$y(e,"constraint must be equality or inequality");break;default:o()}i=e.token,s=e.image,p(s.length<8),_d(e),n=mv(e),n.type==Ac&&(n=jd(e,tp,n,xc,0)),n.type!=xc&&n.type!=vc&&$y(e,"expression following "+s+" has invalid type"),p(n.dim==0),e.token==wh&&(_d(e),e.token==Sh&&o()),e.token==ch||e.token==hh||e.token==ph||e.token==dh||e.token==vh||e.token==mh?((i==ph||e.token!=i)&&$y(e,"double inequality must be ... <= ... <= ... or ... >= ... >= ..."),t.type==vc&&$y(e,"leftmost expression in double inequality cannot be linear form"),_d(e),r=mv(e),r.type==Ac&&(r=jd(e,tp,n,xc,0)),r.type!=xc&&r.type!=vc&&$y(e,"rightmost expression in double inequality constraint has invalid type"),p(r.dim==0),r.type==vc&&$y(e,"rightmost expression in double inequality cannot be linear form")):r=null,u.domain!=null&&tv(e,u.domain),t.type!=vc&&(t=jd(e,sp,t,vc,0)),n.type!=vc&&(n=jd(e,sp,n,vc,0)),r!=null&&(r=jd(e,sp,r,vc,0));if(r==null)switch(i){case hh:u.code=t,u.lbnd=null,u.ubnd=n;break;case dh:u.code=t,u.lbnd=n,u.ubnd=null;break;case ph:u.code=t,u.lbnd=n,u.ubnd=n;break;default:p(i!=i)}else switch(i){case hh:u.code=n,u.lbnd=t,u.ubnd=r;break;case dh:u.code=n,u.lbnd=r,u.ubnd=t;break;default:p(i!=i)}return e.token!=Sh&&o(),_d(e),u}function Av(e){var t,n;Pd(e,"minimize")?n=Ec:Pd(e,"maximize")?n=wc:p(e!=e),e.flag_s&&$y(e,"objective statement must precede solve statement"),_d(e),e.token!=jc&&(Hd(e)?$y(e,"invalid use of reserved keyword "+e.image):$y(e,"symbolic name missing where expected")),e.tree[e.image]!=null&&$y(e,e.image+" multiply declared"),t={},t.name=e.image,t.alias=null,t.dim=0,t.domain=null,t.type=n,t.code=null,t.lbnd=null,t.ubnd=null,t.array=null,_d(e),e.token==qc&&(t.alias=e.image,_d(e)),e.token==Ah&&(t.domain=ev(e),t.dim=iv(e,t.domain));var r=e.tree[t.name]={};return r.type=ac,r.link=t,e.token!=Eh&&$y(e,"colon missing where expected"),_d(e),t.code=mv(e),t.code.type==Ac&&(t.code=jd(e,tp,t.code,xc,0)),t.code.type==xc&&(t.code=jd(e,sp,t.code,vc,0)),t.code.type!=vc&&$y(e,"expression following colon has invalid type"),p(t.code.dim==0),t.domain!=null&&tv(e,t.domain),e.token!=Sh&&$y(e,"syntax error in objective statement"),_d(e),t}function Ov(e){var t,n,r,i,s,o,u,a,f,l,c;p(Pd(e,"table")),_d(e),e.token!=jc&&(Hd(e)?$y(e,"invalid use of reserved keyword "+e.image):$y(e,"symbolic name missing where expected")),e.tree[e.image]!=null&&$y(e,e.image+" multiply declared");var h={u:{"in":{},out:{}}};h.name=e.image,_d(e),e.token==qc?(h.alias=e.image,_d(e)):h.alias=null,e.token==Ah?(h.type=Tc,h.u.out.domain=ev(e),Pd(e,"OUT")||$y(e,"keyword OUT missing where expected"),_d(e)):(h.type=gc,Pd(e,"IN")||$y(e,"keyword IN missing where expected"),_d(e)),h.arg=t=null;for(;;){n={},(e.token==wh||e.token==Eh||e.token==Sh)&&$y(e,"argument expression missing where expected"),n.code=mv(e),n.code.type==xc&&(n.code=jd(e,np,n.code,Ac,0)),n.code.type!=Ac&&$y(e,"argument expression has invalid type"),n.next=null,t==null?h.arg=n:t.next=n,t=n;if(e.token==wh)_d(e);else if(e.token==Eh||e.token==Sh)break}p(h.arg!=null),e.token==Eh?_d(e):$y(e,"colon missing where expected");switch(h.type){case gc:e.token==jc?(f=e.tree[e.image],f==null&&$y(e,e.image+" not defined"),f.type!=kc&&$y(e,e.image+" not a set"),h.u.in.set=f.link,h.u.in.set.assign!=null&&$y(e,e.image+" needs no data"),h.u.in.set.dim!=0&&$y(e,e.image+" must be a simple set"),_d(e),e.token==Dh?_d(e):$y(e,"delimiter <- missing where expected")):Hd(e)?$y(e,"invalid use of reserved keyword "+e.image):h.u.in.set=null,h.u.in.fld=r=null,l=0,e.token==kh?_d(e):$y(e,"field list missing where expected");for(;;){i={},e.token!=jc&&(Hd(e)?$y(e,"invalid use of reserved keyword "+e.image):$y(e,"field name missing where expected")),i.name=e.image,_d(e),i.next=null,r==null?h.u.in.fld=i:r.next=i,r=i,l++;if(e.token==wh)_d(e);else{if(e.token==Lh)break;$y(e,"syntax error in field list")}}h.u.in.set!=null&&h.u.in.set.dimen!=l&&$y(e,"there must be "+h.u.in.set.dimen+" field"+(h.u.in.set.dimen==1?"":"s")+" rather than "+l),_d(e),h.u.in.list=s=null;while(e.token==wh)_d(e),o={},e.token!=jc&&(Hd(e)?$y(e,"invalid use of reserved keyword "+e.image):$y(e,"parameter name missing where expected")),f=e.tree[e.image],f==null&&$y(e,e.image+" not defined"),f.type!=Nc&&$y(e,e.image+" not a parameter"),o.par=f.link,o.par.dim!=l&&$y(e,e.image+" must have "+l+" subscript"+(l==1?"":"s")+" rather than "+o.par.dim),o.par.assign!=null&&$y(e,e.image+" needs no data"),_d(e),e.token==_h?(_d(e),e.token!=jc&&(Hd(e)?$y(e,"invalid use of reserved keyword "+e.image):$y(e,"field name missing where expected")),p(e.image.length<Dc+1),c=e.image,_d(e)):(p(o.par.name.length<Dc+1),c=o.par.name),o.name=c,o.next=null,s==null?h.u.in.list=o:s.next=o,s=o;break;case Tc:h.u.out.list=u=null;for(;;){a={},(e.token==wh||e.token==Sh)&&$y(e,"expression missing where expected"),e.token==jc?(p(e.image.length<Dc+1),c=e.image):c="",a.code=mv(e),e.token==_h&&(_d(e),e.token!=jc&&(Hd(e)?$y(e,"invalid use of reserved keyword "+e.image):$y(e,"field name missing where expected")),p(e.image.length<Dc+1),c=e.image,_d(e)),c==""&&$y(e,"field name required"),a.name=c,a.next=null,u==null?h.u.out.list=a:u.next=a,u=a;if(e.token==wh)_d(e);else{if(e.token==Sh)break;$y(e,"syntax error in output list")}}tv(e,h.u.out.domain);break;default:p(h!=h)}return e.token!=Sh&&$y(e,"syntax error in table statement"),_d(e),h}function Mv(e){return p(Pd(e,"solve")),e.flag_s&&$y(e,"at most one solve statement allowed"),e.flag_s=1,_d(e),e.token!=Sh&&$y(e,"syntax error in solve statement"),_d(e),null}function _v(e){p(Pd(e,"check"));var t={};return t.domain=null,t.code=null,_d(e),e.token==Ah&&(t.domain=ev(e)),e.token==Eh&&_d(e),t.code=Tv(e),t.code.type!=bc&&$y(e,"expression has invalid type"),p(t.code.dim==0),t.domain!=null&&tv(e,t.domain),e.token!=Sh&&$y(e,"syntax error in check statement"),_d(e),t}function Dv(e){var t;p(Pd(e,"display"));var n={};n.domain=null,n.list=t=null,_d(e),e.token==Ah&&(n.domain=ev(e)),e.token==Eh&&_d(e);for(;;){var r={u:{}};function i(){r.type=pc,r.u.code=Tv(e)}r.type=0,r.next=null,n.list==null?n.list=r:t.next=r,t=r;if(e.token==jc){var s,o;_d(e),o=e.token,Dd(e);if(o!=wh&&o!=Sh)i();else{s=e.tree[e.image],s==null&&$y(e,e.image+" not defined"),r.type=s.type;switch(s.type){case mc:r.u.slot=s.link;break;case kc:r.u.set=s.link;break;case Nc:r.u.par=s.link;break;case _c:r.u.var=s.link,e.flag_s||$y(e,"invalid reference to variable "+r.u.var.name+" above solve statement");break;case ac:r.u.con=s.link,e.flag_s||$y(e,"invalid reference to "+(r.u.con.type==ac?"constraint":"objective")+" "+r.u.con.name+" above solve statement");break;default:p(s!=s)}_d(e)}}else i();if(e.token!=wh)break;_d(e)}return n.domain!=null&&tv(e,n.domain),e.token!=Sh&&$y(e,"syntax error in display statement"),_d(e),n}function Pv(e){var t,n;p(Pd(e,"printf"));var r={};r.domain=null,r.fmt=null,r.list=n=null,_d(e),e.token==Ah&&(r.domain=ev(e)),e.token==Eh&&_d(e),r.fmt=mv(e),r.fmt.type==xc&&(r.fmt=jd(e,np,r.fmt,Ac,0)),r.fmt.type!=Ac&&$y(e,"format expression has invalid type");while(e.token==wh)_d(e),t={},t.code=null,t.next=null,r.list==null?r.list=t:n.next=t,n=t,t.code=wv(e),t.code.type!=xc&&t.code.type!=Ac&&t.code.type!=bc&&$y(e,"only numeric, symbolic, or logical expression allowed");r.domain!=null&&tv(e,r.domain),r.fname=null,r.app=0;if(e.token==vh||e.token==Mh)r.app=e.token==Mh,_d(e),r.fname=mv(e),r.fname.type==xc&&(r.fname=jd(e,np,r.fname,Ac,0)),r.fname.type!=Ac&&$y(e,"file name expression has invalid type");return e.token!=Sh&&$y(e,"syntax error in printf statement"),_d(e),r}function Hv(e){var t,n;p(Pd(e,"for"));var r={};r.domain=null,r.list=n=null,_d(e),e.token!=Ah&&$y(e,"indexing expression missing where expected"),r.domain=ev(e),e.token==Eh&&_d(e);if(e.token!=Ah)r.list=jv(e,1);else{_d(e);while(e.token!=Oh)t=jv(e,1),n==null?r.list=t:n.next=t,n=t;_d(e)}return p(r.domain!=null),tv(e,r.domain),r}function Bv(e){!e.flag_d&&Pd(e,"end")||e.flag_d&&Vv(e,"end")?(_d(e),e.token==Sh?_d(e):Jy(e,"no semicolon following end statement; missing semicolon inserted")):Jy(e,"unexpected end of file; missing end statement inserted"),e.token!=Bc&&Jy(e,"some text detected beyond end statement; text ignored")}function jv(e,t){var n={u:{}};return n.line=e.line,n.next=null,Pd(e,"set")?(t&&$y(e,"set statement not allowed here"),n.type=kc,n.u.set=Nv(e)):Pd(e,"param")?(t&&$y(e,"parameter statement not allowed here"),n.type=Nc,n.u.par=Cv(e)):Pd(e,"var")?(t&&$y(e,"variable statement not allowed here"),n.type=_c,n.u.var=kv(e)):Pd(e,"subject")||Pd(e,"subj")||e.token==th?(t&&$y(e,"constraint statement not allowed here"),n.type=ac,n.u.con=Lv(e)):Pd(e,"minimize")||Pd(e,"maximize")?(t&&$y(e,"objective statement not allowed here"),n.type=ac,n.u.con=Av(e)):Pd(e,"table")?(t&&$y(e,"table statement not allowed here"),n.type=Oc,n.u.tab=Ov(e)):Pd(e,"solve")?(t&&$y(e,"solve statement not allowed here"),n.type=Lc,n.u.slv=Mv(e)):Pd(e,"check")?(n.type=uc,n.u.chk=_v(e)):Pd(e,"display")?(n.type=fc,n.u.dpy=Dv(e)):Pd(e,"printf")?(n.type=Cc,n.u.prt=Pv(e)):Pd(e,"for")?(n.type=dc,n.u.fur=Hv(e)):e.token==jc?(t&&$y(e,"constraint statement not allowed here"),n.type=ac,n.u.con=Lv(e)):Hd(e)?$y(e,"invalid use of reserved keyword "+e.image):$y(e,"syntax error in model section"),n}function Fv(e){var t,n;p(e.model==null),n=null;while(e.token!=Bc&&!Pd(e,"data")&&!Pd(e,"end"))t=jv(e,0),n==null?e.model=t:n.next=t,n=t}function Iv(e,t,n){var r,i={};i.sym=n,i.next=null;if(t==null)t=i;else{for(r=t;r.next!=null;r=r.next);r.next=i}return t}function qv(e,t){var n,r=0;for(n=t;n!=null;n=n.next)r++;return r}function Rv(e,t){var n,r=0;for(n=t;n!=null;n=n.next)n.sym==null&&r++;return r}function Uv(e,t){var n=null;while(t-->0)n=Iv(e,n,null);return n}function zv(e,t){var n;while(t!=null)n=t,t=n.next}function Wv(e){return e.token==Ic}function Xv(e){return e.token==Ic||e.token==Fc||e.token==qc}function Vv(e,t){return Xv(e)&&e.image==t}function $v(e){p(Wv(e));var t=e.value;return _d(e),t}function Jv(e){var t;return p(Xv(e)),Wv(e)?t=_m(e,e.value):t=Dm(e,e.image),_d(e),t}function Kv(e,t,n){var r,i;p(t!=null);switch(e.token){case kh:i=Lh;break;case Nh:p(n>0),i=Ch;break;default:p(e!=e)}n==0&&$y(e,t+" cannot be subscripted"),_d(e),r=null;for(;;){Xv(e)?r=Iv(e,r,Jv(e)):e.token==ah?(r=Iv(e,r,null),_d(e)):$y(e,"number, symbol, or asterisk missing where expected");if(e.token==wh)_d(e);else{if(e.token==i)break;$y(e,"syntax error in slice")}}if(qv(e,r)!=n)switch(i){case Lh:$y(e,t+" must have "+n+" subscript"+(n==1?"":"s")+", not "+qv(e,r));break;case Ch:$y(e,t+" has dimension "+n+", not "+qv(e,r));break;default:p(i!=i)}return _d(e),r}function Qv(e,t){var n,r;return p(t!=null),r=e.tree[t],(r==null||r.type!=kc)&&$y(e,t+" not a set"),n=r.link,(n.assign!=null||n.gadget!=null)&&$y(e,t+" needs no data"),n.data=1,n}function Gv(e,t,n,r){var i,s,o,u=null;p(t!=null),p(n!=null),p(r!=null),p(t.dimen==qv(e,r)),p(n.value.set.dim==t.dimen),Rv(e,r)>0&&p(Xv(e)),i=null;for(s=r;s!=null;s=s.next){if(s.sym==null){if(!Xv(e)){var a=Rv(e,s);p(u!=null),a==1?$y(e,"one item missing in data group beginning with "+Bm(e,u)):$y(e,a+" items missing in data group beginning with "+Bm(e,u))}o=Jv(e),u==null&&(u=o)}else o=Pm(e,s.sym);i=Fm(e,i,o),s.next!=null&&e.token==wh&&_d(e)}$m(e,n.value.set,i)}function Yv(e,t,n,r,i){var s,o,u,a,f;p(t!=null),p(n!=null),p(r!=null),p(t.dimen==qv(e,r)),p(n.value.set.dim==t.dimen),p(Rv(e,r)==2),s=null;while(e.token!=xh)Xv(e)||$y(e,"number, symbol, or := missing where expected"),s=Iv(e,s,Jv(e));_d(e);while(Xv(e)){f=Jv(e);for(o=s;o!=null;o=o.next){var l=0;if(!Vv(e,"+")){if(Vv(e,"-")){_d(e);continue}var c=qv(e,o);c==1?$y(e,"one item missing in data group beginning with "+Bm(e,f)):$y(e,c+" items missing in data group beginning with "+Bm(e,f))}a=null;for(u=r;u!=null;u=u.next)if(u.sym==null)switch(++l){case 1:a=Fm(e,a,Pm(e,i?o.sym:f));break;case 2:a=Fm(e,a,Pm(e,i?f:o.sym));break;default:p(l!=l)}else a=Fm(e,a,Pm(e,u.sym));p(l==2),$m(e,n.value.set,a),_d(e)}}zv(e,s)}function Zv(e){function o(){$y(e,"slice currently used must specify 2 asterisks, not "+Rv(e,i))}function u(){$y(e,"transpose indicator (tr) incomplete")}function a(){_d(e),Vv(e,"tr")||u(),Rv(e,i)!=2&&o(),_d(e),e.token!=Ch&&u(),_d(e),e.token==Eh&&_d(e),s=1,Yv(e,t,r,i,s)}var t,n,r,i,s=0;p(Vv(e,"set")),_d(e),Xv(e)||$y(e,"set name missing where expected"),t=Qv(e,e.image),_d(e),n=null;if(e.token==kh){t.dim==0&&$y(e,t.name+" cannot be subscripted"),_d(e);for(;;){Xv(e)||$y(e,"number or symbol missing where expected"),n=Fm(e,n,Jv(e));if(e.token==wh)_d(e);else{if(e.token==Lh)break;$y(e,"syntax error in subscript list")}}t.dim!=Im(e,n)&&$y(e,t.name+" must have "+t.dim+" subscript"+(t.dim==1?"":"s")+" rather than "+Im(e,n)),_d(e)}else t.dim!=0&&$y(e,t.name+" must be subscripted");hg(e,t.array,n)!=null&&$y(e,t.name+zm(e,"[",n)+" already defined"),r=pg(e,t.array,n),r.value.set=Wm(e,t.dimen),i=Uv(e,t.dimen);for(;;){e.token==wh&&_d(e);if(e.token==xh)_d(e);else if(e.token==Nh){var f;_d(e),f=Vv(e,"tr"),Dd(e),f?a():(zv(e,i),i=Kv(e,t.name,t.dimen),s=0,Rv(e,i)==0&&Gv(e,t,r,i))}else if(Xv(e))Gv(e,t,r,i);else if(e.token==Eh)Rv(e,i)!=2&&o(),_d(e),Yv(e,t,r,i,s);else if(e.token==Nh)a();else{if(e.token==Sh){_d(e);break}$y(e,"syntax error in set data block")}}zv(e,i)}function em(e,t){var n,r;return p(t!=null),r=e.tree[t],(r==null||r.type!=Nc)&&$y(e,t+" not a parameter"),n=r.link,n.assign!=null&&$y(e,t+" needs no data"),n.data&&$y(e,t+" already provided with data"),n.data=1,n}function tm(e,t,n){p(t!=null),p(n!=null),t.option!=null&&$y(e,"default value for "+t.name+" already specified in model section"),p(t.defval==null),t.defval=n}function nm(e,t,n){var r;p(t!=null),p(Xv(e)),hg(e,t.array,n)!=null&&$y(e,t.name+zm(e,"[",n)+" already defined"),r=pg(e,t.array,n);switch(t.type){case xc:case yc:case oc:Wv(e)||$y(e,t.name+" requires numeric data"),r.value.num=$v(e);break;case Ac:r.value.sym=Jv(e);break;default:p(t!=t)}return r}function rm(e,t,n){var r,i,s,o=null;p(t!=null),p(t.dim==qv(e,n)),p(Xv(e)),r=null;for(i=n;i!=null;i=i.next){if(i.sym==null){if(!Xv(e)){var u=Rv(e,i)+1;p(o!=null),p(u>1),$y(e,u+" items missing in data group beginning with "+Bm(e,o))}s=Jv(e),o==null&&(o=s)}else s=Pm(e,i.sym);r=Fm(e,r,s),e.token==wh&&_d(e)}Xv(e)||(p(o!=null),$y(e,"one item missing in data group beginning with "+Bm(e,o))),nm(e,t,r)}function im(e,t,n,r){var i,s,o,u,a;p(t!=null),p(t.dim==qv(e,n)),p(Rv(e,n)==2),i=null;while(e.token!=xh)Xv(e)||$y(e,"number, symbol, or := missing where expected"),i=Iv(e,i,Jv(e));_d(e);while(Xv(e)){a=Jv(e);for(s=i;s!=null;s=s.next){var f=0;if(Vv(e,".")){_d(e);continue}u=null;for(o=n;o!=null;o=o.next)if(o.sym==null)switch(++f){case 1:u=Fm(e,u,Pm(e,r?s.sym:a));break;case 2:u=Fm(e,u,Pm(e,r?a:s.sym));break;default:p(f!=f)}else u=Fm(e,u,Pm(e,o.sym));p(f==2);if(!Xv(e)){var l=qv(e,s);l==1?$y(e,"one item missing in data group beginning with "+Bm(e,a)):$y(e,l+" items missing in data group beginning with "+Bm(e,a))}nm(e,t,u)}}zv(e,i)}function sm(e,t){var n=null,r,i,s,o,u,a,f=0,l=null;Xv(e)&&(_d(e),u=e.token,Dd(e),u==Eh&&(n=Qv(e,e.image),n.dim!=0&&$y(e,n.name+" must be a simple set"),n.array.head!=null&&$y(e,n.name+" already defined"),pg(e,n.array,null).value.set=Wm(e,n.dimen),l=n.name,f=n.dimen,_d(e),p(e.token==Eh),_d(e))),i=null;while(e.token!=xh)Xv(e)||$y(e,"parameter name or := missing where expected"),r=em(e,e.image),r.dim==0&&$y(e,e.image+" not a subscripted parameter"),f!=0&&r.dim!=f&&(p(l!=null),$y(e,l+" has dimension "+f+" while "+r.name+" has dimension "+r.dim)),t!=null&&tm(e,r,Pm(e,t)),i=Iv(e,i,r),l=r.name,f=r.dim,_d(e),e.token==wh&&_d(e);qv(e,i)==0&&$y(e,"at least one parameter name required"),_d(e),e.token==wh&&_d(e);while(Xv(e)){var c;o=null;for(a=1;a<=f;a++)Xv(e)||(c=qv(e,i)+f-a+1,p(o!=null),p(c>1),$y(e,c+" items missing in data group beginning with "+Bm(e,o.sym))),o=Fm(e,o,Jv(e)),a<f&&e.token==wh&&_d(e);n!=null&&$m(e,n.array.head.value.set,qm(e,o)),e.token==wh&&_d(e);for(s=i;s!=null;s=s.next){if(Vv(e,".")){_d(e);continue}Xv(e)||(c=qv(e,s),p(o!=null),c==1?$y(e,"one item missing in data group beginning with "+Bm(e,o.sym)):$y(e,c+" items missing in data group beginning with "+Bm(e,o.sym))),nm(e,s.sym,qm(e,o)),s.next!=null&&e.token==wh&&_d(e)}e.token==wh&&(_d(e),Xv(e)||Dd(e))}for(s=i;s!=null;s=s.next)s.sym=null;zv(e,i)}function om(e){function s(){$y(e,t.name+" not a subscripted parameter")}function o(){$y(e,"slice currently used must specify 2 asterisks, not "+Rv(e,r))}function u(){$y(e,"transpose indicator (tr) incomplete")}var t,n=null,r,i=0;p(Vv(e,"param")),_d(e),Vv(e,"default")&&(_d(e),Xv(e)||$y(e,"default value missing where expected"),n=Jv(e),e.token!=Eh&&$y(e,"colon missing where expected"));if(e.token==Eh){_d(e),e.token==wh&&_d(e),sm(e,n),e.token!=Sh&&$y(e,"symbol, number, or semicolon missing where expected"),_d(e);return}Xv(e)||$y(e,"parameter name missing where expected"),t=em(e,e.image),_d(e),Vv(e,"default")&&(_d(e),Xv(e)||$y(e,"default value missing where expected"),n=Jv(e),tm(e,t,n)),r=Uv(e,t.dim);for(;;){e.token==wh&&_d(e);if(e.token==xh)_d(e);else if(e.token==kh)zv(e,r),r=Kv(e,t.name,t.dim),i=0;else if(Xv(e))rm(e,t,r);else if(e.token==Eh)t.dim==0&&s(),Rv(e,r)!=2&&o(),_d(e),im(e,t,r,i);else if(e.token==Nh)_d(e),Vv(e,"tr")||u(),t.dim==0&&s(),Rv(e,r)!=2&&o(),_d(e),e.token!=Ch&&u(),_d(e),e.token==Eh&&_d(e),i=1,im(e,t,r,i);else{if(e.token==Sh){_d(e);break}$y(e,"syntax error in parameter data block")}}zv(e,r)}function um(e){while(e.token!=Bc&&!Vv(e,"end"))Vv(e,"set")?Zv(e):Vv(e,"param")?om(e):$y(e,"syntax error in data section")}function am(e,t,r){return(t>0&&r>0&&t>.999*n-r||t<0&&r<0&&t<-0.999*n-r)&&$y(e,t+" + "+r+"; floating-point overflow"),t+r}function fm(e,t,r){return(t>0&&r<0&&t>.999*n+r||t<0&&r>0&&t<-0.999*n+r)&&$y(e,t+" - "+r+"; floating-point overflow"),t-r}function lm(e,t,r){return t<r?0:(t>0&&r<0&&t>.999*n+r&&$y(e,t+" less "+r+"; floating-point overflow"),t-r)}function cm(e,t,r){return Math.abs(r)>1&&Math.abs(t)>.999*n/Math.abs(r)&&$y(e,t+" * "+r+"; floating-point overflow"),t*r}function hm(e,t,i){return Math.abs(i)<r&&$y(e,t+" / "+i+"; floating-point zero divide"),Math.abs(i)<1&&Math.abs(t)>.999*n*Math.abs(i)&&$y(e,t+" / "+i+"; floating-point overflow"),t/i}function pm(e,t,i){return Math.abs(i)<r&&$y(e,t+" div "+i+"; floating-point zero divide"),Math.abs(i)<1&&Math.abs(t)>.999*n*Math.abs(i)&&$y(e,t+" div "+i+"; floating-point overflow"),t/=i,t>0?Math.floor(t):t<0?Math.ceil(t):0}function dm(e,t,n){var r;if(t==0)r=0;else if(n==0)r=t;else{r=Math.abs(t)%Math.abs(n);if(r!=0){t<0&&(r=-r);if(t>0&&n<0||t<0&&n>0)r+=n}}return r}function vm(e,t,r){var i;return(t==0&&r<=0||t<0&&r!=Math.floor(r))&&$y(e,t+" ** "+r+"; result undefined"),t==0?i=Math.pow(t,r):((Math.abs(t)>1&&r>1&&+Math.log(Math.abs(t))>.999*Math.log(n)/r||Math.abs(t)<1&&r<-1&&+Math.log(Math.abs(t))<.999*Math.log(n)/r)&&$y(e,t+" ** "+r+"; floating-point overflow"),Math.abs(t)>1&&r<-1&&-Math.log(Math.abs(t))<.999*Math.log(n)/r||Math.abs(t)<1&&r>1&&-Math.log(Math.abs(t))>.999*Math.log(n)/r?i=0:i=Math.pow(t,r)),i}function mm(e,t){return t>.999*Math.log(n)&&$y(e,"exp("+t+"); floating-point overflow"),Math.exp(t)}function gm(e,t){return t<=0&&$y(e,"log("+t+"); non-positive argument"),Math.log(t)}function ym(e,t){return t<=0&&$y(e,"log10("+t+"); non-positive argument"),Math.log(t)/Math.LN10}function bm(e,t){return t<0&&$y(e,"sqrt("+t+"); negative argument"),Math.sqrt(t)}function wm(e,t){return-1e6<=t&&t<=1e6||$y(e,"sin("+t+"); argument too large"),Math.sin(t)}function Em(e,t){return-1e6<=t&&t<=1e6||$y(e,"cos("+t+"); argument too large"),Math.cos(t)}function Sm(e,t){return Math.atan(t)}function xm(e,t,n){return Math.atan2(t,n)}function Tm(e,t,r){var s;return r!=Math.floor(r)&&$y(e,"round("+t+", "+r+"); non-integer second argument"),r<=i+2&&(s=Math.pow(10,r),Math.abs(t)<.999*n/s&&(t=Math.floor(t*s+.5),t!=0&&(t/=s))),t}function Nm(e,t,r){var s;return r!=Math.floor(r)&&$y(e,"trunc("+t+", "+r+"); non-integer second argument"),r<=i+2&&(s=Math.pow(10,r),Math.abs(t)<.999*n/s&&(t=t>=0?Math.floor(t*s):Math.ceil(t*s),t!=0&&(t/=s))),t}function Cm(e){const t=16777216;return Uw(e.rand,t)}function km(e){const t=2147483648;return Rw(e.rand)/t}function Lm(e,t,n){var r;return t>=n&&$y(e,"Uniform("+t+", "+n+"); invalid range"),r=km(e),r=am(e,t*(1-r),n*r),r}function Am(e){var t,n,r;do t=-1+2*km(e),n=-1+2*km(e),r=t*t+n*n;while(r>1||r==0);return n*Math.sqrt(-2*Math.log(r)/r)}function Om(e,t,n){return am(e,t,cm(e,n,Am(e)))}function Mm(e,t,n){return t==n?0:t>n?1:-1}function _m(e,t){var n={};return n.num=t,n.str=null,n}function Dm(e,t){p(t!=null);var n={};return n.num=0,n.str=t,n}function Pm(e,t){p(t!=null);var n={};return t.str==null?(n.num=t.num,n.str=null):(n.num=0,n.str=t.str),n}function Hm(e,t,n){return p(t!=null),p(n!=null),t.str==null&&n.str==null?t.num<n.num?-1:t.num>n.num?1:0:t.str==null?-1:n.str==null?1:Mm(e,t.str,n.str)}function Bm(e,t){p(t!=null);var n;if(t.str==null)n=String(t.num);else{var r,i,s,o=t.str;if(!k(o[0])&&o[0]!="_")r=!0;else{r=!1;for(i=1;i<o.length;i++)if(!(L(o[i])||O("+-._",o[i])>=0)){r=!0;break}}n="",s=0;function u(e){s<255&&(n+=e,s++)}r&&u("'");for(i=0;i<o.length;i++)r&&o[i]=="'"&&u("'"),u(o[i]);r&&u("'"),s==255&&(n=n.slice(0,252)+"...")}return p(n.length<=255),n}function jm(e,t,n){var r,s;p(Dc>=i+i),t.str==null?r=String(t.num):r=t.str,n.str==null?s=String(n.num):s=n.str;if(r.length+s.length>Dc){var o=Bm(e,t);p(o.length<Dc),$y(e,o+" & "+Bm(e,n)+"; resultant symbol exceeds "+Dc+" characters")}return Dm(e,r+s)}function Fm(e,t,n){var r;p(n!=null);var i={};i.sym=n,i.next=null;if(t==null)t=i;else{for(r=t;r.next!=null;r=r.next);r.next=i}return t}function Im(e,t){var n=0;for(var r=t;r!=null;r=r.next)n++;return n}function qm(e,t){var n,r;if(t==null)n=null;else{n=r={};for(;t!=null;t=t.next)p(t.sym!=null),r.sym=Pm(e,t.sym),t.next!=null&&(r=r.next={});r.next=null}return n}function Rm(e,t,n){var r,i,s;for(r=t,i=n;r!=null;r=r.next,i=i.next){p(i!=null),p(r.sym!=null),p(i.sym!=null),s=Hm(e,r.sym,i.sym);if(s!=0)return s}return p(i==null),0}function Um(e,t,n){var r=null;for(var i=1,s=t;i<=n;i++,s=s.next)p(s!=null),r=Fm(e,r,Pm(e,s.sym));return r}function zm(e,t,n){function f(e){s<255&&(o+=e),s++}var r,i,s=0,o="",u="",a,l=Im(e,n);t=="["&&l>0&&f("["),t=="("&&l>1&&f("(");for(r=n;r!=null;r=r.next){r!=n&&f(","),p(r.sym!=null),u=Bm(e,r.sym),p(u.length<=255);for(i=0;i<u.length;i++)f(u[i])}return t=="["&&l>0&&f("]"),t=="("&&l>1&&f(")"),s==255&&(o=o.slice(0,252)+"..."),p(o.length<=255),o}function Wm(e,t){return p(t>0),lg(e,Sc,t)}function Xm(e,t,n){return p(t!=null),p(t.type==Sc),p(t.dim==Im(e,n)),hg(e,t,n)}function Vm(e,t,n){var r;return p(t!=null),p(t.type==Sc),p(t.dim==Im(e,n)),r=pg(e,t,n),r.value.none=null,r}function $m(e,t,n){return Xm(e,t,n)!=null&&$y(e,"duplicate tuple "+zm(e,"(",n)+" detected"),Vm(e,t,n)}function Jm(e,t){var n,r;p(t!=null),p(t.type==Sc),p(t.dim>0),n=Wm(e,t.dim);for(r=t.head;r!=null;r=r.next)Vm(e,n,qm(e,r.tuple));return n}function Km(e,t,r,i){var o;return i==0&&$y(e,t+" .. "+r+" by "+i+"; zero stride not allowed"),r>0&&t<0&&r>.999*n+t?o=+n:r<0&&t>0&&r<-0.999*n+t?o=-n:o=r-t,Math.abs(i)<1&&Math.abs(o)>.999*n*Math.abs(i)?o>0&&i>0||o<0&&i<0?o=+n:o=0:(o=Math.floor(o/i)+1,o<0&&(o=0)),p(o>=0),o>s-1&&$y(e,t+" .. "+r+" by "+i+"; set too large"),o+.5|0}function Qm(e,t,n,r,i){return p(1<=i&&i<=Km(e,t,n,r)),t+(i-1)*r}function Gm(e,t,n,r){var i=Wm(e,1),s=Km(e,t,n,r);for(var o=1;o<=s;o++)Vm(e,i,Fm(e,null,_m(e,Qm(e,t,n,r,o))));return i}function Ym(e,t,n){p(t!=null),p(t.type==Sc),p(t.dim>0),p(n!=null),p(n.type==Sc),p(n.dim>0),p(t.dim==n.dim);for(var r=n.head;r!=null;r=r.next)Xm(e,t,r.tuple)==null&&Vm(e,t,qm(e,r.tuple));return t}function Zm(e,t,n){p(t!=null),p(t.type==Sc),p(t.dim>0),p(n!=null),p(n.type==Sc),p(n.dim>0),p(t.dim==n.dim);var r=Wm(e,t.dim);for(var i=t.head;i!=null;i=i.next)Xm(e,n,i.tuple)==null&&Vm(e,r,qm(e,i.tuple));return r}function eg(e,t,n){var r;p(t!=null),p(t.type==Sc),p(t.dim>0),p(n!=null),p(n.type==Sc),p(n.dim>0),p(t.dim==n.dim);var i=Wm(e,t.dim);for(r=t.head;r!=null;r=r.next)Xm(e,n,r.tuple)==null&&Vm(e,i,qm(e,r.tuple));for(r=n.head;r!=null;r=r.next)Xm(e,t,r.tuple)==null&&Vm(e,i,qm(e,r.tuple));return i}function tg(e,t,n){p(t!=null),p(t.type==Sc),p(t.dim>0),p(n!=null),p(n.type==Sc),p(n.dim>0),p(t.dim==n.dim);var r=Wm(e,t.dim);for(var i=t.head;i!=null;i=i.next)Xm(e,n,i.tuple)!=null&&Vm(e,r,qm(e,i.tuple));return r}function ng(e,t,n){var r,i,s,o;p(t!=null),p(t.type==Sc),p(t.dim>0),p(n!=null),p(n.type==Sc),p(n.dim>0);var u=Wm(e,t.dim+n.dim);for(r=t.head;r!=null;r=r.next)for(i=n.head;i!=null;i=i.next){s=qm(e,r.tuple);for(o=i.tuple;o!=null;o=o.next)s=Fm(e,s,Pm(e,o.sym));Vm(e,u,s)}return u}function rg(e,t){var n;return t==0?n=null:(n={},n.coef=t,n.var=null,n.next=null),n}function ig(e,t){p(t!=null);var n={};return n.coef=1,n.var=t,n.next=null,n}function sg(e,t){var n,r;if(t==null)n=null;else{n=r={};for(;t!=null;t=t.next)r.coef=t.coef,r.var=t.var,t.next!=null&&(r=r.next={});r.next=null}return n}function og(e,t,n,r,i){var s=null,o,u,a=0;for(o=n;o!=null;o=o.next)o.var==null?a=am(e,a,cm(e,t,o.coef)):o.var.temp=am(e,o.var.temp,cm(e,t,o.coef));for(o=i;o!=null;o=o.next)o.var==null?a=am(e,a,cm(e,r,o.coef)):o.var.temp=am(e,o.var.temp,cm(e,r,o.coef));for(o=n;o!=null;o=o.next)o.var!=null&&o.var.temp!=0&&(u={},u.coef=o.var.temp,u.var=o.var,u.next=s,s=u,o.var.temp=0);for(o=i;o!=null;o=o.next)o.var!=null&&o.var.temp!=0&&(u={},u.coef=o.var.temp,u.var=o.var,u.next=s,s=u,o.var.temp=0);return a!=0&&(u={},u.coef=a,u.var=null,u.next=s,s=u),s}function ug(e,t,n){var r=null,i,s=0;while(t!=null)i=t,t=t.next,i.var==null?s=am(e,s,i.coef):(i.next=r,r=i);return n(s),r}function ag(e,t){var n,r,i=0;for(n=t;n!=null;n=n.next)n.var==null?i=am(e,i,n.coef):n.var.temp=am(e,n.var.temp,n.coef);r=t,t=null;for(n=r;n!=null;n=r)r=n.next,n.var==null&&i!=0?(n.coef=i,i=0,n.next=t,t=n):n.var!=null&&n.var.temp!=0&&(n.coef=n.var.temp,n.var.temp=0,n.next=t,t=n);return t}function fg(e,t,n){p(n!=null);switch(t){case Sc:n.none=null;break;case xc:n.num=0;break;case Ac:n.sym=null;break;case bc:n.bit=0;break;case Mc:n.tuple=null;break;case cc:n.set=null;break;case hc:n.var=null;break;case vc:n.form=null;break;case lc:n.con=null;break;default:p(t!=t)}}function lg(e,t,n){p(t==Sc||t==xc||t==Ac||t==cc||t==hc||t==lc),p(n>=0);var r={};return r.type=t,r.dim=n,r.size=0,r.head=null,r.tail=null,r.tree=!1,r.prev=null,r.next=e.a_list,r.next!=null&&(r.next.prev=r),e.a_list=r,r}function cg(e,t,n){return Rm(e,t,n)}function hg(e,t,n){var r;p(t!=null),p(Im(e,n)==t.dim);if(t.size>30&&!t.tree)for(r=t.head;r!=null;r=r.next)r.tuple.memb=r;if(!t.tree){for(r=t.head;r!=null;r=r.next)if(Rm(e,r.tuple,n)==0)break}else{var i=n.memb;r=i==null?null:i.link}return r}function pg(e,t,n){p(t!=null),p(Im(e,n)==t.dim);var r={};return r.tuple=n,r.next=null,r.value={},t.size++,t.head==null?t.head=r:t.tail.next=r,t.tail=r,t.tree&&(r.tuple.memb=r),r}function dg(e,t,n){var r,i;p(t!=null),p(n!=null);if(t.value!=null){if(Hm(e,t.value,n)==0)return;t.value=null}for(r=t.list;r!=null;r=r.arg.index.next){p(r.op==Uh);for(i=r;i!=null;i=i.up)i.valid&&(i.valid=0,fg(e,i.type,i.value))}t.value=Pm(e,n)}function vg(e,t){var n,r;if(t.backup!=null)for(n=t.list,r=t.backup;n!=null;n=n.next,r=r.next)p(r!=null),p(r.sym!=null),dg(e,n,r.sym)}function mg(e,t,n,r,i){var s,o=0;return p(t.code!=null),sy(e,t.code,n)?(s=t.backup,t.backup=n,vg(e,t),i(e,r),t.backup=s,vg(e,t),o):(o=1,o)}function gg(e,t){if(t.block!=null){var n,r,i=null,s=null;n=t.block,t.block=n.next;for(r=n.list;r!=null;r=r.next)i==null?i=s={}:s=s.next={},r.code==null?(p(t.tuple!=null),s.sym=t.tuple.sym,p(s.sym!=null),t.tuple=t.tuple.next):s.sym=Yg(e,r.code);s.next=null,mg(e,n,i,t,gg)&&(t.failure=1);for(r=n.list;r!=null;r=r.next)p(i!=null),s=i,i=i.next}else p(t.tuple==null),t.domain.code!=null&&!ey(e,t.domain.code)?t.failure=2:t.func(e,t.info)}function yg(e,t,n,r,i){var s={};return t==null?(p(n==null),i(e,r),s.failure=0):(p(n!=null),s.domain=t,s.block=t.list,s.tuple=n,s.info=r,s.func=i,s.failure=0,gg(e,s)),s.failure}function bg(e,t){if(t.block!=null){var n,r,i;n=t.block,t.block=n.next,i=null;for(r=n.list;r!=null;r=r.next)r.code!=null&&(i=Fm(e,i,Yg(e,r.code)));p(n.code!=null);if(n.code.op==rd){var s,o,u,a,f,l;a=Gg(e,n.code.arg.arg.x),f=Gg(e,n.code.arg.arg.y),n.code.arg.arg.z==null?l=1:l=Gg(e,n.code.arg.arg.z),o=Km(e,a,f,l),s=Fm(e,null,_m(e,0)),p(i==null);for(u=1;u<=o&&t.looping;u++)s.sym.num=Qm(e,a,f,l,u),mg(e,n,s,t,bg)}else{var c,h,d,v;c=ry(e,n.code);for(h=c.head;h!=null&&t.looping;h=h.next){d=h.tuple,v=i;var m=!1;for(r=n.list;r!=null;r=r.next){p(d!=null);if(r.code!=null){p(v!=null);if(Hm(e,d.sym,v.sym)!=0){m=!0;break}v=v.next}d=d.next}m||(p(d==null),p(v==null),mg(e,n,h.tuple,t,bg))}}t.block=n}else if(t.domain.code==null||!!ey(e,t.domain.code))t.looping=!t.func(e,t.info)}function wg(e,t,n,r){var i={};t==null?r(e,n):(i.domain=t,i.block=t.list,i.looping=1,i.info=n,i.func=r,bg(e,i))}function Eg(e,t,n){p(t!=null),p(n!=null),$y(e,t+zm(e,"[",n)+" out of domain")}function Sg(e,t){var n=null;if(t!=null)for(var r=t.list;r!=null;r=r.next)for(var i=r.list;i!=null;i=i.next)i.code==null&&(p(i.value!=null),n=Fm(e,n,Pm(e,i.value)));return n}function xg(e,t,n,r){for(var i=t.within,s=1;i!=null;i=i.next,s++){p(i.code!=null);for(var o=r.head;o!=null;o=o.next)if(!sy(e,i.code,o.tuple)){var u=zm(e,"(",o.tuple);p(u.length<255),$y(e,t.name+zm(e,"[",n)+" contains "+u+" which not within specified set; see ("+s+")")}}}function Tg(e,t,n){function s(){xg(e,t,n,r),i=pg(e,t.array,qm(e,n)),i.value.set=r}var r,i=hg(e,t.array,n);return i!=null?r=i.value.set:t.assign!=null?(r=ry(e,t.assign),s()):t.option!=null?(r=ry(e,t.option),s()):$y(e,"no value for "+t.name+zm(e,"[",n)),r}function Ng(e,t){t.memb!=null?xg(e,t.set,t.memb.tuple,t.memb.value.set):t.refer=Tg(e,t.set,t.tuple)}function Cg(e,t){var n=t.gadget,r,i,s,o,u=new Array(20),a;d("Generating "+t.name+"..."),Ag(e,n.set),p(n.set.array!=null),p(n.set.array.head!=null),p(n.set.array.head==n.set.array.tail),r=n.set.array.head.value.set,p(r.type==Sc),p(r.dim==n.set.dimen);for(i=r.head;i!=null;i=i.next){o=qm(e,i.tuple);for(a=0;a<n.set.dimen;a++)u[a]=null;for(a=0;o!=null;o=o.next)u[n.ind[a++]-1]=o;p(a==n.set.dimen);for(a=0;a<n.set.dimen;a++)p(u[a]!=null),u[a].next=u[a+1];t.dim==0?o=null:(o=u[0],u[t.dim-1].next=null),s=hg(e,t.array,o),s==null&&(s=pg(e,t.array,o),s.value.set=Wm(e,t.dimen)),o=u[t.dim],p(t.dim+t.dimen==n.set.dimen),u[n.set.dimen-1].next=null,Vm(e,s.value.set,o)}t.data=1}function kg(e,t,n){var r={};p(t.dim==Im(e,n)),r.set=t,r.tuple=n,t.gadget!=null&&t.data==0&&Cg(e,t);if(t.data==1){var i=t.array.tail;t.data=2;for(r.memb=t.array.head;r.memb!=null;r.memb=r.memb.next){yg(e,t.domain,r.memb.tuple,r,Ng)&&Eg(e,t.name,r.memb.tuple);if(r.memb==i)break}}return r.memb=null,yg(e,r.set.domain,r.tuple,r,Ng)&&Eg(e,t.name,r.tuple),r.refer}function Lg(e,t){var n=Sg(e,t.domain);return kg(e,t,n),0}function Ag(e,t){wg(e,t.domain,t,Lg)}function Og(e,t,n,r){var i,s;switch(t.type){case xc:break;case yc:r!=Math.floor(r)&&$y(e,t.name+zm(e,"[",n)+" = "+r+" not integer");break;case oc:r!=0&&r!=1&&$y(e,t.name+zm(e,"[",n)+" = "+r+" not binary");break;default:p(t!=t)}for(i=t.cond,s=1;i!=null;i=i.next,s++){var o;p(i.code!=null),o=Gg(e,i.code);function u(i){$y(e,t.name+zm(e,"[",n)+" = "+r+" not "+i+" "+o+"; see ("+s+")")}switch(i.rho){case jp:r<o||u("<");break;case Fp:r<=o||u("<=");break;case Ip:r!=o&&u("=");break;case qp:r>=o||u(">=");break;case Rp:r>o||u(">");break;case Up:r==o&&u("<>");break;default:p(i!=i)}}s=1;for(var a=t.in;a!=null;a=a.next,s++){p(a.code!=null),p(a.code.dim==1);var f=Fm(e,null,_m(e,r));sy(e,a.code,f)||$y(e,t.name+zm(e,"[",n)+" = "+r+" not in specified set; see ("+s+")")}}function Mg(e,t,n){function i(i){return Og(e,t,n,i),r=pg(e,t.array,qm(e,n)),r.value.num=i,i}var r=hg(e,t.array,n);return r!=null?r.value.num:t.assign!=null?i(Gg(e,t.assign)):t.option!=null?i(Gg(e,t.option)):t.defval!=null?(t.defval.str!=null&&$y(e,"cannot convert "+Bm(e,t.defval)+" to floating-point number"),i(t.defval.num)):$y(e,"no value for "+t.name+zm(e,"[",n))}function _g(e,t){t.memb!=null?Og(e,t.par,t.memb.tuple,t.memb.value.num):t.value=Mg(e,t.par,t.tuple)}function Dg(e,t,n){var r={};p(t.type==xc||t.type==yc||t.type==oc),p(t.dim==Im(e,n)),r.par=t,r.tuple=n;if(t.data==1){var i=t.array.tail;t.data=2;for(r.memb=t.array.head;r.memb!=null;r.memb=r.memb.next){yg(e,t.domain,r.memb.tuple,r,_g)&&Eg(e,t.name,r.memb.tuple);if(r.memb==i)break}}return r.memb=null,yg(e,r.par.domain,r.tuple,r,_g)&&Eg(e,t.name,r.tuple),r.value}function Pg(e,t,n,r){var i,s=1;for(var o=t.cond;o!=null;o=o.next,s++){var u;p(o.code!=null);var a=Yg(e,o.code);switch(o.rho){case jp:Hm(e,r,a)<0||(u=Bm(e,a),p(u.length<=255),$y(e,t.name+zm(e,"[",n)+" = "+Bm(e,r)+" not < "+u));break;case Fp:Hm(e,r,a)<=0||(u=Bm(e,a),p(u.length<=255),$y(e,t.name+zm(e,"[",n)+" = "+Bm(e,r)+" not <= "+u));break;case Ip:Hm(e,r,a)!=0&&(u=Bm(e,a),p(u.length<=255),$y(e,t.name+zm(e,"[",n)+" = "+Bm(e,r)+" not = "+u));break;case qp:Hm(e,r,a)>=0||(u=Bm(e,a),p(u.length<=255),$y(e,t.name+zm(e,"[",n)+" = "+Bm(e,r)+" not >= "+u));break;case Rp:Hm(e,r,a)>0||(u=Bm(e,a),p(u.length<=255),$y(e,t.name+zm(e,"[",n)+" = "+Bm(e,r)+" not > "+u));break;case Up:Hm(e,r,a)==0&&(u=Bm(e,a),p(u.length<=255),$y(e,t.name+zm(e,"[",n)+" <> "+Bm(e,r)+" not > "+u));break;default:p(o!=o)}}s=1;for(i=t.in;i!=null;i=i.next,s++){p(i.code!=null),p(i.code.dim==1);var f=Fm(e,null,Pm(e,r));sy(e,i.code,f)||$y(e,t.name,zm(e,"[",n)+" = "+Bm(e,r)+" not in specified set; see ("+s+")")}}function Hg(e,t,n){function i(i){return Pg(e,t,n,i),r=pg(e,t.array,qm(e,n)),r.value.sym=Pm(e,i),i}var r=hg(e,t.array,n);return r!=null?Pm(e,r.value.sym):t.assign!=null?i(Yg(e,t.assign)):t.option!=null?i(Yg(e,t.option)):t.defval!=null?Pm(e,t.defval):$y(e,"no value for "+t.name+zm(e,"[",n))}function Bg(e,t){t.memb!=null?Pg(e,t.par,t.memb.tuple,t.memb.value.sym):t.value=Hg(e,t.par,t.tuple)}function jg(e,t,n){var r={};p(t.type==Ac),p(t.dim==Im(e,n)),r.par=t,r.tuple=n;if(t.data==1){var i=t.array.tail;t.data=2;for(r.memb=t.array.head;r.memb!=null;r.memb=r.memb.next){yg(e,t.domain,r.memb.tuple,r,Bg)&&Eg(e,t.name,r.memb.tuple);if(r.memb==i)break}}return r.memb=null,yg(e,r.par.domain,r.tuple,r,Bg)&&Eg(e,t.name,r.tuple),r.value}function Fg(e,t){var n=Sg(e,t.domain);switch(t.type){case xc:case yc:case oc:Dg(e,t,n);break;case Ac:jg(e,t,n);break;default:p(t!=t)}return 0}function Ig(e,t){wg(e,t.domain,t,Fg)}function qg(e,t,n){var r,i=hg(e,t.array,n);return i!=null?r=i.value.var:(i=pg(e,t.array,qm(e,n)),r=i.value.var={},r.j=0,r.var=t,r.memb=i,t.lbnd==null?r.lbnd=0:r.lbnd=Gg(e,t.lbnd),t.ubnd==null?r.ubnd=0:t.ubnd==t.lbnd?r.ubnd=r.lbnd:r.ubnd=Gg(e,t.ubnd),r.temp=0,r.stat=0,r.prim=r.dual=0),r}function Rg(e,t){t.refer=qg(e,t.var,t.tuple)}function Ug(e,t,n){var r={};return p(t.dim==Im(e,n)),r.var=t,r.tuple=n,yg(e,r.var.domain,r.tuple,r,Rg)&&Eg(e,t.name,r.tuple),r.refer}function zg(e,t){var n=Sg(e,t.domain);return Ug(e,t,n),0}function Wg(e,t){wg(e,t.domain,t,zg)}function Xg(e,t,n){var r,i=null,s=hg(e,t.array,n);if(s!=null)r=s.value.con;else{s=pg(e,t.array,qm(e,n)),r=s.value.con={},r.i=0,r.con=t,r.memb=s,p(t.code!=null),r.form=uy(e,t.code);if(t.lbnd==null&&t.ubnd==null)p(t.type==Ec||t.type==wc),r.form=ug(e,r.form,function(e){i=e}),r.lbnd=r.ubnd=-i;else if(t.lbnd!=null&&t.ubnd==null)p(t.type==ac),r.form=og(e,1,r.form,-1,uy(e,t.lbnd)),r.form=ug(e,r.form,function(e){i=e}),r.lbnd=-i,r.ubnd=0;else if(t.lbnd==null&&t.ubnd!=null)p(t.type==ac),r.form=og(e,1,r.form,-1,uy(e,t.ubnd)),r.form=ug(e,r.form,function(e){i=e}),r.lbnd=0,r.ubnd=-i;else if(t.lbnd==t.ubnd)p(t.type==ac),r.form=og(e,1,r.form,-1,uy(e,t.lbnd)),r.form=ug(e,r.form,function(e){i=e}),r.lbnd=r.ubnd=-i;else{var o=null,u=null;p(t.type==ac),r.form=ug(e,r.form,function(e){i=e}),p(ug(e,uy(e,t.lbnd),function(e){o=e})==null),p(ug(e,uy(e,t.ubnd),function(e){u=e})==null),r.lbnd=fm(e,o,i),r.ubnd=fm(e,u,i)}r.stat=0,r.prim=r.dual=0}return r}function Vg(e,t){t.refer=Xg(e,t.con,t.tuple)}function $g(e,t,n){var r={};return p(t.dim==Im(e,n)),r.con=t,r.tuple=n,yg(e,r.con.domain,r.tuple,r,Vg)&&Eg(e,t.name,r.tuple),r.refer}function Jg(e,t){var n=Sg(e,t.domain);return $g(e,t,n),0}function Kg(e,t){wg(e,t.domain,t,Jg)}function Qg(e,t){var n=Gg(e,t.code.arg.loop.x);switch(t.code.op){case ad:t.value=am(e,t.value,n);break;case fd:t.value=cm(e,t.value,n);break;case ld:t.value>n&&(t.value=n);break;case cd:t.value<n&&(t.value=n);break;default:p(t!=t)}return 0}function Gg(e,t){var r,i,s,o,u,a,f;p(t!=null),p(t.type==xc),p(t.dim==0),t.vflag&&t.valid&&(t.valid=0,fg(e,t.type,t.value));if(t.valid)return t.value.num;switch(t.op){case qh:r=t.arg.num;break;case zh:i=null;for(s=t.arg.par.list;s!=null;s=s.next)i=Fm(e,i,Yg(e,s.x));r=Dg(e,t.arg.par.par,i);break;case Vh:var l;i=null;for(s=t.arg.var.list;s!=null;s=s.next)i=Fm(e,i,Yg(e,s.x));l=Ug(e,t.arg.var.var,i);switch(t.arg.var.suff){case Hh:l.var.lbnd==null?r=-n:r=l.lbnd;break;case Bh:l.var.ubnd==null?r=+n:r=l.ubnd;break;case jh:r=l.stat;break;case Fh:r=l.prim;break;case Ih:r=l.dual;break;default:p(t!=t)}break;case $h:var c;i=null;for(s=t.arg.con.list;s!=null;s=s.next)i=Fm(e,i,Yg(e,s.x));c=$g(e,t.arg.con.con,i);switch(t.arg.con.suff){case Hh:c.con.lbnd==null?r=-n:r=c.lbnd;break;case Bh:c.con.ubnd==null?r=+n:r=c.ubnd;break;case jh:r=c.stat;break;case Fh:r=c.prim;break;case Ih:r=c.dual;break;default:p(t!=t)}break;case Gh:r=Cm(e);break;case Yh:r=km(e);break;case Zh:r=Am(e);break;case ep:r=db(e);break;case tp:o=Yg(e,t.arg.arg.x),o.str==null?r=o.num:ba(o.str,function(e){r=e})&&$y(e,"cannot convert "+Bm(e,o)+" to floating-point number");break;case op:r=+Gg(e,t.arg.arg.x);break;case up:r=-Gg(e,t.arg.arg.x);break;case fp:r=Math.abs(Gg(e,t.arg.arg.x));break;case lp:r=Math.ceil(Gg(e,t.arg.arg.x));break;case cp:r=Math.floor(Gg(e,t.arg.arg.x));break;case hp:r=mm(e,Gg(e,t.arg.arg.x));break;case pp:r=gm(e,Gg(e,t.arg.arg.x));break;case dp:r=ym(e,Gg(e,t.arg.arg.x));break;case vp:r=bm(e,Gg(e,t.arg.arg.x));break;case mp:r=wm(e,Gg(e,t.arg.arg.x));break;case gp:r=Em(e,Gg(e,t.arg.arg.x));break;case yp:r=Sm(e,Gg(e,t.arg.arg.x));break;case Mp:r=xm(e,Gg(e,t.arg.arg.x),Gg(e,t.arg.arg.y));break;case bp:r=Tm(e,Gg(e,t.arg.arg.x),0);break;case _p:r=Tm(e,Gg(e,t.arg.arg.x),Gg(e,t.arg.arg.y));break;case wp:r=Nm(e,Gg(e,t.arg.arg.x),0);break;case Dp:r=Nm(e,Gg(e,t.arg.arg.x),Gg(e,t.arg.arg.y));break;case xp:r=am(e,Gg(e,t.arg.arg.x),Gg(e,t.arg.arg.y));break;case Tp:r=fm(e,Gg(e,t.arg.arg.x),Gg(e,t.arg.arg.y));break;case Np:r=lm(e,Gg(e,t.arg.arg.x),Gg(e,t.arg.arg.y));break;case Cp:r=cm(e,Gg(e,t.arg.arg.x),Gg(e,t.arg.arg.y));break;case kp:r=hm(e,Gg(e,t.arg.arg.x),Gg(e,t.arg.arg.y));break;case Lp:r=pm(e,Gg(e,t.arg.arg.x),Gg(e,t.arg.arg.y));break;case Ap:r=dm(e,Gg(e,t.arg.arg.x),Gg(e,t.arg.arg.y));break;case Op:r=vm(e,Gg(e,t.arg.arg.x),Gg(e,t.arg.arg.y));break;case Pp:r=Lm(e,Gg(e,t.arg.arg.x),Gg(e,t.arg.arg.y));break;case Hp:r=Om(e,Gg(e,t.arg.arg.x),Gg(e,t.arg.arg.y));break;case Ep:var h=ry(e,t.arg.arg.x);r=h.size;break;case Sp:o=Yg(e,t.arg.arg.x),o.str==null?u=String(o.num):u=o.str,r=u.length;break;case td:var d;o=Yg(e,t.arg.arg.x),o.str==null?u=String(o.num):u=o.str,o=Yg(e,t.arg.arg.y),o.str==null?d=String(o.num):d=o.str,r=bb(e,u,d);break;case id:ey(e,t.arg.arg.x)?r=Gg(e,t.arg.arg.y):t.arg.arg.z==null?r=0:r=Gg(e,t.arg.arg.z);break;case od:r=+n;for(s=t.arg.list;s!=null;s=s.next)a=Gg(e,s.x),r>a&&(r=a);break;case ud:r=-n;for(s=t.arg.list;s!=null;s=s.next)a=Gg(e,s.x),r<a&&(r=a);break;case ad:f={},f.code=t,f.value=0,wg(e,t.arg.loop.domain,f,Qg),r=f.value;break;case fd:f={},f.code=t,f.value=1,wg(e,t.arg.loop.domain,f,Qg),r=f.value;break;case ld:f={},f.code=t,f.value=+n,wg(e,t.arg.loop.domain,f,Qg),f.value==+n&&$y(e,"min{} over empty set; result undefined"),r=f.value;break;case cd:f={},f.code=t,f.value=-n,wg(e,t.arg.loop.domain,f,Qg),f.value==-n&&$y(e,"max{} over empty set; result undefined"),r=f.value;break;default:p(t!=t)}return p(!t.valid),t.valid=1,t.value.num=r,r}function Yg(e,t){var n,r;p(t!=null),p(t.type==Ac),p(t.dim==0),t.vflag&&t.valid&&(t.valid=0,fg(e,t.type,t.value));if(t.valid)return Pm(e,t.value.sym);switch(t.op){case Rh:n=Dm(e,t.arg.str);break;case Uh:p(t.arg.index.slot.value!=null),n=Pm(e,t.arg.index.slot.value);break;case Wh:var i,s;i=null;for(s=t.arg.par.list;s!=null;s=s.next)i=Fm(e,i,Yg(e,s.x));n=jg(e,t.arg.par.par,i);break;case np:n=_m(e,Gg(e,t.arg.arg.x));break;case Bp:n=jm(e,Yg(e,t.arg.arg.x),Yg(e,t.arg.arg.y));break;case id:ey(e,t.arg.arg.x)?n=Yg(e,t.arg.arg.y):t.arg.arg.z==null?n=_m(e,0):n=Yg(e,t.arg.arg.z);break;case ed:case sd:var o,u;n=Yg(e,t.arg.arg.x),n.str==null?r=String(n.num):r=n.str,t.op==ed?(o=Gg(e,t.arg.arg.y),o!=Math.floor(o)&&$y(e,"substr('...', "+o+"); non-integer second argument"),(o<1||o>r.length+1)&&$y(e,"substr('...', "+o+"); substring out of range")):(o=Gg(e,t.arg.arg.y),u=Gg(e,t.arg.arg.z),(o!=Math.floor(o)||u!=Math.floor(u))&&$y(e,"substr('...', "+o+", "+u+"); non-integer second and/or third argument"),(o<1||u<0||o+u>r.length+1)&&$y(e,"substr('...', "+o+", "+u+"); substring out of range")),n=Dm(e,r.slice(o-1,o+u-1));break;case nd:var a,f,l;a=Gg(e,t.arg.arg.x),f=Yg(e,t.arg.arg.y),f.str==null?l=String(f.num):l=f.str,r=xb(e,a,l),n=Dm(e,r);break;default:p(t!=t)}return p(!t.valid),t.valid=1,t.value.sym=Pm(e,n),n}function Zg(e,t){var n=0;switch(t.code.op){case hd:t.value&=ey(e,t.code.arg.loop.x),t.value||(n=1);break;case pd:t.value|=ey(e,t.code.arg.loop.x),t.value&&(n=1);break;default:p(t!=t)}return n}function ey(e,t){var n,r,i,s,o,u,a;p(t.type==bc),p(t.dim==0),t.vflag&&t.valid&&(t.valid=0,fg(e,t.type,t.value));if(t.valid)return t.value.bit;switch(t.op){case rp:n=Gg(e,t.arg.arg.x)!=0;break;case ap:n=!ey(e,t.arg.arg.x);break;case jp:p(t.arg.arg.x!=null),t.arg.arg.x.type==xc?n=Gg(e,t.arg.arg.x)<Gg(e,t.arg.arg.y):(r=Yg(e,t.arg.arg.x),i=Yg(e,t.arg.arg.y),n=Hm(e,r,i)<0);break;case Fp:p(t.arg.arg.x!=null),t.arg.arg.x.type==xc?n=Gg(e,t.arg.arg.x)<=Gg(e,t.arg.arg.y):(r=Yg(e,t.arg.arg.x),i=Yg(e,t.arg.arg.y),n=Hm(e,r,i)<=0);break;case Ip:p(t.arg.arg.x!=null),t.arg.arg.x.type==xc?n=Gg(e,t.arg.arg.x)==Gg(e,t.arg.arg.y):(r=Yg(e,t.arg.arg.x),i=Yg(e,t.arg.arg.y),n=Hm(e,r,i)==0);break;case qp:p(t.arg.arg.x!=null),t.arg.arg.x.type==xc?n=Gg(e,t.arg.arg.x)>=Gg(e,t.arg.arg.y):(r=Yg(e,t.arg.arg.x),i=Yg(e,t.arg.arg.y),n=Hm(e,r,i)>=0);break;case Rp:p(t.arg.arg.x!=null),t.arg.arg.x.type==xc?n=Gg(e,t.arg.arg.x)>Gg(e,t.arg.arg.y):(r=Yg(e,t.arg.arg.x),i=Yg(e,t.arg.arg.y),n=Hm(e,r,i)>0);break;case Up:p(t.arg.arg.x!=null),t.arg.arg.x.type==xc?n=Gg(e,t.arg.arg.x)!=Gg(e,t.arg.arg.y):(r=Yg(e,t.arg.arg.x),i=Yg(e,t.arg.arg.y),n=Hm(e,r,i)!=0);break;case zp:n=ey(e,t.arg.arg.x)&&ey(e,t.arg.arg.y);break;case Wp:n=ey(e,t.arg.arg.x)||ey(e,t.arg.arg.y);break;case Qp:s=ty(e,t.arg.arg.x),n=sy(e,t.arg.arg.y,s);break;case Gp:s=ty(e,t.arg.arg.x),n=!sy(e,t.arg.arg.y,s);break;case Yp:o=ry(e,t.arg.arg.x),n=1;for(u=o.head;u!=null;u=u.next)if(!sy(e,t.arg.arg.y,u.tuple)){n=0;break}break;case Zp:o=ry(e,t.arg.arg.x),n=1;for(u=o.head;u!=null;u=u.next)if(sy(e,t.arg.arg.y,u.tuple)){n=0;break}break;case hd:a={},a.code=t,a.value=1,wg(e,t.arg.loop.domain,a,Zg),n=a.value;break;case pd:a={},a.code=t,a.value=0,wg(e,t.arg.loop.domain,a,Zg),n=a.value;break;default:p(t!=t)}return p(!t.valid),t.valid=1,t.value.bit=n,n}function ty(e,t){var n;p(t!=null),p(t.type==Mc),p(t.dim>0),t.vflag&&t.valid&&(t.valid=0,fg(e,t.type,t.value));if(t.valid)return qm(e,t.value.tuple);switch(t.op){case Jh:n=null;for(var r=t.arg.list;r!=null;r=r.next)n=Fm(e,n,Yg(e,r.x));break;case ip:n=Fm(e,null,Yg(e,t.arg.arg.x));break;default:p(t!=t)}return p(!t.valid),t.valid=1,t.value.tuple=qm(e,n),n}function ny(e,t){var n;switch(t.code.op){case dd:n=ty(e,t.code.arg.loop.x),Xm(e,t.value,n)==null&&Vm(e,t.value,n);break;case vd:Vm(e,t.value,Sg(e,t.code.arg.loop.domain));break;default:p(t!=t)}return 0}function ry(e,t){var n,r,i;p(t!=null),p(t.type==cc),p(t.dim>0),t.vflag&&t.valid&&(t.valid=0,fg(e,t.type,t.value));if(t.valid)return Jm(e,t.value.set);switch(t.op){case Xh:var s;s=null;for(r=t.arg.set.list;r!=null;r=r.next)s=Fm(e,s,Yg(e,r.x));n=Jm(e,kg(e,t.arg.set.set,s));break;case Kh:n=Wm(e,t.dim);for(r=t.arg.list;r!=null;r=r.next)$m(e,n,ty(e,r.x));break;case Xp:n=Ym(e,ry(e,t.arg.arg.x),ry(e,t.arg.arg.y));break;case Vp:n=Zm(e,ry(e,t.arg.arg.x),ry(e,t.arg.arg.y));break;case $p:n=eg(e,ry(e,t.arg.arg.x),ry(e,t.arg.arg.y));break;case Jp:n=tg(e,ry(e,t.arg.arg.x),ry(e,t.arg.arg.y));break;case Kp:n=ng(e,ry(e,t.arg.arg.x),ry(e,t.arg.arg.y));break;case rd:n=Gm(e,Gg(e,t.arg.arg.x),Gg(e,t.arg.arg.y),t.arg.arg.z==null?1:Gg(e,t.arg.arg.z));break;case id:ey(e,t.arg.arg.x)?n=ry(e,t.arg.arg.y):n=ry(e,t.arg.arg.z);break;case dd:i={},i.code=t,i.value=Wm(e,t.dim),wg(e,t.arg.loop.domain,i,ny),n=i.value;break;case vd:i={},i.code=t,i.value=Wm(e,t.dim),wg(e,t.arg.loop.domain,i,ny),n=i.value;break;default:p(t!=t)}return p(!t.valid),t.valid=1,t.value.set=Jm(e,n),n}function iy(e,t){p(t==null)}function sy(e,t,n){var r,i,s,o;p(t!=null),p(t.type==cc),p(t.dim>0),p(n!=null);switch(t.op){case Xh:var u;s=null;for(i=t.arg.set.list;i!=null;i=i.next)s=Fm(e,s,Yg(e,i.x));u=kg(e,t.arg.set.set,s),s=Um(e,n,u.dim),r=Xm(e,u,s)!=null;break;case Kh:var a;r=0,s=Um(e,n,t.dim);for(i=t.arg.list;i!=null;i=i.next){a=ty(e,i.x),r=Rm(e,s,a)==0;if(r)break}break;case Xp:r=sy(e,t.arg.arg.x,n)||sy(e,t.arg.arg.y,n);break;case Vp:r=sy(e,t.arg.arg.x,n)&&!sy(e,t.arg.arg.y,n);break;case $p:var f=sy(e,t.arg.arg.x,n),l=sy(e,t.arg.arg.y,n);r=f&&!l||!f&&l;break;case Jp:r=sy(e,t.arg.arg.x,n)&&sy(e,t.arg.arg.y,n);break;case Kp:r=sy(e,t.arg.arg.x,n);if(r){for(o=1;o<=t.arg.arg.x.dim;o++)p(n!=null),n=n.next;r=sy(e,t.arg.arg.y,n)}break;case rd:var c,h,d,v;p(t.dim==1),h=Gg(e,t.arg.arg.x),d=Gg(e,t.arg.arg.y),t.arg.arg.z==null?v=1:v=Gg(e,t.arg.arg.z),Km(e,h,d,v),p(n.sym!=null);if(n.sym.str!=null){r=0;break}c=n.sym.num;if(v>0&&!(h<=c&&c<=d)||v<0&&!(d<=c&&c<=h)){r=0;break}o=((c-h)/v+.5|0)+1,r=Qm(e,h,d,v,o)==c;break;case id:ey(e,t.arg.arg.x)?r=sy(e,t.arg.arg.y,n):r=sy(e,t.arg.arg.z,n);break;case dd:$y(e,"implementation restriction; in/within setof{} not allowed");break;case vd:s=Um(e,n,t.dim),r=yg(e,t.arg.loop.domain,s,null,iy)==0;break;default:p(t!=t)}return r}function oy(e,t){switch(t.code.op){case ad:var n,r=uy(e,t.code.arg.loop.x);t.value==null?(p(t.tail==null),t.value=r):(p(t.tail!=null),t.tail.next=r);for(n=r;n!=null;n=n.next)t.tail=n;break;default:p(t!=t)}return 0}function uy(e,t){var n;p(t!=null),p(t.type==vc),p(t.dim==0),t.vflag&&t.valid&&(t.valid=0,fg(e,t.type,t.value));if(t.valid)return sg(e,t.value.form);switch(t.op){case Vh:var r,i=null;for(r=t.arg.var.list;r!=null;r=r.next)i=Fm(e,i,Yg(e,r.x));p(t.arg.var.suff==Ph),n=ig(e,Ug(e,t.arg.var.var,i));break;case sp:n=rg(e,Gg(e,t.arg.arg.x));break;case op:n=og(e,0,rg(e,0),1,uy(e,t.arg.arg.x));break;case up:n=og(e,0,rg(e,0),-1,uy(e,t.arg.arg.x));break;case xp:n=og(e,1,uy(e,t.arg.arg.x),1,uy(e,t.arg.arg.y));break;case Tp:n=og(e,1,uy(e,t.arg.arg.x),-1,uy(e,t.arg.arg.y));break;case Cp:p(t.arg.arg.x!=null),p(t.arg.arg.y!=null),t.arg.arg.x.type==xc?(p(t.arg.arg.y.type==vc),n=og(e,Gg(e,t.arg.arg.x),uy(e,t.arg.arg.y),0,rg(e,0))):(p(t.arg.arg.x.type==vc),p(t.arg.arg.y.type==xc),n=og(e,Gg(e,t.arg.arg.y),uy(e,t.arg.arg.x),0,rg(e,0)));break;case kp:n=og(e,hm(e,1,Gg(e,t.arg.arg.y)),uy(e,t.arg.arg.x),0,rg(e,0));break;case id:ey(e,t.arg.arg.x)?n=uy(e,t.arg.arg.y):t.arg.arg.z==null?n=rg(e,0):n=uy(e,t.arg.arg.z);break;case ad:var s={};s.code=t,s.value=rg(e,0),s.tail=null,wg(e,t.arg.loop.domain,s,oy),n=ag(e,s.value);break;default:p(t!=t)}return p(!t.valid),t.valid=1,t.value.form=sg(e,n),n}function gy(e,t){var n=e.dca,r,i,s;s=0;for(r=t.u.out.list;r!=null;r=r.next){s++;switch(r.code.type){case xc:n.type[s]="N",n.num[s]=Gg(e,r.code),n.str[s][0]="\0";break;case Ac:i=Yg(e,r.code),i.str==null?(n.type[s]="N",n.num[s]=i.num,n.str[s][0]="\0"):(n.type[s]="S",n.num[s]=0,n.str[s]=i.str);break;default:p(r!=r)}}return mpl_tab_drv_write(e),0}function yy(e,t){var n,r,i,s,o,u,a,f;p(e.dca==null),e.dca=o={},o.id=0,o.link=null,o.na=0,o.arg=null,o.nf=0,o.name=null,o.type=null,o.num=null,o.str=null,p(o.na==0);for(n=t.arg;n!=null;n=n.next)o.na++;o.arg=new Array(1+o.na);for(a=1;a<=o.na;a++)o.arg[a]=null;a=0;for(n=t.arg;n!=null;n=n.next){a++,p(n.code.type==Ac);var l=Yg(e,n.code);l.str==null?f=String(l.num):f=l.str,o.arg[a]=f}switch(t.type){case gc:u=t.u.in.set,u!=null&&(u.data&&$y(e,u.name+" already provided with data"),p(u.array.head==null),pg(e,u.array,null).value.set=Wm(e,u.dimen),u.data=1);for(i=t.u.in.list;i!=null;i=i.next)i.par.data&&$y(e,i.par.name+" already provided with data"),i.par.data=1;p(o.nf==0);for(r=t.u.in.fld;r!=null;r=r.next)o.nf++;for(i=t.u.in.list;i!=null;i=i.next)o.nf++;o.name=new Array(1+o.nf),o.type=new Array(1+o.nf),o.num=new Array(1+o.nf),o.str=new Array(1+o.nf),a=0;for(r=t.u.in.fld;r!=null;r=r.next)a++,o.name[a]=r.name,o.type[a]="?",o.num[a]=0,o.str[a]="";for(i=t.u.in.list;i!=null;i=i.next)a++,o.name[a]=i.name,o.type[a]="?",o.num[a]=0,o.str[a]="";mpl_tab_drv_open(e,"R");for(;;){var c;for(a=1;a<=o.nf;a++)o.type[a]="?";if(mpl_tab_drv_read(e))break;for(a=1;a<=o.nf;a++)o.type[a]=="?"&&$y(e,"field "+o.name[a]+" missing in input table");c=null,a=0;for(r=t.u.in.fld;r!=null;r=r.next){a++,p(a<=o.nf);switch(o.type[a]){case"N":c=Fm(e,c,_m(e,o.num[a]));break;case"S":p(o.str[a].length<=Dc),c=Fm(e,c,Dm(e,o.str[a]));break;default:p(o!=o)}}t.u.in.set!=null&&$m(e,t.u.in.set.array.head.value.set,qm(e,c));for(i=t.u.in.list;i!=null;i=i.next){var h;a++,p(a<=o.nf),hg(e,i.par.array,c)!=null&&$y(e,i.par.name+zm(e,"[",c)+" already defined"),h=pg(e,i.par.array,qm(e,c));switch(i.par.type){case xc:case yc:case oc:o.type[a]!="N"&&$y(e,i.par.name+" requires numeric data"),h.value.num=o.num[a];break;case Ac:switch(o.type[a]){case"N":h.value.sym=_m(e,o.num[a]);break;case"S":p(o.str[a].length<=Dc),h.value.sym=Dm(e,o.str[a]);break;default:p(o!=o)}break;default:p(i!=i)}}}break;case Tc:p(o.nf==0);for(s=t.u.out.list;s!=null;s=s.next)o.nf++;o.name=new Array(1+o.nf),o.type=new Array(1+o.nf),o.num=new Array(1+o.nf),o.str=new Array(1+o.nf),a=0;for(s=t.u.out.list;s!=null;s=s.next)a++,o.name[a]=s.name,o.type[a]="?",o.num[a]=0,o.str[a]="";mpl_tab_drv_open(e,"W"),wg(e,t.u.out.domain,t,gy);break;default:p(t!=t)}}function by(e,t){return ey(e,t.code)||$y(e,"check"+zm(e,"[",Sg(e,t.domain))+" failed"),0}function wy(e,t){wg(e,t.domain,t,by)}function Ey(e,t,n){var r=n.value.set,i;Xy(e,t.name+zm(e,"[",n.tuple)+(r.head==null?" is empty":":"));for(i=r.head;i!=null;i=i.next)Xy(e,"   "+zm(e,"(",i.tuple))}function Sy(e,t,n){switch(t.type){case xc:case yc:case oc:Xy(e,t.name+zm(e,"[",n.tuple)+" = "+n.value.num);break;case Ac:Xy(e,t.name+zm(e,"[",n.tuple)+" = "+Bm(e,n.value.sym));break;default:p(t!=t)}}function xy(e,t,r,i){i==Ph||i==Fh?Xy(e,t.name+zm(e,"[",r.tuple)+".val = "+r.value.var.prim):i==Hh?Xy(e,t.name+zm(e,"[",r.tuple)+".lb = "+(r.value.var.var.lbnd==null?-n:r.value.var.lbnd)):i==Bh?Xy(e,t.name+zm(e,"[",r.tuple)+".ub = "+(r.value.var.var.ubnd==null?+n:r.value.var.ubnd)):i==jh?Xy(e,t.name+zm(e,"[",r.tuple)+".status = "+r.value.var.stat):i==Ih?Xy(e,t.name+zm(e,"[",r.tuple)+".dual = "+r.value.var.dual):p(i!=i)}function Ty(e,t,r,i){i==Ph||i==Fh?Xy(e,t.name+zm(e,"[",r.tuple)+".val = "+r.value.con.prim):i==Hh?Xy(e,t.name+zm(e,"[",r.tuple)+".lb = "+(r.value.con.con.lbnd==null?-n:r.value.con.lbnd)):i==Bh?Xy(e,t.name+zm(e,"[",r.tuple)+".ub = "+(r.value.con.con.ubnd==null?+n:r.value.con.ubnd)):i==jh?Xy(e,t.name+zm(e,"[",r.tuple)+".status = "+r.value.con.stat):i==Ih?Xy(e,t.name+zm(e,"[",r.tuple)+".dual = "+r.value.con.dual):p(i!=i)}function Ny(e,t){var n={},r;p(t.op==zh||t.op==Wh||t.op==Xh||t.op==Vh||t.op==$h),n.tuple=null;for(r=t.arg.par.list;r!=null;r=r.next)n.tuple=Fm(e,n.tuple,Yg(e,r.x));switch(t.op){case zh:n.value.num=Dg(e,t.arg.par.par,n.tuple),Sy(e,t.arg.par.par,n);break;case Wh:n.value.sym=jg(e,t.arg.par.par,n.tuple),Sy(e,t.arg.par.par,n);break;case Xh:n.value.set=kg(e,t.arg.set.set,n.tuple),Ey(e,t.arg.set.set,n);break;case Vh:n.value.var=Ug(e,t.arg.var.var,n.tuple),xy(e,t.arg.var.var,n,t.arg.var.suff);break;case $h:n.value.con=$g(e,t.arg.con.con,n.tuple),Ty(e,t.arg.con.con,n,t.arg.con.suff);break;default:p(t!=t)}}function Cy(e,t){switch(t.type){case xc:var n=Gg(e,t);Xy(e,String(n));break;case Ac:var r=Yg(e,t);Xy(e,Bm(e,r));break;case bc:var i=ey(e,t);Xy(e,i?"true":"false");break;case Mc:var s=ty(e,t);Xy(e,zm(e,"(",s));break;case cc:var o=ry(e,t);o.head==0&&Xy(e,"set is empty");for(var u=o.head;u!=null;u=u.next)Xy(e,"   "+zm(e,"(",u.tuple));break;case vc:var a,f=uy(e,t);f==null&&Xy(e,"linear form is empty");for(a=f;a!=null;a=a.next)a.var==null?Xy(e,"   "+a.coef):Xy(e,"   "+a.coef+" "+a.var.var.name+zm(e,"[",a.var.memb.tuple));break;default:p(t!=t)}}function ky(e,t){var n;for(var r=t.list;r!=null;r=r.next)if(r.type==mc){var i=r.u.slot;Xy(e,i.name+" = "+Bm(e,i.value))}else if(r.type==kc){var s=r.u.set;s.assign!=null?Ag(e,s):(s.gadget!=null&&s.data==0&&Cg(e,s),s.array.head!=null&&kg(e,s,s.array.head.tuple)),s.array.head==null&&Xy(e,s.name+" has empty content");for(n=s.array.head;n!=null;n=n.next)Ey(e,s,n)}else if(r.type==Nc){var o=r.u.par;o.assign!=null?Ig(e,o):o.array.head!=null&&(o.type!=Ac?Dg(e,o,o.array.head.tuple):jg(e,o,o.array.head.tuple)),o.array.head==null&&Xy(e,o.name+" has empty content");for(n=o.array.head;n!=null;n=n.next)Sy(e,o,n)}else if(r.type==_c){var u=r.u.var;p(e.flag_p),u.array.head==null&&Xy(e,u.name+" has empty content");for(n=u.array.head;n!=null;n=n.next)xy(e,u,n,Ph)}else if(r.type==ac){var a=r.u.con;p(e.flag_p),a.array.head==null&&Xy(e,a.name+" has empty content");for(n=a.array.head;n!=null;n=n.next)Ty(e,a,n,Ph)}else if(r.type==pc){var f=r.u.code;f.op==zh||f.op==Wh||f.op==Xh||f.op==Vh||f.op==$h?Ny(e,f):Cy(e,f)}else p(r!=r);return 0}function Ly(e,t){wg(e,t.domain,t,ky)}function Ay(e,t){e.prt_fp==null?Wy(e,t):e.prt_fp(t)}function Oy(e,t){p(t.length<Hc);for(var n=0;n<t.length;n++)Ay(e,t[n])}function My(e,t){var n,r,i,o,u,a=Yg(e,t.fmt);a.str==null?r=String(a.num):r=a.str,n=t.list;for(o=0;o<r.length;o++)if(r[o]=="%"){i=o++;if(r[o]=="%"){Ay(e,"%");continue}if(n==null)break;while(r[o]=="-"||r[o]=="+"||r[o]==" "||r[o]=="#"||r[o]=="0")o++;while(A(r[o]))o++;if(r[o]=="."){o++;while(A(r[o]))o++}if(r[o]=="d"||r[o]=="i"||r[o]=="e"||r[o]=="E"||r[o]=="f"||r[o]=="F"||r[o]=="g"||r[o]=="G"){p(n!=null);switch(n.code.type){case xc:u=Gg(e,n.code);break;case Ac:a=Yg(e,n.code),a.str!=null&&$y(e,"cannot convert "+Bm(e,a)+" to floating-point number"),u=a.num;break;case bc:ey(e,n.code)?u=1:u=0;break;default:p(n!=n)}if(r[o]=="d"||r[o]=="i"){var f=s;-f<=u&&u<=+f||$y(e,"cannot convert "+u+" to integer"),Oy(e,_(r.slice(i,o+1),Math.floor(u+.5)|0))}else Oy(e,_(r.slice(i,o+1),u))}else if(r[o]=="s"){switch(n.code.type){case xc:u=String(Gg(e,n.code));break;case bc:ey(e,n.code)?u="T":u="F";break;case Ac:a=Yg(e,n.code),a.str==null?u=String(a.num):u=a.str;break;default:p(n!=n)}Oy(e,_(r.slice(i,o+1),u))}else $y(e,"format specifier missing or invalid");n=n.next}else r[o]=="\\"?(o++,r[o]=="t"?Ay(e,"	"):r[o]=="n"?Ay(e,"\n"):r[o]=="\0"?$y(e,"invalid use of escape character \\ in format control string"):Ay(e,r[o])):Ay(e,r[o]);return 0}function _y(e,t){wg(e,t.domain,t,My)}function Dy(e,t){var n=e.stmt;for(var r=t.list;r!=null;r=r.next)Hy(e,r);return e.stmt=n,0}function Py(e,t){wg(e,t.domain,t,Dy)}function Hy(e,t){e.stmt=t;switch(t.type){case kc:case Nc:case _c:break;case ac:d("Generating "+t.u.con.name+"..."),Kg(e,t.u.con);break;case Oc:switch(t.u.tab.type){case gc:d("Reading "+t.u.tab.name+"...");break;case Tc:d("Writing "+t.u.tab.name+"...");break;default:p(t!=t)}yy(e,t.u.tab);break;case Lc:break;case uc:d("Checking (line "+t.line+")..."),wy(e,t.u.chk);break;case fc:Xy(e,"Display statement at line "+t.line),Ly(e,t.u.dpy);break;case Cc:_y(e,t.u.prt);break;case dc:Py(e,t.u.fur);break;default:p(t!=t)}}function By(e){var t;for(t=e.model;t!=null;t=t.next)switch(t.type){case kc:p(t.u.set.array==null),t.u.set.array=lg(e,cc,t.u.set.dim);break;case Nc:p(t.u.par.array==null);switch(t.u.par.type){case xc:case yc:case oc:t.u.par.array=lg(e,xc,t.u.par.dim);break;case Ac:t.u.par.array=lg(e,Ac,t.u.par.dim);break;default:p(t!=t)}break;case _c:p(t.u.var.array==null),t.u.var.array=lg(e,hc,t.u.var.dim);break;case ac:p(t.u.con.array==null),t.u.con.array=lg(e,lc,t.u.con.dim);break;case Oc:case Lc:case uc:case fc:case Cc:case dc:break;default:p(t!=t)}}function jy(e){var t;p(!e.flag_p);for(t=e.model;t!=null;t=t.next){Hy(e,t);if(e.stmt.type==Lc)break}e.stmt=t}function Fy(e){var t,n,r,i,s,o,u;p(e.m==0),p(e.n==0),p(e.row==null),p(e.col==null);for(t=e.model;t!=null;t=t.next)if(t.type==_c){r=t.u.var;for(n=r.array.head;n!=null;n=n.next)p(n.value.var.j==0)}for(t=e.model;t!=null;t=t.next)if(t.type==ac){i=t.u.con;for(n=i.array.head;n!=null;n=n.next){p(n.value.con.i==0),n.value.con.i=++e.m;for(s=n.value.con.form;s!=null;s=s.next)p(s.var!=null),s.var.memb.value.var.j=-1}}for(t=e.model;t!=null;t=t.next)if(t.type==_c){r=t.u.var;for(n=r.array.head;n!=null;n=n.next)n.value.var.j!=0&&(n.value.var.j=++e.n)}e.row=new Array(1+e.m);for(o=1;o<=e.m;o++)e.row[o]=null;for(t=e.model;t!=null;t=t.next)if(t.type==ac){i=t.u.con;for(n=i.array.head;n!=null;n=n.next)o=n.value.con.i,p(1<=o&&o<=e.m),p(e.row[o]==null),e.row[o]=n.value.con}for(o=1;o<=e.m;o++)p(e.row[o]!=null);e.col=new Array(1+e.n);for(u=1;u<=e.n;u++)e.col[u]=null;for(t=e.model;t!=null;t=t.next)if(t.type==_c){r=t.u.var;for(n=r.array.head;n!=null;n=n.next){u=n.value.var.j;if(u==0)continue;p(1<=u&&u<=e.n),p(e.col[u]==null),e.col[u]=n.value.var}}for(u=1;u<=e.n;u++)p(e.col[u]!=null)}function Iy(e){var t;p(!e.flag_p),e.flag_p=1;for(t=e.stmt;t!=null;t=t.next)Hy(e,t);e.stmt=null}function qy(e,t,n){e.line=0,e.c="\n",e.token=0,e.imlen=0,e.image="",e.value=0,e.b_token=Bc,e.b_imlen=0,e.b_image="",e.b_value=0,e.f_dots=0,e.f_scan=0,e.f_token=0,e.f_imlen=0,e.f_image="",e.f_value=0,g(e.context,0," ",Pc),e.c_ptr=0,p(e.in_fp==null),e.in_fp=n,e.in_file=t||"input",Od(e),_d(e)}function Ry(e){var t;return p(e.in_fp!=null),t=e.in_fp(),t<0&&(t=sc),t}function Uy(e){p(e.in_fp!=null),e.in_fp=null}function zy(e,t,n){p(e.out_fp==null),n==null?e.out_fp=d:(e.out_fp=n,e.out_fp==null&&$y(e,"unable to use output callback"),e.out_file=t),e.flush=""}function Wy(e,t){p(e.out_fp!=null),t=="\n"?(e.out_fp(e.flush),e.flush=""):e.flush+=t}function Xy(e,t){p(e.out_fp!=null),e.out_fp(t)}function Vy(e){p(e.out_fp!=null)}function $y(e,t){var n;switch(e.phase){case 1:case 2:n=e.in_file+":"+e.line+": "+t,Ad(e);break;case 3:n=(e.stmt==null?0:e.stmt.line)+": "+t;break;default:p(e!=e)}throw e.phase=4,new Error(t)}function Jy(e,t){switch(e.phase){case 1:case 2:d(e.in_file+":"+e.line+": warning: "+t);break;case 3:d(e.mod_file+":"+(e.stmt==null?0:e.stmt.line)+": warning: "+t);break;default:p(e!=e)}}function db(e){return Math.round(Date.now()/1e3)}function gb(e,t){var n="";while(t>0)n+=e,t--;return n}function yb(e,t,n,r,i,s){d("Input string passed to str2time:"),d(t),d(gb("^",n+1)),d("Format string passed to str2time:\n"),d(r),d(gb("^",i+1)),$y(e,s)}function bb(e,t,n){function v(){yb(e,t,h,n,d,"time zone offset value incomplete or invalid")}function m(){yb(e,t,h,n,d,"time zone offset value out of range")}function g(){t[h]!=n[d]&&yb(e,t,h,n,d,"character mismatch"),h++}var r,i,o,u,a,f,l,c,h,d;i=o=u=a=f=l=-1,c=s,h=0;for(d=0;d<n.length;d++)if(n[d]=="%"){d++;if(n[d]=="b"||n[d]=="h"){var y,b;o>=0&&yb(e,t,h,n,d,"month multiply specified");while(t[h]==" ")h++;for(o=1;o<=12;o++){b=mb[o-1];var w=!1;for(y=0;y<=2;y++)if(h[y].toUpperCase()!=b[y].toUpperCase()){w=!0;break}if(w)continue;h+=3;for(y=3;b[y]!="\0";y++){if(t[h].toUpperCase()!=b[y].toUpperCase())break;h++}break}o>12&&yb(e,t,h,n,d,"abbreviated month name missing or invalid")}else if(n[d]=="d"){u>=0&&yb(e,t,h,n,d,"day multiply specified");while(t[h]==" ")h++;"0"<=t[h]&&t[h]<="9"||yb(e,t,h,n,d,"day missing or invalid"),u=t[h++]-"0","0"<=t[h]&&t[h]<="9"&&(u=10*u+(t[h++]-"0")),1<=u&&u<=31||yb(e,t,h,n,d,"day out of range")}else if(n[d]=="H"){a>=0&&yb(e,t,h,n,d,"hour multiply specified");while(t[h]==" ")h++;"0"<=t[h]&&t[h]<="9"||yb(e,t,h,n,d,"hour missing or invalid"),a=t[h++]-"0","0"<=t[h]&&t[h]<="9"&&(a=10*a+(t[h++]-"0")),0<=a&&a<=23||yb(e,t,h,n,d,"hour out of range")}else if(n[d]=="m"){o>=0&&yb(e,t,h,n,d,"month multiply specified");while(t[h]==" ")h++;"0"<=t[h]&&t[h]<="9"||yb(e,t,h,n,d,"month missing or invalid"),o=t[h++]-"0","0"<=t[h]&&t[h]<="9"&&(o=10*o+(t[h++]-"0")),1<=o&&o<=12||yb(e,t,h,n,d,"month out of range")}else if(n[d]=="M"){f>=0&&yb(e,t,h,n,d,"minute multiply specified");while(t[h]==" ")h++;"0"<=t[h]&&t[h]<="9"||yb(e,t,h,n,d,"minute missing or invalid"),f=t[h++]-"0","0"<=t[h]&&t[h]<="9"&&(f=10*f+(t[h++]-"0")),0<=f&&f<=59||yb(e,t,h,n,d,"minute out of range")}else if(n[d]=="S"){l>=0&&yb(e,t,h,n,d,"second multiply specified");while(t[h]==" ")h++;"0"<=t[h]&&t[h]<="9"||yb(e,t,h,n,d,"second missing or invalid"),l=t[h++]-"0","0"<=t[h]&&t[h]<="9"&&(l=10*l+(t[h++]-"0")),0<=l&&l<=60||yb(e,t,h,n,d,"second out of range")}else if(n[d]=="y"){i>=0&&yb(e,t,h,n,d,"year multiply specified");while(t[h]==" ")h++;"0"<=t[h]&&t[h]<="9"||yb(e,t,h,n,d,"year missing or invalid"),i=t[h++]-"0","0"<=t[h]&&t[h]<="9"&&(i=10*i+(t[h++]-"0")),i+=i>=69?1900:2e3}else if(n[d]=="Y"){i>=0&&yb(e,t,h,n,d,"year multiply specified");while(t[h]==" ")h++;"0"<=t[h]&&t[h]<="9"||yb(e,t,h,n,d,"year missing or invalid"),i=0;for(r=1;r<=4;r++){if(!("0"<=t[h]&&t[h]<="9"))break;i=10*i+(t[h++]-"0")}1<=i&&i<=4e3||yb(e,t,h,n,d,"year out of range")}else if(n[d]=="z"){var E;c!=s&&yb(e,t,h,n,d,"time zone offset multiply specified");while(t[h]==" ")h++;if(t[h]=="Z")E=a=f=0,h++;else{t[h]=="+"?(E=1,h++):t[h]=="-"?(E=-1,h++):yb(e,t,h,n,d,"time zone offset sign missing"),a=0;for(r=1;r<=2;r++)"0"<=t[h]&&t[h]<="9"||v(),a=10*a+(t[h++]-"0");a>23&&m(),t[h]==":"&&(h++,"0"<=t[h]&&t[h]<="9"||v()),f=0;if("0"<=t[h]&&t[h]<="9"){for(r=1;r<=2;r++)"0"<=t[h]&&t[h]<="9"||v(),f=10*f+(t[h++]-"0");f>59&&m()}}c=E*(60*a+f)}else n[d]=="%"?g():yb(e,t,h,n,d,"invalid conversion specifier")}else n[d]!=" "&&g();return i<0&&(i=1970),o<0&&(o=1),u<0&&(u=1),a<0&&(a=0),f<0&&(f=0),l<0&&(l=0),c==s&&(c=0),r=Ea(u,o,i),p(r>=0),(((r-Ea(1,1,1970))*24+a)*60+f)*60+l-60*c}function wb(e,t,n,r){d("Format string passed to time2str:"),d(t),d(gb("^",n)),$y(e,r)}function Eb(e){return(e+Ea(1,1,1970))%7+1}function Sb(e){var t;t=Ea(1,1,e)-Ea(1,1,1970);switch(Eb(t)){case 1:t+=0;break;case 2:t-=1;break;case 3:t-=2;break;case 4:t-=3;break;case 5:t+=3;break;case 6:t+=2;break;case 7:t+=1;break;default:p(t!=t)}return p(Eb(t)==1),t}function xb(e,t,n){var r,i=0,s=0,o=0,u,a,f,l,c,h,d="",v;-62135596800<=t&&t<=64092211199||$y(e,"time2str("+t+",...); argument out of range"),t=Math.floor(t+.5),c=Math.abs(t)/86400,r=Math.floor(c),t<0&&(c==Math.floor(c)?r=-r:r=-(r+1)),p(Sa(r+Ea(1,1,1970),function(e,t,n){o=e;s=t;i=n})==0),f=t-86400*r|0,p(0<=f&&f<86400),a=f/60,f%=60,u=a/60,a%=60,l=0;for(h=0;h<n.length;h++){if(n[h]=="%"){h++;if(n[h]=="a")v=vb[Eb(r)-1].slice(0,3);else if(n[h]=="A")v=vb[Eb(r)-1];else if(n[h]=="b"||n[h]=="h")v=mb[s-1].slice(0,3);else if(n[h]=="B")v=mb[s-1];else if(n[h]=="C")v=String(Math.floor(i/100));else if(n[h]=="d")v=String(o);else if(n[h]=="D")v=s+"/"+o+"/"+i%100;else if(n[h]=="e")v=String(o);else if(n[h]=="F")_(v,i+"-"+s+"-"+o);else if(n[h]=="g"){var m;r<Sb(i)?m=i-1:r<Sb(i+1)?m=i:m=i+1,v=String(m%100)}else if(n[h]=="G"){var m;r<Sb(i)?m=i-1:r<Sb(i+1)?m=i:m=i+1,v=String(m)}else if(n[h]=="H")v=String(u);else if(n[h]=="I")v=String(u==0?12:u<=12?u:u-12);else if(n[h]=="j")v=String(Ea(o,s,i)-Ea(1,1,i)+1);else if(n[h]=="k")v=String(u);else if(n[h]=="l")v=String(u==0?12:u<=12?u:u-12);else if(n[h]=="m")v=String(s);else if(n[h]=="M")v=String(a);else if(n[h]=="p")v=u<=11?"AM":"PM";else if(n[h]=="P")v=u<=11?"am":"pm";else if(n[h]=="r")v=(u==0?12:u<=12?u:u-12)+":"+a+":"+f+" "+(u<=11?"AM":"PM");else if(n[h]=="R")v=u+":"+a;else if(n[h]=="S")v=String(f);else if(n[h]=="T")v=u+":"+a+":"+f;else if(n[h]=="u")v=String(Eb(r));else if(n[h]=="U"){var g=Ea(1,1,i)-Ea(1,1,1970);g+=7-Eb(g),v=String((r+7-g)/7)}else if(n[h]=="V"){var m;r<Sb(i)?m=r-Sb(i-1):r<Sb(i+1)?m=r-Sb(i):m=r-Sb(i+1),v=String(m/7+1)}else if(n[h]=="w")v=String(Eb(r)%7);else if(n[h]=="W"){var y=Ea(1,1,i)-Ea(1,1,1970);y+=(8-Eb(y))%7,v=String((r+7-y)/7)}else n[h]=="y"?v=String(i%100):n[h]=="Y"?v=String(i):n[h]=="%"?v="%":wb(e,n,h,"invalid conversion specifier")}else v=n[h];l+v.length>Dc&&$y(e,"time2str; output string length exceeds "+Dc+" charaters"),d+=v,l+=v.length}return d}function Tb(){}function Nb(){var e={};return e.orig_dir=0,e.orig_m=e.orig_n=e.orig_nnz=0,e.name=e.obj=null,e.c0=0,e.nrows=e.ncols=0,e.r_head=e.r_tail=null,e.c_head=e.c_tail=null,e.top=null,e.m=e.n=e.nnz=0,e.row_ref=e.col_ref=null,e.sol=e.scaling=0,e.p_stat=e.d_stat=e.t_stat=e.i_stat=0,e.r_stat=null,e.r_pi=null,e.c_stat=null,e.c_value=null,e}function Cb(e,t,n){n==0?(t.prev=null,t.next=e.r_head,t.next==null?e.r_tail=t:t.next.prev=t,e.r_head=t):(t.prev=e.r_tail,t.next=null,t.prev==null?e.r_head=t:t.prev.next=t,e.r_tail=t)}function kb(e,t){t.prev==null?e.r_head=t.next:t.prev.next=t.next,t.next==null?e.r_tail=t.prev:t.next.prev=t.prev}function Lb(e,t){t.temp||(t.temp=1,kb(e,t),Cb(e,t,0))}function Ab(e,t){t.temp&&(t.temp=0,kb(e,t),Cb(e,t,1))}function Ob(e,t,n){n==0?(t.prev=null,t.next=e.c_head,t.next==null?e.c_tail=t:t.next.prev=t,e.c_head=t):(t.prev=e.c_tail,t.next=null,t.prev==null?e.c_head=t:t.prev.next=t,e.c_tail=t)}function Mb(e,t){t.prev==null?e.c_head=t.next:t.prev.next=t.next,t.next==null?e.c_tail=t.prev:t.next.prev=t.prev}function _b(e,t){t.temp||(t.temp=1,Mb(e,t),Ob(e,t,0))}function Db(e,t){t.temp&&(t.temp=0,Mb(e,t),Ob(e,t,1))}function Pb(e){var t={};return t.i=++e.nrows,t.name=null,t.lb=-n,t.ub=+n,t.ptr=null,t.temp=0,Cb(e,t,1),t}function Hb(e){var t={};return t.j=++e.ncols,t.name=null,t.is_int=0,t.lb=t.ub=t.coef=0,t.ptr=null,t.temp=0,t.ll={},t.uu={},Ob(e,t,1),t}function Bb(e,t,n){var r={};return r.row=e,r.col=t,r.val=n,r.r_prev=null,r.r_next=e.ptr,r.c_prev=null,r.c_next=t.ptr,r.r_next!=null&&(r.r_next.r_prev=r),r.c_next!=null&&(r.c_next.c_prev=r),e.ptr=t.ptr=r,r}function jb(e){var t=0;for(var n=e.ptr;n!=null;n=n.r_next)t++;return t}function Fb(e){var t=0;for(var n=e.ptr;n!=null;n=n.c_next)t++;return t}function Ib(e,t){var n;return n={},n.func=t,n.info={},n.link=e.top,e.top=n,n.info}function qb(e){var t;while(e.ptr!=null)t=e.ptr,e.ptr=t.r_next,t.c_prev==null?t.col.ptr=t.c_next:t.c_prev.c_next=t.c_next,t.c_next!=null&&(t.c_next.c_prev=t.c_prev)}function Rb(e,t){qb(t),kb(e,t)}function Ub(e,t){var n;while(t.ptr!=null)n=t.ptr,t.ptr=n.c_next,n.r_prev==null?n.row.ptr=n.r_next:n.r_prev.r_next=n.r_next,n.r_next!=null&&(n.r_next.r_prev=n.r_prev);Mb(e,t)}function zb(e){e.r_prev==null?e.row.ptr=e.r_next:e.r_prev.r_next=e.r_next,e.r_next!=null&&(e.r_next.r_prev=e.r_prev),e.c_prev==null?e.col.ptr=e.c_next:e.c_prev.c_next=e.c_next,e.c_next!=null&&(e.c_next.c_prev=e.c_prev)}function Wb(e,t,r,i,s){var o=t.m,u=t.n,a,f,l,c;p(r==Js||r==$s),p(i==es||i==ts||i==ns),p(s==Js||s==$s),i==ns&&p(!s),e.orig_dir=t.dir,e.orig_dir==Pi?c=1:e.orig_dir==Hi?c=-1:p(e!=e),e.orig_m=o,e.orig_n=u,e.orig_nnz=t.nnz,r&&t.name!=null&&(e.name=t.name),r&&t.obj!=null&&(e.obj=t.obj),e.c0=c*t.c0,a=new Array(1+o);for(f=1;f<=o;f++){var h=t.row[f],d;a[f]=d=Pb(e),p(d.i==f),r&&h.name!=null&&(d.name=h.name);if(!s)h.type==Ii?(d.lb=-n,d.ub=+n):h.type==qi?(d.lb=h.lb,d.ub=+n):h.type==Ri?(d.lb=-n,d.ub=h.ub):h.type==Ui?(d.lb=h.lb,d.ub=h.ub):h.type==zi?d.lb=d.ub=h.lb:p(h!=h);else{var v=h.rii;h.type==Ii?(d.lb=-n,d.ub=+n):h.type==qi?(d.lb=h.lb*v,d.ub=+n):h.type==Ri?(d.lb=-n,d.ub=h.ub*v):h.type==Ui?(d.lb=h.lb*v,d.ub=h.ub*v):h.type==zi?d.lb=d.ub=h.lb*v:p(h!=h)}}for(l=1;l<=u;l++){var m=t.col[l],g,y;y=Hb(e),p(y.j==l),r&&m.name!=null&&(y.name=m.name),i==ns&&(y.is_int=Number(m.kind==ji));if(!s){m.type==Ii?(y.lb=-n,y.ub=+n):m.type==qi?(y.lb=m.lb,y.ub=+n):m.type==Ri?(y.lb=-n,y.ub=m.ub):m.type==Ui?(y.lb=m.lb,y.ub=m.ub):m.type==zi?y.lb=y.ub=m.lb:p(m!=m),y.coef=c*m.coef;for(g=m.ptr;g!=null;g=g.c_next)Bb(a[g.row.i],y,g.val)}else{var b=m.sjj;m.type==Ii?(y.lb=-n,y.ub=+n):m.type==qi?(y.lb=m.lb/b,y.ub=+n):m.type==Ri?(y.lb=-n,y.ub=m.ub/b):m.type==Ui?(y.lb=m.lb/b,y.ub=m.ub/b):m.type==zi?y.lb=y.ub=m.lb/b:p(m!=m),y.coef=c*m.coef*b;for(g=m.ptr;g!=null;g=g.c_next)Bb(a[g.row.i],y,g.row.rii*g.val*b)}}e.sol=i,e.scaling=s}function Xb(e,t){var r,i,s,o,u,a,f,l,c,h;et(t),B(t,e.name),j(t,e.obj),F(t,e.orig_dir),e.orig_dir==Pi?c=1:e.orig_dir==Hi?c=-1:p(e!=e),X(t,0,c*e.c0);for(r=e.r_head;r!=null;r=r.next)r.temp=o=I(t,1),R(t,o,r.name),r.lb==-n&&r.ub==+n?a=Ii:r.ub==+n?a=qi:r.lb==-n?a=Ri:r.lb!=r.ub?a=Ui:a=zi,z(t,o,a,r.lb,r.ub);l=new Array(1+t.m),h=new Array(1+t.m);for(i=e.c_head;i!=null;i=i.next){u=q(t,1),U(t,u,i.name),Wt(t,u,i.is_int?ji:Bi),i.lb==-n&&i.ub==+n?a=Ii:i.ub==+n?a=qi:i.lb==-n?a=Ri:i.lb!=i.ub?a=Ui:a=zi,W(t,u,a,i.lb,i.ub),X(t,u,c*i.coef),f=0;for(s=i.ptr;s!=null;s=s.c_next)f++,l[f]=s.row.temp,h[f]=s.val;$(t,u,f,l,h)}e.m=t.m,e.n=t.n,e.nnz=t.nnz,e.row_ref=new Array(1+e.m),e.col_ref=new Array(1+e.n);for(r=e.r_head,o=0;r!=null;r=r.next)e.row_ref[++o]=r.i;for(i=e.c_head,u=0;i!=null;i=i.next)e.col_ref[++u]=i.j;e.name=e.obj=null,e.c0=0,e.r_head=e.r_tail=null,e.c_head=e.c_tail=null}function Vb(e,t){var r,i,s,o,u,a,f;p(e.orig_dir==t.dir),e.orig_dir==Pi?f=1:e.orig_dir==Hi?f=-1:p(e!=e),p(e.m==t.m),p(e.n==t.n),p(e.nnz==t.nnz),e.sol==es?(e.p_stat=t.pbs_stat,e.d_stat=t.dbs_stat):e.sol==ts?e.t_stat=t.ipt_stat:e.sol==ns?e.i_stat=t.mip_stat:p(e!=e);if(e.sol==es){e.r_stat==null&&(e.r_stat=new Array(1+e.nrows));for(o=1;o<=e.nrows;o++)e.r_stat[o]=0;e.c_stat==null&&(e.c_stat=new Array(1+e.ncols));for(u=1;u<=e.ncols;u++)e.c_stat[u]=0}e.c_value==null&&(e.c_value=new Array(1+e.ncols));for(u=1;u<=e.ncols;u++)e.c_value[u]=n;if(e.sol!=ns){e.r_pi==null&&(e.r_pi=new Array(1+e.nrows));for(o=1;o<=e.nrows;o++)e.r_pi[o]=n}if(e.sol==es){for(o=1;o<=e.m;o++)r=t.row[o],a=e.row_ref[o],e.r_stat[a]=r.stat,e.r_pi[a]=f*r.dual;for(u=1;u<=e.n;u++)i=t.col[u],a=e.col_ref[u],e.c_stat[a]=i.stat,e.c_value[a]=i.prim}else if(e.sol==ts){for(o=1;o<=e.m;o++)r=t.row[o],a=e.row_ref[o],e.r_pi[a]=f*r.dval;for(u=1;u<=e.n;u++)i=t.col[u],a=e.col_ref[u],e.c_value[a]=i.pval}else if(e.sol==ns)for(u=1;u<=e.n;u++)i=t.col[u],a=e.col_ref[u],e.c_value[a]=i.mipx;else p(e!=e);for(s=e.top;s!=null;s=s.link)p(s.func!=null),p(s.func(e,s.info)==0)}function $b(e,t){var n,r,i,s,o,u,a;p(e.orig_dir==t.dir),e.orig_dir==Pi?o=1:e.orig_dir==Hi?o=-1:p(e!=e),p(e.orig_m==t.m),p(e.orig_n==t.n),p(e.orig_nnz==t.nnz);if(e.sol==es){t.valid=0,t.pbs_stat=e.p_stat,t.dbs_stat=e.d_stat,t.obj_val=t.c0,t.some=0;for(i=1;i<=t.m;i++)n=t.row[i],n.stat=e.r_stat[i],e.scaling?n.dual=o*e.r_pi[i]*n.rii:n.dual=o*e.r_pi[i],n.stat==Wi?n.dual=0:n.stat==Xi?(p(n.type==qi||n.type==Ui),n.prim=n.lb):n.stat==Vi?(p(n.type==Ri||n.type==Ui),n.prim=n.ub):n.stat==$i?(p(n.type==Ii),n.prim=0):n.stat==Ji?(p(n.type==zi),n.prim=n.lb):p(n!=n);for(s=1;s<=t.n;s++)r=t.col[s],r.stat=e.c_stat[s],e.scaling?r.prim=e.c_value[s]*r.sjj:r.prim=e.c_value[s],r.stat==Wi?r.dual=0:r.stat==Xi?(p(r.type==qi||r.type==Ui),r.prim=r.lb):r.stat==Vi?(p(r.type==Ri||r.type==Ui),r.prim=r.ub):r.stat==$i?(p(r.type==Ii),r.prim=0):r.stat==Ji?(p(r.type==zi),r.prim=r.lb):p(r!=r),t.obj_val+=r.coef*r.prim;for(i=1;i<=t.m;i++){n=t.row[i];if(n.stat==Wi){a=0;for(u=n.ptr;u!=null;u=u.r_next)a+=u.val*u.col.prim;n.prim=a}}for(s=1;s<=t.n;s++){r=t.col[s];if(r.stat!=Wi){a=r.coef;for(u=r.ptr;u!=null;u=u.c_next)a-=u.val*u.row.dual;r.dual=a}}}else if(e.sol==ts){t.ipt_stat=e.t_stat,t.ipt_obj=t.c0;for(i=1;i<=t.m;i++)n=t.row[i],e.scaling?n.dval=o*e.r_pi[i]*n.rii:n.dval=o*e.r_pi[i];for(s=1;s<=t.n;s++)r=t.col[s],e.scaling?r.pval=e.c_value[s]*r.sjj:r.pval=e.c_value[s],t.ipt_obj+=r.coef*r.pval;for(i=1;i<=t.m;i++){n=t.row[i],a=0;for(u=n.ptr;u!=null;u=u.r_next)a+=u.val*u.col.pval;n.pval=a}for(s=1;s<=t.n;s++){r=t.col[s],a=r.coef;for(u=r.ptr;u!=null;u=u.c_next)a-=u.val*u.row.dval;r.dval=a}}else if(e.sol==ns){p(!e.scaling),t.mip_stat=e.i_stat,t.mip_obj=t.c0;for(s=1;s<=t.n;s++)r=t.col[s],r.mipx=e.c_value[s],r.kind==ji&&p(r.mipx==Math.floor(r.mipx)),t.mip_obj+=r.coef*r.mipx;for(i=1;i<=t.m;i++){n=t.row[i],a=0;for(u=n.ptr;u!=null;u=u.r_next)a+=u.val*u.col.mipx;n.mipx=a}}else p(e!=e)}function Jb(e,t){var r;p(t.lb==-n&&t.ub==+n),r=Ib(e,function(e,t){return e.sol==es&&(e.r_stat[t.p]=Wi),e.sol!=ns&&(e.r_pi[t.p]=0),0}),r.p=t.i,Rb(e,t)}function Kb(e,t){var r,i;p(t.lb!=-n),p(t.lb<t.ub),i=Hb(e),i.lb=0,i.ub=t.ub==+n?+n:t.ub-t.lb,Bb(t,i,-1),r=Ib(e,function(t,n){if(t.sol==es)if(t.r_stat[n.p]==Wi){if(t.c_stat[n.s]==Wi)return Tb(),1;if(t.c_stat[n.s]!=Xi&&t.c_stat[n.s]!=Vi)return Tb(),1;t.r_stat[n.p]=Wi}else{if(t.r_stat[n.p]!=Ji)return Tb(),1;if(t.c_stat[n.s]==Wi)t.r_stat[n.p]=Wi;else if(t.c_stat[n.s]==Xi)t.r_stat[n.p]=Xi;else{if(t.c_stat[n.s]!=Vi)return Tb(),1;t.r_stat[n.p]=Vi}}return 0}),r.p=t.i,r.s=i.j,t.ub=t.lb}function Qb(e,t){var r,i;p(t.ub!=+n),p(t.lb<t.ub),i=Hb(e),i.lb=0,i.ub=t.lb==-n?+n:t.ub-t.lb,Bb(t,i,1),r=Ib(e,function(e,t){if(e.sol==es)if(e.r_stat[t.p]==Wi){if(e.c_stat[t.s]==Wi)return Tb(),1;if(e.c_stat[t.s]!=Xi&&e.c_stat[t.s]!=Vi)return Tb(),1;e.r_stat[t.p]=Wi}else{if(e.r_stat[t.p]!=Ji)return Tb(),1;if(e.c_stat[t.s]==Wi)e.r_stat[t.p]=Wi;else if(e.c_stat[t.s]==Xi)e.r_stat[t.p]=Vi;else{if(e.c_stat[t.s]!=Vi)return Tb(),1;e.r_stat[t.p]=Xi}}return 0}),r.p=t.i,r.s=i.j,t.lb=t.ub}function Gb(e,t){var r,i,s;p(t.lb==-n&&t.ub==+n),t.lb=0,t.ub=+n,i=Hb(e),i.is_int=t.is_int,i.lb=0,i.ub=+n,i.coef=-t.coef;for(s=t.ptr;s!=null;s=s.c_next)Bb(s.row,i,-s.val);r=Ib(e,function(e,t){if(e.sol==es)if(e.c_stat[t.q]==Wi){if(e.c_stat[t.s]==Wi)return Tb(),1;if(e.c_stat[t.s]!=Xi)return Tb(),-1;e.c_stat[t.q]=Wi}else{if(e.c_stat[t.q]!=Xi)return Tb(),-1;if(e.c_stat[t.s]==Wi)e.c_stat[t.q]=Wi;else{if(e.c_stat[t.s]!=Xi)return Tb(),-1;e.c_stat[t.q]=$i}}return e.c_value[t.q]-=e.c_value[t.s],0}),r.q=t.j,r.s=i.j}function Yb(e,t){var r,i,s;p(t.lb!=0),p(t.lb!=-n),p(t.lb<t.ub),r=Ib(e,function(e,t){if(e.sol==es){if(e.c_stat[t.q]!=Wi&&e.c_stat[t.q]!=Xi&&e.c_stat[t.q]!=Vi)return Tb(),1;e.c_stat[t.q]=e.c_stat[t.q]}return e.c_value[t.q]=t.bnd+e.c_value[t.q],0}),r.q=t.j,r.bnd=t.lb,e.c0+=t.coef*t.lb;for(s=t.ptr;s!=null;s=s.c_next)i=s.row,i.lb==i.ub?i.ub=i.lb-=s.val*t.lb:(i.lb!=-n&&(i.lb-=s.val*t.lb),i.ub!=+n&&(i.ub-=s.val*t.lb));t.ub!=+n&&(t.ub-=t.lb),t.lb=0}function Zb(e,t){var r,i,s;p(t.ub!=+n),p(t.lb<t.ub),r=Ib(e,function(e,t){if(e.sol==Wi)if(e.c_stat[t.q]==Wi)e.c_stat[t.q]=Wi;else if(e.c_stat[t.q]==Xi)e.c_stat[t.q]=Vi;else{if(e.c_stat[t.q]!=Vi)return Tb(),1;e.c_stat[t.q]=Xi}return e.c_value[t.q]=t.bnd-e.c_value[t.q],0}),r.q=t.j,r.bnd=t.ub,e.c0+=t.coef*t.ub,t.coef=-t.coef;for(s=t.ptr;s!=null;s=s.c_next)i=s.row,i.lb==i.ub?i.ub=i.lb-=s.val*t.ub:(i.lb!=-n&&(i.lb-=s.val*t.ub),i.ub!=+n&&(i.ub-=s.val*t.ub)),s.val=-s.val;t.lb!=-n?t.ub-=t.lb:t.ub=+n,t.lb=0}function ew(e,t){var r,i,s;p(t.lb==0),p(t.ub>0),p(t.ub!=+n),s=Hb(e),s.is_int=t.is_int,s.lb=0,s.ub=+n,i=Pb(e),i.lb=i.ub=t.ub,Bb(i,t,1),Bb(i,s,1),r=Ib(e,function(e,t){if(e.sol==Wi)if(e.c_stat[t.q]==Wi)if(e.c_stat[t.s]==Wi)e.c_stat[t.q]=Wi;else{if(e.c_stat[t.s]!=Xi)return Tb(),1;e.c_stat[t.q]=Vi}else{if(e.c_stat[t.q]!=Xi)return Tb(),1;if(e.c_stat[t.s]!=Wi&&e.c_stat[t.s]!=Xi)return Tb(),1;e.c_stat[t.q]=Xi}return 0}),r.q=t.j,r.s=s.j,t.ub=+n}function tw(e,t){var r,i,s;p(t.lb==t.ub),r=Ib(e,function(e,t){return e.sol==es&&(e.c_stat[t.q]=Ji),e.c_value[t.q]=t.s,0}),r.q=t.j,r.s=t.lb,e.c0+=t.coef*t.lb;for(s=t.ptr;s!=null;s=s.c_next)i=s.row,i.lb==i.ub?i.ub=i.lb-=s.val*t.lb:(i.lb!=-n&&(i.lb-=s.val*t.lb),i.ub!=+n&&(i.ub-=s.val*t.lb));Ub(e,t)}function nw(e,t){var r,i,s,o;return p(t.lb!=-n),p(t.ub!=+n),p(t.lb<t.ub),s=1e-9+1e-12*Math.abs(t.lb),t.ub-t.lb>s?0:(r=Ib(e,function(e,t){if(e.sol==es)if(e.r_stat[t.p]==Wi)e.r_stat[t.p]=Wi;else{if(e.r_stat[t.p]!=Ji)return Tb(),1;e.r_pi[t.p]>=0?e.r_stat[t.p]=Xi:e.r_stat[t.p]=Vi}return 0}),r.p=t.i,i=.5*(t.ub+t.lb),o=Math.floor(i+.5),Math.abs(i-o)<=s&&(i=o),t.lb=t.ub=i,1)}function rw(e,t){var r,i,s,o,u,a;p(t.lb!=-n),p(t.ub!=+n),p(t.lb<t.ub),u=1e-9+1e-12*Math.abs(t.lb);if(t.ub-t.lb>u)return 0;r=Ib(e,function(e,t){var n,r;if(e.sol==es)if(e.c_stat[t.q]==Wi)e.c_stat[t.q]=Wi;else{if(e.c_stat[t.q]!=Ji)return Tb(),1;r=t.c;for(n=t.ptr;n!=null;n=n.next)r-=n.val*e.r_pi[n.ref];r>=0?e.c_stat[t.q]=Xi:e.c_stat[t.q]=Vi}return 0}),r.q=t.j,r.c=t.coef,r.ptr=null;if(e.sol==es)for(i=t.ptr;i!=null;i=i.c_next)s={},s.ref=i.row.i,s.val=i.val,s.next=r.ptr,r.ptr=s;return o=.5*(t.ub+t.lb),a=Math.floor(o+.5),Math.abs(o-a)<=u&&(o=a),t.lb=t.ub=o,1}function iw(e,t){var r=.001;return p(t.ptr==null),t.lb>+r||t.ub<-r?1:(t.lb=-n,t.ub=+n,Jb(e,t),0)}function sw(e,t){function s(){r.stat=Xi,t.ub=t.lb}function u(){r.stat=Vi,t.lb=t.ub}var r,i=.001;return p(t.ptr==null),t.coef>+i&&t.lb==-n?1:t.coef<-i&&t.ub==+n?1:(r=Ib(e,function(e,t){return e.sol==es&&(e.c_stat[t.q]=t.stat),0}),r.q=t.j,t.lb==-n&&t.ub==+n?(r.stat=$i,t.lb=t.ub=0):t.ub==+n?s():t.lb==-n?u():t.lb!=t.ub?t.coef>=+o?s():t.coef<=-o?u():Math.abs(t.lb)<=Math.abs(t.ub)?s():u():r.stat=Ji,tw(e,t),0)}function ow(e,t,r){var i,s;p(e==e),p(t.lb<t.ub);if(t.is_int){s=Math.floor(r+.5);if(!(Math.abs(r-s)<=1e-5))return 2;r=s}if(t.lb!=-n){i=t.is_int?1e-5:1e-5+1e-8*Math.abs(t.lb);if(r<t.lb-i)return 1;if(r<t.lb+.001*i)return t.ub=t.lb,0}if(t.ub!=+n){i=t.is_int?1e-5:1e-5+1e-8*Math.abs(t.ub);if(r>t.ub+i)return 1;if(r>t.ub-.001*i)return t.lb=t.ub,0}return t.lb=t.ub=r,0}function uw(e,t){var n,r,i,s,o,u;p(t.lb==t.ub),p(t.ptr!=null&&t.ptr.r_next==null),i=t.ptr,r=i.col,u=t.lb/i.val,o=ow(e,r,u),p(0<=o&&o<=2);if(o!=0)return o;n=Ib(e,function(e,t){var n,r;if(e.sol==es){if(e.c_stat[t.q]!=Ji)return Tb(),1;e.r_stat[t.p]=Ji,e.c_stat[t.q]=Wi}if(e.sol!=ns){r=t.c;for(n=t.ptr;n!=null;n=n.next)r-=n.val*e.r_pi[n.ref];e.r_pi[t.p]=r/t.apq}return 0}),n.p=t.i,n.q=r.j,n.apq=i.val,n.c=r.coef,n.ptr=null;if(e.sol!=ns)for(i=r.ptr;i!=null;i=i.c_next){if(i.row==t)continue;s={},s.ref=i.row.i,s.val=i.val,s.next=n.ptr,n.ptr=s}return Rb(e,t),0}function aw(e,t,r){var i,s,o;p(e==e),p(t.lb<t.ub),p(r!=-n),t.is_int&&(o=Math.floor(r+.5),Math.abs(r-o)<=1e-5?r=o:r=Math.ceil(r));if(t.lb!=-n){s=t.is_int?.001:.001+1e-6*Math.abs(t.lb);if(r<t.lb+s)return i=0,i}if(t.ub!=+n){s=t.is_int?1e-5:1e-5+1e-8*Math.abs(t.ub);if(r>t.ub+s)return i=4,i;if(r>t.ub-.001*s)return t.lb=t.ub,i=3,i}return t.lb==-n?i=2:t.is_int&&r>t.lb+.5?i=2:r>t.lb+.3*(1+Math.abs(t.lb))?i=2:i=1,t.lb=r,i}function fw(e,t,r){var i,s,o;p(e==e),p(t.lb<t.ub),p(r!=+n),t.is_int&&(o=Math.floor(r+.5),Math.abs(r-o)<=1e-5?r=o:r=Math.floor(r));if(t.ub!=+n){s=t.is_int?.001:.001+1e-6*Math.abs(t.ub);if(r>t.ub-s)return i=0,i}if(t.lb!=-n){s=t.is_int?1e-5:1e-5+1e-8*Math.abs(t.lb);if(r<t.lb-s)return i=4,i;if(r<t.lb+.001*s)return t.ub=t.lb,i=3,i}return t.ub==+n?i=2:t.is_int&&r<t.ub-.5?i=2:r<t.ub-.3*(1+Math.abs(t.ub))?i=2:i=1,t.ub=r,i}function lw(e,t){var r,i,s,u,a,f,l,c,h;p(t.lb!=-n||t.ub!=+n),p(t.lb<t.ub),p(t.ptr!=null&&t.ptr.r_next==null),s=t.ptr,i=s.col,p(i.lb<i.ub),s.val>0?(c=t.lb==-n?-n:t.lb/s.val,h=t.ub==+n?+n:t.ub/s.val):(c=t.ub==+n?-n:t.ub/s.val,h=t.lb==-n?+n:t.lb/s.val);if(c==-n)f=0;else{f=aw(e,i,c),p(0<=f&&f<=4);if(f==4)return 4}if(h==+n)l=0;else if(f==3)l=0;else{l=fw(e,i,h),p(0<=l&&l<=4);if(l==4)return 4}if(!f&&!l)return t.lb=-n,t.ub=+n,Jb(e,t),0;r=Ib(e,function(e,t){var r,i;if(e.sol==ns)return 0;i=t.c;for(r=t.ptr;r!=null;r=r.next)i-=r.val*e.r_pi[r.ref];if(e.sol==es){function s(){return t.lb_changed?(e.r_stat[t.p]=t.apq>0?Xi:Vi,e.c_stat[t.q]=Wi,e.r_pi[t.p]=i/t.apq):(e.r_stat[t.p]=Wi,e.r_pi[t.p]=0),0}function u(){return t.ub_changed?(e.r_stat[t.p]=t.apq>0?Vi:Xi,e.c_stat[t.q]=Wi,e.r_pi[t.p]=i/t.apq):(e.r_stat[t.p]=Wi,e.r_pi[t.p]=0),0}if(e.c_stat[t.q]==Wi)e.r_stat[t.p]=Wi,e.r_pi[t.p]=0;else if(e.c_stat[t.q]==Xi)s();else if(e.c_stat[t.q]==Vi)u();else{if(e.c_stat[t.q]!=Ji)return Tb(),1;if(i>1e-7)if(t.apq>0&&t.lb!=-n||t.apq<0&&t.ub!=+n||!t.lb_changed)return e.c_stat[t.q]=Xi,s();if(i<-1e-7)if(t.apq>0&&t.ub!=+n||t.apq<0&&t.lb!=-n||!t.ub_changed)return e.c_stat[t.q]=Vi,u();if(t.lb!=-n&&t.ub==+n)e.r_stat[t.p]=Xi;else if(t.lb==-n&&t.ub!=+n)e.r_stat[t.p]=Vi;else{if(t.lb==-n||t.ub==+n)return Tb(),1;t.apq*e.c_value[t.q]<=.5*(t.lb+t.ub)?e.r_stat[t.p]=Xi:e.r_stat[t.p]=Vi}e.c_stat[t.q]=Wi,e.r_pi[t.p]=i/t.apq}}return e.sol==ts&&(i>+o&&t.lb_changed||i<-o&&t.ub_changed?e.r_pi[t.p]=i/t.apq:e.r_pi[t.p]=0),0}),r.p=t.i,r.q=i.j,r.apq=s.val,r.c=i.coef,r.lb=t.lb,r.ub=t.ub,r.lb_changed=f,r.ub_changed=l,r.ptr=null;if(e.sol!=ns)for(u=i.ptr;u!=null;u=u.c_next){if(u==s)continue;a={},a.ref=u.row.i,a.val=u.val,a.next=r.ptr,r.ptr=a}return Rb(e,t),f>=l?f:l}function cw(e,t){var r,i,s,o;p(!t.is_int),p(t.lb<t.ub),p(t.ptr!=null&&t.ptr.c_next==null),s=t.ptr,i=s.row,p(i.lb==i.ub),r=Ib(e,function(e,t){var n,r;if(e.sol==es){if(e.r_stat[t.p]==Wi||e.r_stat[t.p]==$i)e.c_stat[t.q]=e.r_stat[t.p];else if(e.r_stat[t.p]==Xi)e.c_stat[t.q]=t.apq>0?Vi:Xi;else{if(e.r_stat[t.p]!=Vi)return Tb(),1;e.c_stat[t.q]=t.apq>0?Xi:Vi}e.r_stat[t.p]=Ji}e.sol!=ns&&(e.r_pi[t.p]+=t.c/t.apq),n=t.b;for(r=t.ptr;r!=null;r=r.next)n-=r.val*e.c_value[r.ref];return e.c_value[t.q]=n/t.apq,0}),r.p=i.i,r.q=t.j,r.apq=s.val,r.b=i.lb,r.c=t.coef,r.ptr=null;for(s=i.ptr;s!=null;s=s.r_next){if(s.col==t)continue;o={},o.ref=s.col.j,o.val=s.val,o.next=r.ptr,r.ptr=o,s.col.coef-=r.c*(s.val/r.apq)}e.c0+=r.c*(r.b/r.apq),r.apq>0?(i.lb=t.ub==+n?-n:r.b-r.apq*t.ub,i.ub=t.lb==-n?+n:r.b-r.apq*t.lb):(i.lb=t.lb==-n?-n:r.b-r.apq*t.lb,i.ub=t.ub==+n?+n:r.b-r.apq*t.ub),Ub(e,t)}function hw(e,t){function v(){r.stat=Xi,i.ub=i.lb}function m(){r.stat=Vi,i.lb=i.ub}var r,i,s,u,a,f,l,c,h,d;p(t.lb<t.ub),p(t.ptr!=null&&t.ptr.c_next==null),s=t.ptr,i=s.row,p(i.lb!=-n||i.ub!=+n),p(i.lb<i.ub),a=i.lb;if(a!=-n)for(u=i.ptr;u!=null;u=u.r_next){if(u==s)continue;if(u.val>0){if(u.col.ub==+n){a=-n;break}a-=u.val*u.col.ub}else{if(u.col.lb==-n){a=-n;break}a-=u.val*u.col.lb}}f=i.ub;if(f!=+n)for(u=i.ptr;u!=null;u=u.r_next){if(u==s)continue;if(u.val>0){if(u.col.lb==-n){f=+n;break}f-=u.val*u.col.lb}else{if(u.col.ub==+n){f=+n;break}f-=u.val*u.col.ub}}s.val>0?l=a==-n?-n:a/s.val:l=f==+n?-n:f/s.val,s.val>0?c=f==+n?+n:f/s.val:c=a==-n?+n:a/s.val;if(t.lb!=-n){d=1e-9+1e-12*Math.abs(t.lb);if(l<t.lb-d)return 1}if(t.ub!=+n){d=1e-9+1e-12*Math.abs(t.ub);if(c>t.ub+d)return 1}t.lb=-n,t.ub=+n,r=Ib(e,function(e,t){if(e.sol==es)if(e.r_stat[t.p]==Wi)e.r_stat[t.p]=Wi;else{if(e.r_stat[t.p]!=Ji)return Tb(),1;p(t.stat==Xi||t.stat==Vi),e.r_stat[t.p]=t.stat}return 0}),r.p=i.i,r.stat=-1,h=t.coef/s.val;if(h>+o)if(i.lb!=-n)v();else{if(h>1e-5)return 2;p(i.ub!=+n),m()}else if(h<-o)if(i.ub!=+n)m();else{if(h<-0.00001)return 2;p(i.lb!=-n),v()}else i.ub==+n?(p(i.lb!=-n),v()):i.lb==-n?(p(i.ub!=+n),m()):Math.abs(i.lb)<=Math.abs(i.ub)?v():m();return 0}function pw(e,t){var r,i,s,o,u,a,f,l,c,h,d;p(t.lb==t.ub),p(t.ptr!=null&&t.ptr.r_next!=null&&t.ptr.r_next.r_next==null);var v,m;v=t.ptr,m=v.r_next,Math.abs(m.val)<.001*Math.abs(v.val)?(u=v,a=m):Math.abs(v.val)<.001*Math.abs(m.val)?(u=m,a=v):Fb(v.col)<=Fb(m.col)?(u=v,a=m):(u=m,a=v),s=u.col,o=a.col,r=Ib(e,function(e,t){var n,r,i;if(e.sol==es&&e.r_stat[t.p]!=Ji)return Tb(),1;if(e.sol!=ns){i=e.r_pi[t.p];for(n=t.ptr;n!=null;n=n.next)r=n.val/t.apq,i-=r*e.r_pi[n.ref];e.r_pi[t.p]=i}return 0}),r.p=t.i,r.apq=u.val,r.ptr=null;for(f=s.ptr;f!=null;f=c){c=f.c_next;if(f==u)continue;i=f.row,e.sol!=ns&&(h={},h.ref=i.i,h.val=f.val,h.next=r.ptr,r.ptr=h);for(l=i.ptr;l!=null;l=l.r_next)if(l.col==o)break;l==null&&(l=Bb(i,o,0)),d=f.val/u.val,zb(f),l.val-=d*a.val,Math.abs(l.val)<=1e-10&&zb(l),i.lb==i.ub?i.lb=i.ub=i.lb-d*t.lb:(i.lb!=-n&&(i.lb-=d*t.lb),i.ub!=+n&&(i.ub-=d*t.lb))}return s}function dw(e,t,r){var i,s=null,o,u,a,f,l;p(r==0||r==1),l=1;for(u=t.ptr;u!=null;u=u.r_next)l<Math.abs(u.val)&&(l=Math.abs(u.val));for(u=t.ptr;u!=null;u=u.r_next)if(Math.abs(u.val)<1e-7*l)return 1;i=Ib(e,function(e,t){var n,r,i,s,o,u;if(e.sol==ns)return 0;if(e.sol==es){if(e.r_stat[t.p]!=Wi)return Tb(),1;for(n=t.ptr;n!=null;n=n.next){if(e.c_stat[n.j]!=Ji)return Tb(),1;e.c_stat[n.j]=n.stat}}for(n=t.ptr;n!=null;n=n.next){s=n.c;for(i=n.ptr;i!=null;i=i.next)s-=i.val*e.r_pi[i.ref];n.c=s}r=null,o=0;for(n=t.ptr;n!=null;n=n.next){s=n.c,u=Math.abs(s/n.a);if(n.stat==Xi)s<0&&o<u&&(r=n,o=u);else{if(n.stat!=Vi)return Tb(),1;s>0&&o<u&&(r=n,o=u)}}return r!=null&&(e.sol==es&&(e.r_stat[t.p]=t.stat,e.c_stat[r.j]=Wi),e.r_pi[t.p]=r.c/r.a),0}),i.p=t.i,t.lb==t.ub?i.stat=Ji:r==0?(i.stat=Xi,p(t.lb!=-n)):(i.stat=Vi,p(t.ub!=+n)),i.ptr=null;for(u=t.ptr;u!=null;u=u.r_next){o=u.col,p(o.lb<o.ub),e.sol!=ns&&(s={},s.j=o.j,s.stat=-1,s.a=u.val,s.c=o.coef,s.ptr=null,s.next=i.ptr,i.ptr=s),r==0&&u.val<0||r!=0&&u.val>0?(e.sol!=ns&&(s.stat=Xi),p(o.lb!=-n),o.ub=o.lb):(e.sol!=ns&&(s.stat=Vi),p(o.ub!=+n),o.lb=o.ub);if(e.sol!=ns)for(a=o.ptr;a!=null;a=a.c_next){if(a==u)continue;f={},f.ref=a.row.i,f.val=a.val,f.next=s.ptr,s.ptr=f}}return t.lb=-n,t.ub=+n,0}function vw(e,t){var r,i=0,s,o,u;p(e==e),s=0;for(r=t.ptr;r!=null;r=r.r_next)if(r.val>0){if(r.col.lb==-n){s=-n;break}s+=r.val*r.col.lb}else{if(r.col.ub==+n){s=-n;break}s+=r.val*r.col.ub}o=0;for(r=t.ptr;r!=null;r=r.r_next)if(r.val>0){if(r.col.ub==+n){o=+n;break}o+=r.val*r.col.ub}else{if(r.col.lb==-n){o=+n;break}o+=r.val*r.col.lb}if(t.lb!=-n){u=.001+1e-6*Math.abs(t.lb);if(t.lb-u>o)return i=51,i}if(t.ub!=+n){u=.001+1e-6*Math.abs(t.ub);if(t.ub+u<s)return i=51,i}return t.lb!=-n&&(u=1e-9+1e-12*Math.abs(t.lb),t.lb-u>s&&(t.lb+u<=o?i|=1:i|=2)),t.ub!=+n&&(u=1e-9+1e-12*Math.abs(t.ub),t.ub+u<o&&(t.ub-u>=s?i|=16:i|=32)),i}function mw(e,t,r){var i;e.sol==es&&(i=Ib(e,function(e,t){return e.sol!=es?(Tb(),1):(e.r_stat[t.p]==Wi?e.r_stat[t.p]=Wi:e.r_stat[t.p]=t.stat,0)}),i.p=t.i,t.ub==+n?i.stat=Xi:t.lb==-n?i.stat=Vi:t.lb!=t.ub?i.stat=r==0?Vi:Xi:i.stat=Ji),r==0?(p(t.lb!=-n),t.lb=-n):r==1?(p(t.ub!=+n),t.ub=+n):p(r!=r)}function gw(e,t){var r,i,s,o,u,a=!1;p(e==e),s=1;for(r=t.ptr;r!=null;r=r.r_next)r.col.ll.ll=-n,r.col.uu.uu=+n,s<Math.abs(r.val)&&(s=Math.abs(r.val));o=1e-6*s;if(t.lb!=-n){i=null;for(r=t.ptr;r!=null;r=r.r_next)if(r.val>0&&r.col.ub==+n||r.val<0&&r.col.lb==-n){if(i!=null){a=!0;break}i=r}if(!a){u=t.lb;for(r=t.ptr;r!=null;r=r.r_next)r!=i&&(r.val>0?u-=r.val*r.col.ub:u-=r.val*r.col.lb);if(i==null)for(r=t.ptr;r!=null;r=r.r_next)r.val>=+o?r.col.ll.ll=r.col.ub+u/r.val:r.val<=-o&&(r.col.uu.uu=r.col.lb+u/r.val);else i.val>=+o?i.col.ll.ll=u/i.val:i.val<=-o&&(i.col.uu.uu=u/i.val)}}a=!1;if(t.ub!=+n){i=null;for(r=t.ptr;r!=null;r=r.r_next)if(r.val>0&&r.col.lb==-n||r.val<0&&r.col.ub==+n){if(i!=null){a=!0;break}i=r}if(!a){u=t.ub;for(r=t.ptr;r!=null;r=r.r_next)r!=i&&(r.val>0?u-=r.val*r.col.lb:u-=r.val*r.col.ub);if(i==null)for(r=t.ptr;r!=null;r=r.r_next)r.val>=+o?r.col.uu.uu=r.col.lb+u/r.val:r.val<=-o&&(r.col.ll.ll=r.col.ub+u/r.val);else i.val>=+o?i.col.uu.uu=u/i.val:i.val<=-o&&(i.col.ll.ll=u/i.val)}}}function yw(e){var t,r,i,s,o,u,a,f,l,c,h,v,m;c=h=v=m=0;for(i=e.c_tail;i!=null;i=i.prev){if(!i.is_int)continue;if(i.lb==i.ub)continue;if(i.lb==0&&i.ub==1)continue;if(i.lb<-1e6||i.ub>1e6||i.ub-i.lb>4095){c++;continue}h++,i.lb!=0&&Yb(e,i),p(i.lb==0),u=i.ub|0,p(i.ub==u);if(u==1)continue;a=2,l=4;while(u>=l)a++,l+=l;v+=a,t=Ib(e,function(e,t){var n,r,i=e.c_value[t.q];for(n=1,r=2;n<t.n;n++,r+=r)i+=r*e.c_value[t.j+(n-1)];return e.c_value[t.q]=i,0}),t.q=i.j,t.j=0,t.n=a,u<l-1?(r=Pb(e),m++,r.lb=-n,r.ub=u):r=null,i.ub=1,r!=null&&Bb(r,i,1);for(f=1,l=2;f<a;f++,l+=l){s=Hb(e),s.is_int=1,s.lb=0,s.ub=1,s.coef=l*i.coef,t.j==0?t.j=s.j:p(t.j+(f-1)==s.j);for(o=i.ptr;o!=null;o=o.c_next)Bb(o.row,s,l*o.val)}}return h>0&&d(h+" integer variable(s) were replaced by "+v+" binary ones"),m>0&&d(m+" row(s) were added due to binarization"),c>0&&d("Binarization failed for "+c+" integer variable(s)"),c}function bw(e,t){var n,r,i;r=null;for(n=e.ptr;n!=null;n=n.r_next)i={},i.aj=t*n.val,i.xj=n.col,i.next=r,r=i;return r}function ww(e,t){var r,i,s;p(e==e);if(t.lb!=-n||t.ub==+n)return 0;s=1;for(i=t.ptr;i!=null;i=i.r_next){r=i.col;if(!r.is_int||r.lb!=0||r.ub!=1)return 0;if(i.val!=+1){if(i.val!=-1)return 0;s--}}return t.ub!=s?0:1}function Ew(e,t,n,r){var i,s,o,u,a;p(e==e);for(i=t;i!=null;i=i.next)p(i.aj!=0),p(i.xj.is_int),p(i.xj.lb==0&&i.xj.ub==1);u=0;for(i=t;i!=null;i=i.next)if(i.aj!=+1){if(i.aj!=-1)break;u++}if(i==null&&n==1-u)return 1;for(i=t;i!=null;i=i.next)i.aj<0&&(n-=i.aj);for(i=t;i!=null;i=i.next)if(Math.abs(i.aj)>n)return 0;s=null;for(i=t;i!=null;i=i.next)if(s==null||Math.abs(s.aj)>Math.abs(i.aj))s=i;p(s!=null),o=null;for(i=t;i!=null;i=i.next)i!=s&&(o==null||Math.abs(o.aj)>Math.abs(i.aj))&&(o=i);p(o!=null),a=.001+1e-6*Math.abs(n);if(Math.abs(s.aj)+Math.abs(o.aj)<=n+a)return 0;n=1;for(i=t;i!=null;i=i.next)i.aj>0?i.aj=1:(i.aj=-1,n-=1);return r(n),2}function Sw(e,r){var i,s,o,u,a,f,l=0,c;p(r.lb<r.ub);for(a=0;a<=1;a++){if(a==0){if(r.ub==+n)continue;o=bw(r,1),c=+r.ub}else{if(r.lb==-n)continue;o=bw(r,-1),c=-r.lb}f=Ew(e,o,c,function(e){c=e}),p(0<=f&&f<=2);if(a==1&&f==1||f==2){l++;if(t){d("Original constraint:");for(s=r.ptr;s!=null;s=s.r_next)d(" "+s.val+" x"+s.col.j);r.lb!=-n&&d(", >= "+r.lb),r.ub!=+n&&d(", <= "+r.ub),d(""),d("Equivalent packing inequality:");for(u=o;u!=null;u=u.next)d(" "+(u.aj>0?"+":"-")+"x"+u.xj.j);d(", <= "+c+"")}if(r.lb==-n||r.ub==+n)i=null;else{i=Pb(e),a==0?(i.lb=r.lb,i.ub=+n):(i.lb=-n,i.ub=r.ub);for(s=r.ptr;s!=null;s=s.r_next)Bb(i,s.col,s.val)}qb(r),r.lb=-n,r.ub=c;for(u=o;u!=null;u=u.next)Bb(r,u.xj,u.aj);i!=null&&(r=i)}}return l}function xw(e,t,r,i){var s,o,u,a,f=0,l,c;t==0?(s=bw(e,-1),p(e.lb!=-n),l=-e.lb):t==1&&(s=bw(e,1),p(e.ub!=+n),l=+e.ub);for(o=s;o!=null;o=o.next)if(!o.xj.is_int||o.xj.lb!=0||o.xj.ub!=1){if(o.aj>0){if(o.xj.lb==-n)return f;l-=o.aj*o.xj.lb}else{if(o.xj.ub==+n)return f;l-=o.aj*o.xj.ub}o.aj=0}for(o=s;o!=null;o=o.next)o.aj<0&&(l-=o.aj);if(l<.001)return f;c=.001+1e-6*l,u=a=null;for(o=s;o!=null;o=o.next)if(Math.abs(o.aj)>.5*(l+c)){r[++f]=o.xj,i[f]=o.aj>0?0:1;if(u==null||Math.abs(u.aj)>Math.abs(o.aj))u=o}else Math.abs(o.aj)>=.001&&(a==null||Math.abs(a.aj)<Math.abs(o.aj))&&(a=o);return u!=null&&a!=null&&Math.abs(u.aj)+Math.abs(a.aj)>l+c&&(r[++f]=a.xj,i[f]=a.aj>0?0:1),f<2&&(f=0),f}function Tw(e,t){var r,i,s;p(e==e);if(t.lb==-n||t.ub!=+n)return 0;s=1;for(i=t.ptr;i!=null;i=i.r_next){r=i.col;if(!r.is_int||r.lb!=0||r.ub!=1)return 0;if(i.val!=+1){if(i.val!=-1)return 0;s--}}return t.lb!=s?0:1}function Nw(e,t,n,r){var i,s,o;p(e==e);for(i=t;i!=null;i=i.next)p(i.aj!=0),p(i.xj.is_int),p(i.xj.lb==0&&i.xj.ub==1);s=0;for(i=t;i!=null;i=i.next)if(i.aj!=+1){if(i.aj!=-1)break;s++}if(i==null&&n==1-s)return 1;for(i=t;i!=null;i=i.next)i.aj<0&&(n-=i.aj);if(n<.001)return 0;o=1e-9+1e-12*Math.abs(n);for(i=t;i!=null;i=i.next)if(Math.abs(i.aj)<n-o)return 0;n=1;for(i=t;i!=null;i=i.next)i.aj>0?i.aj=1:(i.aj=-1,n-=1);return r(n),2}function Cw(e,r){var i,s,o,u,a,f,l=0,c;p(r.lb<r.ub);for(a=0;a<=1;a++){if(a==0){if(r.lb==-n)continue;o=bw(r,1),c=+r.lb}else{if(r.ub==+n)continue;o=bw(r,-1),c=-r.ub}f=Nw(e,o,c,function(e){c=e}),p(0<=f&&f<=2);if(a==1&&f==1||f==2){l++;if(t){d("Original constraint:");for(s=r.ptr;s!=null;s=s.r_next)d(" "+s.val+" x"+s.col.j);r.lb!=-n&&d(", >= "+r.lb),r.ub!=+n&&d(", <= "+r.ub),d(""),d("Equivalent covering inequality:");for(u=o;u!=null;u=u.next)d(" "+(u.aj>0?"+":"-")+"x"+u.xj.j);d(", >= "+c+"")}if(r.lb==-n||r.ub==+n)i=null;else{i=Pb(e),a==0?(i.lb=-n,i.ub=r.ub):(i.lb=r.lb,i.ub=+n);for(s=r.ptr;s!=null;s=s.r_next)Bb(i,s.col,s.val)}qb(r),r.lb=c,r.ub=+n;for(u=o;u!=null;u=u.next)Bb(r,u.xj,u.aj);i!=null&&(r=i)}}return l}function kw(e,t){var n,r,i;p(e==e);if(t.lb!=t.ub)return 0;i=1;for(r=t.ptr;r!=null;r=r.r_next){n=r.col;if(!n.is_int||n.lb!=0||n.ub!=1)return 0;if(r.val!=+1){if(r.val!=-1)return 0;i--}}return t.lb!=i?0:1}function Lw(e,r,i,s){var o,u=0,a,f,l;p(e==e),a=0;for(o=r;o!=null;o=o.next)if(o.aj>0){if(o.xj.lb==-n)return u;a+=o.aj*o.xj.lb}else{if(o.xj.ub==+n)return u;a+=o.aj*o.xj.ub}for(o=r;o!=null;o=o.next){if(!o.xj.is_int||o.xj.lb!=0||o.xj.ub!=1)continue;o.aj>0?(f=a,i-o.aj<f&&f<i&&(l=i-f,l>=.001&&o.aj-l>=.01*(1+o.aj)&&(t&&d("+"),o.aj=l,u++))):(f=a-o.aj,i<f&&f<i-o.aj&&(l=o.aj+(f-i),l<=-0.001&&l-o.aj>=.01*(1-o.aj)&&(t&&d("-"),o.aj=l,a+=f-i,i=f,u++)))}return s(i),u}function Aw(e,r){var i,s,o,u,a,f=new Array(2),l;p(r.lb<r.ub),f[0]=f[1]=0;for(a=0;a<=1;a++){if(a==0){if(r.lb==-n)continue;t&&d("L"),o=bw(r,1),l=+r.lb}else{if(r.ub==+n)continue;t&&d("U"),o=bw(r,-1),l=-r.ub}f[a]=Lw(e,o,l,function(e){l=e});if(f[a]>0){if(r.lb==-n||r.ub==+n)i=null;else{t&&d("*"),i=Pb(e),a==0?(i.lb=-n,i.ub=r.ub):(i.lb=r.lb,i.ub=+n);for(s=r.ptr;s!=null;s=s.r_next)Bb(i,s.col,s.val)}qb(r),r.lb=l,r.ub=+n;for(u=o;u!=null;u=u.next)Bb(r,u.xj,u.aj);i!=null&&(r=i)}}return f[0]+f[1]}function Ow(e){var r,i,s,o,u;p(e==e);for(r=e.r_head;r!=null;r=i)i=r.next,r.lb==-n&&r.ub==+n&&(t&&d("1"),Jb(e,r));for(r=e.r_head;r!=null;r=i)i=r.next,r.lb!=-n&&r.ub!=+n&&r.lb<r.ub&&(u=nw(e,r),u!=0&&(u==1?t&&d("2"):p(u!=u)));for(s=e.c_head;s!=null;s=o)o=s.next,s.lb==s.ub&&(t&&d("3"),tw(e,s));for(s=e.c_head;s!=null;s=o)o=s.next,s.lb!=-n&&s.ub!=+n&&s.lb<s.ub&&(u=rw(e,s),u!=0&&u==1&&(t&&d("4"),tw(e,s)))}function Mw(e,r,i){function l(){for(o=r.ptr;o!=null;o=u){t&&d("H"),s=o.col,u=o.r_next;for(a=s.ptr;a!=null;a=a.c_next)Lb(e,a.row);tw(e,s)}return Jb(e,r),0}var s,o,u,a,f;p(r.lb!=-n||r.ub!=+n);if(r.ptr==null){f=iw(e,r);if(f==0)return t&&d("A"),0;if(f==1)return vo;p(f!=f)}if(r.ptr.r_next==null){s=r.ptr.col;if(r.lb==r.ub){f=uw(e,r);if(f==0){t&&d("B");for(o=s.ptr;o!=null;o=o.c_next)Lb(e,o.row);return tw(e,s),0}if(f==1||f==2)return vo;p(f!=f)}else{f=lw(e,r);if(0<=f&&f<=3){t&&d("C"),_b(e,s);if(f>=2)for(o=s.ptr;o!=null;o=o.c_next)Lb(e,o.row);return f==3&&(t&&d("D"),tw(e,s)),0}if(f==4)return vo;p(f!=f)}}f=vw(e,r),p(0<=f&&f<=255);if(f==51)return vo;if((f&15)==0)r.lb!=-n&&(t&&d("F"),mw(e,r,0));else if((f&15)!=1)if((f&15)==2){t&&d("G");if(dw(e,r,0)==0)return l()}else p(f!=f);if((f&240)==0)r.ub!=+n&&(t&&d("I"),mw(e,r,1));else if((f&240)!=16)if((f&240)==32){t&&d("J");if(dw(e,r,1)==0)return l()}else p(f!=f);if(r.lb==-n&&r.ub==+n){t&&d("K");for(o=r.ptr;o!=null;o=o.r_next)_b(e,o.col);return Jb(e,r),0}return e.sol==ns&&i&&_w(e,r,1)<0?vo:0}function _w(e,r,i){var s,o,u,a,f,l,c=0,h,v;p(e.sol==ns),p(r.lb!=-n||r.ub!=+n),gw(e,r);for(o=r.ptr;o!=null;o=u){s=o.col,u=o.r_next;for(f=0;f<=1;f++){h=s.lb,v=s.ub;if(f==0){if(s.ll.ll==-n)continue;l=aw(e,s,s.ll.ll)}else{if(s.uu.uu==+n)continue;l=fw(e,s,s.uu.uu)}if(l==0||l==1)s.lb=h,s.ub=v;else if(l==2||l==3){t&&d("L"),c++;if(i)for(a=s.ptr;a!=null;a=a.c_next)a.row!=r&&Lb(e,a.row);if(l==3){t&&d("M"),tw(e,s);break}}else{if(l==4)return-1;p(l!=l)}}}return c}function Dw(e,r){var i,s,o;p(r.lb<r.ub);if(r.ptr==null){o=sw(e,r);if(o==0)return t&&d("N"),0;if(o==1)return mo;p(o!=o)}if(r.ptr.c_next==null){i=r.ptr.row;function u(){t&&d("O"),cw(e,r);if(i.lb==-n&&i.ub==+n){t&&d("P");for(s=i.ptr;s!=null;s=s.r_next)_b(e,s.col);Jb(e,i)}else Lb(e,i);return 0}if(i.lb==i.ub){if(!r.is_int)return u()}else if(!r.is_int){o=hw(e,r);if(o==0)return t&&d("Q"),u();if(o!=1&&o==2)return mo}}return 0}function Pw(e,n){function u(){return p(o==0||o==vo||o==mo),t&&d(""),o}var r,i,s,o;Ow(e);for(r=e.r_head;r!=null;r=r.next)r.temp=1;for(i=e.c_head;i!=null;i=i.next)i.temp=1;s=1;while(s){s=0;for(;;){r=e.r_head;if(r==null||!r.temp)break;Ab(e,r),o=Mw(e,r,n);if(o!=0)return u();s=1}for(;;){i=e.c_head;if(i==null||!i.temp)break;Db(e,i),o=Dw(e,i);if(o!=0)return u();s=1}}if(e.sol==ns&&!n)for(r=e.r_head;r!=null;r=r.next)if(_w(e,r,0)<0)return o=vo,u();return o=0,u()}function Hw(e,t){return p(e.sol==es),p(t==t),Pw(e,0)}function Bw(e,t){var r,i,s,o,u,a;p(e.sol==ns),p(t==t),a=Pw(e,1);if(a!=0)return a;t.binarize&&yw(e),u=0;for(r=e.r_tail;r!=null;r=i){i=r.prev;if(r.lb==-n&&r.ub==+n)continue;if(r.lb==r.ub)continue;if(r.ptr==null||r.ptr.r_next==null)continue;for(o=r.ptr;o!=null;o=o.r_next){s=o.col;if(!s.is_int||s.lb!=0||s.ub!=1)break}if(o!=null)continue;u+=Sw(e,r)}u>0&&d(u+" hidden packing inequaliti(es) were detected"),u=0;for(r=e.r_tail;r!=null;r=i){i=r.prev;if(r.lb==-n&&r.ub==+n)continue;if(r.lb==r.ub)continue;if(r.ptr==null||r.ptr.r_next==null||r.ptr.r_next.r_next==null)continue;for(o=r.ptr;o!=null;o=o.r_next){s=o.col;if(!s.is_int||s.lb!=0||s.ub!=1)break}if(o!=null)continue;u+=Cw(e,r)}u>0&&d(u+" hidden covering inequaliti(es) were detected"),u=0;for(r=e.r_tail;r!=null;r=i){i=r.prev;if(r.lb==r.ub)continue;u+=Aw(e,r)}return u>0&&d(u+" constraint coefficient(s) were reduced"),a=0,a}function jw(e,t){return e-t&2147483647}function Fw(e){var t,n;for(t=1,n=32;n<=55;t++,n++)e.A[t]=jw(e.A[t],e.A[n]);for(n=1;t<=55;t++,n++)e.A[t]=jw(e.A[t],e.A[n]);return e.fptr=54,e.A[55]}function Iw(){var e={},t;e.A=new Array(56),e.A[0]=-1;for(t=1;t<=55;t++)e.A[t]=0;return e.fptr=0,qw(e,1),e}function qw(e,t){var n,r=t,i=1;t=r=jw(r,0),e.A[55]=r;for(n=21;n;n=(n+21)%55)e.A[n]=i,i=jw(r,i),t&1?t=1073741824+(t>>1):t>>=1,i=jw(i,t),r=e.A[n];Fw(e),Fw(e),Fw(e),Fw(e),Fw(e)}function Rw(e){return e.A[e.fptr]>=0?e.A[e.fptr--]:Fw(e)}function Uw(e,t){const n=2147483648;var r=n-n%t,i;p(t>0);do i=Rw(e);while(r<=i);return i%t}function zw(e){var t=Rw(e)/2147483647;return p(0<=t&&t<=1),t}function Ww(e,t,n){t>=n&&h("rng_uniform: a = "+t+", b = "+n+"; invalid range");var r=zw(e);return r=t*(1-r)+n*r,p(t<=r&&r<=n),r}function Gw(e){Kw&&d("scf_create_it: warning: debug mode enabled"),1<=e&&e<=32767||h("scf_create_it: n_max = "+e+"; invalid parameter");var t={};return t.n_max=e,t.n=0,t.f=new Array(1+e*e),t.u=new Array(1+e*(e+1)/2),t.p=new Array(1+e),t.t_opt=Xw,t.rank=0,Kw?t.c=new Array(1+e*e):t.c=null,t.w=new Array(1+e),t}function Yw(e,t,n){var r=e.n_max,i=e.n;return p(1<=t&&t<=i),p(1<=n&&n<=i),(t-1)*r+n}function Zw(e,t,n){var r=e.n_max,i=e.n;return p(1<=t&&t<=i),p(t<=n&&n<=i),(t-1)*r+n-t*(t-1)/2}function eE(e,t,n){var r=e.n,i=e.f,s=e.u,o,u,a,f,l,c,h;p(1<=t&&t<=r);for(;t<r;t++){f=Zw(e,t,t),u=Yw(e,t,1),l=Yw(e,r,1);if(Math.abs(s[f])<Math.abs(n[t])){for(o=t,a=f;o<=r;o++,a++)h=s[a],s[a]=n[o],n[o]=h;for(o=1,a=u,c=l;o<=r;o++,a++,c++)h=i[a],i[a]=i[c],i[c]=h}Math.abs(s[f])<Qw&&(s[f]=n[t]=0);if(n[t]==0)continue;h=n[t]/s[f];for(o=t+1,a=f+1;o<=r;o++,a++)n[o]-=h*s[a];for(o=1,a=u,c=l;o<=r;o++,a++,c++)i[c]-=h*i[a]}Math.abs(n[r])<Qw&&(n[r]=0),s[Zw(e,r,r)]=n[r]}function tE(e,t,n){var r,i,s;t==0?(i=1,s=0):Math.abs(e)<=Math.abs(t)?(r=-e/t,s=1/Math.sqrt(1+r*r),i=s*r):(r=-t/e,i=1/Math.sqrt(1+r*r),s=i*r),n(i,s)}function nE(e,t,n){var r=e.n,i=e.f,s=e.u,o,u,a,f,l,c;p(1<=t&&t<=r);for(;t<r;t++){f=Zw(e,t,t),u=Yw(e,t,1),l=Yw(e,r,1),Math.abs(s[f])<Qw&&Math.abs(n[t])<Qw&&(s[f]=n[t]=0);if(n[t]==0)continue;tE(s[f],n[t],function(e,h){for(o=t,a=f;o<=r;o++,a++){var p=s[a],d=n[o];s[a]=e*p-h*d,n[o]=h*p+e*d}for(o=1,a=u,c=l;o<=r;o++,a++,c++){var v=i[a],m=i[c];i[a]=e*v-h*m,i[c]=h*v+e*m}})}Math.abs(n[r])<Qw&&(n[r]=0),s[Zw(e,r,r)]=n[r]}function rE(e,t,n){switch(e.t_opt){case Xw:eE(e,t,n);break;case Vw:nE(e,t,n);break;default:p(e!=e)}}function iE(e){var t=e.n_max,n=e.n,r=e.u,i,s,o,u=0;for(i=1,s=Zw(e,i,i),o=t;i<=n;i++,s+=o,o--)r[s]!=0&&u++;return u}function sE(e,t,n,r,i,s){var o=e.n_max,u=e.n,a=e.f,f=e.u,l=e.p;if(Kw)var c=e.c;var h=e.w,p,d,v,m,g,y,b=0,w;if(u==o)return b=Jw,b;e.n=++u;for(p=1,v=Yw(e,p,u);p<u;p++,v+=o)a[v]=0;for(m=1,y=Yw(e,u,m);m<u;m++,y++)a[y]=0;a[Yw(e,u,u)]=1;for(p=1;p<u;p++){w=0;for(m=1,d=Yw(e,p,1);m<u;m++,d++)w+=a[d]*t[m+n];f[Zw(e,p,u)]=w}for(m=1;m<u;m++)h[m]=r[l[m]+i];h[u]=s,l[u]=u;if(Kw){for(p=1,v=Yw(e,p,u);p<u;p++,v+=o)c[v]=t[p+n];for(m=1,y=Yw(e,u,m);m<u;m++,y++)c[y]=r[m+i];c[Yw(e,u,u)]=s}for(g=1;g<u;g++)if(h[g]!=0)break;return rE(e,g,h),e.rank=iE(e),e.rank!=u&&(b=$w),Kw&&Ma(e,"scf_update_exp"),b}function oE(e,t,n){var r=e.n,i=e.f,s=e.u,o=e.p,u=e.w,a,f,l,c;for(a=1;a<=r;a++){c=0;for(f=1,l=Yw(e,a,1);f<=r;f++,l++)c+=i[l]*t[f+n];u[a]=c}for(a=r;a>=1;a--){c=u[a];for(f=r,l=Zw(e,a,r);f>a;f--,l--)c-=s[l]*u[f];u[a]=c/s[l]}for(a=1;a<=r;a++)t[o[a]+n]=u[a]}function uE(e,t,n){var r=e.n,i=e.f,s=e.u,o=e.p,u=e.w,a,f,l,c;for(a=1;a<=r;a++)u[a]=t[o[a]+n];for(a=1;a<=r;a++){l=Zw(e,a,a),c=u[a]/=s[l];for(f=a+1,l++;f<=r;f++,l++)u[f]-=s[l]*c}for(f=1;f<=r;f++)t[f+n]=0;for(a=1;a<=r;a++){c=u[a];for(f=1,l=Yw(e,a,1);f<=r;f++,l++)t[f+n]+=i[l]*c}}function aE(e,t,n,r){e.rank<e.n&&h("scf_solve_it: singular matrix"),t?uE(e,n,r):oE(e,n,r)}function fE(e){e.n=e.rank=0}function cE(e,r){function u(e){var t=e.m,n=e.n,r=e.nnz,i={};return p(t>0&&n>0),i.m=t,i.n=n,i.type=new Array(1+t+n),i.lb=new Array(1+t+n),i.ub=new Array(1+t+n),i.coef=new Array(1+t+n),i.obj=new Array(1+n),i.A_ptr=new Array(1+n+1),i.A_ind=new Array(1+r),i.A_val=new Array(1+r),i.head=new Array(1+t+n),i.stat=new Array(1+n),i.N_ptr=new Array(1+t+1),i.N_len=new Array(1+t),i.N_ind=null,i.N_val=null,i.bbar=new Array(1+t),i.cbar=new Array(1+n),i.refsp=new Array(1+t+n),i.gamma=new Array(1+n),i.tcol_ind=new Array(1+t),i.tcol_vec=new Array(1+t),i.trow_ind=new Array(1+n),i.trow_vec=new Array(1+n),i.work1=new Array(1+t),i.work2=new Array(1+t),i.work3=new Array(1+t),i.work4=new Array(1+t),i}function a(e,t){var n=e.m,r=e.n,i=e.type,s=e.lb,o=e.ub,u=e.coef,a=e.obj,f=e.A_ptr,l=e.A_ind,c=e.A_val,h=e.head,d=e.stat,v=e.refsp,y=e.gamma,w,E,x,T,C,k,L;for(w=1;w<=n;w++)k=t.row[w],i[w]=k.type,s[w]=k.lb*k.rii,o[w]=k.ub*k.rii,u[w]=0;for(E=1;E<=r;E++)L=t.col[E],i[n+E]=L.type,s[n+E]=L.lb/L.sjj,o[n+E]=L.ub/L.sjj,u[n+E]=L.coef*L.sjj;a[0]=t.c0,m(a,1,u,n+1,r),C=0;for(E=1;E<=r;E++)C<Math.abs(a[E])&&(C=Math.abs(a[E]));C==0&&(C=1);switch(t.dir){case Pi:e.zeta=1/C;break;case Hi:e.zeta=-1/C;break;default:p(t!=t)}Math.abs(e.zeta)<1&&(e.zeta*=1e3),T=1;for(E=1;E<=r;E++){f[E]=T;for(var A=t.col[E].ptr;A!=null;A=A.c_next)l[T]=A.row.i,c[T]=A.row.rii*A.val*A.col.sjj,T++}f[r+1]=T,p(T==t.nnz+1),p(t.valid),m(h,1,t.head,1,n),x=0;for(w=1;w<=n;w++)k=t.row[w],k.stat!=Wi&&(x++,p(x<=r),h[n+x]=w,d[x]=k.stat);for(E=1;E<=r;E++)L=t.col[E],L.stat!=Wi&&(x++,p(x<=r),h[n+x]=n+E,d[x]=L.stat);p(x==r),e.valid=1,t.valid=0,e.bfd=t.bfd,t.bfd=null,S(e),N(e),e.phase=0,e.tm_beg=b(),e.it_beg=e.it_cnt=t.it_cnt,e.it_dpy=-1,e.refct=0,g(v,1,0,n+r);for(E=1;E<=r;E++)y[E]=1}function f(e,n,r,i){var s=e.m;if(t)var o=e.n;var u=e.A_ptr,a=e.A_ind,f=e.A_val,l=e.head,c,h,d,v;t&&p(1<=n&&n<=s),c=l[n],t&&p(1<=c&&c<=s+o);if(c<=s)h=1,r[1]=c,i[1]=1;else{d=u[c-s],h=u[c-s+1]-d,m(r,1,a,d,h),m(i,1,f,d,h);for(v=1;v<=h;v++)i[v]=-i[v]}return h}function l(e){var t=ur(e.bfd,e.m,null,f,e);return e.valid=t==0,t}function c(e,n,r){var i=e.m;if(t)var s=e.n;var o,u;t&&(p(1<=n&&n<=i),p(1<=r&&r<=i+s));if(r<=i){var a=new Array(2);o=new Array(2),a[1]=r,o[1]=1,p(e.valid),u=lr(e.bfd,n,0,1,a,0,o)}else{var f=e.A_ptr,l=e.A_ind,c=e.A_val;o=e.work1;var h,d,v,m;h=f[r-i],d=f[r-i+1],m=0;for(v=h;v<d;v++)o[++m]=-c[v];p(e.valid),u=lr(e.bfd,n,0,m,l,h-1,o)}return e.valid=u==0,u}function h(e,n,r,i){var s=e.m;if(t)var o=e.n;var u=e.A_ptr,a=e.A_ind,f=e.A_val,l=e.head,c,h,d,v,g,y;m(i,1,n,1,s);for(c=1;c<=s;c++){y=r[c];if(y==0)continue;h=l[c],t&&p(1<=h&&h<=s+o);if(h<=s)i[h]-=y;else{d=u[h-s],v=u[h-s+1];for(g=d;g<v;g++)i[a[g]]+=f[g]*y}}}function v(e,t,n){var r=e.m,i=e.work1,s=e.work1,o;h(e,t,n,i),p(e.valid),ar(e.bfd,s);for(o=1;o<=r;o++)n[o]+=s[o]}function y(e,n,r,i){var s=e.m;if(t)var o=e.n;var u=e.A_ptr,a=e.A_ind,f=e.A_val,l=e.head,c,h,d,v,m,g;for(c=1;c<=s;c++){h=l[c],t&&p(1<=h&&h<=s+o),g=n[c];if(h<=s)g-=r[h];else{d=u[h-s],v=u[h-s+1];for(m=d;m<v;m++)g+=f[m]*r[a[m]]}i[c]=g}}function E(e,t,n){var r=e.m,i=e.work1,s=e.work1,o;y(e,t,n,i),p(e.valid),fr(e.bfd,s);for(o=1;o<=r;o++)n[o]+=s[o]}function S(e){var t=e.m,n=e.n,r=e.A_ptr,i=e.A_ind,s=e.N_ptr,o=e.N_len,u,a,f,l,c;for(u=1;u<=t;u++)o[u]=1;for(a=1;a<=n;a++){f=r[a],l=r[a+1];for(c=f;c<l;c++)o[i[c]]++}s[1]=1;for(u=1;u<=t;u++)o[u]>n&&(o[u]=n),s[u+1]=s[u]+o[u];e.N_ind=new Array(s[t+1]),e.N_val=new Array(s[t+1])}function x(e,n,r){var i=e.m;if(t)var s=e.n;var o=e.N_ptr,u=e.N_len,a=e.N_ind,f=e.N_val,l;t&&(p(1<=n&&n<=s),p(1<=r&&r<=i+s));if(r<=i)l=o[r]+u[r]++,t&&p(l<o[r+1]),a[l]=n,f[l]=1;else{var c=e.A_ptr,h=e.A_ind,d=e.A_val,v,m,g,y;m=c[r-i],g=c[r-i+1];for(y=m;y<g;y++)v=h[y],l=o[v]+u[v]++,t&&p(l<o[v+1]),a[l]=n,f[l]=-d[y]}}function T(e,n,r){var i=e.m;if(t)var s=e.n;var o=e.N_ptr,u=e.N_len,a=e.N_ind,f=e.N_val,l,c,h;t&&(p(1<=n&&n<=s),p(1<=r&&r<=i+s));if(r<=i){c=o[r];for(l=c;a[l]!=n;l++);h=c+ --u[r],t&&p(l<=h),a[l]=a[h],f[l]=f[h]}else{var d=e.A_ptr,v=e.A_ind,m,g,y,b;g=d[r-i],y=d[r-i+1];for(b=g;b<y;b++){m=v[b],c=o[m];for(l=c;a[l]!=n;l++);h=c+ --u[m],t&&p(l<=h),a[l]=a[h],f[l]=f[h]}}}function N(e){var n=e.m,r=e.n,i=e.head,s=e.stat,o=e.N_len,u,a;g(o,1,0,n);for(u=1;u<=r;u++)s[u]!=Ji&&(a=i[n+u],t&&p(1<=a&&a<=n+r),x(e,u,a))}function C(e,n){var r=e.m;if(t)var i=e.n;var s=e.lb,o=e.ub,u=e.head,a=e.stat,f,l;t&&p(1<=n&&n<=i),f=u[r+n],t&&p(1<=f&&f<=r+i);switch(a[n]){case Xi:l=s[f];break;case Vi:l=o[f];break;case $i:l=0;break;case Ji:l=s[f];break;default:p(a!=a)}return l}function k(e,n){var r=e.m,i=e.n,s=e.A_ptr,o=e.A_ind,u=e.A_val,a=e.head,f=e.work2,l,c,h,d,g,y,b;for(l=1;l<=r;l++)f[l]=0;for(c=1;c<=i;c++){h=a[r+c],t&&p(1<=h&&h<=r+i),b=C(e,c);if(b==0)continue;if(h<=r)f[h]-=b;else{d=s[h-r],g=s[h-r+1];for(y=d;y<g;y++)f[o[y]]+=b*u[y]}}m(n,1,f,1,r),p(e.valid),ar(e.bfd,n),v(e,f,n)}function L(e,t){var n=e.m,r=e.coef,i=e.head,s=e.work2,o;for(o=1;o<=n;o++)s[o]=r[i[o]];m(t,1,s,1,n),p(e.valid),fr(e.bfd,t),E(e,s,t)}function A(e,n,r){var i=e.m;if(t)var s=e.n;var o=e.coef,u=e.head,a,f;t&&p(1<=r&&r<=s),a=u[i+r],t&&p(1<=a&&a<=i+s),f=o[a];if(a<=i)f-=n[a];else{var l=e.A_ptr,c=e.A_ind,h=e.A_val,d,v,m;d=l[a-i],v=l[a-i+1];for(m=d;m<v;m++)f+=h[m]*n[c[m]]}return f}function O(e){k(e,e.bbar)}function M(e){if(t)var n=e.m;var r=e.n;if(t)var i=e.head;var s=e.cbar,o=e.work3,u;if(t)var a;L(e,o);for(u=1;u<=r;u++)t&&(a=i[n+u],p(1<=a&&a<=n+r)),s[u]=A(e,o,u)}function _(e){var t=e.m,n=e.n,r=e.head,i=e.refsp,s=e.gamma,o,u;p(e.refct==0),e.refct=1e3,g(i,1,0,t+n);for(o=1;o<=n;o++)u=r[t+o],i[u]=1,s[o]=1}function D(e,n){var r=e.m;if(t)var i=e.n;var s=e.head,o=e.refsp,u=e.work3,a=e.work3,f,l,c;t&&p(1<=n&&n<=i),l=s[r+n],t&&p(1<=l&&l<=r+i);for(f=1;f<=r;f++)a[f]=0;if(l<=r)a[l]=-1;else{var h=e.A_ptr,d=e.A_ind,v=e.A_val,m,g,y;m=h[l-r],g=h[l-r+1];for(y=m;y<g;y++)a[d[y]]=v[y]}p(e.valid),ar(e.bfd,u),c=o[l]?1:0;for(f=1;f<=r;f++)l=s[f],t&&p(1<=l&&l<=r+i),o[l]&&(c+=u[f]*u[f]);return c}function P(e,n){var r=e.n,i=e.stat,s=e.cbar,o=e.gamma,u,a,f,l,c;a=0,l=0;for(u=1;u<=r;u++){f=s[u];switch(i[u]){case Xi:if(f>=-n)continue;break;case Vi:if(f<=+n)continue;break;case $i:if(-n<=f&&f<=+n)continue;break;case Ji:continue;default:p(i!=i)}t&&p(o[u]>0),c=f*f/o[u],l<c&&(a=u,l=c)}e.q=a}function H(e){var n=e.m;if(t)var r=e.n;var i=e.head,s=e.q,o=e.tcol_ind,u=e.tcol_vec,a=e.tcol_vec,f,l,c;t&&p(1<=s&&s<=r),l=i[n+s],t&&p(1<=l&&l<=n+r);for(f=1;f<=n;f++)a[f]=0;if(l<=n)a[l]=-1;else{var h=e.A_ptr,d=e.A_ind,v=e.A_val,m,g,y;m=h[l-n],g=h[l-n+1];for(y=m;y<g;y++)a[d[y]]=v[y]}p(e.valid),ar(e.bfd,u),c=0;for(f=1;f<=n;f++)u[f]!=0&&(o[++c]=f);e.tcol_nnz=c}function B(e){var n=e.m;if(t)var r=e.n;var i=e.head,s=e.q,o=e.tcol_ind,u=e.tcol_vec,a=e.work3,f,l,c;t&&p(1<=s&&s<=r),l=i[n+s],t&&p(1<=l&&l<=n+r);for(f=1;f<=n;f++)a[f]=0;if(l<=n)a[l]=-1;else{var h=e.A_ptr,d=e.A_ind,m=e.A_val,g,y,b;g=h[l-n],y=h[l-n+1];for(b=g;b<y;b++)a[d[b]]=m[b]}v(e,a,u),c=0;for(f=1;f<=n;f++)u[f]!=0&&(o[++c]=f);e.tcol_nnz=c}function j(e,n){if(t)var r=e.m;var i=e.tcol_nnz,s=e.tcol_ind,o=e.tcol_vec,u,a,f,l,c,h;l=0;for(f=1;f<=i;f++)t&&(u=s[f],p(1<=u&&u<=r)),h=Math.abs(o[s[f]]),l<h&&(l=h);e.tcol_max=l,c=n*(1+.01*l);for(a=0;a<i;)u=s[i],Math.abs(o[u])<c?i--:(a++,s[i]=s[a],s[a]=u);e.tcol_num=a}function F(e,r){function D(){e.p=x,x>0&&u[c[x]]==zi?e.p_stat=Ji:e.p_stat=T,t&&p(M>=0),e.teta=A*M}var s=e.m;if(t)var o=e.n;var u=e.type,a=e.lb,f=e.ub,l=e.coef,c=e.head,h=e.phase,d=e.bbar,v=e.cbar,m=e.q,g=e.tcol_ind,y=e.tcol_vec,b=e.tcol_num,w,E,S,x,T,N,C,k,L,A,O,M,_;t&&p(1<=m&&m<=o),t&&p(v[m]!=0),A=v[m]>0?-1:1,S=c[s+m],t&&p(1<=S&&S<=s+o),u[S]==Ui?(x=-1,T=0,M=f[S]-a[S],k=1):(x=0,T=0,M=n,k=0);for(N=1;N<=b;N++){w=g[N],t&&p(1<=w&&w<=s),S=c[w],t&&p(1<=S&&S<=s+o),C=A*y[w],t&&p(C!=0);if(C>0)if(h==1&&l[S]<0)L=r*(1+i*Math.abs(a[S])),O=(a[S]+L-d[w])/C,E=Xi;else{if(h==1&&l[S]>0)continue;if(u[S]!=Ri&&u[S]!=Ui&&u[S]!=zi)continue;L=r*(1+i*Math.abs(f[S])),O=(f[S]+L-d[w])/C,E=Vi}else if(h==1&&l[S]>0)L=r*(1+i*Math.abs(f[S])),O=(f[S]-L-d[w])/C,E=Vi;else{if(h==1&&l[S]<0)continue;if(u[S]!=qi&&u[S]!=Ui&&u[S]!=zi)continue;L=r*(1+i*Math.abs(a[S])),O=(a[S]-L-d[w])/C,E=Xi}O<0&&(O=0);if(M>O||M==O&&k<Math.abs(C))x=w,T=E,M=O,k=Math.abs(C)}if(r==0)return D();if(x<=0)return D();if(M==0)return D();_=M,x=0,T=0,M=n,k=0;for(N=1;N<=b;N++){w=g[N],t&&p(1<=w&&w<=s),S=c[w],t&&p(1<=S&&S<=s+o),C=A*y[w],t&&p(C!=0);if(C>0)if(h==1&&l[S]<0)O=(a[S]-d[w])/C,E=Xi;else{if(h==1&&l[S]>0)continue;if(u[S]!=Ri&&u[S]!=Ui&&u[S]!=zi)continue;O=(f[S]-d[w])/C,E=Vi}else if(h==1&&l[S]>0)O=(f[S]-d[w])/C,E=Vi;else{if(h==1&&l[S]<0)continue;if(u[S]!=qi&&u[S]!=Ui&&u[S]!=zi)continue;O=(a[S]-d[w])/C,E=Xi}O<0&&(O=0),O<=_&&k<Math.abs(C)&&(x=w,T=E,M=O,k=Math.abs(C))}p(x!=0),D()}function I(e,n){var r=e.m,i=e.p,s;t&&p(1<=i&&i<=r);for(s=1;s<=r;s++)n[s]=0;n[i]=1,p(e.valid),fr(e.bfd,n)}function q(e,n){var r=e.m,i=e.p,s=e.work3,o;t&&p(1<=i&&i<=r);for(o=1;o<=r;o++)s[o]=0;s[i]=1,E(e,s,n)}function R(e,n){var r=e.m,i=e.n;if(t)var s=e.stat;var o=e.N_ptr,u=e.N_len,a=e.N_ind,f=e.N_val,l=e.trow_ind,c=e.trow_vec,h,d,v,m,g,y,b;for(d=1;d<=i;d++)c[d]=0;for(h=1;h<=r;h++){b=n[h];if(b==0)continue;v=o[h],m=v+u[h];for(g=v;g<m;g++)t&&(d=a[g],p(1<=d&&d<=i),p(s[d]!=Ji)),c[a[g]]-=b*f[g]}y=0;for(d=1;d<=i;d++)c[d]!=0&&(l[++y]=d);e.trow_nnz=y}function U(e){if(t)var n=e.m,r=e.n;var i=e.bbar,s=e.q,o=e.tcol_nnz,u=e.tcol_ind,a=e.tcol_vec,f=e.p,l=e.teta,c,h;t&&(p(1<=s&&s<=r),p(f<0||1<=f&&f<=n)),f>0&&(i[f]=C(e,s)+l);if(l==0)return;for(h=1;h<=o;h++){c=u[h];if(c==f)continue;i[c]+=a[c]*l}}function z(e){var n=e.m;if(t)var r=e.n;var i=e.coef,s=e.head,o=e.q,u=e.tcol_nnz,a=e.tcol_ind,f=e.tcol_vec,l,c,h;t&&p(1<=o&&o<=r),h=i[s[n+o]];for(c=1;c<=u;c++)l=a[c],t&&p(1<=l&&l<=n),h+=i[s[l]]*f[l];return h}function W(e){if(t)var n=e.n;var r=e.cbar,i=e.q,s=e.trow_nnz,o=e.trow_ind,u=e.trow_vec,a,f,l;t&&p(1<=i&&i<=n),t&&p(u[i]!=0),l=r[i]/=u[i];for(f=1;f<=s;f++){a=o[f];if(a==i)continue;r[a]-=u[a]*l}}function X(e){var n=e.m;if(t)var r=e.n;var i=e.type,s=e.A_ptr,u=e.A_ind,a=e.A_val,f=e.head,l=e.refsp,c=e.gamma,h=e.q,d=e.tcol_nnz,v=e.tcol_ind,m=e.tcol_vec,g=e.p,y=e.trow_nnz,b=e.trow_ind,w=e.trow_vec,E=e.work3,S,x,T,N,C,k,L,A,O,M,_,D,P,H;t&&(p(1<=g&&g<=n),p(1<=h&&h<=r)),p(e.refct>0),e.refct--,A=O=l[f[n+h]]?1:0;for(S=1;S<=n;S++)E[S]=0;for(N=1;N<=d;N++)S=v[N],l[f[S]]?(E[S]=D=m[S],A+=D*D):E[S]=0;p(e.valid),fr(e.bfd,E),M=w[h],t&&p(M!=0);for(N=1;N<=y;N++){x=b[N];if(x==h)continue;D=w[x]/M,T=f[n+x];if(T<=n)_=E[T];else{_=0,C=s[T-n],k=s[T-n+1];for(L=C;L<k;L++)_-=a[L]*E[u[L]]}P=c[x]+D*D*A+2*D*_,H=(l[T]?1:0)+O*D*D,c[x]=P>=H?P:H,c[x]<o&&(c[x]=o)}i[f[g]]==zi?c[h]=1:(c[h]=A/(M*M),c[h]<o&&(c[h]=o))}function V(e){var t=e.m,n=e.bbar,r,i,s,o;o=new Array(1+t),k(e,o),s=0;for(r=1;r<=t;r++)i=Math.abs(o[r]-n[r])/(1+Math.abs(o[r])),s<i&&(s=i);return s}function $(e){var t=e.m,n=e.n,r=e.stat,i=e.cbar,s,o,u,a,f;f=new Array(1+t),L(e,f),u=0;for(s=1;s<=n;s++){if(r[s]==Ji)continue;a=A(e,f,s),o=Math.abs(a-i[s])/(1+Math.abs(a)),u<o&&(u=o)}return u}function J(e){var t=e.n,n=e.stat,r=e.gamma,i,s,o,u;o=0;for(i=1;i<=t;i++){if(n[i]==Ji){p(r[i]==1);continue}u=D(e,i),s=Math.abs(u-r[i])/(1+Math.abs(u)),o<s&&(o=s)}return o}function K(e){var n=e.m;if(t)var r=e.n,i=e.type;var s=e.head,o=e.stat,u=e.q,a=e.p,f=e.p_stat,l;t&&p(1<=u&&u<=r);if(a<0){t&&(l=s[n+u],p(1<=l&&l<=n+r),p(i[l]==Ui));switch(o[u]){case Xi:o[u]=Vi;break;case Vi:o[u]=Xi;break;default:p(o!=o)}}else{if(t){p(1<=a&&a<=n),l=s[a];switch(f){case Xi:p(i[l]==qi||i[l]==Ui);break;case Vi:p(i[l]==Ri||i[l]==Ui);break;case Ji:p(i[l]==Ji);break;default:p(f!=f)}}l=s[a],s[a]=s[n+u],s[n+u]=l,o[u]=f}}function Q(e,t){var n=e.m,r=e.n,s=e.type,o=e.lb,u=e.ub,a=e.coef,f=e.head,l=e.bbar,c,h,p=0,d;t*=.9;for(h=1;h<=n+r;h++)a[h]=0;for(c=1;c<=n;c++){h=f[c];if(s[h]==qi||s[h]==Ui||s[h]==zi)d=t*(1+i*Math.abs(o[h])),l[c]<o[h]-d&&(a[h]=-1,p++);if(s[h]==Ri||s[h]==Ui||s[h]==zi)d=t*(1+i*Math.abs(u[h])),l[c]>u[h]+d&&(a[h]=1,p++)}return p}function G(e){var t=e.m,n=e.n,r=e.coef,i=e.obj,s=e.zeta,o,u;for(o=1;o<=t;o++)r[o]=0;for(u=1;u<=n;u++)r[t+u]=s*i[u]}function Y(e,n){var r=e.m;if(t)var s=e.n;var o=e.type,u=e.lb,a=e.ub,f=e.coef,l=e.head,c=e.phase,h=e.bbar,d,v,m;for(d=1;d<=r;d++){v=l[d],t&&p(1<=v&&v<=r+s);if(c==1&&f[v]<0){t&&p(o[v]==qi||o[v]==Ui||o[v]==zi),m=n*(1+i*Math.abs(u[v]));if(h[d]>u[v]+m)return 1}else if(c==1&&f[v]>0){t&&p(o[v]==Ri||o[v]==Ui||o[v]==zi),m=n*(1+i*Math.abs(a[v]));if(h[d]<a[v]-m)return 1}else{if(o[v]==qi||o[v]==Ui||o[v]==zi){m=n*(1+i*Math.abs(u[v]));if(h[d]<u[v]-m)return 1}if(o[v]==Ri||o[v]==Ui||o[v]==zi){m=n*(1+i*Math.abs(a[v]));if(h[d]>a[v]+m)return 1}}}return 0}function Z(e,n){var r=e.m;if(t)var s=e.n,o=e.type;var u=e.lb,a=e.ub,f=e.coef,l=e.head,c=e.bbar,h,d,v;p(e.phase==1);for(h=1;h<=r;h++){d=l[h],t&&p(1<=d&&d<=r+s);if(f[d]<0){t&&p(o[d]==qi||o[d]==Ui||o[d]==zi),v=n*(1+i*Math.abs(u[d]));if(c[h]<u[d]-v)return 1}else if(f[d]>0){t&&p(o[d]==Ri||o[d]==Ui||o[d]==zi),v=n*(1+i*Math.abs(a[d]));if(c[h]>a[d]+v)return 1}}return 0}function et(e){var n=e.m,r=e.n,i=e.obj,s=e.head,o=e.bbar,u,a,f,l;l=i[0];for(u=1;u<=n;u++)f=s[u],t&&p(1<=f&&f<=n+r),f>n&&(l+=i[f-n]*o[u]);for(a=1;a<=r;a++)f=s[n+a],t&&p(1<=f&&f<=n+r),f>n&&(l+=i[f-n]*C(e,a));return l}function tt(e,n,r){var i=e.m;if(t)var s=e.n;var o=e.type,u=e.lb,a=e.ub,f=e.phase,l=e.head,c=e.bbar,h,v,m,g;if(n.msg_lev<ds)return;if(n.out_dly>0&&1e3*w(b(),e.tm_beg)<n.out_dly)return;if(e.it_cnt==e.it_dpy)return;if(!r&&e.it_cnt%n.out_frq!=0)return;g=0,m=0;for(h=1;h<=i;h++)v=l[h],t&&p(1<=v&&v<=i+s),(o[v]==qi||o[v]==Ui||o[v]==zi)&&c[h]<u[v]&&(g+=u[v]-c[h]),(o[v]==Ri||o[v]==Ui||o[v]==zi)&&c[h]>a[v]&&(g+=c[h]-a[v]),o[v]==zi&&m++;d((f==1?" ":"*")+e.it_cnt+": obj = "+et(e)+"  infeas = "+g+" ("+m+")"),e.it_dpy=e.it_cnt}function nt(e,n,r,i,s){var o=e.m,u=e.n,a=e.zeta,f=e.head,l=e.stat,c=e.bbar,h=e.cbar,d,v,g,y,b;t&&(p(n.m==o),p(n.n==u),p(!n.valid&&n.bfd==null),p(e.valid&&e.bfd!=null)),n.valid=1,e.valid=0,n.bfd=e.bfd,e.bfd=null,m(n.head,1,f,1,o),n.pbs_stat=r,n.dbs_stat=i,n.obj_val=et(e),n.it_cnt=e.it_cnt,n.some=s;for(d=1;d<=o;d++)g=f[d],t&&p(1<=g&&g<=o+u),g<=o?(y=n.row[g],y.stat=Wi,y.bind=d,y.prim=c[d]/y.rii,y.dual=0):(b=n.col[g-o],b.stat=Wi,b.bind=d,b.prim=c[d]*b.sjj,b.dual=0);for(v=1;v<=u;v++){g=f[o+v],t&&p(1<=g&&g<=o+u);if(g<=o){y=n.row[g],y.stat=l[v],y.bind=0;switch(l[v]){case Xi:y.prim=y.lb;break;case Vi:y.prim=y.ub;break;case $i:y.prim=0;break;case Ji:y.prim=y.lb;break;default:p(l!=l)}y.dual=h[v]*y.rii/a}else{b=n.col[g-o],b.stat=l[v],b.bind=0;switch(l[v]){case Xi:b.prim=b.lb;break;case Vi:b.prim=b.ub;break;case $i:b.prim=0;break;case Ji:b.prim=b.lb;break;default:p(l!=l)}b.dual=h[v]/b.sjj/a}}}const i=.1;var rt,it=2,st=0,ot=0,ut=0,at=0,ft,lt,ct;rt=u(e),a(rt,e),r.msg_lev>=ms&&d("Objective scale factor = "+rt.zeta+"");for(;;){if(it==0){ct=l(rt);if(ct!=0)return r.msg_lev>=ps&&(d("Error: unable to factorize the basis matrix ("+ct+")"),d("Sorry, basis recovery procedure not implemented yet")),p(!e.valid&&e.bfd==null),e.bfd=rt.bfd,rt.bfd=null,e.pbs_stat=e.dbs_stat=rs,e.obj_val=0,e.it_cnt=rt.it_cnt,e.some=0,ct=fo,ct;rt.valid=1,it=1,st=ot=0}if(st==0){O(rt),st=1,rt.phase==0&&(Q(rt,r.tol_bnd)>0?rt.phase=1:(G(rt),rt.phase=2),p(Y(rt,r.tol_bnd)==0),ot=0,tt(rt,r,1));if(Y(rt,r.tol_bnd)){r.msg_lev>=ps&&d("Warning: numerical instability (primal simplex, phase "+(rt.phase==1?"I":"II")+")"),rt.phase=0,it=0,ut=5;continue}}p(rt.phase==1||rt.phase==2),rt.phase==1&&!Z(rt,r.tol_bnd)&&(rt.phase=2,G(rt),ot=0,tt(rt,r,1)),ot==0&&(M(rt),ot=1);switch(r.pricing){case ws:break;case Es:rt.refct==0&&_(rt);break;default:p(r!=r)}p(it&&st&&ot);if(at){var ht=V(rt),pt=$(rt),dt=r.pricing==Es?J(rt):0;d("e_bbar = "+ht+"; e_cbar = "+pt+"; e_gamma = "+dt+""),p(ht<=1e-5&&pt<=1e-5&&dt<=.001)}if(r.it_lim<s&&rt.it_cnt-rt.it_beg>=r.it_lim){if(st!=1||rt.phase==2&&ot!=1){st!=1&&(st=0),rt.phase==2&&ot!=1&&(ot=0);continue}tt(rt,r,1),r.msg_lev>=vs&&d("ITERATION LIMIT EXCEEDED; SEARCH TERMINATED");switch(rt.phase){case 1:ft=ss,G(rt),M(rt);break;case 2:ft=is;break;default:p(rt!=rt)}return P(rt,r.tol_dj),lt=rt.q==0?is:ss,nt(rt,e,ft,lt,0),ct=ho,ct}if(r.tm_lim<s&&1e3*w(b(),rt.tm_beg)>=r.tm_lim){if(st!=1||rt.phase==2&&ot!=1){st!=1&&(st=0),rt.phase==2&&ot!=1&&(ot=0);continue}tt(rt,r,1),r.msg_lev>=vs&&d("TIME LIMIT EXCEEDED; SEARCH TERMINATED");switch(rt.phase){case 1:ft=ss,G(rt),M(rt);break;case 2:ft=is;break;default:p(rt!=rt)}return P(rt,r.tol_dj),lt=rt.q==0?is:ss,nt(rt,e,ft,lt,0),ct=po,ct}tt(rt,r,0),P(rt,r.tol_dj);if(rt.q==0){if(st!=1||ot!=1){st!=1&&(st=0),ot!=1&&(ot=0);continue}tt(rt,r,1);switch(rt.phase){case 1:r.msg_lev>=vs&&d("PROBLEM HAS NO FEASIBLE SOLUTION"),ft=os,G(rt),M(rt),P(rt,r.tol_dj),lt=rt.q==0?is:ss;break;case 2:r.msg_lev>=vs&&d("OPTIMAL SOLUTION FOUND"),ft=lt=is;break;default:p(rt!=rt)}return nt(rt,e,ft,lt,0),ct=0,ct}H(rt),ut&&B(rt),j(rt,r.tol_piv);var vt=rt.cbar[rt.q],mt=z(rt);p(vt!=0);if(Math.abs(vt-mt)>1e-5*(1+Math.abs(mt))||!(vt<0&&mt<0||vt>0&&mt>0)){r.msg_lev>=ms&&d("d1 = "+vt+"; d2 = "+mt+"");if(ot!=1||!ut){ot!=1&&(ot=0),ut=5;continue}}vt>0?rt.cbar[rt.q]=mt>0?mt:+o:rt.cbar[rt.q]=mt<0?mt:-o;switch(r.r_test){case Ss:F(rt,0);break;case xs:F(rt,.3*r.tol_bnd);break;default:p(r!=r)}if(rt.p==0){if(st!=1||ot!=1||!ut){st!=1&&(st=0),ot!=1&&(ot=0),ut=1;continue}tt(rt,r,1);switch(rt.phase){case 1:r.msg_lev>=ps&&d("Error: unable to choose basic variable on phase I"),p(!e.valid&&e.bfd==null),e.bfd=rt.bfd,rt.bfd=null,e.pbs_stat=e.dbs_stat=rs,e.obj_val=0,e.it_cnt=rt.it_cnt,e.some=0,ct=fo;break;case 2:r.msg_lev>=vs&&d("PROBLEM HAS UNBOUNDED SOLUTION"),nt(rt,e,is,os,rt.head[rt.m+rt.q]),ct=0;break;default:p(rt!=rt)}return ct}if(rt.p>0){var gt=rt.tcol_vec[rt.p],yt=1e-5*(1+.01*rt.tcol_max);if(Math.abs(gt)<yt){r.msg_lev>=ms&&d("piv = "+gt+"; eps = "+yt+"");if(!ut){ut=5;continue}}}if(rt.p>0){var bt=rt.work4;I(rt,bt),ut&&q(rt,bt),R(rt,bt)}if(rt.p>0){var wt=rt.tcol_vec[rt.p],Et=rt.trow_vec[rt.q];p(wt!=0);if(Math.abs(wt-Et)>1e-8*(1+Math.abs(wt))||!(wt>0&&Et>0||wt<0&&Et<0)){r.msg_lev>=ms&&d("piv1 = "+wt+"; piv2 = "+Et+"");if(it!=1||!ut){it!=1&&(it=0),ut=5;continue}rt.trow_vec[rt.q]==0&&(rt.trow_nnz++,p(rt.trow_nnz<=rt.n),rt.trow_ind[rt.trow_nnz]=rt.q),rt.trow_vec[rt.q]=wt}}U(rt),st=2;if(rt.p>0){W(rt),ot=2;if(rt.phase==1){var St=rt.head[rt.p];rt.cbar[rt.q]-=rt.coef[St],rt.coef[St]=0}}if(rt.p>0)switch(r.pricing){case ws:break;case Es:rt.refct>0&&X(rt);break;default:p(r!=r)}rt.p>0&&(ct=c(rt,rt.p,rt.head[rt.m+rt.q]),ct==0?it=2:(rt.valid=0,it=0)),rt.p>0&&(T(rt,rt.q,rt.head[rt.m+rt.q]),rt.type[rt.head[rt.p]]!=zi&&x(rt,rt.q,rt.head[rt.p])),K(rt),rt.it_cnt++,ut>0&&ut--;continue}return ct}function hE(e,r){function u(e){var t=e.m,n=e.n,r=e.nnz,i={};return p(t>0&&n>0),i.m=t,i.n=n,i.type=new Array(1+t+n),i.lb=new Array(1+t+n),i.ub=new Array(1+t+n),i.coef=new Array(1+t+n),i.orig_type=new Array(1+t+n),i.orig_lb=new Array(1+t+n),i.orig_ub=new Array(1+t+n),i.obj=new Array(1+n),i.A_ptr=new Array(1+n+1),i.A_ind=new Array(1+r),i.A_val=new Array(1+r),i.AT_ptr=new Array(1+t+1),i.AT_ind=new Array(1+r),i.AT_val=new Array(1+r),i.head=new Array(1+t+n),i.bind=new Array(1+t+n),i.stat=new Array(1+n),i.bbar=new Array(1+t),i.cbar=new Array(1+n),i.refsp=new Array(1+t+n),i.gamma=new Array(1+t),i.trow_ind=new Array(1+n),i.trow_vec=new Array(1+n),i.tcol_ind=new Array(1+t),i.tcol_vec=new Array(1+t),i.work1=new Array(1+t),i.work2=new Array(1+t),i.work3=new Array(1+t),i.work4=new Array(1+t),i}function a(e,t){var n=e.m,r=e.n,i=e.type,s=e.lb,o=e.ub,u=e.coef,a=e.orig_type,f=e.orig_lb,l=e.orig_ub,c=e.obj,h=e.A_ptr,d=e.A_ind,v=e.A_val,y=e.AT_ptr,w=e.AT_ind,E=e.AT_val,S=e.head,x=e.bind,T=e.stat,N=e.refsp,C=e.gamma,k,L,A,O,M,_,D,P;for(k=1;k<=n;k++)D=t.row[k],i[k]=D.type,s[k]=D.lb*D.rii,o[k]=D.ub*D.rii,u[k]=0;for(L=1;L<=r;L++)P=t.col[L],i[n+L]=P.type,s[n+L]=P.lb/P.sjj,o[n+L]=P.ub/P.sjj,u[n+L]=P.coef*P.sjj;m(a,1,i,1,n+r),m(f,1,s,1,n+r),m(l,1,o,1,n+r),c[0]=t.c0,m(c,1,u,n+1,r),M=0;for(L=1;L<=r;L++)M<Math.abs(c[L])&&(M=Math.abs(c[L]));M==0&&(M=1);switch(t.dir){case Pi:e.zeta=1/M;break;case Hi:e.zeta=-1/M;break;default:p(t!=t)}Math.abs(e.zeta)<1&&(e.zeta*=1e3);for(L=1;L<=r;L++)u[n+L]*=e.zeta;O=1;for(L=1;L<=r;L++){h[L]=O;for(_=t.col[L].ptr;_!=null;_=_.c_next)d[O]=_.row.i,v[O]=_.row.rii*_.val*_.col.sjj,O++}h[r+1]=O,p(O-1==t.nnz),O=1;for(k=1;k<=n;k++){y[k]=O;for(_=t.row[k].ptr;_!=null;_=_.r_next)w[O]=_.col.j,E[O]=_.row.rii*_.val*_.col.sjj,O++}y[n+1]=O,p(O-1==t.nnz),p(t.valid),m(S,1,t.head,1,n),A=0;for(k=1;k<=n;k++)D=t.row[k],D.stat!=Wi&&(A++,p(A<=r),S[n+A]=k,T[A]=D.stat);for(L=1;L<=r;L++)P=t.col[L],P.stat!=Wi&&(A++,p(A<=r),S[n+A]=n+L,T[A]=P.stat);p(A==r);for(A=1;A<=n+r;A++)x[S[A]]=A;e.valid=1,t.valid=0,e.bfd=t.bfd,t.bfd=null,e.phase=0,e.tm_beg=b(),e.it_beg=e.it_cnt=t.it_cnt,e.it_dpy=-1,e.refct=0,g(N,1,0,n+r);for(k=1;k<=n;k++)C[k]=1}function f(e,n,r,i){var s=e.m;if(t)var o=e.n;var u=e.A_ptr,a=e.A_ind,f=e.A_val,l=e.head,c,h,d,v;t&&p(1<=n&&n<=s),c=l[n],t&&p(1<=c&&c<=s+o);if(c<=s)h=1,r[1]=c,i[1]=1;else{d=u[c-s],h=u[c-s+1]-d,m(r,1,a,d,h),m(i,1,f,d,h);for(v=1;v<=h;v++)i[v]=-i[v]}return h}function l(e){var t=ur(e.bfd,e.m,null,f,e);return e.valid=t==0,t}function c(e,n,r){var i=e.m;if(t)var s=e.n;var o,u;t&&(p(1<=n&&n<=i),p(1<=r&&r<=i+s));if(r<=i){var a=new Array(2);u=new Array(2),a[1]=r,u[1]=1,p(e.valid),o=lr(e.bfd,n,0,1,a,0,u)}else{var f=e.A_ptr,l=e.A_ind,c=e.A_val;u=e.work1;var h,d,v,m;h=f[r-i],d=f[r-i+1],m=0;for(v=h;v<d;v++)u[++m]=-c[v];p(e.valid),o=lr(e.bfd,n,0,m,l,h-1,u)}return e.valid=o==0,o}function h(e,n,r,i){var s=e.m;if(t)var o=e.n;var u=e.A_ptr,a=e.A_ind,f=e.A_val,l=e.head,c,h,d,v,g,y;m(i,1,n,1,s);for(c=1;c<=s;c++){y=r[c];if(y==0)continue;h=l[c],t&&p(1<=h&&h<=s+o);if(h<=s)i[h]-=y;else{d=u[h-s],v=u[h-s+1];for(g=d;g<v;g++)i[a[g]]+=f[g]*y}}}function v(e,t,n){var r=e.m,i=e.work1,s=e.work1,o;h(e,t,n,i),p(e.valid),ar(e.bfd,s);for(o=1;o<=r;o++)n[o]+=s[o]}function y(e,n,r,i){var s=e.m;if(t)var o=e.n;var u=e.A_ptr,a=e.A_ind,f=e.A_val,l=e.head,c,h,d,v,m,g;for(c=1;c<=s;c++){h=l[c],t&&p(1<=h&&h<=s+o),g=n[c];if(h<=s)g-=r[h];else{d=u[h-s],v=u[h-s+1];for(m=d;m<v;m++)g+=f[m]*r[a[m]]}i[c]=g}}function E(e,t,n){var r=e.m,i=e.work1,s=e.work1,o;y(e,t,n,i),p(e.valid),fr(e.bfd,s);for(o=1;o<=r;o++)n[o]+=s[o]}function S(e,n){var r=e.m;if(t)var i=e.n;var s=e.lb,o=e.ub,u=e.head,a=e.stat,f,l;t&&p(1<=n&&n<=i),f=u[r+n],t&&p(1<=f&&f<=r+i);switch(a[n]){case Xi:l=s[f];break;case Vi:l=o[f];break;case $i:l=0;break;case Ji:l=s[f];break;default:p(a!=a)}return l}function x(e,n){var r=e.m,i=e.n,s=e.A_ptr,o=e.A_ind,u=e.A_val,a=e.head,f=e.work2,l,c,h,d,g,y,b;for(l=1;l<=r;l++)f[l]=0;for(c=1;c<=i;c++){h=a[r+c],t&&p(1<=h&&h<=r+i),b=S(e,c);if(b==0)continue;if(h<=r)f[h]-=b;else{d=s[h-r],g=s[h-r+1];for(y=d;y<g;y++)f[o[y]]+=b*u[y]}}m(n,1,f,1,r),p(e.valid),ar(e.bfd,n),v(e,f,n)}function T(e,t){var n=e.m,r=e.coef,i=e.head,s=e.work2,o;for(o=1;o<=n;o++)s[o]=r[i[o]];m(t,1,s,1,n),p(e.valid),fr(e.bfd,t),E(e,s,t)}function N(e,n,r){var i=e.m;if(t)var s=e.n;var o=e.coef,u=e.head,a,f;t&&p(1<=r&&r<=s),a=u[i+r],t&&p(1<=a&&a<=i+s),f=o[a];if(a<=i)f-=n[a];else{var l=e.A_ptr,c=e.A_ind,h=e.A_val,d,v,m;d=l[a-i],v=l[a-i+1];for(m=d;m<v;m++)f+=h[m]*n[c[m]]}return f}function C(e){x(e,e.bbar)}function k(e){if(t)var n=e.m;var r=e.n;if(t)var i=e.head;var s=e.cbar,o=e.work3,u;if(t)var a;T(e,o);for(u=1;u<=r;u++)t&&(a=i[n+u],p(1<=a&&a<=n+r)),s[u]=N(e,o,u)}function L(e){var t=e.m,n=e.n,r=e.head,i=e.refsp,s=e.gamma,o,u;p(e.refct==0),e.refct=1e3,g(i,1,0,t+n);for(o=1;o<=t;o++)u=r[o],i[u]=1,s[o]=1}function A(e,n){var r=e.m,i=e.n,s=e.type,o=e.head,u=e.refsp,a=e.work3,f=e.work3,l,c,h;for(l=1;l<=r;l++)h=o[l],t&&p(1<=h&&h<=r+i),s[h]==Ii?n[l]=1:n[l]=u[h]?1:0;for(c=1;c<=i;c++){h=o[r+c],t&&p(1<=h&&h<=r+i);if(!u[h])continue;t&&p(s[h]!=zi);for(l=1;l<=r;l++)f[l]=0;if(h<=r)f[h]=-1;else{var d=e.A_ptr,v=e.A_ind,m=e.A_val,g,y,b;g=d[h-r],y=d[h-r+1];for(b=g;b<y;b++)f[v[b]]=m[b]}p(e.valid),ar(e.bfd,a);for(l=1;l<=r;l++)h=o[l],s[h]!=Ii&&(n[l]+=a[l]*a[l])}}function O(e,n){var r=e.m;if(t)var s=e.n;var u=e.type,a=e.lb,f=e.ub,l=e.head,c=e.bbar,h=e.gamma,d,v,m,g,y,b,w,E;m=0,g=0,y=0;for(d=1;d<=r;d++){v=l[d],t&&p(1<=v&&v<=r+s),w=0;if(u[v]==qi||u[v]==Ui||u[v]==zi)b=n*(1+i*Math.abs(a[v])),c[d]<a[v]-b&&(w=a[v]-c[d]);if(u[v]==Ri||u[v]==Ui||u[v]==zi)b=n*(1+i*Math.abs(f[v])),c[d]>f[v]+b&&(w=f[v]-c[d]);if(w==0)continue;t&&p(h[d]>=0),E=h[d],E<o&&(E=o),E=w*w/E,y<E&&(m=d,g=w,y=E)}e.p=m,e.delta=g}function M(e,n){var r=e.m,i=e.p,s;t&&p(1<=i&&i<=r);for(s=1;s<=r;s++)n[s]=0;n[i]=1,p(e.valid),fr(e.bfd,ht)}function _(e,n){var r=e.m,i=e.p,s=e.work3,o;t&&p(1<=i&&i<=r);for(o=1;o<=r;o++)s[o]=0;s[i]=1,E(e,s,n)}function D(e,t){var n=e.m,r=e.n,i=e.A_ptr,s=e.A_ind,o=e.A_val,u=e.head,a=e.stat,f=e.trow_ind,l=e.trow_vec,c,h,p,d,v,m,g;m=0;for(c=1;c<=r;c++){if(a[c]==Ji){l[c]=0;continue}h=u[n+c];if(h<=n)g=-t[h];else{p=i[h-n],d=i[h-n+1],g=0;for(v=p;v<d;v++)g+=t[s[v]]*o[v]}g!=0&&(f[++m]=c),l[c]=g}e.trow_nnz=m}function P(e,t){var n=e.m,r=e.n,i=e.AT_ptr,s=e.AT_ind,o=e.AT_val,u=e.bind,a=e.stat,f=e.trow_ind,l=e.trow_vec,c,h,p,d,v,m,g;for(h=1;h<=r;h++)l[h]=0;for(c=1;c<=n;c++){g=t[c];if(g==0)continue;h=u[c]-n,h>=1&&a[h]!=Ji&&(l[h]-=g),p=i[c],d=i[c+1];for(v=p;v<d;v++)h=u[n+s[v]]-n,h>=1&&a[h]!=Ji&&(l[h]+=g*o[v])}m=0;for(h=1;h<=r;h++)l[h]!=0&&(f[++m]=h);e.trow_nnz=m}function H(e,t){var n=e.m,r,i,s;i=0;for(r=1;r<=n;r++)t[r]!=0&&i++;s=i/n,s>=.2?D(e,t):P(e,t)}function B(e,n){if(t)var r=e.n,i=e.stat;var s=e.trow_nnz,o=e.trow_ind,u=e.trow_vec,a,f,l,c,h,d;c=0;for(l=1;l<=s;l++)t&&(a=o[l],p(1<=a&&a<=r),p(i[a]!=Ji)),d=Math.abs(u[o[l]]),c<d&&(c=d);e.trow_max=c,h=n*(1+.01*c);for(f=0;f<s;)a=o[s],Math.abs(u[a])<h?s--:(f++,o[s]=o[f],o[f]=a);e.trow_num=f}function j(e,r){function x(){e.q=m,e.new_dq=b*E}if(t)var i=e.m,s=e.n;var o=e.stat,u=e.cbar;if(t)var a=e.p;var f=e.delta,l=e.trow_ind,c=e.trow_vec,h=e.trow_num,d,v,m,g,y,b,w,E,S;t&&p(1<=a&&a<=i),t&&p(f!=0),b=f>0?1:-1,m=0,E=n,y=0;for(v=1;v<=h;v++){d=l[v],t&&p(1<=d&&d<=s),g=b*c[d],t&&p(g!=0);if(g>0){if(o[d]!=Xi&&o[d]!=$i)continue;w=(u[d]+r)/g}else{if(o[d]!=Vi&&o[d]!=$i)continue;w=(u[d]-r)/g}w<0&&(w=0);if(E>w||E==w&&y<Math.abs(g))m=d,E=w,y=Math.abs(g)}if(r==0)return x();if(m==0)return x();if(E==0)return x();S=E,m=0,E=n,y=0;for(v=1;v<=h;v++){d=l[v],t&&p(1<=d&&d<=s),g=b*c[d],t&&p(g!=0);if(g>0){if(o[d]!=Xi&&o[d]!=$i)continue;w=u[d]/g}else{if(o[d]!=Vi&&o[d]!=$i)continue;w=u[d]/g}w<0&&(w=0),w<=S&&y<Math.abs(g)&&(m=d,E=w,y=Math.abs(g))}p(m!=0),x()}function F(e){var n=e.m;if(t)var r=e.n;var i=e.head,s=e.q,o=e.tcol_ind,u=e.tcol_vec,a=e.tcol_vec,f,l,c;t&&p(1<=s&&s<=r),l=i[n+s],t&&p(1<=l&&l<=n+r);for(f=1;f<=n;f++)a[f]=0;if(l<=n)a[l]=-1;else{var h=e.A_ptr,d=e.A_ind,v=e.A_val,m,g,y;m=h[l-n],g=h[l-n+1];for(y=m;y<g;y++)a[d[y]]=v[y]}p(e.valid),ar(e.bfd,u),c=0;for(f=1;f<=n;f++)u[f]!=0&&(o[++c]=f);e.tcol_nnz=c}function I(e){var n=e.m;if(t)var r=e.n;var i=e.head,s=e.q,o=e.tcol_ind,u=e.tcol_vec,a=e.work3,f,l,c;t&&p(1<=s&&s<=r),l=i[n+s],t&&p(1<=l&&l<=n+r);for(f=1;f<=n;f++)a[f]=0;if(l<=n)a[l]=-1;else{var h=e.A_ptr,d=e.A_ind,m=e.A_val,g,y,b;g=h[l-n],y=h[l-n+1];for(b=g;b<y;b++)a[d[b]]=m[b]}v(e,a,u),c=0;for(f=1;f<=n;f++)u[f]!=0&&(o[++c]=f);e.tcol_nnz=c}function q(e){if(t)var n=e.n;var r=e.cbar,i=e.trow_nnz,s=e.trow_ind,o=e.trow_vec,u=e.q,a=e.new_dq,f,l;t&&p(1<=u&&u<=n),r[u]=a;if(a==0)return;for(l=1;l<=i;l++)f=s[l],t&&p(1<=f&&f<=n),f!=u&&(r[f]-=o[f]*a)}function R(e){if(t)var n=e.m,r=e.n;var i=e.bbar,s=e.p,o=e.delta,u=e.q,a=e.tcol_nnz,f=e.tcol_ind,l=e.tcol_vec,c,h,d;t&&(p(1<=s&&s<=n),p(1<=u&&u<=r),p(l[s]!=0)),d=o/l[s],i[s]=S(e,u)+d;if(d==0)return;for(h=1;h<=a;h++)c=f[h],t&&p(1<=c&&c<=n),c!=s&&(i[c]+=l[c]*d)}function U(e){var n=e.m;if(t)var r=e.n;var i=e.type,s=e.head,u=e.refsp,a=e.gamma,f=e.p,l=e.trow_nnz,c=e.trow_ind,h=e.trow_vec,d=e.q,v=e.tcol_nnz,m=e.tcol_ind,g=e.tcol_vec,y=e.work3,b,w,E,S,x,T,N,C,k,L;t&&(p(1<=f&&f<=n),p(1<=d&&d<=r)),p(e.refct>0),e.refct--,t&&p(i[s[f]]!=Ii),x=T=u[s[f]]?1:0;for(b=1;b<=n;b++)y[b]=0;for(S=1;S<=l;S++){w=c[S],t&&p(1<=w&&w<=r),E=s[n+w],t&&(p(1<=E&&E<=n+r),p(i[E]!=zi));if(!u[E])continue;C=h[w],x+=C*C;if(E<=n)y[E]+=C;else{var A=e.A_ptr,O=e.A_ind,M=e.A_val,_,D,P;_=A[E-n],D=A[E-n+1];for(P=_;P<D;P++)y[O[P]]-=C*M[P]}}p(e.valid),ar(e.bfd,y),N=g[f],t&&p(N!=0);for(S=1;S<=v;S++){b=m[S],t&&p(1<=b&&b<=n),E=s[b],t&&p(1<=E&&E<=n+r);if(b==f)continue;if(i[s[b]]==Ii){t&&p(a[b]==1);continue}C=g[b]/N,k=a[b]+C*C*x+2*C*y[b],L=(u[E]?1:0)+T*C*C,a[b]=k>=L?k:L,a[b]<o&&(a[b]=o)}i[s[n+d]]==Ii?a[f]=1:(a[f]=x/(N*N),a[f]<o&&(a[f]=o)),E=s[f];if(i[E]==zi&&u[E]){u[E]=0;for(S=1;S<=v;S++){b=m[S];if(b==f){if(i[s[n+d]]==Ii)continue;C=1/g[f]}else{if(i[s[b]]==Ii)continue;C=g[b]/g[f]}a[b]-=C*C,a[b]<o&&(a[b]=o)}}}function z(e){var t=e.m,n=e.bbar,r,i,s,o=new Array(1+t);x(e,o),s=0;for(r=1;r<=t;r++)i=Math.abs(o[r]-n[r])/(1+Math.abs(o[r])),s<i&&(s=i);return s}function W(e){var t=e.m,n=e.n,r=e.stat,i=e.cbar,s,o,u,a,f=new Array(1+t);T(e,f),u=0;for(s=1;s<=n;s++){if(r[s]==Ji)continue;a=N(e,f,s),o=Math.abs(a-i[s])/(1+Math.abs(a)),u<o&&(u=o)}return u}function X(e){var t=e.m,n=e.type,r=e.head,i=e.gamma,s=e.work4,o,u,a,f;A(e,s),a=0;for(o=1;o<=t;o++){if(n[r[o]]==Ii){p(i[o]==1),p(s[o]==1);continue}f=s[o],u=Math.abs(f-i[o])/(1+Math.abs(f)),a<u&&(a=u)}return a}function V(e){var n=e.m;if(t)var r=e.n;var i=e.type,s=e.head,o=e.bind,u=e.stat,a=e.p,f=e.delta,l=e.q,c;t&&(p(1<=a&&a<=n),p(1<=l&&l<=r)),c=s[a],s[a]=s[n+l],s[n+l]=c,o[s[a]]=a,o[s[n+l]]=n+l,i[c]==zi?u[l]=Ji:f>0?(t&&p(i[c]==qi||i[c]==Ui),u[l]=Xi):(t&&p(i[c]==Ri||i[c]==Ui),u[l]=Vi)}function $(e,n){var r=e.m,i=e.n,s=e.orig_type,o=e.head,u=e.cbar,a,f;for(a=1;a<=i;a++){f=o[r+a],t&&p(1<=f&&f<=r+i);if(u[a]<-n)if(s[f]==qi||s[f]==Ii)return 1;if(u[a]>+n)if(s[f]==Ri||s[f]==Ii)return 1}return 0}function J(e){var n=e.m,r=e.n,i=e.type,s=e.lb,o=e.ub,u=e.orig_type,a=e.head,f=e.stat,l=e.cbar,c,h;for(h=1;h<=n+r;h++)switch(u[h]){case Ii:i[h]=Ui,s[h]=-1e3,o[h]=1e3;break;case qi:i[h]=Ui,s[h]=0,o[h]=1;break;case Ri:i[h]=Ui,s[h]=-1,o[h]=0;break;case Ui:case zi:i[h]=zi,s[h]=o[h]=0;break;default:p(u!=u)}for(c=1;c<=r;c++)h=a[n+c],t&&p(1<=h&&h<=n+r),i[h]==zi?f[c]=Ji:l[c]>=0?f[c]=Xi:f[c]=Vi}function K(e){var n=e.m,r=e.n,i=e.type,s=e.lb,u=e.ub,a=e.orig_type,f=e.orig_lb,l=e.orig_ub,c=e.head,h=e.stat,d=e.cbar,v,g;m(i,1,a,1,n+r),m(s,1,f,1,n+r),m(u,1,l,1,n+r);for(v=1;v<=r;v++){g=c[n+v],t&&p(1<=g&&g<=n+r);switch(i[g]){case Ii:h[v]=$i;break;case qi:h[v]=Xi;break;case Ri:h[v]=Vi;break;case Ui:d[v]>=+o?h[v]=Xi:d[v]<=-o?h[v]=Vi:Math.abs(s[g])<=Math.abs(u[g])?h[v]=Xi:h[v]=Vi;break;case zi:h[v]=Ji;break;default:p(i!=i)}}}function Q(e,t){var n=e.n,r=e.stat,i=e.cbar,s;for(s=1;s<=n;s++){if(i[s]<-t)if(r[s]==Xi||r[s]==$i)return 1;if(i[s]>+t)if(r[s]==Vi||r[s]==$i)return 1}return 0}function G(e){var n=e.m,r=e.n,i=e.obj,s=e.head,o=e.bbar,u,a,f,l;l=i[0];for(u=1;u<=n;u++)f=s[u],t&&p(1<=f&&f<=n+r),f>n&&(l+=i[f-n]*o[u]);for(a=1;a<=r;a++)f=s[n+a],t&&p(1<=f&&f<=n+r),f>n&&(l+=i[f-n]*S(e,a));return l}function Y(e,t,n){var r=e.m,i=e.n,s=e.coef,o=e.orig_type,u=e.head,a=e.stat,f=e.phase,l=e.bbar,c=e.cbar,h,p,v,m;if(t.msg_lev<ds)return;if(t.out_dly>0&&1e3*w(b(),e.tm_beg)<t.out_dly)return;if(e.it_cnt==e.it_dpy)return;if(!n&&e.it_cnt%t.out_frq!=0)return;m=0;if(f==1){for(h=1;h<=r;h++)m-=s[u[h]]*l[h];for(p=1;p<=i;p++)m-=s[u[r+p]]*S(e,p)}else for(p=1;p<=i;p++)c[p]<0&&(a[p]==Xi||a[p]==$i)&&(m-=c[p]),c[p]>0&&(a[p]==Vi||a[p]==$i)&&(m+=c[p]);v=0;for(h=1;h<=r;h++)o[u[h]]==zi&&v++;e.phase==1?d(" "+e.it_cnt+":  infeas = "+m+" ("+v+")"):d("|"+e.it_cnt+": obj = "+G(e)+"  infeas = "+m+" ("+v+")"),e.it_dpy=e.it_cnt}function Z(e,n,r,i,s){var o=e.m,u=e.n,a=e.zeta,f=e.head,l=e.stat,c=e.bbar,h=e.cbar,d,v,g,y,b;t&&(p(n.m==o),p(n.n==u),p(!n.valid&&n.bfd==null),p(e.valid&&e.bfd!=null)),n.valid=1,e.valid=0,n.bfd=e.bfd,e.bfd=null,m(n.head,1,f,1,o),n.pbs_stat=r,n.dbs_stat=i,n.obj_val=G(e),n.it_cnt=e.it_cnt,n.some=s;for(d=1;d<=o;d++)g=f[d],t&&p(1<=g&&g<=o+u),g<=o?(b=n.row[g],b.stat=Wi,b.bind=d,b.prim=c[d]/b.rii,b.dual=0):(y=n.col[g-o],y.stat=Wi,y.bind=d,y.prim=c[d]*y.sjj,y.dual=0);for(v=1;v<=u;v++){g=f[o+v],t&&p(1<=g&&g<=o+u);if(g<=o){b=n.row[g],b.stat=l[v],b.bind=0;switch(l[v]){case Xi:b.prim=b.lb;break;case Vi:b.prim=b.ub;break;case $i:b.prim=0;break;case Ji:b.prim=b.lb;break;default:p(l!=l)}b.dual=h[v]*b.rii/a}else{y=n.col[g-o],y.stat=l[v],y.bind=0;switch(l[v]){case Xi:y.prim=y.lb;break;case Vi:y.prim=y.ub;break;case $i:y.prim=0;break;case Ji:y.prim=y.lb;break;default:p(l!=l)}y.dual=h[v]/y.sjj/a}}}const i=.1;var et,tt=2,nt=0,rt=0,it=0,st=0,ot,ut,at;et=u(e),a(et,e),r.msg_lev>=ms&&d("Objective scale factor = "+et.zeta+"");for(;;){if(tt==0){at=l(et);if(at!=0)return r.msg_lev>=ps&&(d("Error: unable to factorize the basis matrix ("+at+")"),d("Sorry, basis recovery procedure not implemented yet")),p(!e.valid&&e.bfd==null),e.bfd=et.bfd,et.bfd=null,e.pbs_stat=e.dbs_stat=rs,e.obj_val=0,e.it_cnt=et.it_cnt,e.some=0,at=fo,at;et.valid=1,tt=1,nt=rt=0}if(rt==0){k(et),rt=1,et.phase==0&&($(et,.9*r.tol_dj)!=0?(et.phase=1,J(et)):(et.phase=2,K(et)),p(Q(et,r.tol_dj)==0),et.refct=0,nt=0);if(Q(et,r.tol_dj)!=0){r.msg_lev>=ps&&d("Warning: numerical instability (dual simplex, phase "+(et.phase==1?"I":"II")+")");if(r.meth==ys)return Z(et,e,rs,rs,0),at=fo,at;et.phase=0,tt=0,it=5;continue}}p(et.phase==1||et.phase==2),et.phase==1&&$(et,r.tol_dj)==0&&(Y(et,r,1),et.phase=2,rt!=1&&(k(et),rt=1),K(et),et.refct=0,nt=0),nt==0&&(C(et),et.phase==2&&(et.bbar[0]=G(et)),nt=1);switch(r.pricing){case ws:break;case Es:et.refct==0&&L(et);break;default:p(r!=r)}p(tt&&nt&&rt);if(st){var ft=z(et),lt=W(et),ct=r.pricing==Es?X(et):0;d("e_bbar = "+ft+"; e_cbar = "+lt+"; e_gamma = "+ct+""),p(ft<=1e-5&&lt<=1e-5&&ct<=.001)}if(et.phase==2&&et.zeta<0&&r.obj_ll>-n&&et.bbar[0]<=r.obj_ll){if(nt!=1||rt!=1){nt!=1&&(nt=0),rt!=1&&(rt=0);continue}return Y(et,r,1),r.msg_lev>=vs&&d("OBJECTIVE LOWER LIMIT REACHED; SEARCH TERMINATED"),Z(et,e,ss,is,0),at=lo,at}if(et.phase==2&&et.zeta>0&&r.obj_ul<+n&&et.bbar[0]>=r.obj_ul){if(nt!=1||rt!=1){nt!=1&&(nt=0),rt!=1&&(rt=0);continue}return Y(et,r,1),r.msg_lev>=vs&&d("OBJECTIVE UPPER LIMIT REACHED; SEARCH TERMINATED"),Z(et,e,ss,is,0),at=co,at}if(r.it_lim<s&&et.it_cnt-et.it_beg>=r.it_lim){if(et.phase==2&&nt!=1||rt!=1){et.phase==2&&nt!=1&&(nt=0),rt!=1&&(rt=0);continue}Y(et,r,1),r.msg_lev>=vs&&d("ITERATION LIMIT EXCEEDED; SEARCH TERMINATED");switch(et.phase){case 1:ut=ss,K(et),C(et);break;case 2:ut=is;break;default:p(et!=et)}return Z(et,e,ss,ut,0),at=ho,at}if(r.tm_lim<s&&1e3*w(b(),et.tm_beg)>=r.tm_lim){if(et.phase==2&&nt!=1||rt!=1){et.phase==2&&nt!=1&&(nt=0),rt!=1&&(rt=0);continue}Y(et,r,1),r.msg_lev>=vs&&d("TIME LIMIT EXCEEDED; SEARCH TERMINATED");switch(et.phase){case 1:ut=ss,K(et),C(et);break;case 2:ut=is;break;default:p(et!=et)}return Z(et,e,ss,ut,0),at=po,at}Y(et,r,0),O(et,r.tol_bnd);if(et.p==0){if(nt!=1||rt!=1){nt!=1&&(nt=0),rt!=1&&(rt=0);continue}Y(et,r,1);switch(et.phase){case 1:r.msg_lev>=vs&&d("PROBLEM HAS NO DUAL FEASIBLE SOLUTION"),K(et),C(et),ot=ss,ut=os;break;case 2:r.msg_lev>=vs&&d("OPTIMAL SOLUTION FOUND"),ot=ut=is;break;default:p(et!=et)}return Z(et,e,ot,ut,0),at=0,at}var ht=et.work4;M(et,ht),it&&_(et,ht),H(et,ht),B(et,r.tol_bnd);switch(r.r_test){case Ss:j(et,0);break;case xs:j(et,.3*r.tol_dj);break;default:p(r!=r)}if(et.q==0){if(nt!=1||rt!=1||!it){nt!=1&&(nt=0),rt!=1&&(rt=0),it=1;continue}Y(et,r,1);switch(et.phase){case 1:r.msg_lev>=ps&&d("Error: unable to choose basic variable on phase I"),p(!e.valid&&e.bfd==null),e.bfd=et.bfd,et.bfd=null,e.pbs_stat=e.dbs_stat=rs,e.obj_val=0,e.it_cnt=et.it_cnt,e.some=0,at=fo;break;case 2:r.msg_lev>=vs&&d("PROBLEM HAS NO FEASIBLE SOLUTION"),Z(et,e,os,is,et.head[et.p]),at=0;break;default:p(et!=et)}return at}var pt=et.trow_vec[et.q],dt=1e-5*(1+.01*et.trow_max);if(Math.abs(pt)<dt){r.msg_lev>=ms&&d("piv = "+pt+"; eps = "+dt+"");if(!it){it=5;continue}}F(et),it&&I(et);var vt=et.tcol_vec[et.p],mt=et.trow_vec[et.q];p(vt!=0);if(Math.abs(vt-mt)>1e-8*(1+Math.abs(vt))||!(vt>0&&mt>0||vt<0&&mt<0)){r.msg_lev>=ms&&d("piv1 = "+vt+"; piv2 = "+mt+"");if(tt!=1||!it){tt!=1&&(tt=0),it=5;continue}et.tcol_vec[et.p]==0&&(et.tcol_nnz++,p(et.tcol_nnz<=et.m),et.tcol_ind[et.tcol_nnz]=et.p),et.tcol_vec[et.p]=mt}R(et),et.phase==2&&(et.bbar[0]+=et.cbar[et.q]/et.zeta*(et.delta/et.tcol_vec[et.p])),nt=2,q(et),rt=2;switch(r.pricing){case ws:break;case Es:et.refct>0&&U(et);break;default:p(r!=r)}at=c(et,et.p,et.head[et.m+et.q]),at==0?tt=2:(et.valid=0,tt=0),V(et),et.it_cnt++,it>0&&it--}}const t=!1,n=Number.MAX_VALUE,r=Number.MIN_VALUE,i=16,s=2147483647,o=2.220446049250313e-16,u=1,a=1e8,f=1e8,l=5e8,c=-1;var d=function(e){console.log(e)};e.__defineGetter__("glp_print_func",function(){return d}),e.__defineSetter__("glp_print_func",function(e){d=e});var S={},T=e.glp_version=function(){return _i+"."+Di},D=3621377730,H=e.glp_create_prob=function(){var e={};return P(e),e},B=e.glp_set_prob_name=function(e,t){var n=e.tree;n!=null&&n.reason!=0&&h("glp_set_prob_name: operation not allowed"),e.name=t},j=e.glp_set_obj_name=function(e,t){var n=e.tree;n!=null&&n.reason!=0&&h("glp_set_obj_name: operation not allowed"),e.obj=t},F=e.glp_set_obj_dir=function(e,t){var n=e.tree;n!=null&&n.reason!=0&&h("glp_set_obj_dir: operation not allowed"),t!=Pi&&t!=Hi&&h("glp_set_obj_dir: dir = "+t+"; invalid direction flag"),e.dir=t},I=e.glp_add_rows=function(e,t){var n=e.tree,r;t<1&&h("glp_add_rows: nrs = "+t+"; invalid number of rows"),t>a-e.m&&h("glp_add_rows: nrs = "+t+"; too many rows");var i=e.m+t;if(e.m_max<i){while(e.m_max<i)e.m_max+=e.m_max,p(e.m_max>0);e.row.length=1+e.m_max,e.head=new Array(1+e.m_max)}for(var s=e.m+1;s<=i;s++){e.row[s]=r={},r.i=s,r.name=null,r.node=null,r.level=0,r.origin=0,r.klass=0;if(n!=null)switch(n.reason){case 0:break;case Ks:p(n.curr!=null),r.level=n.curr.level,r.origin=Rs;break;case Ys:p(n.curr!=null),r.level=n.curr.level,r.origin=Us;break;default:p(n!=n)}r.type=Ii,r.lb=r.ub=0,r.ptr=null,r.rii=1,r.stat=Wi,r.bind=0,r.prim=r.dual=0,r.pval=r.dval=0,r.mipx=0}return e.m=i,e.valid=0,n!=null&&n.reason!=0&&(n.reopt=1),i-t+1},q=e.glp_add_cols=function(e,t){var n=e.tree,r;n!=null&&n.reason!=0&&h("glp_add_cols: operation not allowed"),t<1&&h("glp_add_cols: ncs = "+t+"; invalid number of columns"),t>f-e.n&&h("glp_add_cols: ncs = "+t+"; too many columns");var i=e.n+t;if(e.n_max<i){while(e.n_max<i)e.n_max+=e.n_max,p(e.n_max>0);e.col.length=1+e.n_max}for(var s=e.n+1;s<=i;s++)e.col[s]=r={},r.j=s,r.name=null,r.node=null,r.kind=Bi,r.type=zi,r.lb=r.ub=0,r.coef=0,r.ptr=null,r.sjj=1,r.stat=Ji,r.bind=0,r.prim=r.dual=0,r.pval=r.dval=0,r.mipx=0;return e.n=i,i-t+1},R=e.glp_set_row_name=function(e,t,n){var r=e.tree;1<=t&&t<=e.m||h("glp_set_row_name: i = "+t+"; row number out of range");var i=e.row[t];r!=null&&r.reason!=0&&(p(r.curr!=null),p(i.level==r.curr.level)),i.name!=null&&(delete e.r_tree[i.name],i.name=null),n!=null&&(i.name=n,e.r_tree[i.name]=i)},U=e.glp_set_col_name=function(e,t,n){var r=e.tree;r!=null&&r.reason!=0&&h("glp_set_col_name: operation not allowed"),1<=t&&t<=e.n||h("glp_set_col_name: j = "+t+"; column number out of range");var i=e.col[t];i.name!=null&&(delete e.c_tree[i.name],i.name=null),n!=null&&(i.name=n,e.c_tree[i.name]=i)},z=e.glp_set_row_bnds=function(e,t,n,r,i){1<=t&&t<=e.m||h("glp_set_row_bnds: i = "+t+"; row number out of range");var s=e.row[t];s.type=n;switch(n){case Ii:s.lb=s.ub=0,s.stat!=Wi&&(s.stat=$i);break;case qi:s.lb=r,s.ub=0,s.stat!=Wi&&(s.stat=Xi);break;case Ri:s.lb=0,s.ub=i,s.stat!=Wi&&(s.stat=Vi);break;case Ui:s.lb=r,s.ub=i,s.stat!=Wi&&s.stat!=Xi&&s.stat!=Vi&&(s.stat=Math.abs(r)<=Math.abs(i)?Xi:Vi);break;case zi:s.lb=s.ub=r,s.stat!=Wi&&(s.stat=Ji);break;default:h("glp_set_row_bnds: i = "+t+"; type = "+n+"; invalid row type")}},W=e.glp_set_col_bnds=function(e,t,n,r,i){1<=t&&t<=e.n||h("glp_set_col_bnds: j = "+t+"; column number out of range");var s=e.col[t];s.type=n;switch(n){case Ii:s.lb=s.ub=0,s.stat!=Wi&&(s.stat=$i);break;case qi:s.lb=r,s.ub=0,s.stat!=Wi&&(s.stat=Xi);break;case Ri:s.lb=0,s.ub=i,s.stat!=Wi&&(s.stat=Vi);break;case Ui:s.lb=r,s.ub=i,s.stat!=Wi&&s.stat!=Xi&&s.stat!=Vi&&(s.stat=Math.abs(r)<=Math.abs(i)?Xi:Vi);break;case zi:s.lb=s.ub=r,s.stat!=Wi&&(s.stat=Ji);break;default:h("glp_set_col_bnds: j = "+t+"; type = "+n+"; invalid column type")}},X=e.glp_set_obj_coef=function(e,t,n){var r=e.tree;r!=null&&r.reason!=0&&h("glp_set_obj_coef: operation not allowed"),0<=t&&t<=e.n||h("glp_set_obj_coef: j = "+t+"; column number out of range"),t==0?e.c0=n:e.col[t].coef=n},V=e.glp_set_mat_row=function(e,t,n,r,i){var s=e.tree,o,u,a,f,c;1<=t&&t<=e.m||h("glp_set_mat_row: i = "+t+"; row number out of range");var d=e.row[t];s!=null&&s.reason!=0&&(p(s.curr!=null),p(d.level==s.curr.level));while(d.ptr!=null)u=d.ptr,d.ptr=u.r_next,o=u.col,u.c_prev==null?o.ptr=u.c_next:u.c_prev.c_next=u.c_next,u.c_next!=null&&(u.c_next.c_prev=u.c_prev),e.nnz--,o.stat==Wi&&(e.valid=0);0<=n&&n<=e.n||h("glp_set_mat_row: i = "+t+"; len = "+n+"; invalid row length "),n>l-e.nnz&&h("glp_set_mat_row: i = "+t+"; len = "+n+"; too many constraint coefficients");for(c=1;c<=n;c++)f=r[c],1<=f&&f<=e.n||h("glp_set_mat_row: i = "+t+"; ind["+c+"] = "+f+"; column index out of range"),o=e.col[f],o.ptr!=null&&o.ptr.row.i==t&&h("glp_set_mat_row: i = "+t+"; ind["+c+"] = "+f+"; duplicate column indices not allowed"),u={},e.nnz++,u.row=d,u.col=o,u.val=i[c],u.r_prev=null,u.r_next=d.ptr,u.c_prev=null,u.c_next=o.ptr,u.r_next!=null&&(u.r_next.r_prev=u),u.c_next!=null&&(u.c_next.c_prev=u),d.ptr=o.ptr=u,o.stat==Wi&&u.val!=0&&(e.valid=0);for(u=d.ptr;u!=null;u=a)a=u.r_next,u.val==0&&(u.r_prev==null?d.ptr=a:u.r_prev.r_next=a,a!=null&&(a.r_prev=u.r_prev),p(u.c_prev==null),u.col.ptr=u.c_next,u.c_next!=null&&(u.c_next.c_prev=null),e.nnz--)},$=e.glp_set_mat_col=function(e,t,n,r,i){var s=e.tree,o,u,a,f,c;s!=null&&s.reason!=0&&h("glp_set_mat_col: operation not allowed"),1<=t&&t<=e.n||h("glp_set_mat_col: j = "+t+"; column number out of range");var d=e.col[t];while(d.ptr!=null)u=d.ptr,d.ptr=u.c_next,o=u.row,u.r_prev==null?o.ptr=u.r_next:u.r_prev.r_next=u.r_next,u.r_next!=null&&(u.r_next.r_prev=u.r_prev),e.nnz--;0<=n&&n<=e.m||h("glp_set_mat_col: j = "+t+"; len = "+n+"; invalid column length"),n>l-e.nnz&&h("glp_set_mat_col: j = "+t+"; len = "+n+"; too many constraint coefficients");for(c=1;c<=n;c++)f=r[c],1<=f&&f<=e.m||h("glp_set_mat_col: j = "+t+"; ind["+c+"] = "+f+"; row index out of range"),o=e.row[f],o.ptr!=null&&o.ptr.col.j==t&&h("glp_set_mat_col: j = "+t+"; ind["+c+"] = "+f+"; duplicate row indices not allowed"),u={},e.nnz++,u.row=o,u.col=d,u.val=i[c],u.r_prev=null,u.r_next=o.ptr,u.c_prev=null,u.c_next=d.ptr,u.r_next!=null&&(u.r_next.r_prev=u),u.c_next!=null&&(u.c_next.c_prev=u),o.ptr=d.ptr=u;for(u=d.ptr;u!=null;u=a)a=u.c_next,u.val==0&&(p(u.r_prev==null),u.row.ptr=u.r_next,u.r_next!=null&&(u.r_next.r_prev=null),u.c_prev==null?d.ptr=a:u.c_prev.c_next=a,a!=null&&(a.c_prev=u.c_prev),e.nnz--);d.stat==Wi&&(e.valid=0)},J=e.glp_load_matrix=function(e,t,n,r,i){var s=e.tree,o,u,a,f,c,d,v;s!=null&&s.reason!=0&&h("glp_load_matrix: operation not allowed");for(c=1;c<=e.m;c++){o=e.row[c];while(o.ptr!=null)a=o.ptr,o.ptr=a.r_next,e.nnz--}p(e.nnz==0);for(d=1;d<=e.n;d++)e.col[d].ptr=null;t<0&&h("glp_load_matrix: ne = "+t+"; invalid number of constraint coefficients"),t>l&&h("glp_load_matrix: ne = "+t+"; too many constraint coefficients");for(v=1;v<=t;v++)c=n[v],d=r[v],1<=c&&c<=e.m||h("glp_load_matrix: ia["+v+"] = "+c+"; row index out of range"),o=e.row[c],1<=d&&d<=e.n||h("glp_load_matrix: ja["+v+"] = "+d+"; column index out of range"),u=e.col[d],a={},e.nnz++,a.row=o,a.col=u,a.val=i[v],a.r_prev=null,a.r_next=o.ptr,a.r_next!=null&&(a.r_next.r_prev=a),o.ptr=a;p(e.nnz==t);for(c=1;c<=e.m;c++)for(a=e.row[c].ptr;a!=null;a=a.r_next){u=a.col;if(u.ptr!=null&&u.ptr.row.i==c){for(v=1;v<=t;v++)if(n[v]==c&&r[v]==u.j)break;h("glp_load_mat: ia["+v+"] = "+c+"; ja["+v+"] = "+u.j+"; duplicate indices not allowed")}a.c_prev=null,a.c_next=u.ptr,a.c_next!=null&&(a.c_next.c_prev=a),u.ptr=a}for(c=1;c<=e.m;c++){o=e.row[c];for(a=o.ptr;a!=null;a=f)f=a.r_next,a.val==0&&(a.r_prev==null?o.ptr=f:a.r_prev.r_next=f,f!=null&&(f.r_prev=a.r_prev),a.c_prev==null?a.col.ptr=a.c_next:a.c_prev.c_next=a.c_next,a.c_next!=null&&(a.c_next.c_prev=a.c_prev),e.nnz--)}e.valid=0},K=e.glp_check_dup=function(e,t,n,r,i){var s,o,u,a,f,l,c;e<0&&h("glp_check_dup: m = %d; invalid parameter"),t<0&&h("glp_check_dup: n = %d; invalid parameter"),n<0&&h("glp_check_dup: ne = %d; invalid parameter"),n>0&&r==null&&h("glp_check_dup: ia = "+r+"; invalid parameter"),n>0&&i==null&&h("glp_check_dup: ja = "+i+"; invalid parameter");for(u=1;u<=n;u++){s=r[u],o=i[u];if(!(1<=s&&s<=e&&1<=o&&o<=t))return l=-u,l}if(e==0||t==0)return l=0,l;a=new Array(1+e),f=new Array(1+n),c=new Array(1+t);for(s=1;s<=e;s++)a[s]=0;for(u=1;u<=n;u++)s=r[u],f[u]=a[s],a[s]=u;for(o=1;o<=t;o++)c[o]=0;for(s=1;s<=e;s++){for(u=a[s];u!=0;u=f[u]){o=i[u];if(c[o]){for(u=1;u<=n;u++)if(r[u]==s&&i[u]==o)break;p(u<=n);for(u++;u<=n;u++)if(r[u]==s&&i[u]==o)break;return p(u<=n),l=+u,l}c[o]=1}for(u=a[s];u!=0;u=f[u])c[i[u]]=0}return l=0,l},Q=e.glp_sort_matrix=function(e){var t,n,r;(e==null||e.magic!=D)&&h("glp_sort_matrix: P = "+e+"; invalid problem object");for(n=e.m;n>=1;n--)e.row[n].ptr=null;for(r=e.n;r>=1;r--)for(t=e.col[r].ptr;t!=null;t=t.c_next)n=t.row.i,t.r_prev=null,t.r_next=e.row[n].ptr,t.r_next!=null&&(t.r_next.r_prev=t),e.row[n].ptr=t;for(r=e.n;r>=1;r--)e.col[r].ptr=null;for(n=e.m;n>=1;n--)for(t=e.row[n].ptr;t!=null;t=t.r_next)r=t.col.j,t.c_prev=null,t.c_next=e.col[r].ptr,t.c_next!=null&&(t.c_next.c_prev=t),e.col[r].ptr=t},G=e.glp_del_rows=function(e,t,n){var r=e.tree,i,s,o,u;1<=t&&t<=e.m||h("glp_del_rows: nrs = "+t+"; invalid number of rows");for(o=1;o<=t;o++)s=n[o],1<=s&&s<=e.m||h("glp_del_rows: num["+o+"] = "+s+"; row number out of range"),i=e.row[s],r!=null&&r.reason!=0&&(r.reason!=Ks&&r.reason!=Ys&&h("glp_del_rows: operation not allowed"),p(r.curr!=null),i.level!=r.curr.level&&h("glp_del_rows: num["+o+"] = "+s+"; invalid attempt to delete row created not in current subproblem"),i.stat!=Wi&&h("glp_del_rows: num["+o+"] = "+s+"; invalid attempt to delete active row (constraint)"),r.reinv=1),i.i==0&&h("glp_del_rows: num["+o+"] = "+s+"; duplicate row numbers not allowed"),R(e,s,null),p(i.node==null),V(e,s,0,null,null),p(i.ptr==null),i.i=0;u=0;for(s=1;s<=e.m;s++)i=e.row[s],i.i!=0&&(i.i=++u,e.row[i.i]=i);e.m=u,e.valid=0},Y=e.glp_del_cols=function(e,t,n){var r=e.tree,i,s,o,u;r!=null&&r.reason!=0&&h("glp_del_cols: operation not allowed"),1<=t&&t<=e.n||h("glp_del_cols: ncs = "+t+"; invalid number of columns");for(o=1;o<=t;o++)s=n[o],1<=s&&s<=e.n||h("glp_del_cols: num["+o+"] = "+s+"; column number out of range"),i=e.col[s],i.j==0&&h("glp_del_cols: num["+o+"] = "+s+"; duplicate column numbers not allowed"),U(e,s,null),p(i.node==null),$(e,s,0,null,null),p(i.ptr==null),i.j=0,i.stat==Wi&&(e.valid=0);u=0;for(s=1;s<=e.n;s++)i=e.col[s],i.j!=0&&(i.j=++u,e.col[i.j]=i);e.n=u;if(e.valid){var a=e.m,f=e.head;for(s=1;s<=u;s++)o=e.col[s].bind,o!=0&&(p(1<=o&&o<=a),f[o]=a+s)}},Z=e.glp_copy_prob=function(e,t,n){var r=e.tree,i={},s,o,u,a,f;r!=null&&r.reason!=0&&h("glp_copy_prob: operation not allowed"),e==t&&h("glp_copy_prob: copying problem object to itself not allowed"),n!=$s&&n!=Js&&h("glp_copy_prob: names = "+n+"; invalid parameter"),et(e),n&&t.name!=null&&B(e,t.name),n&&t.obj!=null&&j(e,t.obj),e.dir=t.dir,e.c0=t.c0,t.m>0&&I(e,t.m),t.n>0&&q(e,t.n),sn(t,i),un(e,i),e.pbs_stat=t.pbs_stat,e.dbs_stat=t.dbs_stat,e.obj_val=t.obj_val,e.some=t.some,e.ipt_stat=t.ipt_stat,e.ipt_obj=t.ipt_obj,e.mip_stat=t.mip_stat,e.mip_obj=t.mip_obj;var l,c;for(s=1;s<=t.m;s++)l=e.row[s],c=t.row[s],n&&c.name!=null&&R(e,s,c.name),l.type=c.type,l.lb=c.lb,l.ub=c.ub,l.rii=c.rii,l.stat=c.stat,l.prim=c.prim,l.dual=c.dual,l.pval=c.pval,l.dval=c.dval,l.mipx=c.mipx;a=new Array(1+t.m),f=new Array(1+t.m);for(o=1;o<=t.n;o++)l=e.col[o],c=t.col[o],n&&c.name!=null&&U(e,o,c.name),l.kind=c.kind,l.type=c.type,l.lb=c.lb,l.ub=c.ub,l.coef=c.coef,u=yt(t,o,a,f),$(e,o,u,a,f),l.sjj=c.sjj,l.stat=c.stat,l.prim=c.prim,l.dual=c.dual,l.pval=c.pval,l.dval=c.dval,l.mipx=c.mipx},et=e.glp_erase_prob=function(e){var t=e.tree;t!=null&&t.reason!=0&&h("glp_erase_prob: operation not allowed"),tt(e),P(e)},nt=e.glp_get_prob_name=function(e){return e.name},rt=e.glp_get_obj_name=function(e){return e.obj},it=e.glp_get_obj_dir=function(e){return e.dir},st=e.glp_get_num_rows=function(e){return e.m},ot=e.glp_get_num_cols=function(e){return e.n},ut=e.glp_get_row_name=function(e,t){return 1<=t&&t<=e.m||h("glp_get_row_name: i = "+t+"; row number out of range"),e.row[t].name},at=e.glp_get_col_name=function(e,t){return 1<=t&&t<=e.n||h("glp_get_col_name: j = "+t+"; column number out of range"),e.col[t].name},ft=e.glp_get_row_type=function(e,t){return 1<=t&&t<=e.m||h("glp_get_row_type: i = "+t+"; row number out of range"),e.row[t].type},lt=e.glp_get_row_lb=function(e,t){var r;1<=t&&t<=e.m||h("glp_get_row_lb: i = "+t+"; row number out of range");switch(e.row[t].type){case Ii:case Ri:r=-n;break;case qi:case Ui:case zi:r=e.row[t].lb;break;default:p(e!=e)}return r},ct=e.glp_get_row_ub=function(e,t){var r;1<=t&&t<=e.m||h("glp_get_row_ub: i = "+t+"; row number out of range");switch(e.row[t].type){case Ii:case qi:r=+n;break;case Ri:case Ui:case zi:r=e.row[t].ub;break;default:p(e!=e)}return r},ht=e.glp_get_col_type=function(e,t){return 1<=t&&t<=e.n||h("glp_get_col_type: j = "+t+"; column number out of range"),e.col[t].type},pt=e.glp_get_col_lb=function(e,t){var r;1<=t&&t<=e.n||h("glp_get_col_lb: j = "+t+"; column number out of range");switch(e.col[t].type){case Ii:case Ri:r=-n;break;case qi:case Ui:case zi:r=e.col[t].lb;break;default:p(e!=e)}return r},dt=e.glp_get_col_ub=function(e,t){var r;1<=t&&t<=e.n||h("glp_get_col_ub: j = "+t+"; column number out of range");switch(e.col[t].type){case Ii:case qi:r=+n;break;case Ri:case Ui:case zi:r=e.col[t].ub;break;default:p(e!=e)}return r},vt=e.glp_get_obj_coef=function(e,t){return 0<=t&&t<=e.n||h("glp_get_obj_coef: j = "+t+"; column number out of range"),t==0?e.c0:e.col[t].coef},mt=e.glp_get_num_nz=function(e){return e.nnz},gt=e.glp_get_mat_row=function(e,t,n,r){var i,s;1<=t&&t<=e.m||h("glp_get_mat_row: i = "+t+"; row number out of range"),s=0;for(i=e.row[t].ptr;i!=null;i=i.r_next)s++,n!=null&&(n[s]=i.col.j),r!=null&&(r[s]=i.val);return p(s<=e.n),s},yt=e.glp_get_mat_col=function(e,t,n,r){var i,s;1<=t&&t<=e.n||h("glp_get_mat_col: j = "+t+"; column number out of range"),s=0;for(i=e.col[t].ptr;i!=null;i=i.c_next)s++,n!=null&&(n[s]=i.row.i),r!=null&&(r[s]=i.val);return p(s<=e.m),s},bt=e.glp_create_index=function(e){var t,n,r,i;if(e.r_tree==null){e.r_tree={};for(r=1;r<=e.m;r++)t=e.row[r],t.name!=null&&(e.r_tree[t.name]=t)}if(e.c_tree==null){e.c_tree={};for(i=1;i<=e.n;i++)n=e.col[i],n.name!=null&&(e.c_tree[n.name]=n)}},wt=e.glp_find_row=function(e,t){var n=0;e.r_tree==null&&h("glp_find_row: row name index does not exist");var r=e.r_tree[t];return r&&(n=r.i),n},Et=e.glp_find_col=function(e,t){var n=0;e.c_tree==null&&h("glp_find_col: column name index does not exist");var r=e.c_tree[t];return r&&(n=r.j),n},St=e.glp_delete_index=function(e){e.r_tree=null,e.r_tree=null},xt=e.glp_set_rii=function(e,t,n){1<=t&&t<=e.m||h("glp_set_rii: i = "+t+"; row number out of range"),n<=0&&h("glp_set_rii: i = "+t+"; rii = "+n+"; invalid scale factor");if(e.valid&&e.row[t].rii!=n)for(var r=e.row[t].ptr;r!=null;r=r.r_next)if(r.col.stat==Wi){e.valid=0;break}e.row[t].rii=n},Tt=e.glp_set_sjj=function(e,t,n){1<=t&&t<=e.n||h("glp_set_sjj: j = "+t+"; column number out of range"),n<=0&&h("glp_set_sjj: j = "+t+"; sjj = "+n+"; invalid scale factor"),e.valid&&e.col[t].sjj!=n&&e.col[t].stat==Wi&&(e.valid=0),e.col[t].sjj=n},Nt=e.glp_get_rii=function(e,t){return 1<=t&&t<=e.m||h("glp_get_rii: i = "+t+"; row number out of range"),e.row[t].rii},Ct=e.glp_get_sjj=function(e,t){return 1<=t&&t<=e.n||h("glp_get_sjj: j = "+t+"; column number out of range"),e.col[t].sjj},kt=e.glp_unscale_prob=function(e){var t=st(e),n=ot(e),r,i;for(r=1;r<=t;r++)xt(e,r,1);for(i=1;i<=n;i++)Tt(e,i,1)},Lt=e.glp_set_row_stat=function(e,t,n){var r;1<=t&&t<=e.m||h("glp_set_row_stat: i = "+t+"; row number out of range"),n!=Wi&&n!=Xi&&n!=Vi&&n!=$i&&n!=Ji&&h("glp_set_row_stat: i = "+t+"; stat = "+n+"; invalid status"),r=e.row[t];if(n!=Wi)switch(r.type){case Ii:n=$i;break;case qi:n=Xi;break;case Ri:n=Vi;break;case Ui:n!=Vi&&(n=Xi);break;case zi:n=Ji;break;default:p(r!=r)}if(r.stat==Wi&&n!=Wi||r.stat!=Wi&&n==Wi)e.valid=0;r.stat=n},At=e.glp_set_col_stat=function(e,t,n){var r;1<=t&&t<=e.n||h("glp_set_col_stat: j = "+t+"; column number out of range"),n!=Wi&&n!=Xi&&n!=Vi&&n!=$i&&n!=Ji&&h("glp_set_col_stat: j = "+t+"; stat = "+n+"; invalid status"),r=e.col[t];if(n!=Wi)switch(r.type){case Ii:n=$i;break;case qi:n=Xi;break;case Ri:n=Vi;break;case Ui:n!=Vi&&(n=Xi);break;case zi:n=Ji;break;default:p(r!=r)}if(r.stat==Wi&&n!=Wi||r.stat!=Wi&&n==Wi)e.valid=0;r.stat=n},Ot=e.glp_std_basis=function(e){var t,n;for(t=1;t<=e.m;t++)Lt(e,t,Wi);for(n=1;n<=e.n;n++){var r=e.col[n];r.type==Ui&&Math.abs(r.lb)>Math.abs(r.ub)?At(e,n,Vi):At(e,n,Xi)}},Mt=e.glp_simplex=function(e,t){function n(e,t){var n;if(!tn(e)){n=nn(e),n!=0&&(n==so?t.msg_lev>=ps&&d("glp_simplex: initial basis is invalid"):n==oo?t.msg_lev>=ps&&d("glp_simplex: initial basis is singular"):n==uo?t.msg_lev>=ps&&d("glp_simplex: initial basis is ill-conditioned"):p(n!=n));if(n!=0)return n}return t.meth==gs?n=cE(e,t):t.meth==ys?(n=hE(e,t),n==fo&&e.valid&&(n=cE(e,t))):t.meth==bs?n=hE(e,t):p(t!=t),n}function r(e,t){function u(){return Vb(r,i),i=null,$b(r,e),o=0,o}var r,i=null,s={},o;t.msg_lev>=vs&&d("Preprocessing..."),r=Nb(),Wb(r,e,Js,es,Js),o=Hw(r,t),o!=0&&(o==vo?t.msg_lev>=vs&&d("PROBLEM HAS NO PRIMAL FEASIBLE SOLUTION"):o==mo?t.msg_lev>=vs&&d("PROBLEM HAS NO DUAL FEASIBLE SOLUTION"):p(o!=o));if(o!=0)return o;i=H(),Xb(r,i);if(i.m==0&&i.n==0)return i.pbs_stat=i.dbs_stat=is,i.obj_val=i.c0,t.msg_lev>=ds&&t.out_dly==0&&d(e.it_cnt+": obj = "+i.obj_val+"  infeas = 0.0"),t.msg_lev>=vs&&d("OPTIMAL SOLUTION FOUND BY LP PREPROCESSOR"),u();t.msg_lev>=vs&&d(i.m+" row"+(i.m==1?"":"s")+", "+i.n+" column"+(i.n==1?"":"s")+", "+i.nnz+" non-zero"+(i.nnz==1?"":"s")+""),sn(e,s),un(i,s);var a=x(),f=a.term_out;return!f||t.msg_lev<vs?a.term_out=Js:a.term_out=$s,lE(i,Zi),a.term_out=f,a=x(),f=a.term_out,!f||t.msg_lev<vs?a.term_out=Js:a.term_out=$s,Lr(i,0),a.term_out=f,i.it_cnt=e.it_cnt,o=n(i,t),e.it_cnt=i.it_cnt,o!=0||i.pbs_stat!=is||i.dbs_stat!=is?(t.msg_lev>=ps&&d("glp_simplex: unable to recover undefined or non-optimal solution"),o==0&&(i.pbs_stat==os?o=vo:i.dbs_stat==os?o=mo:p(i!=i)),o):u()}function i(e,t){function f(){r.stat=Xi,r.prim=r.lb}function l(){r.stat=Vi,r.prim=r.ub}var n,r,i,s,o,u,a;e.valid=0,e.pbs_stat=e.dbs_stat=is,e.obj_val=e.c0,e.some=0,o=u=0;for(i=1;i<=e.m;i++){n=e.row[i],n.stat=Wi,n.prim=n.dual=0;if(n.type==qi||n.type==Ui||n.type==zi)n.lb>+t.tol_bnd&&(e.pbs_stat=os,e.some==0&&t.meth!=gs&&(e.some=i)),o<+n.lb&&(o=+n.lb);if(n.type==Ri||n.type==Ui||n.type==zi)n.ub<-t.tol_bnd&&(e.pbs_stat=os,e.some==0&&t.meth!=gs&&(e.some=i)),o<-n.ub&&(o=-n.ub)}a=1;for(s=1;s<=e.n;s++)r=e.col[s],a<Math.abs(r.coef)&&(a=Math.abs(r.coef));a=(e.dir==Pi?1:-1)/a;for(s=1;s<=e.n;s++){r=e.col[s],r.type==Ii?(r.stat=$i,r.prim=0):r.type==qi?f():r.type==Ri?l():r.type==Ui?a*r.coef>0?f():a*r.coef<0?l():Math.abs(r.lb)<=Math.abs(r.ub)?f():l():r.type==zi&&(r.stat=Ji,r.prim=r.lb),r.dual=r.coef,e.obj_val+=r.coef*r.prim;if(r.type==Ii||r.type==qi)a*r.dual<-t.tol_dj&&(e.dbs_stat=os,e.some==0&&t.meth==gs&&(e.some=e.m+s)),u<-a*r.dual&&(u=-a*r.dual);if(r.type==Ii||r.type==Ri)a*r.dual>+t.tol_dj&&(e.dbs_stat=os,e.some==0&&t.meth==gs&&(e.some=e.m+s)),u<+a*r.dual&&(u=+a*r.dual)}t.msg_lev>=ds&&t.out_dly==0&&d("~"+e.it_cnt+": obj = "+e.obj_val+"  infeas = "+(t.meth==gs?o:u)+""),t.msg_lev>=vs&&t.out_dly==0&&(e.pbs_stat==is&&e.dbs_stat==is?d("OPTIMAL SOLUTION FOUND"):e.pbs_stat==os?d("PROBLEM HAS NO FEASIBLE SOLUTION"):t.meth==gs?d("PROBLEM HAS UNBOUNDED SOLUTION"):d("PROBLEM HAS NO DUAL FEASIBLE SOLUTION"))}var s={},o,u,a;(e==null||e.magic!=D)&&h("glp_simplex: P = "+e+"; invalid problem object"),e.tree!=null&&e.tree.reason!=0&&h("glp_simplex: operation not allowed"),t==null&&(t=s,_t(t)),t.msg_lev!=hs&&t.msg_lev!=ps&&t.msg_lev!=ds&&t.msg_lev!=vs&&t.msg_lev!=ms&&h("glp_simplex: msg_lev = "+t.msg_lev+"; invalid parameter"),t.meth!=gs&&t.meth!=ys&&t.meth!=bs&&h("glp_simplex: meth = "+t.meth+"; invalid parameter"),t.pricing!=ws&&t.pricing!=Es&&h("glp_simplex: pricing = "+t.pricing+"; invalid parameter"),t.r_test!=Ss&&t.r_test!=xs&&h("glp_simplex: r_test = "+t.r_test+"; invalid parameter"),0<t.tol_bnd&&t.tol_bnd<1||h("glp_simplex: tol_bnd = "+t.tol_bnd+"; invalid parameter"),0<t.tol_dj&&t.tol_dj<1||h("glp_simplex: tol_dj = "+t.tol_dj+"; invalid parameter"),0<t.tol_piv&&t.tol_piv<1||h("glp_simplex: tol_piv = "+t.tol_piv+"; invalid parameter"),t.it_lim<0&&h("glp_simplex: it_lim = "+t.it_lim+"; invalid parameter"),t.tm_lim<0&&h("glp_simplex: tm_lim = "+t.tm_lim+"; invalid parameter"),t.out_frq<1&&h("glp_simplex: out_frq = "+t.out_frq+"; invalid parameter"),t.out_dly<0&&h("glp_simplex: out_dly = "+t.out_dly+"; invalid parameter"),t.presolve!=$s&&t.presolve!=Js&&h("glp_simplex: presolve = "+t.presolve+"; invalid parameter"),e.pbs_stat=e.dbs_stat=rs,e.obj_val=0,e.some=0;for(o=1;o<=e.m;o++){var f=e.row[o];if(f.type==Ui&&f.lb>=f.ub)return t.msg_lev>=ps&&d("glp_simplex: row "+o+": lb = "+f.lb+", ub = "+f.ub+"; incorrect bounds"),a=ao,a}for(u=1;u<=e.n;u++){var l=e.col[u];if(l.type==Ui&&l.lb>=l.ub)return t.msg_lev>=ps&&d("glp_simplex: column "+u+": lb = "+l.lb+", ub = "+l.ub+"; incorrect bounds"),a=ao,a}return t.msg_lev>=vs&&(d("GLPK Simplex Optimizer, v"+T()+""),d(e.m+" row"+(e.m==1?"":"s")+", "+e.n+" column"+(e.n==1?"":"s")+", "+e.nnz+" non-zero"+(e.nnz==1?"":"s")+"")),e.nnz==0?(i(e,t),a=0):t.presolve?a=r(e,t):a=n(e,t),a},_t=e.glp_init_smcp=function(e){e.msg_lev=vs,e.meth=gs,e.pricing=Es,e.r_test=xs,e.tol_bnd=1e-7,e.tol_dj=1e-7,e.tol_piv=1e-10,e.obj_ll=-n,e.obj_ul=+n,e.it_lim=s,e.tm_lim=s,e.out_frq=500,e.out_dly=0,e.presolve=Js},Dt=e.glp_get_status=function(e){var t;t=Pt(e);switch(t){case is:switch(Ht(e)){case is:t=us;break;case os:t=as;break;case rs:case ss:break;default:p(e!=e)}break;case rs:case ss:case os:break;default:p(e!=e)}return t},Pt=e.glp_get_prim_stat=function(e){return e.pbs_stat},Ht=e.glp_get_dual_stat=function(e){return e.dbs_stat},Bt=e.glp_get_obj_val=function(e){return e.obj_val},jt=e.glp_get_row_stat=function(e,t){return 1<=t&&t<=e.m||h("glp_get_row_stat: i = "+t+"; row number out of range"),e.row[t].stat},Ft=e.glp_get_row_prim=function(e,t){return 1<=t&&t<=e.m||h("glp_get_row_prim: i = "+t+"; row number out of range"),e.row[t].prim},It=e.glp_get_row_dual=function(e,t){return 1<=t&&t<=e.m||h("glp_get_row_dual: i = "+t+"; row number out of range"),e.row[t].dual},qt=e.glp_get_col_stat=function(e,t){return 1<=t&&t<=e.n||h("glp_get_col_stat: j = "+t+"; column number out of range"),e.col[t].stat},Rt=e.glp_get_col_prim=function(e,t){return 1<=t&&t<=e.n||h("glp_get_col_prim: j = "+t+"; column number out of range"),e.col[t].prim},Ut=e.glp_get_col_dual=function(e,t){return 1<=t&&t<=e.n||h("glp_get_col_dual: j = "+t+"; column number out of range"),e.col[t].dual},zt=e.glp_get_unbnd_ray=function(e){var t=e.some;return p(t>=0),t>e.m+e.n&&(t=0),t},Wt=e.glp_set_col_kind=function(e,t,n){1<=t&&t<=e.n||h("glp_set_col_kind: j = "+t+"; column number out of range");var r=e.col[t];switch(n){case Bi:r.kind=Bi;break;case ji:r.kind=ji;break;case Fi:r.kind=ji,(r.type!=Ui||r.lb!=0||r.ub!=1)&&W(e,t,Ui,0,1);break;default:h("glp_set_col_kind: j = "+t+"; kind = "+n+"; invalid column kind")}},Xt=e.glp_get_col_kind=function(e,t){1<=t&&t<=e.n||h("glp_get_col_kind: j = "+t+"; column number out of range");var n=e.col[t],r=n.kind;switch(r){case Bi:break;case ji:n.type==Ui&&n.lb==0&&n.ub==1&&(r=Fi);break;default:p(r!=r)}return r},Vt=e.glp_get_num_int=function(e){var t,n=0;for(var r=1;r<=e.n;r++)t=e.col[r],t.kind==ji&&n++;return n},$t=e.glp_get_num_bin=function(e){var t,n=0;for(var r=1;r<=e.n;r++)t=e.col[r],t.kind==ji&&t.type==Ui&&t.lb==0&&t.ub==1&&n++;return n},Jt=e.glp_intopt=function(e,t){function n(e,t){var n,r;return Dt(e)!=us?(t.msg_lev>=ps&&d("glp_intopt: optimal basis to initial LP relaxation not provided"),r=go,r):(t.msg_lev>=vs&&d("Integer optimization begins..."),n=Dr(e,t),r=Yr(n),Fr(n),r==0?e.mip_stat==is?(t.msg_lev>=vs&&d("INTEGER OPTIMAL SOLUTION FOUND"),e.mip_stat=us):(t.msg_lev>=vs&&d("PROBLEM HAS NO INTEGER FEASIBLE SOLUTION"),e.mip_stat=os):r==bo?t.msg_lev>=vs&&d("RELATIVE MIP GAP TOLERANCE REACHED; SEARCH TERMINATED"):r==po?t.msg_lev>=vs&&d("TIME LIMIT EXCEEDED; SEARCH TERMINATED"):r==fo?t.msg_lev>=ps&&d("glp_intopt: cannot solve current LP relaxation"):r==yo?t.msg_lev>=vs&&d("SEARCH TERMINATED BY APPLICATION"):p(r!=r),r)}function r(e,t){function l(){return Vb(s,o),o=null,$b(s,e),f}var r=x(),i=r.term_out,s,o=null,u={},a={},f;t.msg_lev>=vs&&d("Preprocessing..."),s=Nb(),Wb(s,e,Js,ns,Js),!i||t.msg_lev<vs?r.term_out=Js:r.term_out=$s,f=Bw(s,t),r.term_out=i,f!=0&&(f==vo?t.msg_lev>=vs&&d("PROBLEM HAS NO PRIMAL FEASIBLE SOLUTION"):f==mo?t.msg_lev>=vs&&d("LP RELAXATION HAS NO DUAL FEASIBLE SOLUTION"):p(f!=f));if(f!=0)return f;o=H(),Xb(s,o);if(o.m==0&&o.n==0)return o.mip_stat=us,o.mip_obj=o.c0,t.msg_lev>=vs&&(d("Objective value = "+o.mip_obj+""),d("INTEGER OPTIMAL SOLUTION FOUND BY MIP PREPROCESSOR")),l();if(t.msg_lev>=vs){var c=Vt(o),h=$t(o),v;d(o.m+" row"+(o.m==1?"":"s")+", "+o.n+" column"+(o.n==1?"":"s")+", "+o.nnz+" non-zero"+(o.nnz==1?"":"s")+""),h==0?v="none of":c==1&&h==1?v="":h==1?v="one of":h==c?v="all of":v=h+" of",d(c+" integer variable"+(c==1?"":"s")+", "+v+" which "+(h==1?"is":"are")+" binary")}return sn(e,u),un(o,u),!i||t.msg_lev<vs?r.term_out=Js:r.term_out=$s,lE(o,Ki|Qi|Gi|Yi),r.term_out=i,!i||t.msg_lev<vs?r.term_out=Js:r.term_out=$s,Lr(o,0),r.term_out=i,t.msg_lev>=vs&&d("Solving LP relaxation..."),_t(a),a.msg_lev=t.msg_lev,o.it_cnt=e.it_cnt,f=Mt(o,a),e.it_cnt=o.it_cnt,f!=0?(t.msg_lev>=ps&&d("glp_intopt: cannot solve LP relaxation"),f=fo,f):(f=Dt(o),f==us?f=0:f==os?f=vo:f==as?f=mo:p(f!=f),f!=0?f:(o.it_cnt=e.it_cnt,f=n(o,t),e.it_cnt=o.it_cnt,o.mip_stat!=us&&o.mip_stat!=is?(e.mip_stat=o.mip_stat,f):l()))}var i,s,o,u;(e==null||e.magic!=D)&&h("glp_intopt: P = "+e+"; invalid problem object"),e.tree!=null&&h("glp_intopt: operation not allowed"),t==null&&(t={},Kt(t)),t.msg_lev!=hs&&t.msg_lev!=ps&&t.msg_lev!=ds&&t.msg_lev!=vs&&t.msg_lev!=ms&&h("glp_intopt: msg_lev = "+t.msg_lev+"; invalid parameter"),t.br_tech!=Ls&&t.br_tech!=As&&t.br_tech!=Os&&t.br_tech!=Ms&&t.br_tech!=_s&&h("glp_intopt: br_tech = "+t.br_tech+"; invalid parameter"),t.bt_tech!=Ds&&t.bt_tech!=Ps&&t.bt_tech!=Hs&&t.bt_tech!=Bs&&h("glp_intopt: bt_tech = "+t.bt_tech+"; invalid parameter"),0<t.tol_int&&t.tol_int<1||h("glp_intopt: tol_int = "+t.tol_int+"; invalid parameter"),0<t.tol_obj&&t.tol_obj<1||h("glp_intopt: tol_obj = "+t.tol_obj+"; invalid parameter"),t.tm_lim<0&&h("glp_intopt: tm_lim = "+t.tm_lim+"; invalid parameter"),t.out_frq<0&&h("glp_intopt: out_frq = "+t.out_frq+"; invalid parameter"),t.out_dly<0&&h("glp_intopt: out_dly = "+t.out_dly+"; invalid parameter"),0<=t.cb_size&&t.cb_size<=256||h("glp_intopt: cb_size = "+t.cb_size+"; invalid parameter"),t.pp_tech!=js&&t.pp_tech!=Fs&&t.pp_tech!=Is&&h("glp_intopt: pp_tech = "+t.pp_tech+"; invalid parameter"),t.mip_gap<0&&h("glp_intopt: mip_gap = "+t.mip_gap+"; invalid parameter"),t.mir_cuts!=$s&&t.mir_cuts!=Js&&h("glp_intopt: mir_cuts = "+t.mir_cuts+"; invalid parameter"),t.gmi_cuts!=$s&&t.gmi_cuts!=Js&&h("glp_intopt: gmi_cuts = "+t.gmi_cuts+"; invalid parameter"),t.cov_cuts!=$s&&t.cov_cuts!=Js&&h("glp_intopt: cov_cuts = "+t.cov_cuts+"; invalid parameter"),t.clq_cuts!=$s&&t.clq_cuts!=Js&&h("glp_intopt: clq_cuts = "+t.clq_cuts+"; invalid parameter"),t.presolve!=$s&&t.presolve!=Js&&h("glp_intopt: presolve = "+t.presolve+"; invalid parameter"),t.binarize!=$s&&t.binarize!=Js&&h("glp_intopt: binarize = "+t.binarize+"; invalid parameter"),t.fp_heur!=$s&&t.fp_heur!=Js&&h("glp_intopt: fp_heur = "+t.fp_heur+"; invalid parameter"),e.mip_stat=rs,e.mip_obj=0;for(i=1;i<=e.m;i++){var a=e.row[i];if(a.type==Ui&&a.lb>=a.ub)return t.msg_lev>=ps&&d("glp_intopt: row "+i+": lb = "+a.lb+", ub = "+a.ub+"; incorrect bounds"),o=ao,o}for(s=1;s<=e.n;s++){u=e.col[s];if(u.type==Ui&&u.lb>=u.ub)return t.msg_lev>=ps&&d("glp_intopt: column "+s+": lb = "+u.lb+", ub = "+u.ub+"; incorrect bounds"),o=ao,o}for(s=1;s<=e.n;s++){u=e.col[s];if(u.kind!=ji)continue;if(u.type==qi||u.type==Ui)if(u.lb!=Math.floor(u.lb))return t.msg_lev>=ps&&d("glp_intopt: integer column "+s+" has non-integer lower bound "+u.lb+""),o=ao,o;if(u.type==Ri||u.type==Ui)if(u.ub!=Math.floor(u.ub))return t.msg_lev>=ps&&d("glp_intopt: integer column "+s+" has non-integer upper bound "+u.ub+""),o=ao,o;if(u.type==zi&&u.lb!=Math.floor(u.lb))return t.msg_lev>=ps&&d("glp_intopt: integer column "+s+" has non-integer fixed value "+u.lb+""),o=ao,o}if(t.msg_lev>=vs){var f=Vt(e),l=$t(e),c;d("GLPK Integer Optimizer, v"+T()+""),d(e.m+" row"+(e.m==1?"":"s")+", "+e.n+" column"+(e.n==1?"":"s")+", "+e.nnz+" non-zero"+(e.nnz==1?"":"s")+""),l==0?c="none of":f==1&&l==1?c="":l==1?c="one of":l==f?c="all of":c=l+" of",d(f+" integer variable"+(f==1?"":"s")+", "+c+" which "+(l==1?"is":"are")+" binary")}return t.presolve?o=r(e,t):o=n(e,t),o},Kt=e.glp_init_iocp=function(e){e.msg_lev=vs,e.br_tech=Ms,e.bt_tech=Hs,e.tol_int=1e-5,e.tol_obj=1e-7,e.tm_lim=s,e.out_frq=5e3,e.out_dly=1e4,e.cb_func=null,e.cb_info=null,e.cb_size=0,e.pp_tech=Is,e.mip_gap=0,e.mir_cuts=Js,e.gmi_cuts=Js,e.cov_cuts=Js,e.clq_cuts=Js,e.presolve=Js,e.binarize=Js,e.fp_heur=Js},Qt=e.glp_mip_status=function(e){return e.mip_stat},Gt=e.glp_mip_obj_val=function(e){return e.mip_obj},Yt=e.glp_mip_row_val=function(e,t){return 1<=t&&t<=e.m||h("glp_mip_row_val: i = "+t+"; row number out of range"),e.row[t].mipx},Zt=e.glp_mip_col_val=function(e,t){return 1<=t&&t<=e.n||h("glp_mip_col_val: j = "+t+"; column number out of range"),e.col[t].mipx},tn=e.glp_bf_exists=function(e){return e.m==0||e.valid},nn=e.glp_factorize=function(e){function t(e,t,n,r){var i=e.m,s,o,u;p(1<=t&&t<=i),o=e.head[t];if(o<=i)u=1,n[1]=o,r[1]=1;else{u=0;for(s=e.col[o-i].ptr;s!=null;s=s.c_next)u++,n[u]=s.row.i,r[u]=-s.row.rii*s.val*s.col.sjj}return u}var n=e.m,r=e.n,i=e.row,s=e.col,o=e.head,u,a,f,l;e.valid=0,u=0;for(a=1;a<=n+r;a++){a<=n?(f=i[a].stat,i[a].bind=0):(f=s[a-n].stat,s[a-n].bind=0);if(f==Wi){u++;if(u>n)return l=so,l;o[u]=a,a<=n?i[a].bind=u:s[a-n].bind=u}}if(u<n)return l=so,l;if(n>0){e.bfd==null&&(e.bfd=sr(),on(e));switch(ur(e.bfd,n,e.head,t,e)){case 0:break;case er:return l=oo,l;case tr:return l=uo,l;default:p(e!=e)}e.valid=1}return l=0,l},rn=e.glp_bf_updated=function(e){return e.m!=0&&!e.valid&&h("glp_bf_update: basis factorization does not exist"),e.m==0?0:cr(e.bfd)},sn=e.glp_get_bfcp=function(e,t){var n=e.bfcp;n==null?(t.type=fs,t.lu_size=0,t.piv_tol=.1,t.piv_lim=4,t.suhl=$s,t.eps_tol=1e-15,t.max_gro=1e10,t.nfs_max=100,t.upd_tol=1e-6,t.nrs_max=100,t.rs_size=0):v(t,n)},un=e.glp_set_bfcp=function(e,t){var n=e.bfcp;t==null?n!=null&&(e.bfcp=null):(n==null&&(n=e.bfcp={}),v(n,t),n.type!=fs&&n.type!=ls&&n.type!=cs&&h("glp_set_bfcp: type = "+n.type+"; invalid parameter"),n.lu_size<0&&h("glp_set_bfcp: lu_size = "+n.lu_size+"; invalid parameter"),0<n.piv_tol&&n.piv_tol<1||h("glp_set_bfcp: piv_tol = "+n.piv_tol+"; invalid parameter"),n.piv_lim<1&&h("glp_set_bfcp: piv_lim = "+n.piv_lim+"; invalid parameter"),n.suhl!=$s&&n.suhl!=Js&&h("glp_set_bfcp: suhl = "+n.suhl+"; invalid parameter"),0<=n.eps_tol&&n.eps_tol<=1e-6||h("glp_set_bfcp: eps_tol = "+n.eps_tol+"; invalid parameter"),n.max_gro<1&&h("glp_set_bfcp: max_gro = "+n.max_gro+"; invalid parameter"),1<=n.nfs_max&&n.nfs_max<=32767||h("glp_set_bfcp: nfs_max = "+n.nfs_max+"; invalid parameter"),0<n.upd_tol&&n.upd_tol<1||h("glp_set_bfcp: upd_tol = "+n.upd_tol+"; invalid parameter"),1<=n.nrs_max&&n.nrs_max<=32767||h("glp_set_bfcp: nrs_max = "+n.nrs_max+"; invalid parameter"),n.rs_size<0&&h("glp_set_bfcp: rs_size = "+n.nrs_max+"; invalid parameter"),n.rs_size==0&&(n.rs_size=20*n.nrs_max)),e.bfd!=null&&on(e)},an=e.glp_get_bhead=function(e,t){return e.m!=0&&!e.valid&&h("glp_get_bhead: basis factorization does not exist"),1<=t&&t<=e.m||h("glp_get_bhead: k = "+t+"; index out of range"),e.head[t]},fn=e.glp_get_row_bind=function(e,t){return e.m!=0&&!e.valid&&h("glp_get_row_bind: basis factorization does not exist"),1<=t&&t<=e.m||h("glp_get_row_bind: i = "+t+"; row number out of range"),e.row[t].bind},ln=e.glp_get_col_bind=function(e,t){return e.m!=0&&!e.valid&&h("glp_get_col_bind: basis factorization does not exist"),1<=t&&t<=e.n||h("glp_get_col_bind: j = "+t+"; column number out of range"),e.col[t].bind},cn=e.glp_ftran=function(e,t){var n=e.m,r=e.row,i=e.col,s,o;n!=0&&!e.valid&&h("glp_ftran: basis factorization does not exist");for(s=1;s<=n;s++)t[s]*=r[s].rii;n>0&&ar(e.bfd,t);for(s=1;s<=n;s++)o=e.head[s],o<=n?t[s]/=r[o].rii:t[s]*=i[o-n].sjj},hn=e.glp_btran=function(e,t){var n=e.m,r=e.row,i=e.col,s,o;n!=0&&!e.valid&&h("glp_btran: basis factorization does not exist");for(s=1;s<=n;s++)o=e.head[s],o<=n?t[s]/=r[o].rii:t[s]*=i[o-n].sjj;n>0&&fr(e.bfd,t);for(s=1;s<=n;s++)t[s]*=r[s].rii},pn=e.glp_warm_up=function(e){var t,n,r,i,s,o,u,a,f,l;e.pbs_stat=e.dbs_stat=rs,e.obj_val=0,e.some=0;for(i=1;i<=e.m;i++)t=e.row[i],t.prim=t.dual=0;for(s=1;s<=e.n;s++)n=e.col[s],n.prim=n.dual=0;if(!tn(e)){u=nn(e);if(u!=0)return u}l=new Array(1+e.m);for(i=1;i<=e.m;i++)l[i]=0;for(i=1;i<=e.m;i++){t=e.row[i];if(t.stat==Wi)continue;t.stat==Xi?t.prim=t.lb:t.stat==Vi?t.prim=t.ub:t.stat==$i?t.prim=0:t.stat==Ji?t.prim=t.lb:p(t!=t),l[i]-=t.prim}for(s=1;s<=e.n;s++){n=e.col[s];if(n.stat==Wi)continue;n.stat==Xi?n.prim=n.lb:n.stat==Vi?n.prim=n.ub:n.stat==$i?n.prim=0:n.stat==Ji?n.prim=n.lb:p(n!=n);if(n.prim!=0)for(r=n.ptr;r!=null;r=r.c_next)l[r.row.i]+=r.val*n.prim}cn(e,l),e.pbs_stat=is;for(i=1;i<=e.m;i++){t=e.row[i];if(t.stat!=Wi)continue;t.prim=l[t.bind],o=t.type;if(o==qi||o==Ui||o==zi)a=1e-6+1e-9*Math.abs(t.lb),t.prim<t.lb-a&&(e.pbs_stat=ss);if(o==Ri||o==Ui||o==zi)a=1e-6+1e-9*Math.abs(t.ub),t.prim>t.ub+a&&(e.pbs_stat=ss)}for(s=1;s<=e.n;s++){n=e.col[s];if(n.stat!=Wi)continue;n.prim=l[n.bind],o=n.type;if(o==qi||o==Ui||o==zi)a=1e-6+1e-9*Math.abs(n.lb),n.prim<n.lb-a&&(e.pbs_stat=ss);if(o==Ri||o==Ui||o==zi)a=1e-6+1e-9*Math.abs(n.ub),n.prim>n.ub+a&&(e.pbs_stat=ss)}e.obj_val=e.c0;for(s=1;s<=e.n;s++)n=e.col[s],e.obj_val+=n.coef*n.prim;for(i=1;i<=e.m;i++)l[i]=0;for(s=1;s<=e.n;s++)n=e.col[s],n.stat==Wi&&(l[n.bind]=n.coef);hn(e,l),e.dbs_stat=is;for(i=1;i<=e.m;i++){t=e.row[i];if(t.stat==Wi){t.dual=0;continue}t.dual=-l[i],o=t.type,f=e.dir==Pi?+t.dual:-t.dual;if((o==Ii||o==qi)&&f<-0.00001||(o==Ii||o==Ri)&&f>1e-5)e.dbs_stat=ss}for(s=1;s<=e.n;s++){n=e.col[s];if(n.stat==Wi){n.dual=0;continue}n.dual=n.coef;for(r=n.ptr;r!=null;r=r.c_next)n.dual+=r.val*l[r.row.i];o=n.type,f=e.dir==Pi?+n.dual:-n.dual;if((o==Ii||o==qi)&&f<-0.00001||(o==Ii||o==Ri)&&f>1e-5)e.dbs_stat=ss}return 0},dn=e.glp_eval_tab_row=function(e,t,n,r){var i=e.m,s=e.n,o,u,a,f,l,c,d,v;i!=0&&!e.valid&&h("glp_eval_tab_row: basis factorization does not exist"),1<=t&&t<=i+s||h("glp_eval_tab_row: k = "+t+"; variable number out of range"),t<=i?o=fn(e,t):o=ln(e,t-i),o==0&&h("glp_eval_tab_row: k = "+t+"; variable must be basic"),p(1<=o&&o<=i),d=new Array(1+i),l=new Array(1+i),v=new Array(1+i);for(u=1;u<=i;u++)d[u]=0;d[o]=1,hn(e,d),a=0;for(t=1;t<=i+s;t++){if(t<=i){if(jt(e,t)==Wi)continue;c=-d[t]}else{if(qt(e,t-i)==Wi)continue;f=yt(e,t-i,l,v),c=0;for(u=1;u<=f;u++)c+=d[l[u]]*v[u]}c!=0&&(a++,n[a]=t,r[a]=c)}return p(a<=s),a},vn=e.glp_eval_tab_col=function(e,t,n,r){var i=e.m,s=e.n,o,u,a,f;i!=0&&!e.valid&&h("glp_eval_tab_col: basis factorization does not exist"),1<=t&&t<=i+s||h("glp_eval_tab_col: k = "+t+"; variable number out of range"),t<=i?a=jt(e,t):a=qt(e,t-i),a==Wi&&h("glp_eval_tab_col: k = "+t+"; variable must be non-basic"),f=new Array(1+i);for(o=1;o<=i;o++)f[o]=0;if(t<=i)f[t]=-1;else{u=yt(e,t-i,n,r);for(o=1;o<=u;o++)f[n[o]]=r[o]}cn(e,f),u=0;for(o=1;o<=i;o++)f[o]!=0&&(u++,n[u]=an(e,o),r[u]=f[o]);return u},mn=e.glp_transform_row=function(e,t,n,r){var i,s,o,u,a,f,l,c,d,v,m,g,y;tn(e)||h("glp_transform_row: basis factorization does not exist "),u=st(e),a=ot(e),v=new Array(1+a);for(s=1;s<=a;s++)v[s]=0;0<=t&&t<=a||h("glp_transform_row: len = "+t+"; invalid row length");for(f=1;f<=t;f++)s=n[f],1<=s&&s<=a||h("glp_transform_row: ind["+f+"] = "+s+"; column index out of range"),r[f]==0&&h("glp_transform_row: val["+f+"] = 0; zero coefficient not allowed"),v[s]!=0&&h("glp_transform_row: ind["+f+"] = "+s+"; duplicate column indices not allowed"),v[s]=r[f];m=new Array(1+u);for(i=1;i<=u;i++)o=an(e,i),p(1<=o&&o<=u+a),m[i]=o<=u?0:v[o-u];g=m,hn(e,g),t=0;for(i=1;i<=u;i++)jt(e,i)!=Wi&&(d=-g[i],d!=0&&(t++,n[t]=i,r[t]=d));c=new Array(1+u),y=new Array(1+u);for(s=1;s<=a;s++)if(qt(e,s)!=Wi){d=v[s],l=yt(e,s,c,y);for(f=1;f<=l;f++)d+=y[f]*g[c[f]];d!=0&&(t++,n[t]=u+s,r[t]=d)}return p(t<=a),t},gn=e.glp_transform_col=function(e,t,n,r){var i,s,o,u,a;tn(e)||h("glp_transform_col: basis factorization does not exist "),s=st(e),u=new Array(1+s);for(i=1;i<=s;i++)u[i]=0;0<=t&&t<=s||h("glp_transform_col: len = "+t+"; invalid column length");for(o=1;o<=t;o++)i=n[o],1<=i&&i<=s||h("glp_transform_col: ind["+o+"] = "+i+"; row index out of range"),r[o]==0&&h("glp_transform_col: val["+o+"] = 0; zero coefficient not allowed"),u[i]!=0&&h("glp_transform_col: ind["+o+"] = "+i+"; duplicate row indices not allowed"),u[i]=r[o];a=u,cn(e,a),t=0;for(i=1;i<=s;i++)a[i]!=0&&(t++,n[t]=an(e,i),r[t]=a[i]);return t},yn=e.glp_prim_rtest=function(e,t,r,i,s,o){var u,a,f,l,c,d,v,m,g,y,b,w,E,S;Pt(e)!=is&&h("glp_prim_rtest: basic solution is not primal feasible "),s!=+1&&s!=-1&&h("glp_prim_rtest: dir = "+s+"; invalid parameter"),0<o&&o<1||h("glp_prim_rtest: eps = "+o+"; invalid parameter"),a=st(e),f=ot(e),l=0,S=n,g=0;for(c=1;c<=t;c++){u=r[c],1<=u&&u<=a+f||h("glp_prim_rtest: ind["+c+"] = "+u+"; variable number out of range"),u<=a?(d=ft(e,u),b=lt(e,u),w=ct(e,u),v=jt(e,u),y=Ft(e,u)):(d=ht(e,u-a),b=pt(e,u-a),w=dt(e,u-a),v=qt(e,u-a),y=Rt(e,u-a)),v!=Wi&&h("glp_prim_rtest: ind["+c+"] = "+u+"; non-basic variable not allowed"),m=s>0?+i[c]:-i[c];if(d==Ii)continue;if(d==qi){if(m>-o)continue;E=(b-y)/m}else if(d==Ri){if(m<+o)continue;E=(w-y)/m}else if(d==Ui)if(m<0){if(m>-o)continue;E=(b-y)/m}else{if(m<+o)continue;E=(w-y)/m}else if(d==zi){if(-o<m&&m<+o)continue;E=0}else p(d!=d);E<0&&(E=0);if(S>E||S==E&&g<Math.abs(m))l=c,S=E,g=Math.abs(m)}return l},bn=e.glp_dual_rtest=function(e,t,r,i,s,o){var u,a,f,l,c,d,v,m,g,y,b,w;Ht(e)!=is&&h("glp_dual_rtest: basic solution is not dual feasible"),s!=+1&&s!=-1&&h("glp_dual_rtest: dir = "+s+"; invalid parameter"),0<o&&o<1||h("glp_dual_rtest: eps = "+o+"; invalid parameter"),a=st(e),f=ot(e),y=it(e)==Pi?1:-1,l=0,w=n,m=0;for(c=1;c<=t;c++){u=r[c],1<=u&&u<=a+f||h("glp_dual_rtest: ind["+c+"] = "+u+"; variable number out of range"),u<=a?(d=jt(e,u),g=It(e,u)):(d=qt(e,u-a),g=Ut(e,u-a)),d==Wi&&h("glp_dual_rtest: ind["+c+"] = "+u+"; basic variable not allowed"),v=s>0?+i[c]:-i[c];if(d==Xi){if(v<+o)continue;b=y*g/v}else if(d==Vi){if(v>-o)continue;b=y*g/v}else if(d==$i){if(-o<v&&v<+o)continue;b=0}else{if(d==Ji)continue;p(d!=d)}b<0&&(b=0);if(w>b||w==b&&m<Math.abs(v))l=c,w=b,m=Math.abs(v)}return l},En=e.glp_analyze_bound=function(e,t,r){function k(){f<0?(x=g,T=l):(N=g,C=l)}var i,s,o,u,a,f,l,c,d,v,m,g,y,b,w,E,S,x,T,N,C;x=T=N=C=null,(e==null||e.magic!=D)&&h("glp_analyze_bound: P = "+e+"; invalid problem object"),o=e.m,u=e.n,(e.pbs_stat!=is||e.dbs_stat!=is)&&h("glp_analyze_bound: optimal basic solution required"),o!=0&&!e.valid&&h("glp_analyze_bound: basis factorization required"),1<=t&&t<=o+u||h("glp_analyze_bound: k = "+t+"; variable number out of range"),t<=o?(i=e.row[t],a=i.stat,m=i.prim):(s=e.col[t-o],a=s.stat,m=s.prim),a==Wi&&h("glp_analyze_bound: k = "+t+"; basic variable not allowed "),v=new Array(1+o),S=new Array(1+o),c=vn(e,t,v,S),p(0<=c&&c<=o);for(f=-1;f<=1;f+=2){d=yn(e,c,v,S,f,1e-9);if(d==0){l=0,g=f<0?-n:+n,k();continue}p(1<=d&&d<=c),l=v[d],l<=o?(i=e.row[l],y=lt(e,i.i),b=ct(e,i.i),a=i.stat,w=i.prim):(s=e.col[l-o],y=pt(e,s.j),b=dt(e,s.j),a=s.stat,w=s.prim),p(a==Wi),f<0&&S[d]>0||f>0&&S[d]<0?(p(y!=-n),E=y-w):(p(b!=+n),E=b-w),p(S[d]!=0),g=m+E/S[d],k()}r(x,T,N,C)},Sn=e.glp_analyze_coef=function(e,t,r){function U(){l<0?(B=C,j=d,F=k):(I=C,q=d,R=k)}var i,s,o,u,a,f,l,c,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,P,H,B=null,j=null,F=null,I=null,q=null,R=null;(e==null||e.magic!=D)&&h("glp_analyze_coef: P = "+e+"; invalid problem object"),o=e.m,u=e.n,(e.pbs_stat!=is||e.dbs_stat!=is)&&h("glp_analyze_coef: optimal basic solution required"),o!=0&&!e.valid&&h("glp_analyze_coef: basis factorization required"),1<=t&&t<=o+u||h("glp_analyze_coef: k = "+t+"; variable number out of range"),t<=o?(i=e.row[t],a=i.type,S=i.lb,x=i.ub,T=0,f=i.stat,N=i.prim):(s=e.col[t-o],a=s.type,S=s.lb,x=s.ub,T=s.coef,f=s.stat,N=s.prim),f!=Wi&&h("glp_analyze_coef: k = "+t+"; non-basic variable not allowed"),w=new Array(1+o),H=new Array(1+o),E=new Array(1+u),P=new Array(1+u),y=dn(e,t,E,P),p(0<=y&&y<=u);for(l=-1;l<=1;l+=2){e.dir==Pi?v=-l:e.dir==Hi?v=+l:p(e!=e),b=bn(e,y,E,P,v,1e-9);if(b==0){C=l<0?-n:+n,d=0,k=N,U();continue}p(1<=b&&b<=y),d=E[b],p(1<=d&&d<=o+u),d<=o?(i=e.row[d],f=i.stat,L=i.dual):(s=e.col[d-o],f=s.stat,L=s.dual),p(P[b]!=0),A=-L/P[b],C=T+A,l<0&&P[b]>0||l>0&&P[b]<0?v=1:v=-1,e.dir==Hi&&(v=-v),v>0?p(f==Xi||f==$i):p(f==Vi||f==$i),m=vn(e,d,w,H),t<=o?(i=e.row[t],i.type=Ii,i.lb=i.ub=0):(s=e.col[t-o],s.type=Ii,s.lb=s.ub=0),g=yn(e,m,w,H,v,1e-9),t<=o?(i=e.row[t],i.type=a,i.lb=S,i.ub=x):(s=e.col[t-o],s.type=a,s.lb=S,s.ub=x);if(g==0){v<0&&P[b]>0||v>0&&P[b]<0?k=-n:k=+n,U();continue}p(1<=g&&g<=m),c=w[g],p(1<=c&&c<=o+u),p(c!=t),c<=o?(i=e.row[c],p(i.stat==Wi),O=lt(e,i.i),M=ct(e,i.i),_=i.prim):(s=e.col[c-o],p(s.stat==Wi),O=pt(e,s.j),M=dt(e,s.j),_=s.prim),v<0&&H[g]>0||v>0&&H[g]<0?(p(O!=-n),A=O-_):(p(M!=+n),A=M-_),p(H[g]!=0),k=N+P[b]/H[g]*A,U()}callback(B,j,F,I,q,R)},Xn=e.glp_mpl_alloc_wksp=function(){return Ky()},Vn=e._glp_mpl_init_rand=function(e,t){e.phase!=0&&h("glp_mpl_init_rand: invalid call sequence\n"),qw(e.rand,t)},$n=e.glp_mpl_read_model=function(e,t,n,r){var i;return e.phase!=0&&h("glp_mpl_read_model: invalid call sequence"),i=Qy(e,t,n,r),i==1||i==2?i=0:i==4?i=1:p(i!=i),i},Jn=e.glp_mpl_read_model_from_string=function(e,t,n,r){var i=0;return $n(e,t,function(){return i<n.length?n[i++]:-1},r)},Kn=e.glp_mpl_read_data=function(e,t,n){var r;return e.phase!=1&&e.phase!=2&&h("glp_mpl_read_data: invalid call sequence"),r=Gy(e,t,n),r==2?r=0:r==4?r=1:p(r!=r),r},Qn=e.glp_mpl_read_data_from_string=function(e,t,n){var r=0;return Kn(e,t,function(){return r<n.length?n[r++]:-1})},Gn=e.glp_mpl_generate=function(e,t,n){var r;return e.phase!=1&&e.phase!=2&&h("glp_mpl_generate: invalid call sequence\n"),r=Yy(e,t,n),r==3?r=0:r==4&&(r=1),r},Yn=e.glp_mpl_build_prob=function(e,t){var n,r,i,s,o,u,a,f,l,c,v,m;e.phase!=3&&h("glp_mpl_build_prob: invalid call sequence\n"),et(t),B(t,Zy(e)),n=eb(e),n>0&&I(t,n);for(i=1;i<=n;i++){R(t,i,nb(e,i)),a=ib(e,i,function(e,t){c=e,v=t});switch(a){case md:a=Ii;break;case gd:a=qi;break;case yd:a=Ri;break;case bd:a=Ui;break;case wd:a=zi;break;default:p(a!=a)}a==Ui&&Math.abs(c-v)<1e-9*(1+Math.abs(c))&&(a=zi,Math.abs(c)<=Math.abs(v)?v=c:c=v),z(t,i,a,c,v),ob(e,i)!=0&&d("glp_mpl_build_prob: row "+nb(e,i)+"; constant term "+ob(e,i)+" ignored")}r=tb(e),r>0&&q(t,r);for(s=1;s<=r;s++){U(t,s,ub(e,s)),u=ab(e,s);switch(u){case Td:break;case Nd:case Cd:Wt(t,s,ji);break;default:p(u!=u)}a=fb(e,s,function(e,t){c=e,v=t});switch(a){case md:a=Ii;break;case gd:a=qi;break;case yd:a=Ri;break;case bd:a=Ui;break;case wd:a=zi;break;default:p(a!=a)}if(u==Cd){if(a==Ii||a==Ri||c<0)c=0;if(a==Ii||a==qi||v>1)v=1;a=Ui}a==Ui&&Math.abs(c-v)<1e-9*(1+Math.abs(c))&&(a=zi,Math.abs(c)<=Math.abs(v)?v=c:c=v),W(t,s,a,c,v)}l=new Array(1+r),m=new Array(1+r);for(i=1;i<=n;i++)f=sb(e,i,l,m),V(t,i,f,l,m);for(i=1;i<=n;i++){u=rb(e,i);if(u==Sd||u==xd){j(t,nb(e,i)),F(t,u==Sd?Pi:Hi),X(t,0,ob(e,i)),f=sb(e,i,l,m);for(o=1;o<=f;o++)X(t,l[o],m[o]);break}}},Zn=e.glp_mpl_postsolve=function(e,t,n){var r,i,s,o,u,a,f,l;(e.phase!=3||!!e.flag_p)&&h("glp_mpl_postsolve: invalid call sequence"),n!=es&&n!=ts&&n!=ns&&h("glp_mpl_postsolve: sol = "+n+"; invalid parameter"),s=eb(e),o=tb(e),(s!=st(t)||o!=ot(t))&&h("glp_mpl_postsolve: wrong problem object\n");if(!lb(e))return 0;for(r=1;r<=s;r++)n==es?(u=jt(t,r),f=Ft(t,r),l=It(t,r)):n==ts?(u=0,f=glp_ipt_row_prim(t,r),l=glp_ipt_row_dual(t,r)):n==ns?(u=0,f=Yt(t,r),l=0):p(n!=n),Math.abs(f)<1e-9&&(f=0),Math.abs(l)<1e-9&&(l=0),cb(e,r,u,f,l);for(i=1;i<=o;i++)n==es?(u=qt(t,i),f=Rt(t,i),l=Ut(t,i)):n==ts?(u=0,f=glp_ipt_col_prim(t,i),l=glp_ipt_col_dual(t,i)):n==ns?(u=0,f=Zt(t,i),l=0):p(n!=n),Math.abs(f)<1e-9&&(f=0),Math.abs(l)<1e-9&&(l=0),hb(e,i,u,f,l);return a=pb(e),a==3?a=0:a==4&&(a=1),a};const er=1,tr=2,nr=3,rr=4,ir=5,pr="!\"#$%&()/,.;?@_`'{}|~";var dr=e.glp_read_lp=function(e,t,r){function D(e,t){throw new Error(e.count+": "+t)}function P(e,t){d(e.count+": warning: "+t)}function H(e){var t;p(e.c!=c),e.c=="\n"&&e.count++,t=e.callback(),t<0?e.c=="\n"?(e.count--,t=c):(P(e,"missing final end of line"),t="\n"):t!="\n"&&(N(t)?t=" ":C(t)&&D(e,"invalid control character "+t.charCodeAt(0))),e.c=t}function B(e){e.image+=e.c,H(e)}function $(e,t){return e.toLowerCase()==t.toLowerCase()?1:0}function J(e){function n(){e.token=y;while(L(e.c)||O(pr,e.c)>=0)B(e);t&&($(e.image,"minimize")?e.token=s:$(e.image,"minimum")?e.token=s:$(e.image,"min")?e.token=s:$(e.image,"maximize")?e.token=o:$(e.image,"maximum")?e.token=o:$(e.image,"max")?e.token=o:$(e.image,"subject")?e.c==" "&&(H(e),M(e.c)=="t"&&(e.token=u,e.image+=" ",B(e),M(e.c)!="o"&&D(e,"keyword `subject to' incomplete"),B(e),k(e.c)&&D(e,"keyword `"+e.image+e.c+"...' not recognized"))):$(e.image,"such")?e.c==" "&&(H(e),M(e.c)=="t"&&(e.token=u,e.image+=" ",B(e),M(e.c)!="h"&&D(e,"keyword `such that' incomplete"),B(e),M(e.c)!="a"&&D(e,"keyword `such that' incomplete"),B(e),M(e.c)!="t"&&D(e,"keyword `such that' incomplete"),B(e),k(e.c)&&D(e,"keyword `"+e.image+e.c+"...' not recognized"))):$(e.image,"st")?e.token=u:$(e.image,"s.t.")?e.token=u:$(e.image,"st.")?e.token=u:$(e.image,"bounds")?e.token=a:$(e.image,"bound")?e.token=a:$(e.image,"general")?e.token=f:$(e.image,"generals")?e.token=f:$(e.image,"gen")?e.token=f:$(e.image,"integer")?e.token=l:$(e.image,"integers")?e.token=l:$(e.image,"int")?e.token=l:$(e.image,"binary")?e.token=h:$(e.image,"binaries")?e.token=h:$(e.image,"bin")?e.token=h:$(e.image,"end")&&(e.token=v))}var t;e.token=-1,e.image="",e.value=0;for(;;){t=0;while(e.c==" ")H(e);if(e.c==c)e.token=i;else if(e.c=="\n"){H(e);if(!k(e.c))continue;t=1,n()}else{if(e.c=="\\"){while(e.c!="\n")H(e);continue}if(k(e.c)||e.c!="."&&O(pr,e.c)>=0)n();else if(A(e.c)||e.c=="."){e.token=b;while(A(e.c))B(e);if(e.c=="."){B(e),e.image.length==1&&!A(e.c)&&D(e,"invalid use of decimal point");while(A(e.c))B(e)}if(e.c=="e"||e.c=="E"){B(e),(e.c=="+"||e.c=="-")&&B(e),A(e.c)||D(e,"numeric constant `"+e.image+"' incomplete");while(A(e.c))B(e)}e.value=Number(e.image),e.value==Number.NaN&&D(e,"numeric constant `"+e.image+"' out of range")}else e.c=="+"?(e.token=w,B(e)):e.c=="-"?(e.token=E,B(e)):e.c==":"?(e.token=S,B(e)):e.c=="<"?(e.token=x,B(e),e.c=="="&&B(e)):e.c==">"?(e.token=T,B(e),e.c=="="&&B(e)):e.c=="="?(e.token=_,B(e),e.c=="<"?(e.token=x,B(e)):e.c==">"&&(e.token=T,B(e))):D(e,"character `"+e.c+"' not recognized")}break}while(e.c==" ")H(e)}function K(e,t){var r=Et(e.P,t);if(r==0){r=q(e.P,1),U(e.P,r,t);if(e.n_max<r){var i=e.n_max,s=e.ind,o=e.val,u=e.flag,a=e.lb,f=e.ub;e.n_max+=e.n_max,e.ind=new Array(1+e.n_max),m(e.ind,1,s,1,i),e.val=new Array(1+e.n_max),m(e.val,1,o,1,i),e.flag=new Array(1+e.n_max),g(e.flag,1,0,e.n_max),m(e.flag,1,u,1,i),e.lb=new Array(1+e.n_max),m(e.lb,1,a,1,i),e.ub=new Array(1+e.n_max),m(e.ub,1,f,1,i)}e.lb[r]=+n,e.ub[r]=-n}return r}function G(e){var t,n,r=0,i,s,o;for(;;){e.token==w?(s=1,J(e)):e.token==E?(s=-1,J(e)):s=1,e.token==b?(o=e.value,J(e)):o=1,e.token!=y&&D(e,"missing variable name"),t=K(e,e.image),e.flag[t]&&D(e,"multiple use of variable `"+e.image+"' not allowed"),r++,e.ind[r]=t,e.val[r]=s*o,e.flag[t]=1,J(e);if(e.token==w||e.token==E)continue;for(n=1;n<=r;n++)e.flag[e.ind[n]]=0;i=0;for(n=1;n<=r;n++)e.val[n]!=0&&(i++,e.ind[i]=e.ind[n],e.val[i]=e.val[n]);break}return i}function Y(e){var t,n;e.token==s?F(e.P,Pi):e.token==o?F(e.P,Hi):p(e!=e),J(e),e.token==y&&e.c==":"?(j(e.P,e.image),J(e),p(e.token==S),J(e)):j(e.P,"obj"),n=G(e);for(t=1;t<=n;t++)X(e.P,e.ind[t],e.val[t])}function Z(e){var t,n,r,i;p(e.token==u),J(e);for(;;){t=I(e.P,1),e.token==y&&e.c==":"?(wt(e.P,e.image)!=0&&D(e,"constraint `"+e.image+"' multiply defined"),R(e.P,t,e.image),J(e),p(e.token==S),J(e)):R(e.P,t,"r."+e.count),n=G(e),V(e.P,t,n,e.ind,e.val),e.token==x?(r=Ri,J(e)):e.token==T?(r=qi,J(e)):e.token==_?(r=zi,J(e)):D(e,"missing constraint sense"),e.token==w?(i=1,J(e)):e.token==E?(i=-1,J(e)):i=1,e.token!=b&&D(e,"missing right-hand side"),z(e.P,t,r,i*e.value,i*e.value),e.c!="\n"&&e.c!=c&&D(e,"invalid symbol(s) beyond right-hand side"),J(e);if(e.token==w||e.token==E||e.token==b||e.token==y)continue;break}}function tt(e,t,r){e.lb[t]!=+n&&P(e,"lower bound of variable `"+at(e.P,t)+"' redefined"),e.lb[t]=r}function nt(e,t,r){e.ub[t]!=-n&&P(e,"upper bound of variable `"+at(e.P,t)+"' redefined"),e.ub[t]=r}function rt(e){var t,r,i,s;p(e.token==a),J(e);for(;;){if(e.token!=w&&e.token!=E&&e.token!=b&&e.token!=y)return;e.token==w||e.token==E?(r=1,s=e.token==w?1:-1,J(e),e.token==b?(i=s*e.value,J(e)):$(e.image,"infinity")||$(e.image,"inf")?(s>0&&D(e,"invalid use of `+inf' as lower bound"),i=-n,J(e)):D(e,"missing lower bound")):e.token==b?(r=1,i=e.value,J(e)):r=0,r&&(e.token!=x&&D(e,"missing `<', `<=', or `=<' after lower bound"),J(e)),e.token!=y&&D(e,"missing variable name"),t=K(e,e.image),r&&tt(e,t,i),J(e),e.token==x?(J(e),e.token==w||e.token==E?(s=e.token==w?1:-1,J(e),e.token==b?(nt(e,t,s*e.value),J(e)):$(e.image,"infinity")||$(e.image,"inf")?(s<0&&D(e,"invalid use of `-inf' as upper bound"),nt(e,t,+n),J(e)):D(e,"missing upper bound")):e.token==b?(nt(e,t,e.value),J(e)):D(e,"missing upper bound")):e.token==T?(r&&D(e,"invalid bound definition"),J(e),e.token==w||e.token==E?(s=e.token==w?1:-1,J(e),e.token==b?(tt(e,t,s*e.value),J(e)):$(e.image,"infinity")||$(e.image,"inf")==0?(s>0&&D(e,"invalid use of `+inf' as lower bound"),tt(e,t,-n),J(e)):D(e,"missing lower bound")):e.token==b?(tt(e,t,e.value),J(e)):D(e,"missing lower bound")):e.token==_?(r&&D(e,"invalid bound definition"),J(e),e.token==w||e.token==E?(s=e.token==w?1:-1,J(e),e.token==b?(tt(e,t,s*e.value),nt(e,t,s*e.value),J(e)):D(e,"missing fixed value")):e.token==b?(tt(e,t,e.value),nt(e,t,e.value),J(e)):D(e,"missing fixed value")):$(e.image,"free")?(r&&D(e,"invalid bound definition"),tt(e,t,-n),nt(e,t,+n),J(e)):r||D(e,"invalid bound definition")}}function it(e){var t,n;e.token==f?(n=0,J(e)):e.token==l?(n=0,J(e)):e.token==h?(n=1,J(e)):p(e!=e);while(e.token==y)t=K(e,e.image),Wt(e.P,t,ji),n&&(tt(e,t,0),nt(e,t,1)),J(e)}function vt(){return ot!=0&&et(e),ot}const i=0,s=1,o=2,u=3,a=4,f=5,l=6,h=7,v=8,y=9,b=10,w=11,E=12,S=13,x=14,T=15,_=16;var st={},ot;d("Reading problem data"),t==null&&(t={}),hr("glp_read_lp",t),st.P=e,st.parm=t,st.callback=r,st.count=0,st.c="\n",st.token=i,st.image="",st.value=0,st.n_max=100,st.ind=new Array(1+st.n_max),st.val=new Array(1+st.n_max),st.flag=new Array(1+st.n_max),g(st.flag,1,0,st.n_max),st.lb=new Array(1+st.n_max),st.ub=new Array(1+st.n_max),et(e),bt(e),J(st),st.token!=s&&st.token!=o&&D(st,"`minimize' or `maximize' keyword missing"),Y(st),st.token!=u&&D(st,"constraints section missing"),Z(st),st.token==a&&rt(st);while(st.token==f||st.token==l||st.token==h)it(st);st.token==v?J(st):st.token==i?P(st,"keyword `end' missing"):D(st,"symbol "+st.image+" in wrong position"),st.token!=i&&D(st,"extra symbol(s) detected beyond `end'");var ut,ft,lt,ct;for(ut=1;ut<=e.n;ut++)lt=st.lb[ut],ct=st.ub[ut],lt==+n&&(lt=0),ct==-n&&(ct=+n),lt==-n&&ct==+n?ft=Ii:ct==+n?ft=qi:lt==-n?ft=Ri:lt!=ct?ft=Ui:ft=zi,W(st.P,ut,ft,lt,ct);d(e.m+" row"+(e.m==1?"":"s")+", "+e.n+" column"+(e.n==1?"":"s")+", "+e.nnz+" non-zero"+(e.nnz==1?"":"s"));if(Vt(e)>0){var ht=Vt(e),pt=$t(e);if(ht==1)pt==0?d("One variable is integer"):d("One variable is binary");else{var dt=ht+" integer variables, ";pt==0?dt+="none":pt==1?dt+="one":pt==ht?dt+="all":dt+=pt,d(dt+" of which "+(pt==1?"is":"are")+" binary")}}return d(st.count+" lines were read"),St(e),Q(e),ot=0,vt()},vr=e.glp_write_lp=function(e,t,n){function r(e){if(e[0]==".")return 1;if(A(e[0]))return 1;for(var t=0;t<e.length;t++)if(!L(e[t])&&O(pr,e[t])<0)return 1;return 0}function i(e){for(var t=0;t<e.length;t++)e[t]==" "?e[t]="_":e[t]=="-"?e[t]="~":e[t]=="["?e[t]="(":e[t]=="]"&&(e[t]=")")}function s(e,t){function s(){return t==0?"obj":"r_"+t}var n;return t==0?n=rt(e.P):n=ut(e.P,t),n==null?s():(i(n),r(n)?s():n)}function o(e,t){function s(){return"x_"+t}var n=at(e.P,t);return n==null?s():(i(n),r(n)?s():n)}function S(){return n("End"),g++,d(g+" lines were written"),0}var u={},a,f,l,c,h,v,m,g,y,b,w,E;d("Writing problem data"),t==null&&(t={}),hr("glp_write_lp",t),u.P=e,u.parm=t,g=0,n("\\* Problem: "+(e.name==null?"Unknown":e.name)+" *\\"),g++,n(""),g++;if(e.m>0&&e.n>0){e.dir==Pi?(n("Minimize"),g++):e.dir==Hi?(n("Maximize"),g++):p(e!=e),E=s(u,0),b=" "+E+":",v=0;for(h=1;h<=e.n;h++){f=e.col[h];if(f.coef!=0||f.ptr==null)v++,E=o(u,h),f.coef==0?w=" + 0 "+E:f.coef==+1?w=" + "+E:f.coef==-1?w=" - "+E:f.coef>0?w=" + "+f.coef+" "+E:w=" - "+ -f.coef+" "+E,b.length+w.length>72&&(n(b),b="",g++),b+=w}v==0&&(w=" 0 "+o(u,1),b+=w),n(b),g++,e.c0!=0&&(n("\\* constant term = "+e.c0+" *\\"),g++),n(""),g++,n("Subject To"),g++;for(c=1;c<=e.m;c++){a=e.row[c];if(a.type==Ii)continue;E=s(u,c),b=" "+E+":";for(l=a.ptr;l!=null;l=l.r_next)E=o(u,l.col.j),l.val==+1?w=" + "+E:l.val==-1?w=" - "+E:l.val>0?w=" + "+l.val+" "+E:w=" - "+ -l.val+" "+E,b.length+w.length>72&&(n(b),b="",g++),b+=w;a.type==Ui?(w=" - ~r_"+c,b.length+w.length>72&&(n(b),b="",g++),b+=w):a.ptr==null&&(w=" 0 "+o(u,1),b+=w),a.type==qi?w=" >= "+a.lb:a.type==Ri?w=" <= "+a.ub:a.type==Ui||a.type==zi?w=" = "+a.lb:p(a!=a),b.length+w.length>72&&(n(b),b="",g++),b+=w,n(b),g++}n(""),g++,m=0;for(c=1;c<=e.m;c++){a=e.row[c];if(a.type!=Ui)continue;m||(n("Bounds"),m=1,g++),n(" 0 <= ~r_"+c+" <= "+a.ub-a.lb),g++}for(h=1;h<=e.n;h++){f=e.col[h];if(f.type==qi&&f.lb==0)continue;m||(n("Bounds"),m=1,g++),E=o(u,h),f.type==Ii?(n(" "+E+" free"),g++):f.type==qi?(n(" "+E+" >= "+f.lb),g++):f.type==Ri?(n(" -Inf <= "+E+" <= "+f.ub),g++):f.type==Ui?(n(" "+f.lb+" <= "+E+" <= "+f.ub),g++):f.type==zi?(n(" "+E+" = "+f.lb),g++):p(f!=f)}m&&n(""),g++,m=0;for(h=1;h<=e.n;h++){f=e.col[h];if(f.kind==Bi)continue;p(f.kind==ji),m||(n("Generals"),m=1,g++),n(" "+o(u,h)),g++}return m&&(n(""),g++),S()}return d("Warning: problem has no rows/columns"),n("\\* WARNING: PROBLEM HAS NO ROWS/COLUMNS *\\"),g++,n(""),g++,S()},mr=e.glp_read_lp_from_string=function(e,t,n){var r=0;return dr(e,t,function(){return r<n.length?n[r++]:-1})};const gr=1,yr=2,br=3,wr=4,Er=5,ai=0,fi=5,_i=e.GLP_MAJOR_VERSION=4,Di=e.GLP_MINOR_VERSION=47,Pi=e.GLP_MIN=1,Hi=e.GLP_MAX=2,Bi=e.GLP_CV=1,ji=e.GLP_IV=2,Fi=e.GLP_BV=3,Ii=e.GLP_FR=e.GLP_FR=1,qi=e.GLP_LO=e.GLP_LO=2,Ri=e.GLP_UP=e.GLP_UP=3,Ui=e.GLP_DB=e.GLP_DB=4,zi=e.GLP_FX=e.GLP_FX=5,Wi=e.GLP_BS=1,Xi=e.GLP_NL=2,Vi=e.GLP_NU=3,$i=e.GLP_NF=4,Ji=e.GLP_NS=5,Ki=e.GLP_SF_GM=1,Qi=e.GLP_SF_EQ=16,Gi=e.GLP_SF_2N=32,Yi=e.GLP_SF_SKIP=64,Zi=e.GLP_SF_AUTO=128,es=e.GLP_SOL=1,ts=e.GLP_IPT=2,ns=e.GLP_MIP=3,rs=e.GLP_UNDEF=1,is=e.GLP_FEAS=2,ss=e.GLP_INFEAS=3,os=e.GLP_NOFEAS=4,us=e.GLP_OPT=5,as=e.GLP_UNBND=6,fs=e.GLP_BF_FT=1,ls=e.GLP_BF_BG=2,cs=e.GLP_BF_GR=3,hs=e.GLP_MSG_OFF=0,ps=e.GLP_MSG_ERR=1,ds=e.GLP_MSG_ON=2,vs=e.GLP_MSG_ALL=3,ms=e.GLP_MSG_DBG=4,gs=e.GLP_PRIMAL=1,ys=e.GLP_DUALP=2,bs=e.GLP_DUAL=3,ws=e.GLP_PT_STD=17,Es=e.GLP_PT_PSE=34,Ss=e.GLP_RT_STD=17,xs=e.GLP_RT_HAR=34,Ts=e.GLP_ORD_NONE=0,Ns=e.GLP_ORD_QMD=1,Cs=e.GLP_ORD_AMD=2,ks=e.GLP_ORD_SYMAMD=3,Ls=e.GLP_BR_FFV=1,As=e.GLP_BR_LFV=2,Os=e.GLP_BR_MFV=3,Ms=e.GLP_BR_DTH=4,_s=e.GLP_BR_PCH=5,Ds=e.GLP_BT_DFS=1,Ps=e.GLP_BT_BFS=2,Hs=e.GLP_BT_BLB=3,Bs=e.GLP_BT_BPH=4,js=e.GLP_PP_NONE=0,Fs=e.GLP_PP_ROOT=1,Is=e.GLP_PP_ALL=2,qs=e.GLP_RF_REG=0,Rs=e.GLP_RF_LAZY=1,Us=e.GLP_RF_CUT=2,zs=e.GLP_RF_GMI=1,Ws=e.GLP_RF_MIR=2,Xs=e.GLP_RF_COV=3,Vs=e.GLP_RF_CLQ=4,$s=e.GLP_ON=1,Js=e.GLP_OFF=0,Ks=e.GLP_IROWGEN=1,Qs=e.GLP_IBINGO=2,Gs=e.GLP_IHEUR=3,Ys=e.GLP_ICUTGEN=4,Zs=e.GLP_IBRANCH=5,eo=e.GLP_ISELECT=6,to=e.GLP_IPREPRO=7,no=e.GLP_NO_BRNCH=0,ro=e.GLP_DN_BRNCH=1,io=e.GLP_UP_BRNCH=2,so=e.GLP_EBADB=1,oo=e.GLP_ESING=2,uo=e.GLP_ECOND=3,ao=e.GLP_EBOUND=4,fo=e.GLP_EFAIL=5,lo=e.GLP_EOBJLL=6,co=e.GLP_EOBJUL=7,ho=e.GLP_EITLIM=8,po=e.GLP_ETMLIM=9,vo=e.GLP_ENOPFS=10,mo=e.GLP_ENODFS=11,go=e.GLP_EROOT=12,yo=e.GLP_ESTOP=13,bo=e.GLP_EMIPGAP=14,wo=e.GLP_ENOFEAS=15,Eo=e.GLP_ENOCVG=16,So=e.GLP_EINSTAB=17,xo=e.GLP_EDATA=18,To=e.GLP_ERANGE=19,No=e.GLP_KKT_PE=1,Co=e.GLP_KKT_PB=2,ko=e.GLP_KKT_DE=3,Lo=e.GLP_KKT_DB=4,Ao=e.GLP_KKT_CS=5,Oo=e.GLP_MPS_DECK=1,Mo=e.GLP_MPS_FILE=2,_o=e.GLP_ASN_MIN=1,Do=e.GLP_ASN_MAX=2,Po=e.GLP_ASN_MMP=3,Ho=e.LPX_LP=100,Bo=e.LPX_MIP=101,jo=e.LPX_FR=110,Fo=e.LPX_LO=111,Io=e.LPX_UP=112,qo=e.LPX_DB=113,Ro=e.LPX_FX=114,Uo=e.LPX_MIN=120,zo=e.LPX_MAX=121,Wo=e.LPX_P_UNDEF=132,Xo=e.LPX_P_FEAS=133,Vo=e.LPX_P_INFEAS=134,$o=e.LPX_P_NOFEAS=135,Jo=e.LPX_D_UNDEF=136,Ko=e.LPX_D_FEAS=137,Qo=e.LPX_D_INFEAS=138,Go=e.LPX_D_NOFEAS=139,Yo=e.LPX_BS=140,Zo=e.LPX_NL=141,eu=e.LPX_NU=142,tu=e.LPX_NF=143,nu=e.LPX_NS=144,ru=e.LPX_T_UNDEF=150,iu=e.LPX_T_OPT=151,su=e.LPX_CV=160,ou=e.LPX_IV=161,uu=e.LPX_I_UNDEF=170,au=e.LPX_I_OPT=171,fu=e.LPX_I_FEAS=172,lu=e.LPX_I_NOFEAS=173,cu=e.LPX_OPT=180,hu=e.LPX_FEAS=181,pu=e.LPX_INFEAS=182,du=e.LPX_NOFEAS=183,vu=e.LPX_UNBND=184,mu=e.LPX_UNDEF=185,gu=e.LPX_E_OK=200,yu=e.LPX_E_EMPTY=201,bu=e.LPX_E_BADB=202,wu=e.LPX_E_INFEAS=203,Eu=e.LPX_E_FAULT=204,Su=e.LPX_E_OBJLL=205,xu=e.LPX_E_OBJUL=206,Tu=e.LPX_E_ITLIM=207,Nu=e.LPX_E_TMLIM=208,Cu=e.LPX_E_NOFEAS=209,ku=e.LPX_E_INSTAB=210,Lu=e.LPX_E_SING=211,Au=e.LPX_E_NOCONV=212,Ou=e.LPX_E_NOPFS=213,Mu=e.LPX_E_NODFS=214,_u=e.LPX_E_MIPGAP=215,Du=e.LPX_K_MSGLEV=300,Pu=e.LPX_K_SCALE=301,Hu=e.LPX_K_DUAL=302,Bu=e.LPX_K_PRICE=303,ju=e.LPX_K_RELAX=304,Fu=e.LPX_K_TOLBND=305,Iu=e.LPX_K_TOLDJ=306,qu=e.LPX_K_TOLPIV=307,Ru=e.LPX_K_ROUND=308,Uu=e.LPX_K_OBJLL=309,zu=e.LPX_K_OBJUL=310,Wu=e.LPX_K_ITLIM=311,Xu=e.LPX_K_ITCNT=312,Vu=e.LPX_K_TMLIM=313,$u=e.LPX_K_OUTFRQ=314,Ju=e.LPX_K_OUTDLY=315,Ku=e.LPX_K_BRANCH=316,Qu=e.LPX_K_BTRACK=317,Gu=e.LPX_K_TOLINT=318,Yu=e.LPX_K_TOLOBJ=319,Zu=e.LPX_K_MPSINFO=320,ea=e.LPX_K_MPSOBJ=321,ta=e.LPX_K_MPSORIG=322,na=e.LPX_K_MPSWIDE=323,ra=e.LPX_K_MPSFREE=324,ia=e.LPX_K_MPSSKIP=325,sa=e.LPX_K_LPTORIG=326,oa=e.LPX_K_PRESOL=327,ua=e.LPX_K_BINARIZE=328,aa=e.LPX_K_USECUTS=329,fa=e.LPX_K_BFTYPE=330,la=e.LPX_K_MIPGAP=331,ca=e.LPX_C_COVER=1,ha=e.LPX_C_CLIQUE=2,pa=e.LPX_C_GOMORY=4,da=e.LPX_C_MIR=8,va=e.LPX_C_ALL=255,xa=1;LPF_ECOND=2,LPF_ELIMIT=3;const Ta=0;if(Ta)function Ma(e,t,n,r){var i=e.m,s=e.B,o,u,a,f=0,l,c,h;for(o=1;o<=i;o++){l=0,h=1;for(u=1;u<=i;u++)t?c=s[i*(u-1)+o]*n[u]:c=s[i*(o-1)+u]*n[u],h<Math.abs(c)&&(h=Math.abs(c)),l+=c;a=Math.abs(l-r[o])/h,f<a&&(f=a)}f>1e-8&&d((t?"lpf_btran":"lpf_ftran")+": dmax = "+f+"; relative error too large")}const zl=1,Wl=2,sc=-1,oc=101,uc=102,ac=103,fc=104,lc=105,cc=106,hc=107,pc=108,dc=109,vc=110,mc=111,gc=112,yc=113,bc=114,wc=115,Ec=116,Sc=117,xc=118,Tc=119,Nc=120,Cc=121,kc=122,Lc=123,Ac=124,Oc=125,Mc=126,_c=127,Dc=100,Pc=60,Hc=1024,Bc=201,jc=202,Fc=203,Ic=204,qc=205,Rc=206,Uc=207,zc=208,Wc=209,Xc=210,Vc=211,$c=212,Jc=213,Kc=214,Qc=215,Gc=216,Yc=217,Zc=218,eh=219,th=220,nh=221,rh=222,ih=223,sh=224,oh=225,uh=226,ah=227,fh=228,lh=229,ch=230,hh=231,ph=232,dh=233,vh=234,mh=235,gh=236,yh=237,bh=238,wh=239,Eh=240,Sh=241,xh=242,Th=243,Nh=244,Ch=245,kh=246,Lh=247,Ah=248,Oh=249,Mh=250,_h=251,Dh=252,Ph=0,Hh=1,Bh=2,jh=3,Fh=4,Ih=5,qh=301,Rh=302,Uh=303,zh=304,Wh=305,Xh=306,Vh=307,$h=308,Jh=309,Kh=310,Qh=311,Gh=312,Yh=313,Zh=314,ep=315,tp=316,np=317,rp=318,ip=319,sp=320,op=321,up=322,ap=323,fp=324,lp=325,cp=326,hp=327,pp=328,dp=329,vp=330,mp=331,gp=332,yp=333,bp=334,wp=335,Ep=336,Sp=337,xp=338,Tp=339,Np=340,Cp=341,kp=342,Lp=343,Ap=344,Op=345,Mp=346,_p=347,Dp=348,Pp=349,Hp=350,Bp=351,jp=352,Fp=353,Ip=354,qp=355,Rp=356,Up=357,zp=358,Wp=359,Xp=360,Vp=361,$p=362,Jp=363,Kp=364,Qp=365,Gp=366,Yp=367,Zp=368,ed=369,td=370,nd=371,rd=372,id=373,sd=374,od=375,ud=376,ad=377,fd=378,ld=379,cd=380,hd=381,pd=382,dd=383,vd=384,md=401,gd=402,yd=403,bd=404,wd=405,Ed=411,Sd=412,xd=413,Td=421,Nd=422,Cd=423;var ay=e.mpl_tab_num_args=function(e){return e.na},fy=e.mpl_tab_get_arg=function(e,t){return p(1<=t&&t<=e.na),e.arg[t]},ly=e.mpl_tab_num_flds=function(e){return e.nf},cy=e.mpl_tab_get_name=function(e,t){return p(1<=t&&t<=e.nf),e.name[t]},hy=e.mpl_tab_get_type=function(e,t){return p(1<=t&&t<=e.nf),e.type[t]},py=e.mpl_tab_get_num=function(e,t){return p(1<=t&&t<=e.nf),p(e.type[t]=="N"),e.num[t]},dy=e.mpl_tab_get_str=function(e,t){return p(1<=t&&t<=e.nf),p(e.type[t]=="S"),p(e.str[t]!=null),e.str[t]},vy=e.mpl_tab_set_num=function(e,t,n){p(1<=t&&t<=e.nf),p(e.type[t]=="?"),e.type[t]="N",e.num[t]=n},my=e.mpl_tab_set_str=function(e,t,n){p(1<=t&&t<=e.nf),p(e.type[t]=="?"),p(n.length<=Dc),p(e.str[t]!=null),e.type[t]="S",e.str[t]=n},Ky=e.mpl_initialize=function(){var e={};return e.line=0,e.c=0,e.token=0,e.imlen=0,e.image="",e.value=0,e.b_token=0,e.b_imlen=0,e.b_image="",e.b_value=0,e.f_dots=0,e.f_scan=0,e.f_token=0,e.f_imlen=0,e.f_image="",e.f_value=0,e.context=new Array(Pc),g(e.context,0," ",Pc),e.c_ptr=0,e.flag_d=0,e.tree={},e.model=null,e.flag_x=0,e.as_within=0,e.as_in=0,e.as_binary=0,e.flag_s=0,e.a_list=null,e.sym_buf="",e.tup_buf="",e.rand=Iw(),e.flag_p=0,e.stmt=null,e.dca=null,e.m=0,e.n=0,e.row=null,e.col=null,e.in_fp=null,e.in_file=null,e.out_fp=null,e.out_file=null,e.prt_fp=null,e.prt_file=null,e.phase=0,e.mod_file=null,e.mpl_buf="",e},Qy=function(e,t,n,r){function i(){return d(e.line+" line"+(e.line==1?"":"s")+" were read"),Uy(e),e.phase}e.phase!=0&&h("mpl_read_model: invalid call sequence"),n==null&&h("mpl_read_model: no input specified"),e.phase=1,d("Reading model section from "+t+" ..."),qy(e,t,n),Fv(e),e.model==null&&$y(e,"empty model section not allowed"),e.mod_file=e.in_file,By(e);if(Pd(e,"data")){if(r)return Jy(e,"data section ignored"),i();e.flag_d=1,_d(e),e.token!=Sh&&$y(e,"semicolon missing where expected"),_d(e),e.phase=2,d("Reading data section from "+t+" ..."),um(e)}return Bv(e),i()},Gy=function(e,t,n){return e.phase!=1&&e.phase!=2&&h("mpl_read_data: invalid call sequence"),n==null&&h("mpl_read_data: no input specified"),e.phase=2,d("Reading data section from "+t+" ..."),e.flag_d=1,qy(e,t,n),Vv(e,"data")&&(_d(e),e.token!=Sh&&$y(e,"semicolon missing where expected"),_d(e)),um(e),Bv(e),d(e.line+" line"+(e.line==1?"":"s")+" were read"),Uy(e),e.phase},Yy=e.mpl_generate=function(e,t,n){return e.phase!=1&&e.phase!=2&&h("mpl_generate: invalid call sequence"),e.phase=3,zy(e,t,n),jy(e),Vy(e),Fy(e),d("Model has been successfully generated"),e.phase},Zy=e.mpl_get_prob_name=function(e){return e.mod_file},eb=e.mpl_get_num_rows=function(e){return e.phase!=3&&h("mpl_get_num_rows: invalid call sequence"),e.m},tb=e.mpl_get_num_cols=function(e){return e.phase!=3&&h("mpl_get_num_cols: invalid call sequence"),e.n},nb=e.mpl_get_row_name=function(e,t){e.phase!=3&&h("mpl_get_row_name: invalid call sequence"),1<=t&&t<=e.m||h("mpl_get_row_name: i = "+t+"; row number out of range");var n=e.row[t].con.name,r=n.length;return p(r<=255),n+=zm(e,"[",e.row[t].memb.tuple).slice(0,255),n.length==255&&(n=n.slice(0,252)+"..."),p(n.length<=255),n},rb=rb=function(e,t){var n;e.phase!=3&&h("mpl_get_row_kind: invalid call sequence"),1<=t&&t<=e.m||h("mpl_get_row_kind: i = "+t+"; row number out of range");switch(e.row[t].con.type){case ac:n=Ed;break;case Ec:n=Sd;break;case wc:n=xd;break;default:p(e!=e)}return n},ib=e.mpl_get_row_bnds=function(e,t,r){var i,s,o,u;return e.phase!=3&&h("mpl_get_row_bnds: invalid call sequence"),1<=t&&t<=e.m||h("mpl_get_row_bnds: i = "+t+"; row number out of range"),i=e.row[t],o=i.con.lbnd==null?-n:i.lbnd,u=i.con.ubnd==null?+n:i.ubnd,o==-n&&u==+n?(s=md,o=u=0):u==+n?(s=gd,u=0):o==-n?(s=yd,o=0):i.con.lbnd!=i.con.ubnd?s=bd:s=wd,r(o,u),s},sb=e.mpl_get_mat_row=function(e,t,n,r){var i,s=0;e.phase!=3&&h("mpl_get_mat_row: invalid call sequence"),1<=t&&t<=e.m||h("mpl_get_mat_row: i = "+t+"; row number out of range");for(i=e.row[t].form;i!=null;i=i.next)p(i.var!=null),s++,p(s<=e.n),n!=null&&(n[s]=i.var.j),r!=null&&(r[s]=i.coef);return s},ob=e.mpl_get_row_c0=function(e,t){var n,r;return e.phase!=3&&h("mpl_get_row_c0: invalid call sequence"),1<=t&&t<=e.m||h("mpl_get_row_c0: i = "+t+"; row number out of range"),n=e.row[t],n.con.lbnd==null&&n.con.ubnd==null?r=-n.lbnd:r=0,r},ub=e.mpl_get_col_name=function(e,t){e.phase!=3&&h("mpl_get_col_name: invalid call sequence"),1<=t&&t<=e.n||h("mpl_get_col_name: j = "+t+"; column number out of range");var n=e.col[t].var.name,r=n.length;return p(r<=255),n+=zm(e,"[",e.col[t].memb.tuple),n.length==255&&(n=n.slice(0,252)+"..."),p(n.length<=255),n},ab=e.mpl_get_col_kind=function(e,t){var n;e.phase!=3&&h("mpl_get_col_kind: invalid call sequence"),1<=t&&t<=e.n||h("mpl_get_col_kind: j = "+t+"; column number out of range");switch(e.col[t].var.type){case xc:n=Td;break;case yc:n=Nd;break;case oc:n=Cd;break;default:p(e!=e)}return n},fb=e.mpl_get_col_bnds=function(e,t,r){var i,s,o,u;return e.phase!=3&&h("mpl_get_col_bnds: invalid call sequence"),1<=t&&t<=e.n||h("mpl_get_col_bnds: j = "+t+"; column number out of range"),i=e.col[t],o=i.var.lbnd==null?-n:i.lbnd,u=i.var.ubnd==null?+n:i.ubnd,o==-n&&u==+n?(s=md,o=u=0):u==+n?(s=gd,u=0):o==-n?(s=yd,o=0):i.var.lbnd!=i.var.ubnd?s=bd:s=wd,r(o,u),s},lb=e.mpl_has_solve_stmt=function(e){return e.phase!=3&&h("mpl_has_solve_stmt: invalid call sequence"),e.flag_s},cb=e.mpl_put_row_soln=function(e,t,n,r,i){p(e.phase==3),p(1<=t&&t<=e.m),e.row[t].stat=n,e.row[t].prim=r,e.row[t].dual=i},hb=e.mpl_put_col_soln=function(e,t,n,r,i){p(e.phase==3),p(1<=t&&t<=e.n),e.col[t].stat=n,e.col[t].prim=r,e.col[t].dual=i},pb=e.mpl_postsolve=function(e){return(e.phase!=3||!!e.flag_p)&&h("mpl_postsolve: invalid call sequence"),Iy(e),Vy(e),d("Model has been successfully processed"),e.phase};const vb=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],mb=["January","February","March","April","May","June","July","August","September","October","November","December"],Xw=1,Vw=2,$w=1,Jw=2,Kw=0,Qw=1e-10;if(Kw)function Ma(e,t){var n=e.n,r=e.f,i=e.u,s=e.p,o=e.c,u,a,f,l,c=0,h,v;p(o!=null);for(u=1;u<=n;u++)for(a=1;a<=n;a++){h=0;for(f=1;f<=n;f++)h+=r[Yw(e,u,f)]*o[Yw(e,f,a)];f=s[a],v=u<=f?i[Zw(e,u,f)]:0,l=Math.abs(h-v)/(1+Math.abs(v)),c<l&&(c=l)}c>1e-8&&d(t+": dmax = "+c+"; relative error too large")}var lE=e.glp_scale_prob=function(e,t){function n(e,t,n){var r,i,s;p(1<=t&&t<=e.m),i=1;for(r=e.row[t].ptr;r!=null;r=r.r_next){s=Math.abs(r.val),n&&(s*=r.row.rii*r.col.sjj);if(r.r_prev==null||i>s)i=s}return i}function r(e,t,n){var r,i,s;p(1<=t&&t<=e.m),i=1;for(r=e.row[t].ptr;r!=null;r=r.r_next){s=Math.abs(r.val),n&&(s*=r.row.rii*r.col.sjj);if(r.r_prev==null||i<s)i=s}return i}function i(e,t,n){var r,i,s;p(1<=t&&t<=e.n),i=1;for(r=e.col[t].ptr;r!=null;r=r.c_next){s=Math.abs(r.val),n&&(s*=r.row.rii*r.col.sjj);if(r.c_prev==null||i>s)i=s}return i}function s(e,t,n){var r,i,s;p(1<=t&&t<=e.n),i=1;for(r=e.col[t].ptr;r!=null;r=r.c_next){s=Math.abs(r.val),n&&(s*=r.row.rii*r.col.sjj);if(r.c_prev==null||i<s)i=s}return i}function o(e,t){var r,i,s;i=1;for(r=1;r<=e.m;r++){s=n(e,r,t);if(r==1||i>s)i=s}return i}function u(e,t){var n,i,s;i=1;for(n=1;n<=e.m;n++){s=r(e,n,t);if(n==1||i<s)i=s}return i}function a(e,t){var n,i,o,u;p(t==0||t==1);for(o=0;o<=1;o++)if(o==t)for(n=1;n<=e.m;n++)u=r(e,n,1),xt(e,n,Nt(e,n)/u);else for(i=1;i<=e.n;i++)u=s(e,i,1),Tt(e,i,Ct(e,i)/u)}function f(e,t){var o,u,a,f;p(t==0||t==1);for(a=0;a<=1;a++)if(a==t)for(o=1;o<=e.m;o++)f=n(e,o,1)*r(e,o,1),xt(e,o,Nt(e,o)/Math.sqrt(f));else for(u=1;u<=e.n;u++)f=i(e,u,1)*s(e,u,1),Tt(e,u,Ct(e,u)/Math.sqrt(f))}function l(e){var t,i,s;i=1;for(t=1;t<=e.m;t++){s=r(e,t,1)/n(e,t,1);if(t==1||i<s)i=s}return i}function c(e){var t,n,r;n=1;for(t=1;t<=e.n;t++){r=s(e,t,1)/i(e,t,1);if(t==1||n<r)n=r}return n}function v(e,t,n){var r,i,s=0,a;i=l(e)>c(e);for(r=1;r<=t;r++){a=s,s=u(e,1)/o(e,1);if(r>1&&s>n*a)break;f(e,i)}}function m(e,t){function n(e,t,n,r){return e+": min|aij| = "+t+"  max|aij| = "+n+"  ratio = "+r+""}var r,i,s;d("Scaling..."),kt(e),r=o(e,1),i=u(e,1),s=i/r,d(n(" A",r,i,s));if(r>=.1&&i<=10){d("Problem data seem to be well scaled");if(t&Yi)return}t&Ki&&(v(e,15,.9),r=o(e,1),i=u(e,1),s=i/r,d(n("GM",r,i,s))),t&Qi&&(a(e,l(e)>c(e)),r=o(e,1),i=u(e,1),s=i/r,d(n("EQ",r,i,s)));if(t&Gi){var f,h;for(f=1;f<=e.m;f++)xt(e,f,ya(Nt(e,f)));for(h=1;h<=e.n;h++)Tt(e,h,ya(Ct(e,h)));r=o(e,1),i=u(e,1),s=i/r,d(n("2N",r,i,s))}}t&~(Ki|Qi|Gi|Yi|Zi)&&h("glp_scale_prob: flags = "+t+"; invalid scaling options"),t&Zi&&(t=Ki|Qi|Yi),m(e,t)}})(typeof exports=="object"&&exports||this);