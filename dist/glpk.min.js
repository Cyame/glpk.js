/*! glpk.js - v4.47.0 - 2012-12-26
* https://github.com/hgourvest/glpk.js
* Copyright (c) 2012 Henri Gourvest; Licensed GPLv2 */
(function(e){function h(e){throw new Error(e)}function p(e){if(!e)throw new Error("assert")}function v(e,t){for(var n in t)e[n]=t[n]}function m(e,t,n,r,i){for(;i>0;t++,r++,i--)e[t]=n[r]}function g(e,t,n,r){for(;r>0;t++,r--)e[t]=n}function y(e,t,n){for(;n>0;t++,n--)e[t]={}}function b(){var e=new Date;return e.getTime()}function w(e,t){return(e-t)/1e3}function E(e,t,n,r){var i=new Array(n);m(i,0,e,t,n),i.sort(r),m(e,t,i,0,n)}function x(){return S}function N(e){return" 	\n\f\r".indexOf(e)>=0}function C(e){var t=typeof e=="string"?e.charCodeAt(0):-1;return t>=0&&t<=31||t==127}function k(e){var t=typeof e=="string"?e.charCodeAt(0):-1;return t>=65&&t<=90||t>=97&&t<=122}function L(e){var t=typeof e=="string"?e.charCodeAt(0):-1;return t>=65&&t<=90||t>=97&&t<=122||t>=48&&t<=57}function A(e){var t=typeof e=="string"?e.charCodeAt(0):-1;return t>=48&&t<=57}function O(e,t){return e.indexOf(t)}function M(e){return e.toLowerCase()}function D(e){e.magic=_,e.parms=null,e.tree=null,e.name=null,e.obj=null,e.dir=Hi,e.c0=0,e.m_max=100,e.n_max=200,e.m=e.n=0,e.nnz=0,e.row=new Array(1+e.m_max),e.col=new Array(1+e.n_max),e.r_tree={},e.c_tree={},e.valid=0,e.head=new Array(1+e.m_max),e.bfcp=null,e.bfd=null,e.pbs_stat=e.dbs_stat=is,e.obj_val=0,e.it_cnt=0,e.some=0,e.ipt_stat=is,e.ipt_obj=0,e.mip_stat=is,e.mip_obj=0}function et(e){e.magic=1061109567,e.parms=null,p(e.tree==null),e.row=null,e.col=null,e.r_tree=null,e.c_tree=null,e.head=null,e.bfcp=null,e.bfd=null}function en(e,t,n,r){var i=e.m,s=e.n,o,u,a,f,l,c,d,v,m,g,y,b,w;t!=ts&&t!=ns&&t!=rs&&h("glp_check_kkt: sol = "+t+"; invalid solution indicator"),n!=Co&&n!=ko&&n!=Lo&&n!=Ao&&n!=Oo&&h("glp_check_kkt: cond = "+n+"; invalid condition indicator "),b=w=0,c=d=0;if(n==Co)for(f=1;f<=i;f++){o=e.row[f],m=g=0,t==ts?y=o.prim:t==ns?y=o.pval:t==rs?y=o.mipx:p(t!=t),y>=0?m+=y:g-=y;for(a=o.ptr;a!=null;a=a.r_next)u=a.col,t==ts?y=-a.val*u.prim:t==ns?y=-a.val*u.pval:t==rs?y=-a.val*u.mipx:p(t!=t),y>=0?m+=y:g-=y;v=Math.abs(m-g),b<v&&(b=v,c=f),v/=1+m+g,w<v&&(w=v,d=f)}else if(n==ko){for(f=1;f<=i;f++)o=e.row[f],t==ts?y=o.prim:t==ns?y=o.pval:t==rs?y=o.mipx:p(t!=t),(o.type==Ri||o.type==zi||o.type==Wi)&&y<o.lb&&(v=o.lb-y,b<v&&(b=v,c=f),v/=1+Math.abs(o.lb),w<v&&(w=v,d=f)),(o.type==Ui||o.type==zi||o.type==Wi)&&y>o.ub&&(v=y-o.ub,b<v&&(b=v,c=f),v/=1+Math.abs(o.ub),w<v&&(w=v,d=f));for(l=1;l<=s;l++)u=e.col[l],t==ts?y=u.prim:t==ns?y=u.pval:t==rs?y=u.mipx:p(t!=t),(u.type==Ri||u.type==zi||u.type==Wi)&&y<u.lb&&(v=u.lb-y,b<v&&(b=v,c=i+l),v/=1+Math.abs(u.lb),w<v&&(w=v,d=i+l)),(u.type==Ui||u.type==zi||u.type==Wi)&&y>u.ub&&(v=y-u.ub,b<v&&(b=v,c=i+l),v/=1+Math.abs(u.ub),w<v&&(w=v,d=i+l))}else if(n==Lo)for(l=1;l<=s;l++){u=e.col[l],m=g=0,t==ts?y=u.dual-u.coef:t==ns?y=u.dval-u.coef:p(t!=t),y>=0?m+=y:g-=y;for(a=u.ptr;a!=null;a=a.c_next)o=a.row,t==ts?y=a.val*o.dual:t==ns?y=a.val*o.dval:p(t!=t),y>=0?m+=y:g-=y;v=Math.abs(m-g),b<v&&(b=v,c=i+l),v/=1+m+g,w<v&&(w=v,d=i+l)}else if(n==Ao){for(f=1;f<=i;f++)o=e.row[f],t==ts?y=o.dual:t==ns?y=o.dval:p(t!=t),e.dir==Hi?y=+y:e.dir==Bi?y=-y:p(e!=e),(o.type==qi||o.type==Ri)&&y<0&&(v=-y,b<v&&(b=w=v,c=d=f)),(o.type==qi||o.type==Ui)&&y>0&&(v=+y,b<v&&(b=w=v,c=d=f));for(l=1;l<=s;l++)u=e.col[l],t==ts?y=u.dual:t==ns?y=u.dval:p(t!=t),e.dir==Hi?y=+y:e.dir==Bi?y=-y:p(e!=e),(u.type==qi||u.type==Ri)&&y<0&&(v=-y,b<v&&(b=w=v,c=d=i+l)),(u.type==qi||u.type==Ui)&&y>0&&(v=+y,b<v&&(b=w=v,c=d=i+l))}else p(n!=n);r(b,c,w,d)}function on(e){var t={};sn(e,t),ur(e.bfd,t)}function wn(e,t,n,r,i,s,o,u){var a,f,l,c,d=0,v,m,g,y,b;e.pbs_stat==is&&h("glp_analyze_row: primal basic solution components are undefined"),e.dbs_stat!=ss&&h("glp_analyze_row: basic solution is not dual feasible"),0<=t&&t<=e.n||h("glp_analyze_row: len = "+t+"; invalid row length"),g=0;for(a=1;a<=t;a++)f=n[a],1<=f&&f<=e.m+e.n||h("glp_analyze_row: ind["+a+"] = "+f+"; row/column index out of range"),f<=e.m?(e.row[f].stat==Xi&&h("glp_analyze_row: ind["+a+"] = "+f+"; basic auxiliary variable is not allowed"),v=e.row[f].prim):(e.col[f-e.m].stat==Xi&&h("glp_analyze_row: ind["+a+"] = "+f+"; basic structural variable is not allowed"),v=e.col[f-e.m].prim),g+=r[a]*v;if(i==Ri){if(g>=s)return d=1,d;l=1}else if(i==Ui){if(g<=s)return d=1,d;l=-1}else h("glp_analyze_row: type = "+i+"; invalid parameter");return y=s-g,c=bn(e,t,n,r,l,o),c==0?(d=2,d):(f=n[c],p(1<=f&&f<=e.m+e.n),f<=e.m?v=e.row[f].prim:v=e.col[f-e.m].prim,p(r[c]!=0),m=y/r[c],f<=e.m?b=e.row[f].dual*m:b=e.col[f-e.m].dual*m,u(c,v,m,g,y,b),d)}function xn(e){return e.reason}function Tn(e){return e.mip}function Nn(e,t){t(e.a_cnt,e.n_cnt,e.t_cnt)}function Cn(e){var t=e.curr;return t==null?0:t.p}function kn(e,t){function n(){h("glp_ios_next_node: p = "+t+"; invalid subproblem reference number")}var r;return t==0?r=e.head:(1<=t&&t<=e.nslots||n(),r=e.slot[t].node,r==null&&n(),r.count!=0&&h("glp_ios_next_node: p = "+t+"; subproblem not in the active list"),r=r.next),r==null?0:r.p}function Ln(e,t){function r(){h("glp_ios_prev_node: p = "+t+"; invalid subproblem reference number")}var n;return t==0?n=e.tail:(1<=t&&t<=e.nslots||r(),n=e.slot[t].node,n==null&&r(),n.count!=0&&h("glp_ios_prev_node: p = "+t+"; subproblem not in the active list"),n=n.prev),n==null?0:n.p}function An(e,t){function r(){h("glp_ios_up_node: p = "+t+"; invalid subproblem reference number")}var n;return 1<=t&&t<=e.nslots||r(),n=e.slot[t].node,n==null&&r(),n=n.up,n==null?0:n.p}function On(e,t){function r(){h("glp_ios_node_level: p = "+t+"; invalid subproblem reference number")}var n;return 1<=t&&t<=e.nslots||r(),n=e.slot[t].node,n==null&&r(),n.level}function Mn(e,t){function r(){h("glp_ios_node_bound: p = "+t+"; invalid subproblem reference number")}var n;return 1<=t&&t<=e.nslots||r(),n=e.slot[t].node,n==null&&r(),n.bound}function _n(e){return zr(e)}function Dn(e){return Wr(e)}function Pn(e,t){function r(){h("glp_ios_node_level: p = "+t+"; invalid subproblem reference number")}var n;return 1<=t&&t<=e.nslots||r(),n=e.slot[t].node,n==null&&r(),n.data}function Hn(e,t,n){var r;1<=t&&t<=e.mip.m||h("glp_ios_row_attr: i = "+t+"; row number out of range"),r=e.mip.row[t],n.level=r.level,n.origin=r.origin,n.klass=r.klass}function Bn(e){return e.reason!=Zs&&h("glp_ios_pool_size: operation not allowed"),p(e.local!=null),e.local.size}function jn(e,t,n,r,i,s,o,u,a){var f;return e.reason!=Zs&&h("glp_ios_add_row: operation not allowed"),p(e.local!=null),f=$r(e,e.local,t,n,r,i,s,o,u,a),f}function Fn(e,t){e.reason!=Zs&&h("glp_ios_del_row: operation not allowed"),Kr(e.local,t)}function In(e){e.reason!=Zs&&h("glp_ios_clear_pool: operation not allowed"),Qr(e.local)}function qn(e,t){return 1<=t&&t<=e.mip.n||h("glp_ios_can_branch: j = "+t+"; column number out of range"),e.non_int[t]}function Rn(e,t,n){1<=t&&t<=e.mip.n||h("glp_ios_branch_upon: j = "+t+"; column number out of range"),n!=io&&n!=so&&n!=ro&&h("glp_ios_branch_upon: sel = "+n+": invalid branch selection flag"),e.non_int[t]||h("glp_ios_branch_upon: j = "+t+"; variable cannot be used to branch upon"),e.br_var!=0&&h("glp_ios_branch_upon: branching variable already chosen"),e.br_var=t,e.br_sel=n}function Un(e,t){function r(){h("glp_ios_select_node: p = "+t+"; invalid subproblem reference number")}var n;1<=t&&t<=e.nslots||r(),n=e.slot[t].node,n==null&&r(),n.count!=0&&h("glp_ios_select_node: p = "+t+"; subproblem not in the active list"),e.next_p!=0&&h("glp_ios_select_node: subproblem already selected"),e.next_p=t}function zn(e,t){var n=e.mip,r=e.orig_m,i=e.n,s,o,u;p(n.m>=r),p(n.n==i),u=n.c0;for(o=1;o<=i;o++){var a=n.col[o];if(a.kind==Fi&&t[o]!=Math.floor(t[o]))return 1;u+=a.coef*t[o]}if(n.mip_stat==ss)switch(n.dir){case Hi:if(u>=e.mip.mip_obj)return 1;break;case Bi:if(u<=e.mip.mip_obj)return 1;break;default:p(n!=n)}e.parm.msg_lev>=vs&&d("Solution found by heuristic: "+u+""),n.mip_stat=ss,n.mip_obj=u;for(o=1;o<=i;o++)n.col[o].mipx=t[o];for(s=1;s<=r;s++){var f=n.row[s],l;f.mipx=0;for(l=f.ptr;l!=null;l=l.r_next)f.mipx+=l.val*l.col.mipx}return 0}function Wn(e){e.parm.msg_lev>=gs&&d("The search is prematurely terminated due to application request"),e.stop=1}function or(){var e={};return e.valid=0,e.type=ls,e.fhv=null,e.lpf=null,e.lu_size=0,e.piv_tol=.1,e.piv_lim=4,e.suhl=1,e.eps_tol=1e-15,e.max_gro=1e10,e.nfs_max=100,e.upd_tol=1e-6,e.nrs_max=100,e.rs_size=1e3,e.upd_lim=-1,e.upd_cnt=0,e}function ur(e,t){p(e!=null),e.type=t.type,e.lu_size=t.lu_size,e.piv_tol=t.piv_tol,e.piv_lim=t.piv_lim,e.suhl=t.suhl,e.eps_tol=t.eps_tol,e.max_gro=t.max_gro,e.nfs_max=t.nfs_max,e.upd_tol=t.upd_tol,e.nrs_max=t.nrs_max,e.rs_size=t.rs_size}function ar(e,t,n,r,i){var s,o,u;p(e!=null),p(1<=t&&t<=a),e.valid=0,o=0;switch(e.type){case ls:e.lpf=null,e.fhv==null&&(e.fhv=xr(),o=1);break;case cs:case hs:e.fhv=null,e.lpf==null&&(e.lpf=Ca(),o=1);break;default:p(e!=e)}e.fhv!=null?s=e.fhv.luf:e.lpf!=null?s=e.lpf.luf:p(e!=e),o&&(s.new_sva=e.lu_size),s.piv_tol=e.piv_tol,s.piv_lim=e.piv_lim,s.suhl=e.suhl,s.eps_tol=e.eps_tol,s.max_gro=e.max_gro,e.fhv!=null&&(o&&(e.fhv.hh_max=e.nfs_max),e.fhv.upd_tol=e.upd_tol),e.lpf!=null&&(o&&(e.lpf.n_max=e.nrs_max),o&&(e.lpf.v_size=e.rs_size));if(e.fhv!=null)switch(Tr(e.fhv,t,r,i)){case 0:break;case yr:return u=tr,u;case br:return u=nr,u;default:p(e!=e)}else if(e.lpf!=null)switch(ka(e.lpf,t,n,r,i)){case 0:switch(e.type){case cs:e.lpf.scf.t_opt=aE;break;case hs:e.lpf.scf.t_opt=fE;break;default:p(e!=e)}break;case Ta:return u=tr,u;case LPF_ECOND:return u=nr,u;default:p(e!=e)}else p(e!=e);return e.valid=1,e.upd_cnt=0,u=0,u}function fr(e,t){p(e!=null),p(e.valid),e.fhv!=null?Cr(e.fhv,t):e.lpf!=null?Da(e.lpf,t):p(e!=e)}function lr(e,t){p(e!=null),p(e.valid),e.fhv!=null?kr(e.fhv,t):e.lpf!=null?Pa(e.lpf,t):p(e!=e)}function cr(e,t,n,r,i,s,o){var u;p(e!=null),p(e.valid);if(e.fhv!=null)switch(Lr(e.fhv,t,r,i,s,o)){case 0:break;case yr:return e.valid=0,u=tr,u;case wr:return e.valid=0,u=rr,u;case Er:return e.valid=0,u=ir,u;case Sr:return e.valid=0,u=sr,u;default:p(e!=e)}else if(e.lpf!=null)switch(Ba(e.lpf,t,n,r,i,s,o)){case 0:break;case Ta:return e.valid=0,u=tr,u;case LPF_ELIMIT:return e.valid=0,u=ir,u;default:p(e!=e)}else p(e!=e);return e.upd_cnt++,u=0,u}function hr(e){return p(e!=null),p(e.valid),e.upd_cnt}function pr(e,t){p(e!=null),p(t!=null)}function xr(){var e;return e={},e.m_max=e.m=0,e.valid=0,e.luf=$l(),e.hh_max=50,e.hh_nfs=0,e.hh_ind=e.hh_ptr=e.hh_len=null,e.p0_row=e.p0_col=null,e.cc_ind=null,e.cc_val=null,e.upd_tol=1e-6,e.nnz_h=0,e}function Tr(e,t,n,r){var i;t<1&&h("fhv_factorize: m = "+t+"; invalid parameter"),t>a&&h("fhv_factorize: m = "+t+"; matrix too big"),e.m=t,e.valid=0,e.hh_ind==null&&(e.hh_ind=new Array(1+e.hh_max)),e.hh_ptr==null&&(e.hh_ptr=new Array(1+e.hh_max)),e.hh_len==null&&(e.hh_len=new Array(1+e.hh_max)),e.m_max<t&&(e.m_max=t+100,e.p0_row=new Array(1+e.m_max),e.p0_col=new Array(1+e.m_max),e.cc_ind=new Array(1+e.m_max),e.cc_val=new Array(1+e.m_max));switch(rc(e.luf,t,n,r)){case 0:break;case Xl:return i=yr,i;case Vl:return i=br,i;default:p(e!=e)}return e.valid=1,e.hh_nfs=0,m(e.p0_row,1,e.luf.pp_row,1,t),m(e.p0_col,1,e.luf.pp_col,1,t),e.nnz_h=0,i=0,i}function Nr(e,t,n){var r=e.hh_nfs,i=e.hh_ind,s=e.hh_ptr,o=e.hh_len,u=e.luf.sv_ind,a=e.luf.sv_val,f,l,c,p,d,v;e.valid||h("fhv_h_solve: the factorization is not valid");if(!t)for(l=1;l<=r;l++){f=i[l],v=n[f],c=s[l],p=c+o[l]-1;for(d=c;d<=p;d++)v-=a[d]*n[u[d]];n[f]=v}else for(l=r;l>=1;l--){f=i[l],v=n[f];if(v==0)continue;c=s[l],p=c+o[l]-1;for(d=c;d<=p;d++)n[u[d]]-=a[d]*v}}function Cr(e,t){var n=e.luf.pp_row,r=e.luf.pp_col,i=e.p0_row,s=e.p0_col;e.valid||h("fhv_ftran: the factorization is not valid"),e.luf.pp_row=i,e.luf.pp_col=s,ic(e.luf,0,t),e.luf.pp_row=n,e.luf.pp_col=r,Nr(e,0,t),sc(e.luf,0,t)}function kr(e,t){var n=e.luf.pp_row,r=e.luf.pp_col,i=e.p0_row,s=e.p0_col;e.valid||h("fhv_btran: the factorization is not valid"),sc(e.luf,1,t),Nr(e,1,t),e.luf.pp_row=i,e.luf.pp_col=s,ic(e.luf,1,t),e.luf.pp_row=n,e.luf.pp_col=r}function Lr(e,t,n,r,i,s){var o=e.m,u=e.luf,a=u.vr_ptr,f=u.vr_len,l=u.vr_cap,c=u.vr_piv,d=u.vc_ptr,v=u.vc_len,g=u.vc_cap,y=u.pp_row,b=u.pp_col,w=u.qq_row,E=u.qq_col,S=u.sv_ind,x=u.sv_val,T=u.work,N=u.eps_tol,C=e.hh_ind,k=e.hh_ptr,L=e.hh_len,A=e.p0_row,O=e.p0_col,M=e.cc_ind,_=e.cc_val,D=e.upd_tol,P,H,B,j,F,I,q,R,U,z,W,X,V,$,J,K,Q,G,Y;e.valid||h("fhv_update_it: the factorization is not valid"),1<=t&&t<=o||h("fhv_update_it: j = "+t+"; column number out of range");if(e.hh_nfs==e.hh_max)return e.valid=0,Q=Er,Q;for(P=1;P<=o;P++)_[P]=0;for(R=1;R<=n;R++)P=r[i+R],1<=P&&P<=o||h("fhv_update_it: ind["+R+"] = "+P+"; row number out of range"),_[P]!=0&&h("fhv_update_it: ind["+R+"] = "+P+"; duplicate row index not allowed"),s[R]==0&&h("fhv_update_it: val["+R+"] = "+s[R]+"; zero element not allowed"),_[P]=s[R];e.luf.pp_row=A,e.luf.pp_col=O,ic(e.luf,0,_),e.luf.pp_row=y,e.luf.pp_col=b,Nr(e,0,_),n=0;for(P=1;P<=o;P++){Y=_[P];if(Y==0||Math.abs(Y)<N)continue;n++,M[n]=P,_[n]=Y}F=d[t],I=F+v[t]-1;for(q=F;q<=I;q++){P=S[q],H=a[P],B=H+f[P]-1;for(j=H;S[j]!=t;j++);p(j<=B),S[j]=S[B],x[j]=x[B],f[P]--}u.nnz_v-=v[t],v[t]=0,U=w[t],z=0;for(K=1;K<=n;K++){P=M[K];if(f[P]+1>l[P]&&Kl(u,P,f[P]+10))return e.valid=0,u.new_sva=u.sv_size+u.sv_size,p(u.new_sva>u.sv_size),Q=Sr,Q;j=a[P]+f[P],S[j]=t,x[j]=_[K],f[P]++,z<b[P]&&(z=b[P])}if(g[t]<n&&Ql(u,t,n))return e.valid=0,u.new_sva=u.sv_size+u.sv_size,p(u.new_sva>u.sv_size),Q=Sr,Q;q=d[t],m(S,q,M,1,n),m(x,q,_,1,n),v[t]=n,u.nnz_v+=n;if(U>z)return e.valid=0,Q=yr,Q;P=y[U],t=E[U];for(R=U;R<z;R++)y[R]=y[R+1],b[y[R]]=R,E[R]=E[R+1],w[E[R]]=R;y[z]=P,b[P]=z,E[z]=t,w[t]=z;for(t=1;t<=o;t++)T[t]=0;H=a[P],B=H+f[P]-1;for(j=H;j<=B;j++){t=S[j],T[t]=x[j],F=d[t],I=F+v[t]-1;for(q=F;S[q]!=P;q++);p(q<=I),S[q]=S[I],x[q]=x[I],v[t]--}u.nnz_v-=f[P],f[P]=0,e.hh_nfs++,C[e.hh_nfs]=P,L[e.hh_nfs]=0;if(u.sv_end-u.sv_beg<z-U){Jl(u);if(u.sv_end-u.sv_beg<z-U)return e.valid=u.valid=0,u.new_sva=u.sv_size+u.sv_size,p(u.new_sva>u.sv_size),Q=Sr,Q}for(R=U;R<z;R++){W=y[R],X=E[R];if(T[X]==0)continue;G=T[X]/c[W],V=a[W],$=V+f[W]-1;for(J=V;J<=$;J++)T[S[J]]-=G*x[J];u.sv_end--,S[u.sv_end]=W,x[u.sv_end]=G,L[e.hh_nfs]++}L[e.hh_nfs]==0?e.hh_nfs--:(k[e.hh_nfs]=u.sv_end,e.nnz_h+=L[e.hh_nfs]),c[P]=T[E[z]],n=0;for(R=z+1;R<=o;R++){t=E[R],Y=T[t];if(Math.abs(Y)<N)continue;if(v[t]+1>g[t]&&Ql(u,t,v[t]+10))return e.valid=0,u.new_sva=u.sv_size+u.sv_size,p(u.new_sva>u.sv_size),Q=Sr,Q;q=d[t]+v[t],S[q]=P,x[q]=Y,v[t]++,n++,M[n]=t,_[n]=Y}if(l[P]<n&&Kl(u,P,n))return e.valid=0,u.new_sva=u.sv_size+u.sv_size,p(u.new_sva>u.sv_size),Q=Sr,Q;j=a[P],m(S,j,M,1,n),m(x,j,_,1,n),f[P]=n,u.nnz_v+=n,Y=0,P=y[z],H=a[P],B=H+f[P]-1;for(j=H;j<=B;j++)Y<Math.abs(x[j])&&(Y=Math.abs(x[j]));t=E[z],F=d[t],I=F+v[t]-1;for(q=F;q<=I;q++)Y<Math.abs(x[q])&&(Y=Math.abs(x[q]));return Math.abs(c[P])<D*Y?(e.valid=0,Q=wr,Q):(Q=0,Q)}function Ar(e,t){function n(e,t,n,r,i,s){var o,u,a,f,l,c,d,v,m,g,y,b,w,E,S,x,T=0,N,C,k;e>0&&t>0||h("triang: m = "+e+"; n = "+t+"; invalid dimension"),o=new Array(1+(e>=t?e:t)),u=new Array(1+e),a=new Array(1+t),f=new Array(1+e),l=new Array(1+e),d=new Array(1+t),v=new Array(1+t),N=u;for(S=0;S<=e;S++)N[S]=0;for(g=1;g<=t;g++)S=r(n,-g,o),p(0<=S&&S<=e),d[g]=N[S],N[S]=g;c=0;for(S=0;S<=e;S++)for(g=N[S];g!=0;g=d[g])v[g]=c,c=g;b=0;for(g=c;g!=0;g=v[g])d[g]=b,b=g;for(S=0;S<=t;S++)a[S]=0;for(m=1;m<=e;m++)u[m]=S=r(n,+m,o),p(0<=S&&S<=t),f[m]=0,l[m]=a[S],l[m]!=0&&(f[l[m]]=m),a[S]=m;for(m=1;m<=e;m++)i[m]=0;for(g=1;g<=t;g++)s[g]=0;w=1,E=t;while(w<=E){m=a[1];if(m!=0){p(u[m]==1),g=0,x=r(n,+m,o),p(0<=x&&x<=t);for(;x>=1;x--)b=o[x],p(1<=b&&b<=t),s[b]==0&&(p(g==0),g=b);p(g!=0),i[m]=s[g]=w,w++,T++}else g=c,p(g!=0),s[g]=E,E--;d[g]==0?c=v[g]:v[d[g]]=v[g],v[g]!=0&&(d[v[g]]=d[g]),x=r(n,-g,o),p(0<=x&&x<=e);for(;x>=1;x--)m=o[x],p(1<=m&&m<=e),S=u[m],p(S>=1),f[m]==0?a[S]=l[m]:l[f[m]]=l[m],l[m]!=0&&(f[l[m]]=f[m]),u[m]=--S,f[m]=0,l[m]=a[S],l[m]!=0&&(f[l[m]]=m),a[S]=m}for(m=1;m<=e;m++)i[m]==0&&(i[m]=w++);for(g=1;g<=t;g++)p(s[g]!=0);C=u;for(y=1;y<=e;y++)C[y]=0;for(m=1;m<=e;m++)y=i[m],p(1<=y&&y<=e),p(C[y]==0),C[y]=m;k=a;for(b=1;b<=t;b++)k[b]=0;for(g=1;g<=t;g++)b=s[g],p(1<=b&&b<=t),p(k[b]==0),k[b]=g;for(y=1;y<=T;y++){var L=0;m=C[y],x=r(n,+m,o),p(0<=x&&x<=t);for(;x>=1;x--)g=o[x],p(1<=g&&g<=t),b=s[g],b<=T&&p(b<=y),b==y&&(p(!L),L=1);p(L)}return T}function r(e,t,n){var r=rf(e),i=sf(e),s,o,u,a=0;if(t>0){s=+t,p(1<=s&&s<=r),u=yf(e,s,n,null);for(t=1;t<=u;t++)vf(e,n[t],function(e){e!=Uo&&(n[++a]=r+n[t])});cf(e,s,function(e){e!=Uo&&(n[++a]=s)})}else{o=-t,p(1<=o&&o<=r+i);function f(t){t!=Uo&&(o<=r?n[++a]=o:a=bf(e,o-r,n,null))}o<=r?cf(e,o,f):vf(e,o-r,f)}return a}function i(e){var t=rf(e),i=sf(e),s,o,u,a,f,l,c,h,v,m=new Array(1+t+i);d("Constructing initial basis...");if(t==0||i==0){Ot(e);return}l=new Array(1+t),c=new Array(1+t+i),f=n(t,t+i,e,r,l,c),Cl(e,Pu)>=3&&d("Size of triangular part = "+f+""),h=new Array(1+t),v=new Array(1+t+i);for(s=1;s<=t;s++)h[l[s]]=s;for(o=1;o<=t+i;o++)v[c[o]]=o;for(a=1;a<=t+i;a++)m[a]=-1;for(u=1;u<=f;u++)o=v[u],m[o]=Zo;for(u=f+1;u<=t;u++)s=h[u],p(1<=s&&s<=t),p(c[s]>f),m[s]=Zo;for(a=1;a<=t+i;a++)if(m[a]!=Zo){function g(e,t,n){switch(e){case Fo:m[a]=nu;break;case Io:m[a]=eu;break;case qo:m[a]=tu;break;case Ro:m[a]=Math.abs(t)<=Math.abs(n)?eu:tu;break;case Uo:m[a]=ru;break;default:p(e!=e)}}a<=t?cf(e,a,g):vf(e,a-t,g)}for(a=1;a<=t+i;a++)a<=t?Cf(e,a,m[a]):kf(e,a-t,m[a])}t!=0&&h("glp_adv_basis: flags = "+t+"; invalid flags"),e.m==0||e.n==0?Ot(e):i(e)}function Or(e){function _(e,t){return e.q<t.q?-1:e.q>t.q?1:0}function D(e,t,n,r){var i,s=yt(e,t,n,r),o=0;for(i=1;i<=s;i++)o<Math.abs(r[i])&&(o=Math.abs(r[i]));o==0&&(o=1);for(i=1;i<=s;i++)r[i]/=o;return s}var t,r,i,s,o,u,a,f,l,c,h,v,m,g,y,b,w,S,x,T,N,C,k,L,A,O,M;d("Constructing initial basis..."),o=st(e),u=ot(e),t=new Array(1+u),x=new Array(1+o),T=new Array(1+o),O=new Array(1+o),N=new Array(1+o),M=new Array(1+o);for(a=1;a<=o;a++)ft(e,a)!=zi?Lt(e,a,Ki):Math.abs(lt(e,a))<=Math.abs(ct(e,a))?Lt(e,a,Vi):Lt(e,a,$i);for(f=1;f<=u;f++)ht(e,f)!=zi?At(e,f,Ki):Math.abs(pt(e,f))<=Math.abs(dt(e,f))?At(e,f,Vi):At(e,f,$i);g=0,r=0;for(f=1;f<=u;f++)w=ht(e,f),w==qi&&(g++,t[r+g].j=f,t[r+g].q=0);y=0,i=r+g;for(f=1;f<=u;f++)w=ht(e,f),w==Ri?(y++,t[i+y].j=f,t[i+y].q=+pt(e,f)):w==Ui&&(y++,t[i+y].j=f,t[i+y].q=-dt(e,f));b=0,s=i+y;for(f=1;f<=u;f++)w=ht(e,f),w==zi&&(b++,t[s+b].j=f,t[s+b].q=pt(e,f)-dt(e,f));k=0;for(f=1;f<=u;f++)A=Math.abs(vt(e,f)),k<A&&(k=A);L=k==0?1:1e3*k;switch(it(e)){case Hi:A=1;break;case Bi:A=-1;break;default:p(e!=e)}for(c=1;c<=g+y+b;c++)f=t[c].j,t[c].q+=A*vt(e,f)/L;E(t,r+1+g,_);for(c=1;c<g;c++)p(t[r+c].q<=t[r+c+1].q);E(t,i+1+y,_);for(c=1;c<y;c++)p(t[i+c].q<=t[i+c+1].q);E(t,s+1+b,_);for(c=1;c<b;c++)p(t[s+c].q<=t[s+c+1].q);for(a=1;a<=o;a++)w=ft(e,a),w!=Wi?(Lt(e,a,Xi),x[a]=1,T[a]=1):(x[a]=0,T[a]=0),O[a]=+n;for(c=1;c<=g+y+b;c++){l=t[c].j,S=D(e,l,N,M),C=0,v=0;for(m=1;m<=S;m++)h=N[m],T[h]==0&&C<Math.abs(M[m])&&(C=Math.abs(M[m]),v=h);if(C>=.99){At(e,l,Xi),x[v]=1,O[v]=C;for(m=1;m<=S;m++)h=N[m],M[m]!=0&&T[h]++;continue}for(m=1;m<=S;m++){h=N[m];if(Math.abs(M[m])>.01*O[h])break}if(m<=S)continue;C=0,v=0;for(m=1;m<=S;m++)h=N[m],x[h]==0&&C<Math.abs(M[m])&&(C=Math.abs(M[m]),v=h);if(C==0)continue;At(e,l,Xi),x[v]=1,O[v]=C;for(m=1;m<=S;m++)h=N[m],M[m]!=0&&T[h]++}for(a=1;a<=o;a++)x[a]==0&&Lt(e,a,Xi)}function Mr(e){e.m==0||e.n==0?Ot(e):Or(e)}function _r(e,t){var r=Dr(e),i={};return e.slot[r].node=i,i.p=r,i.up=t,i.level=t==null?0:t.level+1,i.count=0,i.b_ptr=null,i.s_ptr=null,i.r_ptr=null,i.solved=0,i.lp_obj=t==null?e.mip.dir==Hi?-n:+n:t.lp_obj,i.bound=t==null?e.mip.dir==Hi?-n:+n:t.bound,i.br_var=0,i.br_val=0,i.ii_cnt=0,i.ii_sum=0,i.changed=0,e.parm.cb_size==0?i.data=null:i.data={},i.temp=null,i.prev=e.tail,i.next=null,e.head==null?e.head=i:e.tail.next=i,e.tail=i,e.a_cnt++,e.n_cnt++,e.t_cnt++,t==null?p(r==1):t.count++,i}function Dr(e){var t;if(e.avail==0){var n=e.nslots,r=e.slot;n==0?e.nslots=20:(e.nslots=n+n,p(e.nslots>n)),e.slot=new Array(1+e.nslots),y(e.slot,0,1+e.nslots),r!=null&&m(e.slot,1,r,1,n);for(t=e.nslots;t>n;t--)e.slot[t].node=null,e.slot[t].next=e.avail,e.avail=t}return t=e.avail,e.avail=e.slot[t].next,p(e.slot[t].node==null),e.slot[t].next=0,t}function Pr(e,t){var n=e.m,r=e.n,i,s,o;p(e.tree==null),e.tree=i={},i.n=r,i.orig_m=n,i.orig_type=new Array(1+n+r),i.orig_lb=new Array(1+n+r),i.orig_ub=new Array(1+n+r),i.orig_stat=new Array(1+n+r),i.orig_prim=new Array(1+n+r),i.orig_dual=new Array(1+n+r);for(s=1;s<=n;s++){var u=e.row[s];i.orig_type[s]=u.type,i.orig_lb[s]=u.lb,i.orig_ub[s]=u.ub,i.orig_stat[s]=u.stat,i.orig_prim[s]=u.prim,i.orig_dual[s]=u.dual}for(o=1;o<=r;o++){var a=e.col[o];i.orig_type[n+o]=a.type,i.orig_lb[n+o]=a.lb,i.orig_ub[n+o]=a.ub,i.orig_stat[n+o]=a.stat,i.orig_prim[n+o]=a.prim,i.orig_dual[n+o]=a.dual}return i.orig_obj=e.obj_val,i.nslots=0,i.avail=0,i.slot=null,i.head=i.tail=null,i.a_cnt=i.n_cnt=i.t_cnt=0,i.root_m=0,i.root_type=null,i.root_lb=i.root_ub=null,i.root_stat=null,i.curr=null,i.mip=e,i.non_int=new Array(1+r),g(i.non_int,1,0,r),i.pred_m=i.pred_max=0,i.pred_type=null,i.pred_lb=i.pred_ub=null,i.pred_stat=null,i.local=Vr(i),i.mir_gen=null,i.clq_gen=null,i.pcost=null,i.iwrk=new Array(1+r),i.dwrk=new Array(1+r),i.parm=t,i.tm_beg=b(),i.tm_lag=0,i.sol_cnt=0,i.reason=0,i.reopt=0,i.reinv=0,i.br_var=0,i.br_sel=0,i.child=0,i.next_p=0,i.stop=0,_r(i,null),i}function Hr(e,t){var n=e.mip,r,i,s,o,u,a;p(1<=t&&t<=e.nslots),r=e.slot[t].node,p(r!=null),p(r.count==0),p(e.curr==null),e.curr=r,i=e.slot[1].node,p(i!=null);if(r==i)return;p(n.m==e.root_m),r.temp=null;for(;r!=null;r=r.up)r.up==null?p(r==i):r.up.temp=r;for(r=i;r!=null;r=r.temp){var f=n.m,l=n.n;if(r.temp==null){var c,h;e.pred_m=f;if(e.pred_max<f+l){var d=f+l+100;e.pred_max=d,e.pred_type=new Array(1+d),e.pred_lb=new Array(1+d),e.pred_ub=new Array(1+d),e.pred_stat=new Array(1+d)}for(c=1;c<=f;c++){var v=n.row[c];e.pred_type[c]=v.type,e.pred_lb[c]=v.lb,e.pred_ub[c]=v.ub,e.pred_stat[c]=v.stat}for(h=1;h<=l;h++){var m=n.col[h];e.pred_type[n.m+h]=m.type,e.pred_lb[n.m+h]=m.lb,e.pred_ub[n.m+h]=m.ub,e.pred_stat[n.m+h]=m.stat}}for(s=r.b_ptr;s!=null;s=s.next)s.k<=f?U(n,s.k,s.type,s.lb,s.ub):z(n,s.k-f,s.type,s.lb,s.ub);for(u=r.s_ptr;u!=null;u=u.next)u.k<=f?Lt(n,u.k,u.stat):At(n,u.k-f,u.stat);if(r.r_ptr!=null){var g,y,b;y=new Array(1+l),b=new Array(1+l);for(o=r.r_ptr;o!=null;o=o.next){c=F(n,1),q(n,c,o.name),p(n.row[c].level==0),n.row[c].level=r.level,n.row[c].origin=o.origin,n.row[c].klass=o.klass,U(n,c,o.type,o.lb,o.ub),g=0;for(a=o.ptr;a!=null;a=a.next)g++,y[g]=a.j,b[g]=a.val;X(n,c,g,y,b),xt(n,c,o.rii),Lt(n,c,o.stat)}}}r=e.curr;while(r.b_ptr!=null)s=r.b_ptr,r.b_ptr=s.next;while(r.s_ptr!=null)u=r.s_ptr,r.s_ptr=u.next;while(r.r_ptr!=null){o=r.r_ptr,r.r_ptr=o.next,p(o.name==null);while(o.ptr!=null)a=o.ptr,o.ptr=a.next}}function Br(e){var t=e.mip,n=t.m,r=t.n,i=e.curr;p(i!=null);var s,o,u,a;if(i.up==null){p(i.p==1),p(e.root_m==0),p(e.root_type==null),p(e.root_lb==null),p(e.root_ub==null),p(e.root_stat==null),e.root_m=n,e.root_type=new Array(1+n+r),e.root_lb=new Array(1+n+r),e.root_ub=new Array(1+n+r),e.root_stat=new Array(1+n+r);for(s=1;s<=n+r;s++)s<=n?(u=t.row[s],e.root_type[s]=u.type,e.root_lb[s]=u.lb,e.root_ub[s]=u.ub,e.root_stat[s]=u.stat):(a=t.col[s-n],e.root_type[s]=a.type,e.root_lb[s]=a.lb,e.root_ub[s]=a.ub,e.root_stat[s]=a.stat)}else{var f=e.root_m,l=e.pred_m,c;p(l<=n),p(i.b_ptr==null),p(i.s_ptr==null);for(s=1;s<=l+r;s++){var h,d,v,m,g,y,b,w;h=e.pred_type[s],g=e.pred_lb[s],y=e.pred_ub[s],d=e.pred_stat[s],s<=l?(u=t.row[s],v=u.type,b=u.lb,w=u.ub,m=u.stat):(a=t.col[s-l],v=a.type,b=a.lb,w=a.ub,m=a.stat);if(h!=v||g!=b||y!=w){var E={};E.k=s,E.type=v,E.lb=b,E.ub=w,E.next=i.b_ptr,i.b_ptr=E}if(d!=m){var S={};S.k=s,S.stat=m,S.next=i.s_ptr,i.s_ptr=S}}p(i.r_ptr==null);if(l<n){var x,T,N;T=new Array(1+r),N=new Array(1+r);for(o=n;o>l;o--){u=t.row[o];var C={},k=ut(t,o);k==null?C.name=null:C.name=k,C.type=u.type,C.lb=u.lb,C.ub=u.ub,C.ptr=null,x=gt(t,o,T,N);for(s=1;s<=x;s++){var L={};L.j=T[s],L.val=N[s],L.next=C.ptr,C.ptr=L}C.rii=u.rii,C.stat=u.stat,C.next=i.r_ptr,i.r_ptr=C}}if(n!=f){var A=n-f;p(A>0);var O=new Array(1+A);for(o=1;o<=A;o++)O[o]=f+o;Q(t,A,O)}n=t.m,p(n==f);for(o=1;o<=n;o++)U(t,o,e.root_type[o],e.root_lb[o],e.root_ub[o]),Lt(t,o,e.root_stat[o]);for(c=1;c<=r;c++)z(t,c,e.root_type[n+c],e.root_lb[n+c],e.root_ub[n+c]),At(t,c,e.root_stat[n+c])}e.curr=null}function jr(e,t,n,r){var i,s;p(1<=t&&t<=e.nslots),i=e.slot[t].node,p(i!=null),p(i.count==0),p(e.curr!=i),i.prev==null?e.head=i.next:i.prev.next=i.next,i.next==null?e.tail=i.prev:i.next.prev=i.prev,i.prev=i.next=null,e.a_cnt--,p(n>0);for(s=1;s<=n;s++)r[s]=_r(e,i).p}function Fr(e,t){var n,r;p(1<=t&&t<=e.nslots),n=e.slot[t].node,p(n!=null),p(n.count==0),p(e.curr!=n),n.prev==null?e.head=n.next:n.prev.next=n.next,n.next==null?e.tail=n.prev:n.next.prev=n.prev,n.prev=n.next=null,e.a_cnt--;for(;;){var i;while(n.b_ptr!=null)i=n.b_ptr,n.b_ptr=i.next;var s;while(n.s_ptr!=null)s=n.s_ptr,n.s_ptr=s.next;while(n.r_ptr!=null){var o;o=n.r_ptr,o.name=null;while(o.ptr!=null){var u;u=o.ptr,o.ptr=u.next}n.r_ptr=o.next}e.parm.cb_size==0&&p(n.data==null),t=n.p,p(e.slot[t].node==n),e.slot[t].node=null,e.slot[t].next=e.avail,e.avail=t,r=n.up,e.n_cnt--,n=r;if(n!=null){p(n.count>0),n.count--;if(n.count==0)continue}break}}function Ir(e){var t=e.mip,n,r,i=t.m,s=t.n;p(t.tree==e);if(i!=e.orig_m){var o,u;o=i-e.orig_m,p(o>0),u=new Array(1+o);for(n=1;n<=o;n++)u[n]=e.orig_m+n;Q(t,o,u)}i=e.orig_m,p(i==e.orig_m),p(s==e.n);for(n=1;n<=i;n++)U(t,n,e.orig_type[n],e.orig_lb[n],e.orig_ub[n]),Lt(t,n,e.orig_stat[n]),t.row[n].prim=e.orig_prim[n],t.row[n].dual=e.orig_dual[n];for(r=1;r<=s;r++)z(t,r,e.orig_type[i+r],e.orig_lb[i+r],e.orig_ub[i+r]),At(t,r,e.orig_stat[i+r]),t.col[r].prim=e.orig_prim[i+r],t.col[r].dual=e.orig_dual[i+r];t.pbs_stat=t.dbs_stat=ss,t.obj_val=e.orig_obj,p(e.local!=null),Gr(e.local),p(e.mir_gen==null),p(e.clq_gen==null),t.tree=null}function qr(e,t,r){var i=e.mip,s=i.m,o=i.n,u,a,f,l,c,h,d,v,m,g,y=e.iwrk,b=e.dwrk,w,E;p(Dt(i)==as),p(tn(i)),p(1<=t&&t<=o),d=i.col[t].prim,u=Kf(i,s+t,y,b);for(a=-1;a<=1;a+=2){f=el(i,u,y,b,a,1e-9);if(f==0){i.dir==Hi?a<0?w=+n:E=+n:i.dir==Bi?a<0?w=-n:E=-n:p(i!=i);continue}p(1<=f&&f<=s+o);for(l=1;l<=u;l++)if(y[l]==f)break;p(1<=l&&l<=u),h=b[l],f<=s?(c=i.row[f].stat,v=i.row[f].dual):(c=i.col[f-s].stat,v=i.col[f-s].dual),p(c==Vi||c==$i||c==Ji);if(i.dir==Hi){if(c==Vi&&v<0||c==$i&&v>0||c==Ji)v=0}else if(i.dir==Bi){if(c==Vi&&v>0||c==$i&&v<0||c==Ji)v=0}else p(i!=i);m=(a<0?Math.floor(d):Math.ceil(d))-d,m/=h,g=v*m,i.dir==Hi?p(g>=0):i.dir==Bi?p(g<=0):p(i!=i),a<0?w=i.obj_val+g:E=i.obj_val+g}r(w,E)}function Rr(e,t){var r=e.mip,i=r.n,o,u,a,f=e.iwrk,l,c;a=0,l=r.c0,o=0;for(u=1;u<=i;u++){var h=r.col[u];if(h.coef==0)continue;if(h.type==Wi)l+=h.coef*h.prim;else{if(h.kind!=Fi)return t;if(h.coef!=Math.floor(h.coef))return t;Math.abs(h.coef)<=s?f[++a]=Math.abs(h.coef)|0:o=1}}if(o==0){if(a==0)return t;o=ya(a,f)}return p(o>0),r.dir==Hi?t!=+n&&(c=(t-l)/o,c>=Math.floor(c)+.001&&(c=Math.ceil(c),t=o*c+l)):r.dir==Bi?t!=-n&&(c=(t-l)/o,c<=Math.ceil(c)-.001&&(c=Math.floor(c),t=o*c+l)):p(r!=r),t}function Ur(e,t){var r=e.mip,i=1,s;if(r.mip_stat==ss){s=e.parm.tol_obj*(1+Math.abs(r.mip_obj));switch(r.dir){case Hi:t>=r.mip_obj-s&&(i=0);break;case Bi:t<=r.mip_obj+s&&(i=0);break;default:p(r!=r)}}else switch(r.dir){case Hi:t==+n&&(i=0);break;case Bi:t==-n&&(i=0);break;default:p(r!=r)}return i}function zr(e){var t,n=null;switch(e.mip.dir){case Hi:for(t=e.head;t!=null;t=t.next)if(n==null||n.bound>t.bound)n=t;break;case Bi:for(t=e.head;t!=null;t=t.next)if(n==null||n.bound<t.bound)n=t;break;default:p(e!=e)}return n==null?0:n.p}function Wr(e){var t=e.mip,r,i,s,u;return t.mip_stat==ss?(i=t.mip_obj,r=zr(e),r==0?u=0:(s=e.slot[r].node.bound,u=Math.abs(i-s)/(Math.abs(i)+o))):u=n,u}function Xr(e){var t=e.mip,n={},r;p(e.curr!=null),_t(n);switch(e.parm.msg_lev){case ps:n.msg_lev=ps;break;case ds:n.msg_lev=ds;break;case vs:case ms:n.msg_lev=vs;break;case gs:n.msg_lev=ms;break;default:p(e!=e)}n.meth=bs,e.parm.msg_lev<gs?n.out_dly=e.parm.out_dly:n.out_dly=0;if(t.mip_stat==ss)switch(e.mip.dir){case Hi:n.obj_ul=t.mip_obj;break;case Bi:n.obj_ll=t.mip_obj;break;default:p(t!=t)}return r=Mt(t,n),e.curr.solved++,r}function Vr(e){p(e==e);var t={};return t.size=0,t.head=t.tail=null,t.ord=0,t.curr=null,t}function $r(e,t,n,r,i,s,o,u,a,f){var l,c,d;p(t!=null),l={},n==null||n[0]=="\0"?l.name=null:l.name=n,0<=r&&r<=255||h("glp_ios_add_row: klass = "+r+"; invalid cut class"),l.klass=r,i!=0&&h("glp_ios_add_row: flags = "+i+"; invalid cut flags"),l.ptr=null,0<=s&&s<=e.n||h("glp_ios_add_row: len = "+s+"; invalid cut length");for(d=1;d<=s;d++)c={},1<=o[d]&&o[d]<=e.n||h("glp_ios_add_row: ind["+d+"] = "+o[d]+"; column index out of range"),c.j=o[d],c.val=u[d],c.next=l.ptr,l.ptr=c;return a!=Ri&&a!=Ui&&a!=Wi&&h("glp_ios_add_row: type = "+a+"; invalid cut type"),l.type=a,l.rhs=f,l.prev=t.tail,l.next=null,l.prev==null?t.head=l:l.prev.next=l,t.tail=l,t.size++,t.size}function Jr(e,t){p(e!=null),p(1<=t&&t<=e.size),e.ord==0&&(p(e.curr==null),e.ord=1,e.curr=e.head),p(e.curr!=null);if(t<e.ord)if(t<e.ord-t){e.ord=1,e.curr=e.head;while(e.ord!=t)e.ord++,p(e.curr!=null),e.curr=e.curr.next}else while(e.ord!=t)e.ord--,p(e.curr!=null),e.curr=e.curr.prev;else if(t>e.ord)if(t-e.ord<e.size-t)while(e.ord!=t)e.ord++,p(e.curr!=null),e.curr=e.curr.next;else{e.ord=e.size,e.curr=e.tail;while(e.ord!=t)e.ord--,p(e.curr!=null),e.curr=e.curr.prev}return p(e.ord==t),p(e.curr!=null),e.curr}function Kr(e,t){var n,r;p(e!=null),1<=t&&t<=e.size||h("glp_ios_del_row: i = "+t+"; cut number out of range"),n=Jr(e,t),p(e.curr==n),n.next!=null?e.curr=n.next:n.prev!=null?(e.ord--,e.curr=n.prev):(e.ord=0,e.curr=null),n.prev==null?(p(e.head==n),e.head=n.next):(p(n.prev.next==n),n.prev.next=n.next),n.next==null?(p(e.tail==n),e.tail=n.prev):(p(n.next.prev==n),n.next.prev=n.prev);while(n.ptr!=null)r=n.ptr,n.ptr=r.next;e.size--}function Qr(e){p(e!=null);while(e.head!=null){var t=e.head;e.head=t.next;while(t.ptr!=null){var n=t.ptr;t.ptr=n.next}}e.size=0,e.head=e.tail=null,e.ord=0,e.curr=null}function Gr(e){p(e!=null),Qr(e)}function Yr(e,t){function r(e,t,r,i,s){var o,u,a,f,l;p(e>=0),f=0,u=0;for(o=1;o<=e;o++)if(t[o]>0)if(r[o]==-n){if(u!=0){f=-n,u=0;break}u=o}else f+=t[o]*r[o];else if(t[o]<0)if(i[o]==+n){if(u!=0){f=-n,u=0;break}u=o}else f+=t[o]*i[o];else p(t!=t);s.f_min=f,s.j_min=u,l=0,a=0;for(o=1;o<=e;o++)if(t[o]>0)if(i[o]==+n){if(a!=0){l=+n,a=0;break}a=o}else l+=t[o]*i[o];else if(t[o]<0)if(r[o]==-n){if(a!=0){l=+n,a=0;break}a=o}else l+=t[o]*r[o];else p(t!=t);s.f_max=l,s.j_max=a}function i(e,t){t(e.j_min==0?e.f_min:-n,e.j_max==0?e.f_max:+n)}function s(e,t,r,i,s,o,u,a,f){var l,c,h,d;p(t>=0),p(1<=a&&a<=t),i==-n||e.f_max==+n?l=-n:e.j_max==0?r[a]>0?(p(u[a]!=+n),l=i-(e.f_max-r[a]*u[a])):r[a]<0?(p(o[a]!=-n),l=i-(e.f_max-r[a]*o[a])):p(r!=r):e.j_max==a?l=i-e.f_max:l=-n,s==+n||e.f_min==-n?c=+n:e.j_min==0?r[a]>0?(p(o[a]!=-n),c=s-(e.f_min-r[a]*o[a])):r[a]<0?(p(u[a]!=+n),c=s-(e.f_min-r[a]*u[a])):p(r!=r):e.j_min==a?c=s-e.f_min:c=+n,Math.abs(r[a])<1e-6?(h=-n,d=+n):r[a]>0?(h=l==-n?-n:l/r[a],d=c==+n?+n:c/r[a]):r[a]<0?(h=c==+n?-n:c/r[a],d=l==-n?+n:l/r[a]):p(r!=r),f(h,d)}function o(e,t,r,s,o){var u,a=0,f=t[r],l=s[o],c=null,h=null;i(e,function(e,t){c=e,h=t});if(f!=-n){u=.001*(1+Math.abs(f));if(h<f-u)return a=1,a}if(l!=+n){u=.001*(1+Math.abs(l));if(c>l+u)return a=1,a}return f!=-n&&(u=1e-12*(1+Math.abs(f)),c>f-u&&(t[r]=-n)),l!=+n&&(u=1e-12*(1+Math.abs(l)),h<l+u&&(s[o]=+n)),a}function u(e,t,r,i,o,u,a,f,l,c){var h,d=0,v,m,g=null,y=null;p(t>=0),p(1<=l&&l<=t),v=u[l],m=a[l],s(e,t,r,i,o,u,a,l,function(e,t){g=e,y=t}),f&&(g!=-n&&(g=g-Math.floor(g)<.001?Math.floor(g):Math.ceil(g)),y!=+n&&(y=Math.ceil(y)-y<.001?Math.ceil(y):Math.floor(y)));if(v!=-n){h=.001*(1+Math.abs(v));if(y<v-h)return d=1,d}if(m!=+n){h=.001*(1+Math.abs(m));if(g>m+h)return d=1,d}g!=-n&&(h=.001*(1+Math.abs(g)),v<g-h&&(v=g)),y!=+n&&(h=.001*(1+Math.abs(y)),m>y+h&&(m=y));if(v!=-n&&m!=+n){var b=Math.abs(v),w=Math.abs(m);h=1e-10*(1+(b<=w?b:w)),v>m-h&&(v==u[l]?m=v:m==a[l]?v=m:b<=w?m=v:v=m)}return c(v,m),d}function a(e,t,r,i,s){var o,u=0;return t<i&&(e||t==-n?u++:(r==+n?o=1+Math.abs(t):o=1+(r-t),i-t>=.25*o&&u++)),r>s&&(e||r==+n?u++:(t==-n?o=1+Math.abs(r):o=1+(r-t),r-s>=.25*o&&u++)),u}function f(e,t,i,s,f,l,c,h){var d=e.m,v=e.n,m={},y,b,w,E,S,x=0,T,N,C,k,L,A,O,M,_;p(0<=l&&l<=d+1),p(h>0),T=new Array(1+v),N=new Array(1+d+1),C=new Array(1+d+1),g(C,0,0,d+1),k=new Array(1+d+1),g(k,0,0,d+1),L=new Array(1+v),A=new Array(1+v),O=new Array(1+v),S=0;for(w=1;w<=l;w++)y=c[w],p(0<=y&&y<=d),p(!C[y]),N[++S]=y,C[y]=1;p(S==l);while(S>0){y=N[S--],C[y]=0,k[y]++;if(t[y]==-n&&i[y]==+n)continue;E=0;if(y==0)for(b=1;b<=v;b++)_=e.col[b],_.coef!=0&&(E++,T[E]=b,L[E]=_.coef);else{var D=e.row[y];for(M=D.ptr;M!=null;M=M.r_next)E++,T[E]=M.col.j,L[E]=M.val}for(w=1;w<=E;w++)b=T[w],A[w]=s[b],O[w]=f[b];r(E,L,A,O,m);if(o(m,t,y,i,y))return x=1,x;if(t[y]==-n&&i[y]==+n)continue;for(w=1;w<=E;w++){var P,H,B=null,j=null;b=T[w],_=e.col[b],P=_.kind!=ji;if(u(m,E,L,t[y],i[y],A,O,P,w,function(e,t){B=e,j=t}))return x=1,x;H=a(P,s[b],f[b],B,j),s[b]=B,f[b]=j;if(H>0)for(M=_.ptr;M!=null;M=M.c_next){var F=M.row.i;if(k[F]>=h)continue;if(t[F]==-n&&i[F]==+n)continue;C[F]==0&&(p(S<=d),N[++S]=F,C[F]=1)}}}return x}var l=e.mip,c=l.m,h=l.n,d,v,m,y,b=0,w,E,S,x;p(e.curr!=null),w=new Array(1+c),E=new Array(1+c);switch(l.mip_stat){case is:w[0]=-n,E[0]=+n;break;case ss:switch(l.dir){case Hi:w[0]=-n,E[0]=l.mip_obj-l.c0;break;case Bi:w[0]=l.mip_obj-l.c0,E[0]=+n;break;default:p(l!=l)}break;default:p(l!=l)}for(d=1;d<=c;d++)w[d]=lt(l,d),E[d]=ct(l,d);S=new Array(1+h),x=new Array(1+h);for(v=1;v<=h;v++)S[v]=pt(l,v),x[v]=dt(l,v);m=c+1,y=new Array(1+m);for(d=1;d<=m;d++)y[d]=d-1;if(f(l,w,E,S,x,m,y,t))return b=1,b;for(d=1;d<=c;d++)jt(l,d)==Xi&&(w[d]==-n&&E[d]==+n?U(l,d,qi,0,0):E[d]==+n?U(l,d,Ri,w[d],0):w[d]==-n&&U(l,d,Ui,0,E[d]));for(v=1;v<=h;v++){var T;S[v]==-n&&x[v]==+n?T=qi:x[v]==+n?T=Ri:S[v]==-n?T=Ui:S[v]!=x[v]?T=zi:T=Wi,z(l,v,T,S[v],x[v])}return b}function Zr(e){function t(e,t){var r,i,s,o,u,a;e.mip.mip_stat==ss?s=String(e.mip.mip_obj):s="not found yet",r=zr(e),r==0?o="tree is empty":(i=e.slot[r].node.bound,i==-n?o="-inf":i==+n?o="+inf":o=i),e.mip.dir==Hi?u=">=":e.mip.dir==Bi?u="<=":p(e!=e),i=Wr(e),i==0?a="  0.0%%":i<.001?a=" < 0.1%%":i<=9.999?a=100*i:a="",d("+"+e.mip.it_cnt+": "+(t?">>>>>":"mip =")+" "+s+" "+u+" "+o+" "+a+" ("+e.a_cnt+"; "+(e.t_cnt-e.n_cnt)+")"),e.tm_lag=b()}function r(e,t){return p(1<=t&&t<=e.nslots),p(e.slot[t].node!=null),Ur(e,e.slot[t].node.bound)}function i(e){var t=e.mip,n,r,i=0,s,o,u,a,f,l=0;for(n=1;n<=t.n;n++){var c=t.col[n];e.non_int[n]=0;if(c.kind!=Fi)continue;if(c.stat!=Xi)continue;r=c.type,s=c.lb,o=c.ub,u=c.prim;if(r==Ri||r==zi||r==Wi){a=s-e.parm.tol_int,f=s+e.parm.tol_int;if(a<=u&&u<=f)continue;if(u<s)continue}if(r==Ui||r==zi||r==Wi){a=o-e.parm.tol_int,f=o+e.parm.tol_int;if(a<=u&&u<=f)continue;if(u>o)continue}a=Math.floor(u+.5)-e.parm.tol_int,f=Math.floor(u+.5)+e.parm.tol_int;if(a<=u&&u<=f)continue;e.non_int[n]=1,i++,a=u-Math.floor(u),f=Math.ceil(u)-u,p(a>0&&f>0),l+=a<=f?a:f}p(e.curr!=null),e.curr.ii_cnt=i,e.curr.ii_sum=l,e.parm.msg_lev>=gs&&(i==0?d("There are no fractional columns"):i==1?d("There is one fractional column, integer infeasibility is "+l+""):d("There are "+i+" fractional columns, integer infeasibility is "+l+""))}function o(e){var t=e.mip,n,r;t.mip_stat=ss,t.mip_obj=t.obj_val;for(n=1;n<=t.m;n++){var i=t.row[n];i.mipx=i.prim}for(r=1;r<=t.n;r++){var s=t.col[r];s.kind==ji?s.mipx=s.prim:s.kind==Fi?s.mipx=Math.floor(s.prim+.5):p(s!=s)}e.sol_cnt++}function u(e,t,n){var r=e.mip,i,s=r.m,o=r.n,u,a,f,l,c,h,v,m=new Array(3),g,y,b,w,E,S=null,x=null,T,N;p(1<=t&&t<=o),u=r.col[t].type,g=r.col[t].lb,y=r.col[t].ub,b=r.col[t].prim,w=Math.floor(b),E=Math.ceil(b);switch(u){case qi:a=Ui,f=Ri;break;case Ri:p(g<=w),a=g==w?Wi:zi,p(g+1<=E),f=Ri;break;case Ui:p(w<=y-1),a=Ui,p(E<=y),f=E==y?Wi:zi;break;case zi:p(g<=w&&w<=y-1),a=g==w?Wi:zi,p(g+1<=E&&E<=y),f=E==y?Wi:zi;break;default:p(u!=u)}return qr(e,t,function(e,t){S=e,x=t}),T=Rr(e,S),N=Rr(e,x),l=!Ur(e,T),c=!Ur(e,N),l&&c?(e.parm.msg_lev>=gs&&d("Both down- and up-branches are hopeless"),v=2,v):c?(e.parm.msg_lev>=gs&&d("Up-branch is hopeless"),z(r,t,a,g,w),e.curr.lp_obj=S,r.dir==Hi?e.curr.bound<T&&(e.curr.bound=T):r.dir==Bi?e.curr.bound>T&&(e.curr.bound=T):p(r!=r),v=1,v):l?(e.parm.msg_lev>=gs&&d("Down-branch is hopeless"),z(r,t,f,E,y),e.curr.lp_obj=x,r.dir==Hi?e.curr.bound<N&&(e.curr.bound=N):r.dir==Bi?e.curr.bound>N&&(e.curr.bound=N):p(r!=r),v=1,v):(e.parm.msg_lev>=gs&&d("Branching on column "+t+", primal value is "+b+""),p(e.curr!=null),h=e.curr.p,e.curr.br_var=t,e.curr.br_val=b,Br(e),jr(e,h,2,m),e.parm.msg_lev>=gs&&d("Node "+m[1]+" begins down branch, node "+m[2]+" begins up branch "),i=e.slot[m[1]].node,p(i!=null),p(i.up!=null),p(i.b_ptr==null),i.b_ptr={},i.b_ptr.k=s+t,i.b_ptr.type=a,i.b_ptr.lb=g,i.b_ptr.ub=w,i.b_ptr.next=null,i.lp_obj=S,r.dir==Hi?i.bound<T&&(i.bound=T):r.dir==Bi?i.bound>T&&(i.bound=T):p(r!=r),i=e.slot[m[2]].node,p(i!=null),p(i.up!=null),p(i.b_ptr==null),i.b_ptr={},i.b_ptr.k=s+t,i.b_ptr.type=f,i.b_ptr.lb=E,i.b_ptr.ub=y,i.b_ptr.next=null,i.lp_obj=x,r.dir==Hi?i.bound<N&&(i.bound=N):r.dir==Bi?i.bound>N&&(i.bound=N):p(r!=r),p(e.child==0),n==ro?e.child=0:n==io?e.child=m[1]:n==so?e.child=m[2]:p(n!=n),v=0,v)}function a(e){var t=e.mip,n,r,i=0,s,o,u,a;p(e.mip.mip_stat==ss),p(t.pbs_stat==ss&&t.dbs_stat==ss),s=t.obj_val;for(n=1;n<=t.n;n++){var f=t.col[n];if(f.kind!=Fi)continue;o=f.lb,u=f.ub,r=f.stat,a=f.dual;switch(t.dir){case Hi:r==Vi?(a<0&&(a=0),s+a>=t.mip_obj&&(z(t,n,Wi,o,o),i++)):r==$i&&(a>0&&(a=0),s-a>=t.mip_obj&&(z(t,n,Wi,u,u),i++));break;case Bi:r==Vi?(a>0&&(a=0),s+a<=t.mip_obj&&(z(t,n,Wi,o,o),i++)):r==$i&&(a<0&&(a=0),s-a<=t.mip_obj&&(z(t,n,Wi,u,u),i++));break;default:p(e!=e)}}e.parm.msg_lev>=gs&&i!=0&&(i==1?d("One column has been fixed by reduced cost"):d(i+" columns have been fixed by reduced costs")),p(t.pbs_stat==ss&&t.dbs_stat==ss)}function f(e){var t,n=0,r=null;p(e.curr!=null);for(t=e.orig_m+1;t<=e.mip.m;t++)e.mip.row[t].origin==zs&&e.mip.row[t].level==e.curr.level&&e.mip.row[t].stat==Xi&&(r==null&&(r=new Array(1+e.mip.m)),r[++n]=t);n>0&&(Q(e.mip,n,r),p(nn(e.mip)==0))}function l(e){var t=e.mip,n,r=0,i=0,s=0,o=0,u=0;for(n=t.m;n>0;n--){var a=t.row[n];a.origin==zs&&(a.klass==Ws?r++:a.klass==Xs?i++:a.klass==Vs?s++:a.klass==$s?o++:u++)}p(e.curr!=null),r+i+s+o+u>0&&(d("Cuts on level "+e.curr.level+":"),r>0&&d(" gmi = "+r+";"),i>0&&d(" mir = "+i+";"),s>0&&d(" cov = "+s+";"),o>0&&d(" clq = "+o+";"),u>0&&d(" app = "+u+";"),d(""))}function c(e){if(e.parm.mir_cuts!=Js&&e.parm.gmi_cuts!=Js&&e.parm.cov_cuts!=Js&&e.parm.clq_cuts!=Js)return;var t,n,r;n=e.n,n<1e3&&(n=1e3),r=0;for(t=e.orig_m+1;t<=e.mip.m;t++)e.mip.row[t].origin==zs&&r++;if(r>=n)return;e.parm.gmi_cuts==Js&&e.curr.changed<5&&ai(e),e.parm.mir_cuts==Js&&(p(e.mir_gen!=null),hi(e,e.mir_gen)),e.parm.cov_cuts==Js&&vi(e),e.parm.clq_cuts==Js&&e.clq_gen!=null&&(e.curr.level==0&&e.curr.changed<50||e.curr.level>0&&e.curr.changed<5)&&wi(e,e.clq_gen)}function h(e){var t,n,i=0;p(e.mip.mip_stat==ss);for(t=e.head;t!=null;t=n)n=t.next,r(e,t.p)||(Fr(e,t.p),i++);e.parm.msg_lev>=gs&&(i==1?d("One hopeless branch has been pruned"):i>1&&d(i+" hopeless branches have been pruned"))}var v,m,g,y,E,S=0,x=e.tm_beg;const T=0,N=1,C=2,k=3;var L=T;for(;;){var A=null;switch(L){case T:p(e.curr==null);if(e.head==null){e.parm.msg_lev>=gs&&d("Active list is empty!"),E=0,A=k;break}p(e.next_p==0);if(e.parm.cb_func!=null){p(e.reason==0),e.reason=to,e.parm.cb_func(e,e.parm.cb_info),e.reason=0;if(e.stop){E=bo,A=k;break}}e.next_p==0&&(e.a_cnt==1?(p(e.head.next==null),e.next_p=e.head.p):e.child!=0?e.next_p=e.child:e.next_p=_i(e)),Hr(e,e.next_p),e.next_p=e.child=0,e.curr.up!=null&&e.curr.up.p!=S&&(S=0),v=e.curr.p,e.parm.msg_lev>=gs&&(d("------------------------------------------------------------------------"),d("Processing node "+v+" at level "+e.curr.level+"")),v==1&&(e.parm.gmi_cuts==Js&&e.parm.msg_lev>=ms&&d("Gomory's cuts enabled"),e.parm.mir_cuts==Js&&(e.parm.msg_lev>=ms&&d("MIR cuts enabled"),p(e.mir_gen==null),e.mir_gen=ci(e)),e.parm.cov_cuts==Js&&e.parm.msg_lev>=ms&&d("Cover cuts enabled"),e.parm.clq_cuts==Js&&(p(e.clq_gen==null),e.parm.msg_lev>=ms&&d("Clique cuts enabled"),e.clq_gen=bi(e)));case N:(e.parm.msg_lev>=gs||e.parm.msg_lev>=vs&&e.parm.out_frq-1<=1e3*w(b(),e.tm_lag))&&t(e,0),e.parm.msg_lev>=ms&&w(b(),x)>=60&&(d("Time used: "+w(b(),e.tm_beg)+" secs"),x=b());if(e.parm.mip_gap>0&&Wr(e)<=e.parm.mip_gap){e.parm.msg_lev>=gs&&d("Relative gap tolerance reached; search terminated "),E=wo,A=k;break}if(e.parm.tm_lim<s&&e.parm.tm_lim-1<=1e3*w(b(),e.tm_beg)){e.parm.msg_lev>=gs&&d("Time limit exhausted; search terminated"),E=vo,A=k;break}if(e.parm.cb_func!=null){p(e.reason==0),e.reason=no,e.parm.cb_func(e,e.parm.cb_info),e.reason=0;if(e.stop){E=bo,A=k;break}}if(e.parm.pp_tech!=Fs)if(e.parm.pp_tech==Is){if(e.curr.level==0&&Yr(e,100)){A=C;break}}else if(e.parm.pp_tech==qs){if(Yr(e,e.curr.level==0?100:10)){A=C;break}}else p(e!=e);if(!r(e,v)){d("*** not tested yet ***"),A=C;break}e.parm.msg_lev>=gs&&d("Solving LP relaxation..."),E=Xr(e);if(E!=0&&E!=co&&E!=ho){e.parm.msg_lev>=ds&&d("ios_driver: unable to solve current LP relaxation; glp_simplex returned "+E+""),E=lo,A=k;break}g=e.mip.pbs_stat,y=e.mip.dbs_stat;if(g==ss&&y==ss)e.parm.msg_lev>=gs&&d("Found optimal solution to LP relaxation");else{if(y==us){e.parm.msg_lev>=ds&&d("ios_driver: current LP relaxation has no dual feasible solution"),E=lo,A=k;break}if(g==os&&y==ss){p(e.mip.mip_stat==ss),e.parm.msg_lev>=gs&&d("LP relaxation has no solution better than incumbent objective value"),A=C;break}if(g==us){e.parm.msg_lev>=gs&&d("LP relaxation has no feasible solution"),A=C;break}p(e.mip!=e.mip)}p(g==ss&&y==ss),p(e.curr!=null),e.curr.lp_obj=e.mip.obj_val;var O=e.mip.obj_val;O=Rr(e,O),e.mip.dir==Hi?e.curr.bound<O&&(e.curr.bound=O):e.mip.dir==Bi?e.curr.bound>O&&(e.curr.bound=O):p(e.mip!=e.mip),e.parm.msg_lev>=gs&&d("Local bound is "+O+"");if(!r(e,v)){e.parm.msg_lev>=gs&&d("Current branch is hopeless and can be pruned"),A=C;break}p(e.reopt==0),p(e.reinv==0);if(e.parm.cb_func!=null){p(e.reason==0),e.reason=Qs,e.parm.cb_func(e,e.parm.cb_info),e.reason=0;if(e.stop){E=bo,A=k;break}if(e.reopt){e.reopt=e.reinv=0,A=N;break}e.reinv&&(e.reinv=0,p(nn(e.mip)==0))}i(e);if(e.curr.ii_cnt==0){e.parm.msg_lev>=gs&&d("New integer feasible solution found"),e.parm.msg_lev>=ms&&l(e),o(e),e.parm.msg_lev>=vs&&t(e,1);if(e.parm.cb_func!=null){p(e.reason==0),e.reason=Gs,e.parm.cb_func(e,e.parm.cb_info),e.reason=0;if(e.stop){E=bo,A=k;break}}A=C;break}e.mip.mip_stat==ss&&a(e);if(e.parm.cb_func!=null){p(e.reason==0),e.reason=Ys,e.parm.cb_func(e,e.parm.cb_info),e.reason=0;if(e.stop){E=bo,A=k;break}if(!r(e,v)){e.parm.msg_lev>=gs&&d("Current branch became hopeless and can be pruned"),A=C;break}}if(e.parm.fp_heur){p(e.reason==0),e.reason=Ys,Oi(e),e.reason=0;if(!r(e,v)){e.parm.msg_lev>=gs&&d("Current branch became hopeless and can be pruned"),A=C;break}}p(e.local!=null),p(e.local.size==0);if(e.parm.cb_func!=null){p(e.reason==0),e.reason=Zs,e.parm.cb_func(e,e.parm.cb_info),e.reason=0;if(e.stop){E=bo,A=k;break}}if(e.curr.level==0||S==0)p(e.reason==0),e.reason=Zs,c(e),e.reason=0;e.local.size>0&&(p(e.reason==0),e.reason=Zs,Mi(e),e.reason=0),Qr(e.local);if(e.reopt){e.reopt=0,e.curr.changed++,A=N;break}f(e),e.parm.msg_lev>=ms&&e.curr.level==0&&l(e),e.pcost!=null&&ki(e),p(e.br_var==0),p(e.br_sel==0);if(e.parm.cb_func!=null){p(e.reason==0),p(e.br_var==0),p(e.br_sel==0),e.reason=eo,e.parm.cb_func(e,e.parm.cb_info),e.reason=0;if(e.stop){E=bo,A=k;break}}e.br_var==0&&(e.br_var=Ei(e,function(t){e.br_sel=t})),m=e.curr.p,E=u(e,e.br_var,e.br_sel),e.br_var=e.br_sel=0;if(E==0){S=m,A=T;break}if(E==1){e.curr.solved=e.curr.changed=0,A=N;break}if(E==2){A=C;break}p(E!=E);case C:e.parm.msg_lev>=gs&&d("Node "+v+" fathomed"),Br(e),Fr(e,v),e.mip.mip_stat==ss&&h(e),S=0,A=T;break;case k:return e.parm.msg_lev>=vs&&t(e,0),e.mir_gen=null,e.clq_gen=null,E}if(A==null)break;L=A}}function ei(e){var t;return p(e>=0),t={},t.n=e,t.nnz=0,t.pos=new Array(1+e),g(t.pos,1,0,e),t.ind=new Array(1+e),t.val=new Array(1+e),t}function ti(e){var t,n,r;p(e.n>=0),r=0;for(t=e.n;t>=1;t--)n=e.pos[t],p(0<=n&&n<=e.nnz),n!=0&&(p(e.ind[n]==t),r++);p(e.nnz==r)}function ni(e,t){var n;return p(1<=t&&t<=e.n),n=e.pos[t],p(0<=n&&n<=e.nnz),n==0?0:e.val[n]}function ri(e,t,n){p(1<=t&&t<=e.n);var r=e.pos[t];n==0?r!=0&&(e.pos[t]=0,r<e.nnz&&(e.pos[e.ind[e.nnz]]=r,e.ind[r]=e.ind[e.nnz],e.val[r]=e.val[e.nnz]),e.nnz--):(r==0&&(r=++e.nnz,e.pos[t]=r,e.ind[r]=t),e.val[r]=n)}function ii(e){for(var t=1;t<=e.nnz;t++)e.pos[e.ind[t]]=0;e.nnz=0}function si(e,t){var n=0;for(var r=1;r<=e.nnz;r++)Math.abs(e.val[r])==0||Math.abs(e.val[r])<t?e.pos[e.ind[r]]=0:(n++,e.pos[e.ind[r]]=n,e.ind[n]=e.ind[r],e.val[n]=e.val[r]);e.nnz=n}function oi(e,t){p(e!=t),p(e.n==t.n),ii(e),e.nnz=t.nnz,m(e.ind,1,t.ind,1,e.nnz),m(e.val,1,t.val,1,e.nnz);for(var n=1;n<=e.nnz;n++)e.pos[e.ind[n]]=n}function ui(e,t,n){var r,i,s;p(e!=n),p(e.n==n.n);for(var o=1;o<=n.nnz;o++)r=n.ind[o],i=ni(e,r),s=n.val[o],ri(e,r,i+t*s)}function ai(e){function n(e){return e-Math.floor(e)}function r(e,t,r){var i=e.mip,s=i.m,o=i.n,u=t.ind,a=t.val,f=t.phi,l,c,h,d,v,m,g,y,b,w,E,S,x,T;h=dn(i,s+r,u,a),b=i.col[r].prim;for(c=1;c<=s+o;c++)f[c]=0;S=n(b);for(r=1;r<=h;r++){c=u[r],p(1<=c&&c<=s+o),c<=s?(x=i.row[c],d=ji,m=x.lb,g=x.ub,v=x.stat):(T=i.col[c-s],d=T.kind,m=T.lb,g=T.ub,v=T.stat),p(v!=Xi),w=a[r];if(Math.abs(w)>1e5)return;if(Math.abs(w)<1e-10)continue;switch(v){case Ji:return;case Vi:y=-w;break;case $i:y=+w;break;case Ki:continue;default:p(v!=v)}switch(d){case Fi:if(Math.abs(y-Math.floor(y+.5))<1e-10)continue;n(y)<=n(b)?E=n(y):E=n(b)/(1-n(b))*(1-n(y));break;case ji:y>=0?E=+y:E=n(b)/(1-n(b))*-y;break;default:p(d!=d)}switch(v){case Vi:f[c]=+E,S+=E*m;break;case $i:f[c]=-E,S-=E*g;break;default:p(v!=v)}}for(l=1;l<=s;l++){var N;if(Math.abs(f[l])<1e-10)continue;x=i.row[l],p(x.type!=Wi);for(N=x.ptr;N!=null;N=N.r_next)f[s+N.col.j]+=f[l]*N.val}h=0;for(r=1;r<=o;r++){if(Math.abs(f[s+r])<1e-10)continue;T=i.col[r],T.type==Wi?S-=f[s+r]*T.lb:(h++,u[h]=r,a[h]=f[s+r])}Math.abs(S)<1e-12&&(S=0);for(c=1;c<=h;c++){if(Math.abs(a[c])<.001)return;if(Math.abs(a[c])>1e3)return}jn(e,null,Ws,0,h,u,a,Ri,S)}const t=50;var i=e.mip,s=i.m,o=i.n,u,a,f,l,c,h={};u=new Array(1+o),h.ind=new Array(1+o),h.val=new Array(1+o),h.phi=new Array(1+s+o),f=0;for(l=1;l<=o;l++){var d=i.col[l],v;if(d.kind!=Fi)continue;if(d.type==Wi)continue;if(d.stat!=Xi)continue;v=n(d.prim);if(!(.05<=v&&v<=.95))continue;f++,u[f].j=l,u[f].f=v}E(u,1,f,function(e,t){return e.f>t.f?-1:e.f<t.f?1:0}),c=Bn(e);for(a=1;a<=f;a++){if(Bn(e)-c>=t)break;r(e,h,u[a].j)}}function ci(e){function t(e,t){var r=e.mip,i=t.m,s;for(s=1;s<=i;s++){var o=r.row[s];t.skip[s]=0,t.isint[s]=0;switch(o.type){case qi:t.lb[s]=-n,t.ub[s]=+n;break;case Ri:t.lb[s]=o.lb,t.ub[s]=+n;break;case Ui:t.lb[s]=-n,t.ub[s]=o.ub;break;case zi:t.lb[s]=o.lb,t.ub[s]=o.ub;break;case Wi:t.lb[s]=t.ub[s]=o.lb;break;default:p(o!=o)}t.vlb[s]=t.vub[s]=0}}function r(e,t){var r=e.mip,i=t.m,s=t.n,o;for(o=i+1;o<=i+s;o++){var u=r.col[o-i];switch(u.kind){case ji:t.isint[o]=0;break;case Fi:t.isint[o]=1;break;default:p(u!=u)}switch(u.type){case qi:t.lb[o]=-n,t.ub[o]=+n;break;case Ri:t.lb[o]=u.lb,t.ub[o]=+n;break;case Ui:t.lb[o]=-n,t.ub[o]=u.ub;break;case zi:t.lb[o]=u.lb,t.ub[o]=u.ub;break;case Wi:t.lb[o]=t.ub[o]=u.lb;break;default:p(u!=u)}t.vlb[o]=t.vub[o]=0}}function i(e,t){var r=e.mip,i=t.m,s,o,u,a,f,l;for(o=1;o<=i;o++){if(!(t.lb[o]==0&&t.ub[o]==+n||t.lb[o]==-n&&t.ub[o]==0))continue;s=r.row[o].ptr;if(s==null)continue;u=i+s.col.j,f=s.val,s=s.r_next;if(s==null)continue;a=i+s.col.j,l=s.val;if(s.r_next!=null)continue;if(!!t.isint[u]||!t.isint[a]){if(!t.isint[u]||!!t.isint[a])continue;a=u,l=f,u=i+s.col.j,f=s.val}if(t.lb[a]==-n||t.ub[a]==+n||t.lb[a]==t.ub[a])continue;t.ub[o]==0&&(f=-f,l=-l),f>0?t.vlb[u]==0&&(t.lb[u]=-l/f,t.vlb[u]=a,t.skip[o]=1):t.vub[u]==0&&(t.ub[u]=-l/f,t.vub[u]=a,t.skip[o]=1)}}function s(e,t){var r=e.mip,i=t.m,s,o,u,a;for(o=1;o<=i;o++){if(t.lb[o]==-n&&t.ub[o]==+n){t.skip[o]=1;continue}a=0;for(s=r.row[o].ptr;s!=null;s=s.r_next){u=i+s.col.j;if(t.lb[u]==-n&&t.ub[u]==+n){t.skip[o]=1;break}if(t.isint[u]&&t.lb[u]==-n||t.isint[u]&&t.ub[u]==+n){t.skip[o]=1;break}(t.vlb[u]!=0||t.vub[u]!=0||t.lb[u]!=t.ub[u])&&a++}a==0&&(t.skip[o]=1)}}var o=e.mip,u=o.m,a=o.n,f;return fi&&d("ios_mir_init: warning: debug mode enabled"),f={},f.m=u,f.n=a,f.skip=new Array(1+u),f.isint=new Array(1+u+a),f.lb=new Array(1+u+a),f.vlb=new Array(1+u+a),f.ub=new Array(1+u+a),f.vub=new Array(1+u+a),f.x=new Array(1+u+a),f.agg_row=new Array(1+li),f.agg_vec=ei(u+a),f.subst=new Array(1+u+a),f.mod_vec=ei(u+a),f.cut_vec=ei(u+a),t(e,f),r(e,f),i(e,f),s(e,f),f}function hi(e,t){function s(e,t,n,s,o,u,a){function f(e,t){return e.v<t.v?-1:e.v>t.v?1:0}function l(e,t,n,s,o,u,a){function f(e,t,n,s){var o,u,a;if(Math.abs(n-Math.floor(n+.5))<.01)return 1;u=n-Math.floor(n);for(o=1;o<=e;o++)a=t[o]-Math.floor(t[o])-u,a<=0?s[o]=Math.floor(t[o]):s[o]=Math.floor(t[o])+a/(1-u);return r=Math.floor(n),i=1/(1-u),0}var l,c,h;c=a,h=n;for(l=1;l<=e;l++)c[l]=t[l]/u,o[l]&&(c[l]=-c[l]),h-=t[l]*s[l];h/=u;if(f(e,c,h,a))return 1;for(l=1;l<=e;l++)o[l]&&(a[l]=-a[l],r+=a[l]*s[l]);return i/=u,0}var c,h,d,v,m,g,y,b=new Array(4),w,S,x,T;x=new Array(1+e),T=new Array(1+e);for(h=1;h<=e;h++)x[h]=o[h]>=.5*s[h];S=g=0;for(h=1;h<=e;h++){p(t[h]!=0),y=1e-9*(1+Math.abs(s[h]));if(o[h]<y||o[h]>s[h]-y)continue;c=l(e,t,n,s,x,Math.abs(t[h]),a);if(c)continue;w=-r-i*u;for(d=1;d<=e;d++)w+=a[d]*o[d];S<w&&(S=w,g=Math.abs(t[h]))}S<.001&&(S=0);if(S==0)return S;p(g>0),b[1]=g/2,b[2]=g/4,b[3]=g/8;for(h=1;h<=3;h++){c=l(e,t,n,s,x,b[h],a);if(c)continue;w=-r-i*u;for(d=1;d<=e;d++)w+=a[d]*o[d];S<w&&(S=w,g=b[h])}v=0;for(h=1;h<=e;h++){y=1e-9*(1+Math.abs(s[h]));if(o[h]<y||o[h]>s[h]-y)continue;v++,T[v].j=h,T[v].v=Math.abs(o[h]-.5*s[h])}E(T,1,v,f);for(m=1;m<=v;m++){h=T[m].j,x[h]=!x[h],c=l(e,t,n,s,x,g,a),x[h]=!x[h];if(c)continue;w=-r-i*u;for(d=1;d<=e;d++)w+=a[d]*o[d];S<w&&(S=w,x[h]=!x[h])}return c=l(e,t,n,s,x,g,a),p(!c),S}function u(e,t){var n=e.mip,r=t.m,i=t.n,s;for(s=1;s<=r;s++)t.x[s]=n.row[s].prim;for(s=r+1;s<=r+i;s++)t.x[s]=n.col[s-r].prim}function f(e,t,n){var r=e.mip,i=t.m,s;p(1<=n&&n<=i),p(!t.skip[n]),t.skip[n]=2,t.agg_cnt=1,t.agg_row[1]=n,ii(t.agg_vec),ri(t.agg_vec,n,1);for(s=r.row[n].ptr;s!=null;s=s.r_next)ri(t.agg_vec,i+s.col.j,-s.val);t.agg_rhs=0,fi&&ti(t.agg_vec)}function c(e){var t=e.m,n=e.n,r,i;for(r=1;r<=e.agg_vec.nnz;r++)i=e.agg_vec.ind[r],p(1<=i&&i<=t+n),e.vlb[i]==0&&e.vub[i]==0&&e.lb[i]==e.ub[i]&&(e.agg_rhs-=e.agg_vec.val[r]*e.lb[i],e.agg_vec.val[r]=0);si(e.agg_vec,o),fi&&ti(e.agg_vec)}function h(e){var t=e.m,r=e.n,i,s,o,u,a;for(i=1;i<=e.agg_vec.nnz;i++){s=e.agg_vec.ind[i],p(1<=s&&s<=t+r);if(e.isint[s])continue;o=e.vlb[s],o==0?e.lb[s]==-n?u=n:u=e.x[s]-e.lb[s]:(p(1<=o&&o<=t+r),p(e.isint[o]),p(e.lb[s]!=-n),u=e.x[s]-e.lb[s]*e.x[o]),o=e.vub[s],o==0?e.vub[s]==+n?a=n:a=e.ub[s]-e.x[s]:(p(1<=o&&o<=t+r),p(e.isint[o]),p(e.ub[s]!=+n),a=e.ub[s]*e.x[o]-e.x[s]),p(u!=n||a!=n),p(e.subst[s]=="?"),u<=a?e.subst[s]="L":e.subst[s]="U"}}function d(e){var t=e.m,r=e.n,i,s,o,u;oi(e.mod_vec,e.agg_vec),e.mod_rhs=e.agg_rhs,fi&&ti(e.mod_vec);for(i=e.mod_vec.nnz;i>=1;i--){o=e.mod_vec.ind[i],p(1<=o&&o<=t+r);if(e.isint[o])continue;e.subst[o]=="L"?(p(e.lb[o]!=-n),u=e.vlb[o],u==0?e.mod_rhs-=e.mod_vec.val[i]*e.lb[o]:(p(e.isint[u]),s=e.mod_vec.pos[u],s==0&&(ri(e.mod_vec,u,1),s=e.mod_vec.pos[u],e.mod_vec.val[s]=0),e.mod_vec.val[s]+=e.mod_vec.val[i]*e.lb[o])):e.subst[o]=="U"?(p(e.ub[o]!=+n),u=e.vub[o],u==0?e.mod_rhs-=e.mod_vec.val[i]*e.ub[o]:(p(e.isint[u]),s=e.mod_vec.pos[u],s==0&&(ri(e.mod_vec,u,1),s=e.mod_vec.pos[u],e.mod_vec.val[s]=0),e.mod_vec.val[s]+=e.mod_vec.val[i]*e.ub[o]),e.mod_vec.val[i]=-e.mod_vec.val[i]):p(o!=o)}fi&&ti(e.mod_vec);for(i=1;i<=e.mod_vec.nnz;i++){o=e.mod_vec.ind[i],p(1<=o&&o<=t+r);if(!e.isint[o])continue;p(e.subst[o]=="?"),p(e.vlb[o]==0&&e.vub[o]==0),p(e.lb[o]!=-n&&e.ub[o]!=+n),Math.abs(e.lb[o])<=Math.abs(e.ub[o])?(e.subst[o]="L",e.mod_rhs-=e.mod_vec.val[i]*e.lb[o]):(e.subst[o]="U",e.mod_rhs-=e.mod_vec.val[i]*e.ub[o],e.mod_vec.val[i]=-e.mod_vec.val[i])}fi&&ti(e.mod_vec)}function m(e){var t=e.m,r=e.n,i,u,a,f,l,c,h,d,v=0,m,g=null,y=null;oi(e.cut_vec,e.mod_vec),e.cut_rhs=e.mod_rhs,si(e.cut_vec,o),fi&&ti(e.cut_vec);for(i=1;i<=e.cut_vec.nnz;i++)u=e.cut_vec.ind[i],p(1<=u&&u<=t+r),!e.isint[u]&&e.cut_vec.val[i]>0&&(e.cut_vec.val[i]=0);si(e.cut_vec,0),fi&&ti(e.cut_vec),f=0;for(i=1;i<=e.cut_vec.nnz;i++){u=e.cut_vec.ind[i],p(1<=u&&u<=t+r);if(e.isint[u]){var b;f++,a=e.cut_vec.ind[f],e.cut_vec.pos[u]=f,e.cut_vec.pos[a]=i,e.cut_vec.ind[f]=u,e.cut_vec.ind[i]=a,b=e.cut_vec.val[f],e.cut_vec.val[f]=e.cut_vec.val[i],e.cut_vec.val[i]=b}}fi&&ti(e.cut_vec);if(f==0)return v;c=new Array(1+f),h=new Array(1+f),d=new Array(1+f);for(i=1;i<=f;i++)u=e.cut_vec.ind[i],p(t+1<=u&&u<=t+r),p(e.isint[u]),c[i]=e.ub[u]-e.lb[u],p(c[i]>=1),e.subst[u]=="L"?h[i]=e.x[u]-e.lb[u]:e.subst[u]=="U"?h[i]=e.ub[u]-e.x[u]:p(u!=u),p(h[i]>=-0.001),h[i]<0&&(h[i]=0);l=0;for(i=f+1;i<=e.cut_vec.nnz;i++)u=e.cut_vec.ind[i],p(1<=u&&u<=t+r),p(!e.isint[u]),e.subst[u]=="L"?(p(e.lb[u]!=-n),a=e.vlb[u],a==0?h=e.x[u]-e.lb[u]:h=e.x[u]-e.lb[u]*e.x[a]):e.subst[u]=="U"?(p(e.ub[u]!=+n),a=e.vub[u],a==0?h=e.ub[u]-e.x[u]:h=e.ub[u]*e.x[a]-e.x[u]):p(u!=u),p(h>=-0.001),h<0&&(h=0),l-=e.cut_vec.val[i]*h;p(l>=0),m=e.cut_rhs,v=s(f,e.cut_vec.val,m,c,h,l,d);if(v==0)return v;p(v>0);for(i=1;i<=f;i++)e.cut_vec.val[i]=d[i];for(i=f+1;i<=e.cut_vec.nnz;i++)u=e.cut_vec.ind[i],u<=t+r&&(e.cut_vec.val[i]*=y);return e.cut_rhs=g,fi&&ti(e.cut_vec),v}function b(e){var t=e.m,r=e.n,i,s,o,u;for(i=1;i<=e.cut_vec.nnz;i++){o=e.cut_vec.ind[i],p(1<=o&&o<=t+r);if(!e.isint[o])continue;e.subst[o]=="L"?(p(e.lb[o]!=-n),p(e.vlb[o]==0),e.cut_rhs+=e.cut_vec.val[i]*e.lb[o]):e.subst[o]=="U"?(p(e.ub[o]!=+n),p(e.vub[o]==0),e.cut_rhs-=e.cut_vec.val[i]*e.ub[o],e.cut_vec.val[i]=-e.cut_vec.val[i]):p(o!=o)}for(i=1;i<=e.cut_vec.nnz;i++){o=e.cut_vec.ind[i],p(1<=o&&o<=t+r);if(e.isint[o])continue;e.subst[o]=="L"?(p(e.lb[o]!=-n),u=e.vlb[o],u==0?e.cut_rhs+=e.cut_vec.val[i]*e.lb[o]:(s=e.cut_vec.pos[u],s==0&&(ri(e.cut_vec,u,1),s=e.cut_vec.pos[u],p(s!=0),e.cut_vec.val[s]=0),e.cut_vec.val[s]-=e.cut_vec.val[i]*e.lb[o])):e.subst[o]=="U"?(p(e.ub[o]!=+n),u=e.vub[o],u==0?e.cut_rhs-=e.cut_vec.val[i]*e.ub[o]:(s=e.cut_vec.pos[u],s==0&&(ri(e.cut_vec,u,1),s=e.cut_vec.pos[u],p(s!=0),e.cut_vec.val[s]=0),e.cut_vec.val[s]+=e.cut_vec.val[i]*e.ub[o]),e.cut_vec.val[i]=-e.cut_vec.val[i]):p(o!=o)}fi&&ti(e.cut_vec)}function S(e,t){var n=e.mip,r=t.m,i=t.n,s,o,u,a,f;for(o=t.cut_vec.nnz;o>=1;o--){u=t.cut_vec.ind[o],p(1<=u&&u<=r+i);if(u>r)continue;for(s=n.row[u].ptr;s!=null;s=s.r_next)a=r+s.col.j,f=t.cut_vec.pos[a],f==0&&(ri(t.cut_vec,a,1),f=t.cut_vec.pos[a],t.cut_vec.val[f]=0),t.cut_vec.val[f]+=t.cut_vec.val[o]*s.val;t.cut_vec.val[o]=0}si(t.cut_vec,0)}function x(e,t){var n=t.m,r=t.n,i,s,o,u=new Array(1+r),a=new Array(1+r);o=0;for(i=t.cut_vec.nnz;i>=1;i--)s=t.cut_vec.ind[i],p(n+1<=s&&s<=n+r),o++,u[o]=s-n,a[o]=t.cut_vec.val[i];jn(e,null,Xs,0,o,u,a,Ui,t.cut_rhs)}function T(e,t){var r=e.mip,i=t.m,s=t.n,o,u,a,f,l,c,h,d=0,v=0,m,g,y,b=0;for(f=1;f<=t.agg_vec.nnz;f++){c=t.agg_vec.ind[f],p(1<=c&&c<=i+s);if(c<=i)continue;if(t.isint[c])continue;if(Math.abs(t.agg_vec.val[f])<.001)continue;h=t.vlb[c],h==0?t.lb[c]==-n?m=n:m=t.x[c]-t.lb[c]:(p(1<=h&&h<=i+s),p(t.isint[h]),p(t.lb[c]!=-n),m=t.x[c]-t.lb[c]*t.x[h]),h=t.vub[c],h==0?t.vub[c]==+n?g=n:g=t.ub[c]-t.x[c]:(p(1<=h&&h<=i+s),p(t.isint[h]),p(t.ub[c]!=+n),g=t.ub[c]*t.x[h]-t.x[c]),p(m!=n||g!=n),y=m<=g?m:g,p(y!=n);if(y<.001)continue;b<y&&(b=y,d=c)}if(d==0)return v=1,v;p(i+1<=d&&d<=i+s),p(!t.isint[d]);for(a=1;a<=i;a++){if(t.skip[a])continue;for(o=r.row[a].ptr;o!=null;o=o.r_next)if(o.col.j==d-i)break;if(o!=null&&Math.abs(o.val)>=.001)break}if(a>i)return v=2,v;t.agg_cnt++,p(t.agg_cnt<=li),t.agg_row[t.agg_cnt]=a,t.skip[a]=2,u=ei(i+s),ri(u,a,1);for(o=r.row[a].ptr;o!=null;o=o.r_next)ri(u,i+o.col.j,-o.val);return fi&&ti(u),f=t.agg_vec.pos[d],p(f!=0),l=u.pos[d],p(l!=0),ui(t.agg_vec,-t.agg_vec.val[f]/u.val[l],u),ri(t.agg_vec,d,0),fi&&ti(t.agg_vec),v}var r,i;if(fi)function a(e){var t=e.m,r=e.n,i,s,o,u,a;for(i=1;i<=t+r;i++)o=e.lb[i],s=e.vlb[i],s!=0&&(p(o!=-n),p(!e.isint[i]),p(e.isint[s]),o*=e.x[s]),o!=-n&&(a=1e-6*(1+Math.abs(o)),p(e.x[i]>=o-a)),u=e.ub[i],s=e.vub[i],s!=0&&(p(u!=+n),p(!e.isint[i]),p(e.isint[s]),u*=e.x[s]),u!=+n&&(a=1e-6*(1+Math.abs(u)),p(e.x[i]<=u+a))}if(fi)function l(e){var t=e.m,n=e.n,r,i,s,o;s=0,o=1;for(r=1;r<=e.agg_vec.nnz;r++)i=e.agg_vec.ind[r],p(1<=i&&i<=t+n),s+=e.agg_vec.val[r]*e.x[i],o<Math.abs(e.agg_vec.val[r])&&(o=Math.abs(e.agg_vec.val[r]));s-=e.agg_rhs,o<Math.abs(e.agg_rhs)&&(o=Math.abs(e.agg_rhs)),p(Math.abs(s)<=1e-6*o)}if(fi)function v(e){var t=e.m,r=e.n,i,s,o,u,a,f;u=0,a=1;for(i=1;i<=e.mod_vec.nnz;i++)s=e.mod_vec.ind[i],p(1<=s&&s<=t+r),e.subst[s]=="L"?(p(e.lb[s]!=-n),o=e.vlb[s],o==0?f=e.x[s]-e.lb[s]:f=e.x[s]-e.lb[s]*e.x[o]):e.subst[s]=="U"?(p(e.ub[s]!=+n),o=e.vub[s],o==0?f=e.ub[s]-e.x[s]:f=e.ub[s]*e.x[o]-e.x[s]):p(s!=s),u+=e.mod_vec.val[i]*f,a<Math.abs(e.mod_vec.val[i])&&(a=Math.abs(e.mod_vec.val[i]));u-=e.mod_rhs,a<Math.abs(e.mod_rhs)&&(a=Math.abs(e.mod_rhs)),p(Math.abs(u)<=1e-6*a)}if(fi)function y(e,t){var r=e.m,i=e.n,s,o,u,a,f,l;a=0,f=1;for(s=1;s<=e.cut_vec.nnz;s++)o=e.cut_vec.ind[s],p(1<=o&&o<=r+i),e.subst[o]=="L"?(p(e.lb[o]!=-n),u=e.vlb[o],u==0?l=e.x[o]-e.lb[o]:l=e.x[o]-e.lb[o]*e.x[u]):e.subst[o]=="U"?(p(e.ub[o]!=+n),u=e.vub[o],u==0?l=e.ub[o]-e.x[o]:l=e.ub[o]*e.x[u]-e.x[o]):p(o!=o),a+=e.cut_vec.val[s]*l,f<Math.abs(e.cut_vec.val[s])&&(f=Math.abs(e.cut_vec.val[s]));a-=e.cut_rhs,f<Math.abs(e.cut_rhs)&&(f=Math.abs(e.cut_rhs)),p(Math.abs(a-t)<=1e-6*f)}if(fi)function w(e,t){var n=e.m,r=e.n,i,s,o,u;o=0,u=1;for(i=1;i<=e.cut_vec.nnz;i++)s=e.cut_vec.ind[i],p(1<=s&&s<=n+r),o+=e.cut_vec.val[i]*e.x[s],u<Math.abs(e.cut_vec.val[i])&&(u=Math.abs(e.cut_vec.val[i]));o-=e.cut_rhs,u<Math.abs(e.cut_rhs)&&(u=Math.abs(e.cut_rhs)),p(Math.abs(o-t)<=1e-6*u)}var N=e.mip,C=t.m,k=t.n,L,A,O;p(N.m>=C),p(N.n==k),u(e,t),fi&&a(t),g(t.subst,1,"?",C+k);for(L=1;L<=C;L++){if(t.skip[L])continue;f(e,t,L);for(;;){fi&&l(t),c(t);if(fi){l(t);for(A=1;A<=C+k;A++)p(t.subst[A]=="?")}h(t),d(t),fi&&v(t),O=m(t),O>0&&(fi&&y(t,O),b(t),fi&&w(t,O),S(e,t),fi&&w(t,O),x(e,t));for(var M=1;M<=t.mod_vec.nnz;M++)A=t.mod_vec.ind[M],p(1<=A&&A<=C+k),p(t.subst[A]!="?"),t.subst[A]="?";if(O==0&&t.agg_cnt<li&&T(e,t)==0)continue;break}var _;for(A=1;A<=t.agg_cnt;A++)_=t.agg_row[A],p(1<=_&&_<=C),p(t.skip[_]==2),t.skip[_]=0}}function pi(e,t,n,r,i){function a(e,t,n,r,i,a,f){var l,c,h=0,p=0,d,v,m=.001;d=.001*(1+Math.abs(n));for(l=1;l<=e;l++)for(c=l+1;c<=e;c++){h++;if(h>u)return p;t[l]+t[c]+a>n+d&&(v=t[l]+t[c]-n,s=1/(v+r),o=2-s*v,v=i[l]+i[c]+s*a-o,m<v&&(m=v,f[1]=l,f[2]=c,p=1))}return p}function f(e,t,n,r,i,a,f){var l,c,h,p=0,d=0,v,m,g=.001;v=.001*(1+Math.abs(n));for(l=1;l<=e;l++)for(c=l+1;c<=e;c++)for(h=c+1;h<=e;h++){p++;if(p>u)return d;t[l]+t[c]+t[h]+a>n+v&&(m=t[l]+t[c]+t[h]-n,s=1/(m+r),o=3-s*m,m=i[l]+i[c]+i[h]+s*a-o,g<m&&(g=m,f[1]=l,f[2]=c,f[3]=h,d=1))}return d}function l(e,t,n,r,i,a,f){var l,c,h,p,d=0,v=0,m,g,y=.001;m=.001*(1+Math.abs(n));for(l=1;l<=e;l++)for(c=l+1;c<=e;c++)for(h=c+1;h<=e;h++)for(p=h+1;p<=e;p++){d++;if(d>u)return v;t[l]+t[c]+t[h]+t[p]+a>n+m&&(g=t[l]+t[c]+t[h]+t[p]-n,s=1/(g+r),o=4-s*g,g=i[l]+i[c]+i[h]+i[p]+s*a-o,y<g&&(y=g,f[1]=l,f[2]=c,f[3]=h,f[4]=p,v=1))}return v}function c(e,t,n,r,i,s,o){var u;p(e>=2);for(u=1;u<=e;u++)p(t[u]>0);p(n>-0.00001),p(r>=0);for(u=1;u<=e;u++)p(0<=i[u]&&i[u]<=1);return p(0<=s&&s<=r),a(e,t,n,r,i,s,o)?2:f(e,t,n,r,i,s,o)?3:l(e,t,n,r,i,s,o)?4:0}var s=null,o=null;const u=1e3;var h=new Array(5),d,v,m,g,y,b,w,E,S;g=0;for(v=1;v<=t;v++)d=n[v],hf(e,d)==Uo?r[0]-=r[v]*pf(e,d):(g++,n[g]=n[v],r[g]=r[v]);t=g,m=0;for(v=1;v<=t;v++){d=n[v];if(cl(e,d)==uu&&hf(e,d)==Ro&&pf(e,d)==0&&df(e,d)==1){var x,T;m++,x=n[m],T=r[m],n[m]=n[v],r[m]=r[v],n[v]=x,r[v]=T}}if(m<2)return 0;b=w=0;for(v=m+1;v<=t;v++){d=n[v];if(hf(e,d)!=Ro)return 0;r[v]>0?(b+=r[v]*pf(e,d),w+=r[v]*df(e,d)):(b+=r[v]*df(e,d),w+=r[v]*pf(e,d))}E=w-b,S=0;for(v=m+1;v<=t;v++)d=n[v],S+=r[v]*zf(e,d);S-=b,S<0&&(S=0),S>E&&(S=E),r[0]-=b;for(v=1;v<=m;v++)d=n[v],i[v]=zf(e,d),i[v]<0&&(i[v]=0),i[v]>1&&(i[v]=1);for(v=1;v<=m;v++)r[v]<0&&(n[v]=-n[v],r[v]=-r[v],r[0]+=r[v],i[v]=1-i[v]);y=c(m,r,r[0],E,i,S,h);if(y==0)return 0;p(2<=y&&y<=4),n[0]=0,r[0]=o;for(d=1;d<=y;d++)h[d]=n[h[d]];p(y<=m);for(v=1;v<=y;v++)h[v]>0?(n[v]=+h[v],r[v]=1):(n[v]=-h[v],r[v]=-1,r[0]-=1);for(v=m+1;v<=t;v++)y++,n[y]=n[v],r[y]=s*r[v];return r[0]+=s*b,p(y<=t),t=y,t}function di(e,t,n,r){var i=sf(e),s,o,u=0;t<0&&h("lpx_eval_row: len = "+t+"; invalid row length");for(o=1;o<=t;o++)s=n[o],1<=s&&s<=i||h("lpx_eval_row: j = "+s+"; column number out of range"),u+=r[o]*zf(e,s);return u}function vi(e){var t=e.mip,n=rf(t),r=sf(t),i,s,o,u,a,f,l,c,h;p(Pf(t)==hu),f=new Array(1+r),c=new Array(1+r),h=new Array(1+r);for(i=1;i<=n;i++)for(u=1;u<=2;u++){o=af(t,i);if(u==1){if(o!=qo&&o!=Ro)continue;a=yf(t,i,f,c),c[0]=lf(t,i)}else{if(o!=Io&&o!=Ro)continue;a=yf(t,i,f,c);for(s=1;s<=a;s++)c[s]=-c[s];c[0]=-ff(t,i)}a=pi(t,a,f,c,h);if(a==0)continue;l=di(t,a,f,c)-c[0];if(l<.001)continue;jn(e,null,Vs,0,a,f,c,Ui,c[0])}}function mi(e){function i(e,t){var r;switch(af(e,t)){case Fo:case qo:r=-n;break;case Io:case Ro:case Uo:r=ff(e,t);break;default:p(e!=e)}return r}function s(e,t){var r;switch(af(e,t)){case Fo:case Io:r=+n;break;case qo:case Ro:case Uo:r=lf(e,t);break;default:p(e!=e)}return r}function o(e,t){var r;switch(hf(e,t)){case Fo:case qo:r=-n;break;case Io:case Ro:case Uo:r=pf(e,t);break;default:p(e!=e)}return r}function a(e,t){var r;switch(hf(e,t)){case Fo:case Io:r=+n;break;case qo:case Ro:case Uo:r=df(e,t);break;default:p(e!=e)}return r}function f(e,t){return cl(e,t)==uu&&hf(e,t)==Ro&&pf(e,t)==0&&df(e,t)==1}function l(e,t,r,i){var s,u,f,l,c;c=0;for(u=1;u<=t;u++){s=r[u];if(i[u]>0){f=o(e,s);if(f==-n){c=-n;break}c+=i[u]*f}else if(i[u]<0){l=a(e,s);if(l==+n){c=-n;break}c+=i[u]*l}else p(i!=i)}return c}function c(e,t,r,i){var s,u,f,l,c;c=0;for(u=1;u<=t;u++){s=r[u];if(i[u]>0){l=a(e,s);if(l==+n){c=+n;break}c+=i[u]*l}else if(i[u]<0){f=o(e,s);if(f==-n){c=+n;break}c+=i[u]*f}else p(i!=i)}return c}function h(e,t,r,i,s,o,u,a,f){var l;return p(1<=u&&u<f&&f<=e),r!=-n&&a&&(r-=t[u]),i!=+n&&a&&(i-=t[u]),s!=-n&&(t[u]<0&&(s-=t[u]),t[f]<0&&(s-=t[f])),o!=+n&&(t[u]>0&&(o-=t[u]),t[f]>0&&(o-=t[f])),t[f]>0?r==-n||o==+n?l=-n:l=(r-o)/t[f]:i==+n||s==-n?l=-n:l=(i-s)/t[f],l>.001?2:(t[f]>0?i==+n||s==-n?l=+n:l=(i-s)/t[f]:r==-n||o==+n?l=+n:l=(r-o)/t[f],l<.999?1:0)}const t=4e3,r=500;var v=null,m,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_;d("Creating the conflict graph..."),m=rf(e),y=sf(e),b=0,C=new Array(1+y);for(E=1;E<=y;E++)C[E]=0;k=new Array(1+y),N=new Array(1+y),_=new Array(1+y);for(w=1;w<=m;w++){L=i(e,w),A=s(e,w);if(L==-n&&A==+n)continue;T=yf(e,w,N,_);if(T>r)continue;O=l(e,T,N,_),M=c(e,T,N,_);for(S=1;S<=T;S++){if(!f(e,N[S]))continue;for(x=S+1;x<=T;x++){if(!f(e,N[x]))continue;if(h(T,_,L,A,O,M,S,0,x)||h(T,_,L,A,O,M,S,1,x))E=N[S],C[E]==0&&(b++,C[E]=b,k[b]=E),E=N[x],C[E]==0&&(b++,C[E]=b,k[b]=E)}}}if(b==0||b>t)return d("The conflict graph is either empty or too big"),v;v={},v.n=y,v.nb=b,v.ne=0,v.vert=C,v.orig=k,T=b+b,T=T*(T-1)/2,T=(T+(u-1))/u,v.a=new Array(T),g(v.a,0,0,T);for(E=1;E<=b;E++)gi(v,+k[E],-k[E]);for(w=1;w<=m;w++){L=i(e,w),A=s(e,w);if(L==-n&&A==+n)continue;T=yf(e,w,N,_);if(T>r)continue;O=l(e,T,N,_),M=c(e,T,N,_);for(S=1;S<=T;S++){if(!f(e,N[S]))continue;for(x=S+1;x<=T;x++){if(!f(e,N[x]))continue;switch(h(T,_,L,A,O,M,S,0,x)){case 0:break;case 1:gi(v,-N[S],+N[x]);break;case 2:gi(v,-N[S],-N[x]);break;default:p(e!=e)}switch(h(T,_,L,A,O,M,S,1,x)){case 0:break;case 1:gi(v,+N[S],+N[x]);break;case 2:gi(v,+N[S],-N[x]);break;default:p(e!=e)}}}}return d("The conflict graph has 2*"+v.nb+" vertices and "+v.ne+" edges"),v}function gi(e,t,n){var r;p(t!=n),t>0?(p(1<=t&&t<=e.n),t=e.vert[t],p(t!=0)):(t=-t,p(1<=t&&t<=e.n),t=e.vert[t],p(t!=0),t+=e.nb),n>0?(p(1<=n&&n<=e.n),n=e.vert[n],p(n!=0)):(n=-n,p(1<=n&&n<=e.n),n=e.vert[n],p(n!=0),n+=e.nb),t<n&&(r=t,t=n,n=r),r=(t-1)*(t-2)/2+(n-1),e.a[r/u]|=1<<u-1-r%u,e.ne++}function yi(e,t,n,r){function i(e,t,n){return t==n?0:t>n?s(e,t,n):s(e,n,t)}function s(e,t,n){return o(e,t*(t-1)/2+n)}function o(e,t){return e.a[t/u]&1<<u-1-t%u}function a(e,t,n,r,s,o){var u,f,l,c,h,p,d,v;v=new Array(e.n);if(t<=0){t==0&&(e.set[r++]=n[0],s+=o);if(s>e.record){e.record=s,e.rec_level=r;for(u=0;u<r;u++)e.rec[u+1]=e.set[u]}return}for(u=t;u>=0;u--){if(r==0&&u<t)return;l=n[u];if(r>0&&e.clique[l]<=e.record-s)return;e.set[r]=l,c=s+e.wt[l+1],o-=e.wt[l+1];if(o<=e.record-c)return;p=0,d=0,h=0;while(d<n+u)f=n[d],d++,i(e,f,l)&&(v[p]=f,p++,h+=e.wt[f+1]);if(h<=e.record-c)continue;a(e,p-1,v,r+1,c,h)}}function f(e,t,n,r){var s={},o,u,f,l,c,h,p,v,m,g;s.n=e,s.wt=t,s.a=n,s.record=0,s.rec_level=0,s.rec=r,s.clique=new Array(s.n),s.set=new Array(s.n),p=new Array(s.n),v=new Array(s.n),m=new Array(s.n),g=b();for(o=0;o<s.n;o++){v[o]=0;for(u=0;u<s.n;u++)i(s,o,u)&&(v[o]+=s.wt[u+1])}for(o=0;o<s.n;o++)p[o]=0;for(o=s.n-1;o>=0;o--){l=-1,c=-1;for(u=0;u<s.n;u++)!p[u]&&(s.wt[u+1]>l||s.wt[u+1]==l&&v[u]>c)&&(l=s.wt[u+1],c=v[u],f=u);m[o]=f,p[f]=1;for(u=0;u<s.n;u++)!p[u]&&u!=f&&i(s,f,u)&&(v[u]-=s.wt[f+1])}h=0;for(o=0;o<s.n;o++)h+=s.wt[m[o]+1],a(s,o,m,0,0,h),s.clique[m[o]]=s.record,w(b(),g)>=4.999&&(d("level = "+o+1+" ("+s.n+"); best = "+s.record+""),g=b());for(o=1;o<=s.rec_level;o++)r[o]++;return s.rec_level}var l=sf(e),c,h,v,m,g,y=0,E,S,x,T,N,C;E=new Array(1+2*t.nb),S=new Array(1+2*t.nb),C=new Array(1+l);for(h=1;h<=t.nb;h++)c=t.orig[h],x=zf(e,c),g=100*x+.5|0,g<0&&(g=0),g>100&&(g=100),E[h]=g,E[t.nb+h]=100-g;m=f(2*t.nb,E,t.a,S),T=0;for(h=1;h<=m;h++)v=S[h],p(1<=v&&v<=2*t.nb),v<=t.nb?(c=t.orig[v],x=zf(e,c),T+=x):(c=t.orig[v-t.nb],x=zf(e,c),T+=1-x);if(T>=1.01){for(c=1;c<=l;c++)C[c]=0;N=1;for(h=1;h<=m;h++)v=S[h],v<=t.nb?(c=t.orig[v],p(1<=c&&c<=l),C[c]+=1):(c=t.orig[v-t.nb],p(1<=c&&c<=l),C[c]-=1,N-=1);p(y==0);for(c=1;c<=l;c++)C[c]!=0&&(y++,n[y]=c,r[y]=C[c]);n[0]=0,r[0]=N}return y}function bi(e){var t=e.mip;return p(t!=null),mi(t)}function wi(e,t){var n=sf(e.mip),r,i,s;p(t!=null),i=new Array(1+n),s=new Array(1+n),r=yi(e.mip,t,i,s),r>0&&jn(e,null,$s,0,r,i,s,Ui,s[0])}function Ei(e,t){var n;return e.parm.br_tech==As?n=Si(e,t):e.parm.br_tech==Os?n=xi(e,t):e.parm.br_tech==Ms?n=Ti(e,t):e.parm.br_tech==_s?n=Ni(e,t):e.parm.br_tech==Ds?n=Ai(e,t):p(e!=e),n}function Si(e,t){var n,r,i;for(n=1;n<=e.n;n++)if(e.non_int[n])break;return p(1<=n&&n<=e.n),i=Rt(e.mip,n),i-Math.floor(i)<Math.ceil(i)-i?r=io:r=so,t(r),n}function xi(e,t){var n,r,i;for(n=e.n;n>=1;n--)if(e.non_int[n])break;return p(1<=n&&n<=e.n),i=Rt(e.mip,n),i-Math.floor(i)<Math.ceil(i)-i?r=io:r=so,t(r),n}function Ti(e,t){var r,i,s,o,u,a;i=0,u=n;for(r=1;r<=e.n;r++)e.non_int[r]&&(o=Rt(e.mip,r),a=Math.floor(o)+.5,u>Math.abs(o-a)&&(i=r,u=Math.abs(o-a),o<a?s=io:s=so));return t(s),i}function Ni(e,t){var r=e.mip,i=r.m,s=r.n,o=e.non_int,u,a,f,l,c,h,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A;p(Dt(r)==as),g=new Array(1+s),A=new Array(1+s),a=0,L=-1;for(u=1;u<=s;u++){if(!o[u])continue;y=Rt(r,u),v=dn(r,i+u,g,A);for(h=-1;h<=1;h+=2){f=bn(r,v,g,A,h,1e-9),f!=0&&(f=g[f]);if(f==0)x=e.mip.dir==Hi?+n:-n;else{for(l=1;l<=v;l++)if(g[l]==f)break;p(1<=l&&l<=v),w=A[l],E=(h<0?Math.floor(y):Math.ceil(y))-y,S=E/w,f>i&&Xt(r,f-i)!=ji&&Math.abs(S-Math.floor(S+.5))>.001&&(S>0?S=Math.ceil(S):S=Math.floor(S)),f<=i?(m=jt(r,f),b=It(r,f)):(m=qt(r,f-i),b=Ut(r,f-i));switch(e.mip.dir){case Hi:if(m==Vi&&b<0||m==$i&&b>0||m==Ji)b=0;break;case Bi:if(m==Vi&&b>0||m==$i&&b<0||m==Ji)b=0;break;default:p(e!=e)}x=b*S}switch(e.mip.dir){case Hi:p(x>=0);break;case Bi:p(x<=0);break;default:p(e!=e)}h<0?T=x:N=x}if(L<Math.abs(T)||L<Math.abs(N)){a=u,Math.abs(T)<Math.abs(N)?(c=io,L=Math.abs(N)):(c=so,L=Math.abs(T)),C=T,k=N;if(L==n)break}}return p(1<=a&&a<=s),L<1e-6*(1+.001*Math.abs(r.obj_val))?(a=Ti(e,t),a):(e.parm.msg_lev>=gs&&(d("branch_drtom: column "+a+" chosen to branch on"),Math.abs(C)==n?d("branch_drtom: down-branch is infeasible"):d("branch_drtom: down-branch bound is "+(jf(r)+C)+""),Math.abs(k)==n?d("branch_drtom: up-branch   is infeasible"):d("branch_drtom: up-branch   bound is "+(jf(r)+k)+"")),t(c),a)}function Ci(e){var t=e.n,n,r={};r.dn_cnt=new Array(1+t),r.dn_sum=new Array(1+t),r.up_cnt=new Array(1+t),r.up_sum=new Array(1+t);for(n=1;n<=t;n++)r.dn_cnt[n]=r.up_cnt[n]=0,r.dn_sum[n]=r.up_sum[n]=0;return r}function ki(e){var t,n,r,i,s=e.pcost;p(s!=null),p(e.curr!=null);if(e.curr.up==null)return;t=e.curr.up.br_var,p(1<=t&&t<=e.n),n=e.mip.col[t].prim-e.curr.up.br_val,p(n!=0),r=e.mip.obj_val-e.curr.up.lp_obj,i=Math.abs(r/n),n<0?(s.dn_cnt[t]++,s.dn_sum[t]+=i):(s.up_cnt[t]++,s.up_sum[t]+=i)}function Li(e){var t=e.pcost;p(t!=null),e.pcost=null}function Ai(e,t){function r(e,t,r){var i,s={},o,u;return p(Dt(e)==as),i=P(),Y(i,e,0),z(i,t,Wi,r,r),_t(s),s.msg_lev=ps,s.meth=ws,s.it_lim=30,s.out_dly=1e3,s.meth=ws,o=Mt(i,s),o==0||o==po?Pt(i)==us?u=n:Ht(i)==ss?(e.dir==Hi?u=i.obj_val-e.obj_val:e.dir==Bi?u=e.obj_val-i.obj_val:p(e!=e),u<1e-6*(1+.001*Math.abs(e.obj_val))&&(u=0)):u=0:u=0,tt(i),u}function i(e,t,i){var s=e.pcost,o,u,a;p(s!=null),p(1<=t&&t<=e.n);if(i==io){if(s.dn_cnt[t]==0){o=e.mip.col[t].prim,u=r(e.mip,t,Math.floor(o));if(u==n)return a=n,a;s.dn_cnt[t]=1,s.dn_sum[t]=u/(o-Math.floor(o))}a=s.dn_sum[t]/s.dn_cnt[t]}else if(i==so){if(s.up_cnt[t]==0){o=e.mip.col[t].prim,u=r(e.mip,t,Math.ceil(o));if(u==n)return a=n,a;s.up_cnt[t]=1,s.up_sum[t]=u/(Math.ceil(o)-o)}a=s.up_sum[t]/s.up_cnt[t]}else p(i!=i);return a}function s(e){var t=e.pcost,n,r=0,i=0;for(n=1;n<=e.n;n++)qn(e,n)&&(r++,t.dn_cnt[n]>0&&t.up_cnt[n]>0&&i++);d("Pseudocosts initialized for "+i+" of "+r+" variables")}var o=b(),u,a,f,l,c,h,v,m,g;e.pcost==null&&(e.pcost=Ci(e)),a=0,g=-1;for(u=1;u<=e.n;u++){if(!qn(e,u))continue;l=e.mip.col[u].prim,c=i(e,u,io);if(c==n)return a=u,f=io,t(f),a;h=c*(l-Math.floor(l)),c=i(e,u,so);if(c==n)return a=u,f=so,t(f),a;v=c*(Math.ceil(l)-l),m=h>v?h:v,g<m&&(g=m,a=u,f=h<=v?io:so),e.parm.msg_lev>=Js&&w(b(),o)>=10&&(s(e),o=b())}return g==0?(a=Ti(e,t),a):(t(f),a)}function Oi(e){var t=e.mip,r=t.n,i=null,o=null,u=null,a,f={},l,c,h,v,m,g,S,x,T,N;const C=0,k=1,L=2,A=3,O=4,M=5;var _=C;for(;;){var D=null;switch(_){case C:p(Dt(t)==as);if(e.curr.level!=0||e.curr.solved!=1){D=M;break}g=0;for(l=1;l<=r;l++){a=t.col[l];if(a.kind==ji)continue;if(a.type==Wi)continue;p(a.kind==Fi);if(a.type!=zi||a.lb!=0||a.ub!=1){e.parm.msg_lev>=ms&&d("FPUMP heuristic cannot be applied due to general integer variables"),D=M;break}g++}if(D!=null)break;if(g==0){D=M;break}e.parm.msg_lev>=ms&&d("Applying FPUMP heuristic..."),o=new Array(1+g),y(o,1,g),c=0;for(l=1;l<=r;l++)a=t.col[l],a.kind==Fi&&a.type==zi&&(o[++c].j=l);p(c==g),i=P();case k:Y(i,t,Ks);if(t.mip_stat==ss){var H,B,j;F(i,1),H=new Array(1+r),B=new Array(1+r);for(l=1;l<=r;l++)H[l]=l,B[l]=t.col[l].coef;X(i,i.m,r,H,B),j=.1*t.obj_val+.9*t.mip_obj,t.dir==Hi?U(i,i.m,Ui,0,j-t.c0):t.dir==Bi?U(i,i.m,Ri,j-t.c0,0):p(t!=t)}m=0;for(c=1;c<=g;c++)o[c].x=-1;case L:m++,e.parm.msg_lev>=ms&&d("Pass "+m+""),T=n,v=0;if(m>1){var I,q;u==null&&(u=nE());for(c=1;c<=g;c++)l=o[c].j,a=i.col[l],I=uE(u,-0.3,.7),I<0&&(I=0),q=Math.abs(o[c].x-a.prim),q+I>.5&&(o[c].x=1-o[c].x);D=O;break};case A:x=1;for(c=1;c<=g;c++)a=i.col[o[c].j],a.prim<.5?h=0:h=1,o[c].x!=h&&(x=0,o[c].x=h);if(x){for(c=1;c<=g;c++)a=i.col[o[c].j],o[c].d=Math.abs(a.prim-o[c].x);E(o,1,g,function(e,t){return e.d>t.d?-1:e.d<t.d?1:0});for(c=1;c<=g;c++){if(c>=5&&o[c].d<.35||c>=10)break;o[c].x=1-o[c].x}};case O:if(e.parm.tm_lim<s&&e.parm.tm_lim-1<=1e3*w(b(),e.tm_beg)){D=M;break}i.dir=Hi,i.c0=0;for(l=1;l<=r;l++)i.col[l].coef=0;for(c=1;c<=g;c++)l=o[c].j,o[c].x==0?i.col[l].coef=1:(i.col[l].coef=-1,i.c0+=1);_t(f),e.parm.msg_lev<=ds?f.msg_lev=e.parm.msg_lev:e.parm.msg_lev<=ms&&(f.msg_lev=vs,f.out_dly=1e4),S=Mt(i,f);if(S!=0){e.parm.msg_lev>=ds&&d("Warning: glp_simplex returned "+S+""),D=M;break}S=Dt(i);if(S!=as){e.parm.msg_lev>=ds&&d("Warning: glp_get_status returned "+S+""),D=M;break}e.parm.msg_lev>=gs&&d("delta = "+i.obj_val+""),N=.3*e.parm.tol_int;for(c=1;c<=g;c++){a=i.col[o[c].j];if(N<a.prim&&a.prim<1-N)break}if(c>g){var R=new Array(1+r);for(l=1;l<=r;l++)R[l]=i.col[l].prim,t.col[l].kind==Fi&&(R[l]=Math.floor(R[l]+.5));i.c0=t.c0,i.dir=t.dir;for(c=1;c<=g;c++)i.col[o[c].j].lb=R[o[c].j],i.col[o[c].j].ub=R[o[c].j],i.col[o[c].j].type=Wi;for(l=1;l<=r;l++)i.col[l].coef=t.col[l].coef;S=Mt(i,f);if(S!=0){e.parm.msg_lev>=ds&&d("Warning: glp_simplex returned "+S+""),D=M;break}S=Dt(i);if(S!=as){e.parm.msg_lev>=ds&&d("Warning: glp_get_status returned "+S+""),D=M;break}for(l=1;l<=r;l++)t.col[l].kind!=Fi&&(R[l]=i.col[l].prim);S=zn(e,R);if(S==0){if(Ur(e,e.curr.bound)){D=k;break}D=M;break}}T==n||i.obj_val<=T-1e-6*(1+T)?(v=0,T=i.obj_val):v++;if(v<3){D=A;break}if(m<5){D=L;break};case M:i!=null&&tt(i)}if(D==null)break;_=D}}function Mi(e){function t(e,t,n){var r,i=0,s=0,u=0,a;for(r=e.ptr;r!=null;r=r.next)n[r.j]=r.val,s+=r.val*r.val;for(r=t.ptr;r!=null;r=r.next)i+=n[r.j]*r.val,u+=r.val*r.val;for(r=e.ptr;r!=null;r=r.next)n[r.j]=0;return a=Math.sqrt(s)*Math.sqrt(u),a<o*o&&(a=o),i/a}var r,i,s,u,a,f,l,c,h,d,v,m;p(e.curr!=null),r=e.local,p(r!=null),p(r.size>0),u=new Array(1+r.size),d=new Array(1+e.n),v=new Array(1+e.n),m=new Array(1+e.n);for(a=1;a<=e.n;a++)m[a]=0;for(a=0,i=r.head;i!=null;i=i.next)a++,u[a].cut=i,u[a].flag=0;p(a==r.size);for(a=1;a<=r.size;a++){var g,y=null,b=null;i=u[a].cut,c=0,g=0;for(s=i.ptr;s!=null;s=s.next)p(1<=s.j&&s.j<=e.n),c++,d[c]=s.j,v[c]=s.val,g+=s.val*s.val;g<o*o&&(g=o),c=mn(e.mip,c,d,v),h=wn(e.mip,c,d,v,i.type,i.rhs,1e-9,function(e,t,n,r,i,s){y=i,b=s}),h==0?(u[a].eff=Math.abs(y)/Math.sqrt(g),e.mip.dir==Hi?(b<0&&(b=0),u[a].deg=+b):(b>0&&(b=0),u[a].deg=-b)):h==1?u[a].eff=u[a].deg=0:h==2?(u[a].eff=1,u[a].deg=n):p(h!=h),u[a].deg<.01&&(u[a].deg=0)}E(u,1,r.size,function(e,t){if(e.deg==0&&t.deg==0){if(e.eff>t.eff)return-1;if(e.eff<t.eff)return 1}else{if(e.deg>t.deg)return-1;if(e.deg<t.deg)return 1}return 0}),l=e.curr.level==0?90:10,l>r.size&&(l=r.size);for(a=1;a<=l;a++){var w;if(u[a].deg<.01&&u[a].eff<.01)continue;for(f=1;f<a;f++)if(u[f].flag&&t(u[a].cut,u[f].cut,m)>.9)break;if(f<a)continue;i=u[a].cut,u[a].flag=1,w=F(e.mip,1),i.name!=null&&q(e.mip,w,i.name),p(e.mip.row[w].origin==zs),e.mip.row[w].klass=i.klass,c=0;for(s=i.ptr;s!=null;s=s.next)c++,d[c]=s.j,v[c]=s.val;X(e.mip,w,c,d,v),p(i.type==Ri||i.type==Ui),U(e.mip,w,i.type,i.rhs,i.rhs)}}function _i(e){function t(e){var t,r,i;r=0,i=n;for(t=e.head;t!=null;t=t.next)p(t.up!=null),i>t.up.ii_sum&&(r=t.p,i=t.up.ii_sum);return r}function r(e){var t,r,i,s,o,u;p(e.mip.mip_stat==ss),t=e.slot[1].node,p(t!=null),p(t.ii_sum>0),o=(e.mip.mip_obj-t.bound)/t.ii_sum,i=0,s=n;for(r=e.head;r!=null;r=r.next)p(r.up!=null),u=r.up.bound+o*r.up.ii_sum,e.mip.dir==Bi&&(u=-u),s>u&&(i=r.p,s=u);return i}function i(e){var t,r=null,i,s;switch(e.mip.dir){case Hi:i=+n;for(t=e.head;t!=null;t=t.next)i>t.bound&&(i=t.bound);p(i!=+n),s=.001*(1+Math.abs(i));for(t=e.head;t!=null;t=t.next)if(t.bound<=i+s){p(t.up!=null);if(r==null||r.up.ii_sum>t.up.ii_sum)r=t}break;case Bi:i=-n;for(t=e.head;t!=null;t=t.next)i<t.bound&&(i=t.bound);p(i!=-n),s=.001*(1+Math.abs(i));for(t=e.head;t!=null;t=t.next)if(t.bound>=i-s){p(t.up!=null);if(r==null||r.lp_obj<t.lp_obj)r=t}break;default:p(e!=e)}return p(r!=null),r.p}var s;return e.parm.bt_tech==Ps?(p(e.tail!=null),s=e.tail.p):e.parm.bt_tech==Hs?(p(e.head!=null),s=e.head.p):e.parm.bt_tech==Bs?s=i(e):e.parm.bt_tech==js?e.mip.mip_stat==is?s=t(e):s=r(e):p(e!=e),s}function ga(e,t){var n;p(e>0&&t>0);while(t>0)n=e%t,e=t,t=n;return e}function ya(e,t){var n=0,r;p(e>0);for(r=1;r<=e;r++){p(t[r]>0),r==1?n=t[1]:n=ga(n,t[r]);if(n==1)break}return n}function ba(e){p(e>0);var t=Math.floor(Math.log(e)/Math.log(2))+1,n=e/Math.pow(2,t);return Math.pow(2,n<=.75?t-1:t)}function wa(e,t){var n=Number(e);if(isNaN(n))return 2;switch(n){case Number.POSITIVE_INFINITY:case Number.NEGATIVE_INFINITY:return 1;default:return t(n),0}}function Ea(e,t){var n=Number(e);if(isNaN(n))return 2;switch(n){case Number.POSITIVE_INFINITY:case Number.NEGATIVE_INFINITY:return 1;default:return n%1==0?(t(n),0):2}}function Sa(e,t,n){var r,i,s,o;return 1<=e&&e<=31&&1<=t&&t<=12&&1<=n&&n<=4e3?(t>=3?t-=3:(t+=9,n--),r=n/100|0,i=n-100*r,s=146097*r/4|0,s+=1461*i/4|0,s+=(153*t+2)/5|0,s+=e+1721119,xa(s,function(e){o=e}),e!=o&&(s=-1),s):-1}function xa(e,t){var n,r,i,s=0;return 1721426<=e&&e<=3182395?(e-=1721119,i=(4*e-1)/146097|0,e=(4*e-1)%146097,n=e/4|0,e=(4*n+3)/1461|0,n=(4*n+3)%1461,n=(n+4)/4|0,r=(5*n-3)/153|0,n=(5*n-3)%153,n=(n+5)/5|0,i=100*i+e,r<=9?r+=3:(r-=9,i++),t(n,r,i),s):1}function Ca(){var e;return Na&&d("lpf_create_it: warning: debug mode enabled"),e={},e.valid=0,e.m0_max=e.m0=0,e.luf=$l(),e.m=0,e.B=null,e.n_max=50,e.n=0,e.R_ptr=e.R_len=null,e.S_ptr=e.S_len=null,e.scf=null,e.P_row=e.P_col=null,e.Q_row=e.Q_col=null,e.v_size=1e3,e.v_ptr=0,e.v_ind=null,e.v_val=null,e.work1=e.work2=null,e}function ka(e,t,n,r,i){var s,o;if(Na)var u,f,l,c,d,v;p(n==n),t<1&&h("lpf_factorize: m = "+t+"; invalid parameter"),t>a&&h("lpf_factorize: m = "+t+"; matrix too big"),e.m0=e.m=t,e.valid=0,e.R_ptr==null&&(e.R_ptr=new Array(1+e.n_max)),e.R_len==null&&(e.R_len=new Array(1+e.n_max)),e.S_ptr==null&&(e.S_ptr=new Array(1+e.n_max)),e.S_len==null&&(e.S_len=new Array(1+e.n_max)),e.scf==null&&(e.scf=dE(e.n_max)),e.v_ind==null&&(e.v_ind=new Array(1+e.v_size)),e.v_val==null&&(e.v_val=new Array(1+e.v_size)),e.m0_max<t&&(e.m0_max=t+100,e.P_row=new Array(1+e.m0_max+e.n_max),e.P_col=new Array(1+e.m0_max+e.n_max),e.Q_row=new Array(1+e.m0_max+e.n_max),e.Q_col=new Array(1+e.m0_max+e.n_max),e.work1=new Array(1+e.m0_max+e.n_max),e.work2=new Array(1+e.m0_max+e.n_max));switch(rc(e.luf,t,r,i)){case 0:break;case Xl:return o=Ta,o;case Vl:return o=LPF_ECOND,o;default:p(e!=e)}e.valid=1;if(Na){p(t<=32767),e.B=d=new Array(1+t*t),c=new Array(1+t),v=new Array(1+t);for(s=1;s<=t*t;s++)d[s]=0;for(f=1;f<=t;f++){l=r(i,f,c,v),p(0<=l&&l<=t);for(s=1;s<=l;s++)u=c[s],p(1<=u&&u<=t),p(d[(u-1)*t+f]==0),p(v[s]!=0),d[(u-1)*t+f]=v[s]}}e.n=0,CE(e.scf);for(s=1;s<=t;s++)e.P_row[s]=e.P_col[s]=s,e.Q_row[s]=e.Q_col[s]=s;return e.v_ptr=1,o=0,o}function La(e,t,n,r,i){var s=e.n,o=e.R_ptr,u=e.R_len,a=e.v_ind,f=e.v_val,l,c,h,p,d;for(l=1;l<=s;l++){if(r[l+i]==0)continue;d=n*r[l+i],c=o[l],h=c+u[l];for(p=c;p<h;p++)t[a[p]]+=d*f[p]}}function Aa(e,t,n,r,i){var s=e.n,o=e.R_ptr,u=e.R_len,a=e.v_ind,f=e.v_val,l,c,h,p,d;for(l=1;l<=s;l++){d=0,c=o[l],h=c+u[l];for(p=c;p<h;p++)d+=f[p]*i[a[p]];t[l+n]+=r*d}}function Oa(e,t,n,r,i){var s=e.n,o=e.S_ptr,u=e.S_len,a=e.v_ind,f=e.v_val,l,c,h,p,d;for(l=1;l<=s;l++){d=0,c=o[l],h=c+u[l];for(p=c;p<h;p++)d+=f[p]*i[a[p]];t[l+n]+=r*d}}function Ma(e,t,n,r,i){var s=e.n,o=e.S_ptr,u=e.S_len,a=e.v_ind,f=e.v_val,l,c,h,p,d;for(l=1;l<=s;l++){if(r[l+i]==0)continue;d=n*r[l+i],c=o[l],h=c+u[l];for(p=c;p<h;p++)t[a[p]]+=d*f[p]}}function Da(e,t){var n=e.m0,r=e.m,i=e.n,s=e.P_col,o=e.Q_col,u=e.work1,a=u,f=u,l,c;if(Na)var d;e.valid||h("lpf_ftran: the factorization is not valid"),p(0<=r&&r<=n+i);if(Na){d=new Array(1+r);for(l=1;l<=r;l++)d[l]=t[l]}for(l=1;l<=n+i;l++)u[l]=(c=s[l])<=r?t[c]:0;ic(e.luf,0,a),Oa(e,f,n,-1,a),NE(e.scf,0,f,n),La(e,a,-1,f,n),sc(e.luf,0,a);for(l=1;l<=r;l++)t[l]=u[o[l]];Na&&_a(e,0,t,d)}function Pa(e,t){var n=e.m0,r=e.m,i=e.n,s=e.P_row,o=e.Q_row,u=e.work1,a=u,f=u,l,c;if(Na)var d;e.valid||h("lpf_btran: the factorization is not valid"),p(0<=r&&r<=n+i);if(Na){d=new Array(1+r);for(l=1;l<=r;l++)d[l]=t[l]}for(l=1;l<=n+i;l++)u[l]=(c=o[l])<=r?t[c]:0;sc(e.luf,1,a),Aa(e,f,n,-1,a),NE(e.scf,1,f,n),Ma(e,a,-1,f,n),ic(e.luf,1,a);for(l=1;l<=r;l++)t[l]=u[s[l]];Na&&_a(e,1,t,d)}function Ha(e,t){var n=e.v_size,r=e.v_ptr-1,i=e.v_ind,s=e.v_val;p(n<t);while(n<t)n+=n;e.v_size=n,e.v_ind=new Array(1+n),e.v_val=new Array(1+n),p(r>=0),m(e.v_ind,1,i,1,r),m(e.v_val,1,s,1,r)}function Ba(e,t,n,r,i,s,o){var u=e.m0,a=e.m;if(Na)var f=e.B;var l=e.n,c=e.R_ptr,d=e.R_len,v=e.S_ptr,m=e.S_len,g=e.P_row,y=e.P_col,b=e.Q_row,w=e.Q_col,E=e.v_ptr,S=e.v_ind,x=e.v_val,T=e.work2,N=e.work1,C=N,k=N,L=e.work2,A=L,O=L,M=k,_=O,D,P,H,B,j;p(n==n),e.valid||h("lpf_update_it: the factorization is not valid"),1<=t&&t<=a||h("lpf_update_it: j = "+t+"; column number out of range"),p(0<=a&&a<=u+l);if(l==e.n_max)return e.valid=0,j=LPF_ELIMIT,j;for(P=1;P<=a;P++)T[P]=0;for(B=1;B<=r;B++)P=i[s+B],1<=P&&P<=a||h("lpf_update_it: ind["+B+"] = "+P+"; row number out of range"),T[P]!=0&&h("lpf_update_it: ind["+B+"] = "+P+"; duplicate row index not allowed"),o[B]==0&&h("lpf_update_it: val["+B+"] = "+o[B]+"; zero element not allowed"),T[P]=o[B];if(Na)for(P=1;P<=a;P++)f[(P-1)*a+t]=T[P];for(P=1;P<=u+l;P++)N[P]=(H=y[P])<=a?T[H]:0;for(P=1;P<=u+l;P++)L[P]=0;L[w[t]]=1,ic(e.luf,0,C),sc(e.luf,1,A),e.v_size<E+u+u&&(Ha(e,E+u+u),S=e.v_ind,x=e.v_val),c[l+1]=E;for(P=1;P<=u;P++)C[P]!=0&&(S[E]=P,x[E]=C[P],E++);d[l+1]=E-e.v_ptr,e.v_ptr=E,v[l+1]=E;for(P=1;P<=u;P++)A[P]!=0&&(S[E]=P,x[E]=A[P],E++);m[l+1]=E-e.v_ptr,e.v_ptr=E,Oa(e,M,0,-1,C),Aa(e,_,0,-1,A),D=0;for(P=1;P<=u;P++)D-=A[P]*C[P];switch(SE(e.scf,M,u,_,u,D)){case 0:break;case lE:return e.valid=0,j=Ta,j;case cE:p(e!=e);default:p(e!=e)}return g[u+l+1]=y[u+l+1]=u+l+1,b[u+l+1]=w[u+l+1]=u+l+1,P=w[t],H=w[u+l+1],b[P]=u+l+1,w[u+l+1]=P,b[H]=t,w[t]=H,e.n++,p(e.n<=e.n_max),j=0,j}function ja(){return P()}function Fa(e,t){H(e,t)}function Ia(e,t){B(e,t)}function qa(e,t){j(e,t-zo+Hi)}function Ra(e,t){return F(e,t)}function Ua(e,t){return I(e,t)}function za(e,t,n){q(e,t,n)}function Wa(e,t,n){R(e,t,n)}function Xa(e,t,n,r,i){U(e,t,n-Fo+qi,r,i)}function Va(e,t,n,r,i){z(e,t,n-Fo+qi,r,i)}function $a(e,t,n){W(e,t,n)}function Ja(e,t,n,r,i){X(e,t,n,r,i)}function Ka(e,t,n,r,i){V(e,t,n,r,i)}function Qa(e,t,n,r,i){$(e,t,n,r,i)}function Ga(e,t,n){Q(e,t,n)}function Ya(e,t,n){G(e,t,n)}function Za(e){tt(e)}function ef(e){return nt(e)}function tf(e){return rt(e)}function nf(e){return it(e)-Hi+zo}function rf(e){return st(e)}function sf(e){return ot(e)}function of(e,t){return ut(e,t)}function uf(e,t){return at(e,t)}function af(e,t){return ft(e,t)-qi+Fo}function ff(e,t){var r=lt(e,t);return r==-n&&(r=0),r}function lf(e,t){var r=ct(e,t);return r==+n&&(r=0),r}function cf(e,t,n){n(af(e,t),ff(e,t),lf(e,t))}function hf(e,t){return ht(e,t)-qi+Fo}function pf(e,t){var r=pt(e,t);return r==-n&&(r=0),r}function df(e,t){var r=dt(e,t);return r==+n&&(r=0),r}function vf(e,t,n){n(hf(e,t),pf(e,t),df(e,t))}function mf(e,t){return vt(e,t)}function gf(e){return mt(e)}function yf(e,t,n,r){return gt(e,t,n,r)}function bf(e,t,n,r){return yt(e,t,n,r)}function wf(e){bt(e)}function Ef(e,t){return wt(e,t)}function Sf(e,t){return Et(e,t)}function xf(e){St(e)}function Tf(e){switch(Cl(e,Hu)){case 0:kt(e);break;case 1:kE(e,Gi);break;case 2:kE(e,Qi);break;case 3:kE(e,Qi|Gi);break;default:p(e!=e)}}function Nf(e){kt(e)}function Cf(e,t,n){Lt(e,t,n-Zo+Xi)}function kf(e,t,n){At(e,t,n-Zo+Xi)}function Lf(e){Ot(e)}function Af(e){Ar(e,0)}function Of(e){Mr(e)}function Mf(e,t){_t(t);switch(Cl(e,Pu)){case 0:t.msg_lev=ps;break;case 1:t.msg_lev=ds;break;case 2:t.msg_lev=vs;break;case 3:t.msg_lev=ms;break;default:p(e!=e)}switch(Cl(e,Bu)){case 0:t.meth=ys;break;case 1:t.meth=ws;break;default:p(e!=e)}switch(Cl(e,ju)){case 0:t.pricing=Es;break;case 1:t.pricing=Ss;break;default:p(e!=e)}Ll(e,Fu)==0?t.r_test=xs:t.r_test=Ts,t.tol_bnd=Ll(e,Iu),t.tol_dj=Ll(e,qu),t.tol_piv=Ll(e,Ru),t.obj_ll=Ll(e,zu),t.obj_ul=Ll(e,Wu),Cl(e,Xu)<0?t.it_lim=s:t.it_lim=Cl(e,Xu),Ll(e,$u)<0?t.tm_lim=s:t.tm_lim=1e3*Ll(e,$u)|0,t.out_frq=Cl(e,Ju),t.out_dly=1e3*Ll(e,Ku)|0;switch(Cl(e,ua)){case 0:t.presolve=Ks;break;case 1:t.presolve=Js;break;default:p(e!=e)}}function _f(e){var t={},n;Mf(e,t),n=Mt(e,t);switch(n){case 0:n=yu;break;case oo:case uo:case ao:case fo:n=Su;break;case lo:n=Au;break;case co:n=xu;break;case ho:n=Tu;break;case po:n=Nu;break;case vo:n=Cu;break;case mo:n=Mu;break;case go:n=_u;break;default:p(n!=n)}return n}function Df(e){var t={},n;Mf(e,t),n=glp_exact(e,t);switch(n){case 0:n=yu;break;case oo:case uo:case fo:case lo:n=Su;break;case po:n=Nu;break;case vo:n=Cu;break;default:p(n!=n)}return n}function Pf(e){var t;switch(Dt(e)){case as:t=hu;break;case ss:t=pu;break;case os:t=du;break;case us:t=vu;break;case fs:t=mu;break;case is:t=gu;break;default:p(e!=e)}return t}function Hf(e){return Pt(e)-is+Xo}function Bf(e){return Ht(e)-is+Ko}function jf(e){return Bt(e)}function Ff(e,t){return jt(e,t)-Xi+Zo}function If(e,t){return Ft(e,t)}function qf(e,t){return It(e,t)}function Rf(e,t,n){n(Ff(e,t),If(e,t),qf(e,t))}function Uf(e,t){return qt(e,t)-Xi+Zo}function zf(e,t){return Rt(e,t)}function Wf(e,t){return Ut(e,t)}function Xf(e,t,n){n(Uf(e,t),zf(e,t),Wf(e,t))}function Vf(e){return zt(e)}function $f(e,t,n){p(t==t),en(e,ts,Co,function(e,t,r,i){n.pe_ae_max=e,n.pe_ae_row=t,n.pe_re_max=r,n.pe_re_row=i,r<=1e-9?n.pe_quality="H":r<=1e-6?n.pe_quality="M":r<=.001?n.pe_quality="L":n.pe_quality="?"}),en(e,ts,ko,function(e,t,r,i){n.pb_ae_max=e,n.pb_ae_ind=t,n.pb_re_max=r,n.pb_re_ind=i,r<=1e-9?n.pb_quality="H":r<=1e-6?n.pb_quality="M":r<=.001?n.pb_quality="L":n.pb_quality="?"}),en(e,ts,Lo,function(t,r,i,s){n.de_ae_max=t,r==0?n.de_ae_col=0:n.de_ae_col=r-e.m,n.de_re_max=i,s==0?n.de_re_col=0:n.de_re_col=r-e.m,i<=1e-9?n.de_quality="H":i<=1e-6?n.de_quality="M":i<=.001?n.de_quality="L":n.de_quality="?"}),en(e,ts,Ao,function(e,t,r,i){n.db_ae_max=e,n.db_ae_ind=t,n.db_re_max=r,n.db_re_ind=i,r<=1e-9?n.db_quality="H":r<=1e-6?n.db_quality="M":r<=.001?n.db_quality="L":n.db_quality="?",n.cs_ae_max=0,n.cs_ae_ind=0,n.cs_re_max=0,n.cs_re_ind=0,n.cs_quality="H"})}function Jf(e){var t=pn(e);return t==0?t=yu:t==oo?t=wu:t==uo?t=Au:t==ao?t=Au:p(t!=t),t}function Kf(e,t,n,r){return dn(e,t,n,r)}function Qf(e,t,n,r){return vn(e,t,n,r)}function Gf(e,t,n,r){return mn(e,t,n,r)}function Yf(e,t,n,r){return gn(e,t,n,r)}function Zf(e,t,n,r,i,s){var o=yn(e,t,n,r,i,s);return p(0<=o&&o<=t),o==0?0:n[o]}function el(e,t,n,r,i,s){var o=bn(e,t,n,r,i,s);return p(0<=o&&o<=t),o==0?0:n[o]}function tl(e){var t=glp_interior(e,null);switch(t){case 0:t=yu;break;case lo:t=Su;break;case Eo:t=ku;break;case So:t=Ou;break;case po:t=Nu;break;case xo:t=Lu;break;default:p(t!=t)}return t}function nl(e){var t;switch(glp_ipt_status(e)){case is:t=iu;break;case as:t=su;break;default:p(e!=e)}return t}function rl(e){return glp_ipt_obj_val(e)}function il(e,t){return glp_ipt_row_prim(e,t)}function sl(e,t){return glp_ipt_row_dual(e,t)}function ol(e,t){return glp_ipt_col_prim(e,t)}function ul(e,t){return glp_ipt_col_dual(e,t)}function al(e,t){p(e==e),t!=Bo&&t!=jo&&h("lpx_set_class: invalid problem class")}function fl(e){return Vt(e)==0?Bo:jo}function ll(e,t,n){Wt(e,t,n-ou+ji)}function cl(e,t){return Xt(e,t)==ji?ou:uu}function hl(e){return Vt(e)}function pl(e){return $t(e)}function dl(e,t){var n={},r;Kt(n);switch(Cl(e,Pu)){case 0:n.msg_lev=ps;break;case 1:n.msg_lev=ds;break;case 2:n.msg_lev=vs;break;case 3:n.msg_lev=ms;break;default:p(e!=e)}switch(Cl(e,Qu)){case 0:n.br_tech=As;break;case 1:n.br_tech=Os;break;case 2:n.br_tech=_s;break;case 3:n.br_tech=Ms;break;default:p(e!=e)}switch(Cl(e,Gu)){case 0:n.bt_tech=Ps;break;case 1:n.bt_tech=Hs;break;case 2:n.bt_tech=js;break;case 3:n.bt_tech=Bs;break;default:p(e!=e)}n.tol_int=Ll(e,Yu),n.tol_obj=Ll(e,Zu),Ll(e,$u)<0||Ll(e,$u)>1e6?n.tm_lim=s:n.tm_lim=1e3*Ll(e,$u)|0,n.mip_gap=Ll(e,ca),Cl(e,fa)&da?n.gmi_cuts=Js:n.gmi_cuts=Ks,Cl(e,fa)&va?n.mir_cuts=Js:n.mir_cuts=Ks,Cl(e,fa)&ha?n.cov_cuts=Js:n.cov_cuts=Ks,Cl(e,fa)&pa?n.clq_cuts=Js:n.clq_cuts=Ks,n.presolve=t,Cl(e,aa)&&(n.binarize=Js),r=Jt(e,n);switch(r){case 0:r=yu;break;case mo:r=Mu;break;case go:r=_u;break;case fo:case yo:r=Su;break;case lo:r=Au;break;case wo:r=Du;break;case vo:r=Cu;break;default:p(r!=r)}return r}function vl(e){return dl(e,Ks)}function ml(e){return dl(e,Js)}function gl(e){var t;switch(Qt(e)){case is:t=au;break;case as:t=fu;break;case ss:t=lu;break;case us:t=cu;break;default:p(e!=e)}return t}function yl(e){return Gt(e)}function bl(e,t){return Yt(e,t)}function wl(e,t){return Zt(e,t)}function El(e,t){en(e,rs,Co,function(e,n,r,i){t.pe_ae_max=e,t.pe_ae_row=n,t.pe_re_max=r,t.pe_re_row=i,r<=1e-9?t.pe_quality="H":r<=1e-6?t.pe_quality="M":r<=.001?t.pe_quality="L":t.pe_quality="?"}),en(e,rs,ko,function(e,n,r,i){t.pb_ae_max=e,t.pb_ae_ind=n,t.pb_re_max=r,t.pb_re_ind=i,r<=1e-9?t.pb_quality="H":r<=1e-6?t.pb_quality="M":r<=.001?t.pb_quality="L":t.pb_quality="?"})}function Sl(e){var t=e.parms;p(t!=null),t.msg_lev=3,t.scale=1,t.dual=0,t.price=1,t.relax=.07,t.tol_bnd=1e-7,t.tol_dj=1e-7,t.tol_piv=1e-9,t.round=0,t.obj_ll=-n,t.obj_ul=+n,t.it_lim=-1,t.tm_lim=-1,t.out_frq=200,t.out_dly=0,t.branch=2,t.btrack=3,t.tol_int=1e-5,t.tol_obj=1e-7,t.mps_info=1,t.mps_obj=2,t.mps_orig=0,t.mps_wide=1,t.mps_free=0,t.mps_skip=0,t.lpt_orig=0,t.presol=0,t.binarize=0,t.use_cuts=0,t.mip_gap=0}function xl(e){return e.parms==null&&(e.parms={},Sl(e)),e.parms}function Tl(e){xl(e),Sl(e)}function Nl(e,t,n){var r=xl(e);switch(t){case Pu:0<=n&&n<=3||h("lpx_set_int_parm: MSGLEV = "+n+"; invalid value"),r.msg_lev=n;break;case Hu:0<=n&&n<=3||h("lpx_set_int_parm: SCALE = "+n+"; invalid value"),r.scale=n;break;case Bu:n!=0&&n!=1&&h("lpx_set_int_parm: DUAL = "+n+"; invalid value"),r.dual=n;break;case ju:n!=0&&n!=1&&h("lpx_set_int_parm: PRICE = "+n+"; invalid value"),r.price=n;break;case Uu:n!=0&&n!=1&&h("lpx_set_int_parm: ROUND = "+n+"; invalid value"),r.round=n;break;case Xu:r.it_lim=n;break;case Vu:e.it_cnt=n;break;case Ju:n>0||h("lpx_set_int_parm: OUTFRQ = "+n+"; invalid value"),r.out_frq=n;break;case Qu:n!=0&&n!=1&&n!=2&&n!=3&&h("lpx_set_int_parm: BRANCH = "+n+"; invalid value"),r.branch=n;break;case Gu:n!=0&&n!=1&&n!=2&&n!=3&&h("lpx_set_int_parm: BTRACK = "+n+"; invalid value"),r.btrack=n;break;case ea:n!=0&&n!=1&&h("lpx_set_int_parm: MPSINFO = "+n+"; invalid value"),r.mps_info=n;break;case ta:n!=0&&n!=1&&n!=2&&h("lpx_set_int_parm: MPSOBJ = "+n+"; invalid value"),r.mps_obj=n;break;case na:n!=0&&n!=1&&h("lpx_set_int_parm: MPSORIG = "+n+"; invalid value"),r.mps_orig=n;break;case ra:n!=0&&n!=1&&h("lpx_set_int_parm: MPSWIDE = "+n+"; invalid value"),r.mps_wide=n;break;case ia:n!=0&&n!=1&&h("lpx_set_int_parm: MPSFREE = "+n+"; invalid value"),r.mps_free=n;break;case sa:n!=0&&n!=1&&h("lpx_set_int_parm: MPSSKIP = "+n+"; invalid value"),r.mps_skip=n;break;case oa:n!=0&&n!=1&&h("lpx_set_int_parm: LPTORIG = "+n+"; invalid value"),r.lpt_orig=n;break;case ua:n!=0&&n!=1&&h("lpx_set_int_parm: PRESOL = "+n+"; invalid value"),r.presol=n;break;case aa:n!=0&&n!=1&&h("lpx_set_int_parm: BINARIZE = "+n+"; invalid value"),r.binarize=n;break;case fa:n&~ma&&h("lpx_set_int_parm: USECUTS = "+n+"; invalid value"),r.use_cuts=n;break;case la:t={},sn(e,t);switch(n){case 1:t.type=ls;break;case 2:t.type=cs;break;case 3:t.type=hs;break;default:h("lpx_set_int_parm: BFTYPE = "+n+"; invalid value")}un(e,t);break;default:h("lpx_set_int_parm: parm = "+t+"; invalid parameter")}}function Cl(e,t){var n=xl(e),r=0;switch(t){case Pu:r=n.msg_lev;break;case Hu:r=n.scale;break;case Bu:r=n.dual;break;case ju:r=n.price;break;case Uu:r=n.round;break;case Xu:r=n.it_lim;break;case Vu:r=e.it_cnt;break;case Ju:r=n.out_frq;break;case Qu:r=n.branch;break;case Gu:r=n.btrack;break;case ea:r=n.mps_info;break;case ta:r=n.mps_obj;break;case na:r=n.mps_orig;break;case ra:r=n.mps_wide;break;case ia:r=n.mps_free;break;case sa:r=n.mps_skip;break;case oa:r=n.lpt_orig;break;case ua:r=n.presol;break;case aa:r=n.binarize;break;case fa:r=n.use_cuts;break;case la:t={},sn(e,t);switch(t.type){case ls:r=1;break;case cs:r=2;break;case hs:r=3;break;default:p(e!=e)}break;default:h("lpx_get_int_parm: parm = "+t+"; invalid parameter")}return r}function kl(e,t,n){var r=xl(e);switch(t){case Fu:0<=n&&n<=1||h("lpx_set_real_parm: RELAX = "+n+"; invalid value"),r.relax=n;break;case Iu:o<=n&&n<=.001||h("lpx_set_real_parm: TOLBND = "+n+"; invalid value"),r.tol_bnd=n;break;case qu:o<=n&&n<=.001||h("lpx_set_real_parm: TOLDJ = "+n+"; invalid value"),r.tol_dj=n;break;case Ru:o<=n&&n<=.001||h("lpx_set_real_parm: TOLPIV = "+n+"; invalid value"),r.tol_piv=n;break;case zu:r.obj_ll=n;break;case Wu:r.obj_ul=n;break;case $u:r.tm_lim=n;break;case Ku:r.out_dly=n;break;case Yu:o<=n&&n<=.001||h("lpx_set_real_parm: TOLINT = "+n+"; invalid value"),r.tol_int=n;break;case Zu:o<=n&&n<=.001||h("lpx_set_real_parm: TOLOBJ = "+n+"; invalid value"),r.tol_obj=n;break;case ca:n<0&&h("lpx_set_real_parm: MIPGAP = "+n+"; invalid value"),r.mip_gap=n;break;default:h("lpx_set_real_parm: parm = "+t+"; invalid parameter")}}function Ll(e,t){var n=xl(e),r=0;switch(t){case Fu:r=n.relax;break;case Iu:r=n.tol_bnd;break;case qu:r=n.tol_dj;break;case Ru:r=n.tol_piv;break;case zu:r=n.obj_ll;break;case Wu:r=n.obj_ul;break;case $u:r=n.tm_lim;break;case Ku:r=n.out_dly;break;case Yu:r=n.tol_int;break;case Zu:r=n.tol_obj;break;case ca:r=n.mip_gap;break;default:h("lpx_get_real_parm: parm = "+t+"; invalid parameter")}return r}function Al(e){var t=ja();return glp_read_mps(t,Mo,null,e)&&(Za(t),t=null),t}function Ol(e,t){return glp_write_mps(e,Mo,null,t)}function Ml(e,t){return p(e==e),p(t==t),h("lpx_read_bas: operation not supported"),0}function _l(e,t){return p(e==e),p(t==t),h("lpx_write_bas: operation not supported"),0}function Dl(e){var t=ja();return glp_read_mps(t,_o,null,e)&&(Za(t),t=null),t}function Pl(e,t){return glp_write_mps(e,_o,null,t)}function Hl(e){var t=ja();return vr(t,null,e)&&(Za(t),t=null),t}function Bl(e,t){return mr(e,null,t)}function jl(e,t,n){function s(){return er(i),r}var r=null,i=Xn();return $n(i,e,t!=null)?s():t!=null&&Kn(i,t)?s():Gn(i,n)?s():(r=P(),Yn(i,r),s())}function Fl(e,t){return mr(e,null,t)}function Il(e,t){return glp_print_sol(e,t)}function ql(e,t){return Dt(e)==as&&!tn(e)&&nn(e),glp_print_ranges(e,0,null,0,t)}function Rl(e,t){return glp_print_ipt(e,t)}function Ul(e,t){return glp_print_mip(e,t)}function zl(e){return tn(e)}function Wl(e,t){return glp_main(e,t)}function $l(){var e={};return e.n_max=e.n=0,e.valid=0,e.fr_ptr=e.fr_len=null,e.fc_ptr=e.fc_len=null,e.vr_ptr=e.vr_len=e.vr_cap=null,e.vr_piv=null,e.vc_ptr=e.vc_len=e.vc_cap=null,e.pp_row=e.pp_col=null,e.qq_row=e.qq_col=null,e.sv_size=0,e.sv_beg=e.sv_end=0,e.sv_ind=null,e.sv_val=null,e.sv_head=e.sv_tail=0,e.sv_prev=e.sv_next=null,e.vr_max=null,e.rs_head=e.rs_prev=e.rs_next=null,e.cs_head=e.cs_prev=e.cs_next=null,e.flag=null,e.work=null,e.new_sva=0,e.piv_tol=.1,e.piv_lim=4,e.suhl=1,e.eps_tol=1e-15,e.max_gro=1e10,e.nnz_a=e.nnz_f=e.nnz_v=0,e.max_a=e.big_v=0,e.rank=0,e}function Jl(e){var t=e.n,n=e.vr_ptr,r=e.vr_len,i=e.vr_cap,s=e.vc_ptr,o=e.vc_len,u=e.vc_cap,a=e.sv_ind,f=e.sv_val,l=e.sv_next,c=1,h,p,d;for(d=e.sv_head;d!=0;d=l[d])if(d<=t){h=d;if(n[h]!=c)break;i[h]=r[h],c+=i[h]}else{p=d-t;if(s[p]!=c)break;u[p]=o[p],c+=u[p]}for(;d!=0;d=l[d])d<=t?(h=d,m(a,c,a,n[h],r[h]),m(f,c,f,n[h],r[h]),n[h]=c,i[h]=r[h],c+=i[h]):(p=d-t,m(a,c,a,s[p],o[p]),m(f,c,f,s[p],o[p]),s[p]=c,u[p]=o[p],c+=u[p]);e.sv_beg=c}function Kl(e,t,n){var r=e.n,i=e.vr_ptr,s=e.vr_len,o=e.vr_cap,u=e.vc_cap,a=e.sv_ind,f=e.sv_val,l=e.sv_prev,c=e.sv_next,h=0,d,v,g;p(1<=t&&t<=r),p(o[t]<n);if(e.sv_end-e.sv_beg<n){Jl(e);if(e.sv_end-e.sv_beg<n)return h=1,h}return d=o[t],m(a,e.sv_beg,a,i[t],s[t]),m(f,e.sv_beg,f,i[t],s[t]),i[t]=e.sv_beg,o[t]=n,e.sv_beg+=n,v=t,l[v]==0?e.sv_head=c[v]:(g=l[v],g<=r?o[g]+=d:u[g-r]+=d,c[l[v]]=c[v]),c[v]==0?e.sv_tail=l[v]:l[c[v]]=l[v],l[v]=e.sv_tail,c[v]=0,l[v]==0?e.sv_head=v:c[l[v]]=v,e.sv_tail=v,h}function Ql(e,t,n){var r=e.n,i=e.vr_cap,s=e.vc_ptr,o=e.vc_len,u=e.vc_cap,a=e.sv_ind,f=e.sv_val,l=e.sv_prev,c=e.sv_next,h=0,d,v,g;p(1<=t&&t<=r),p(u[t]<n);if(e.sv_end-e.sv_beg<n){Jl(e);if(e.sv_end-e.sv_beg<n)return h=1,h}return d=u[t],m(a,e.sv_beg,a,s[t],o[t]),m(f,e.sv_beg,f,s[t],o[t]),s[t]=e.sv_beg,u[t]=n,e.sv_beg+=n,v=r+t,l[v]==0?e.sv_head=c[v]:(g=l[v],g<=r?i[g]+=d:u[g-r]+=d,c[l[v]]=c[v]),c[v]==0?e.sv_tail=l[v]:l[c[v]]=l[v],l[v]=e.sv_tail,c[v]=0,l[v]==0?e.sv_head=v:c[l[v]]=v,e.sv_tail=v,h}function Gl(e,t){var n=e.n_max;e.n=t;if(t<=n)return;e.n_max=n=t+100,e.fr_ptr=new Array(1+n),e.fr_len=new Array(1+n),e.fc_ptr=new Array(1+n),e.fc_len=new Array(1+n),e.vr_ptr=new Array(1+n),e.vr_len=new Array(1+n),e.vr_cap=new Array(1+n),e.vr_piv=new Array(1+n),e.vc_ptr=new Array(1+n),e.vc_len=new Array(1+n),e.vc_cap=new Array(1+n),e.pp_row=new Array(1+n),e.pp_col=new Array(1+n),e.qq_row=new Array(1+n),e.qq_col=new Array(1+n),e.sv_prev=new Array(1+n+n),e.sv_next=new Array(1+n+n),e.vr_max=new Array(1+n),e.rs_head=new Array(1+n),e.rs_prev=new Array(1+n),e.rs_next=new Array(1+n),e.cs_head=new Array(1+n),e.cs_prev=new Array(1+n),e.cs_next=new Array(1+n),e.flag=new Array(1+n),e.work=new Array(1+n)}function Yl(e,t,n){var r=e.n,i=e.fc_ptr,s=e.fc_len,o=e.vr_ptr,u=e.vr_len,a=e.vr_cap,f=e.vc_ptr,l=e.vc_len,c=e.vc_cap,p=e.pp_row,d=e.pp_col,v=e.qq_row,m=e.qq_col,g=e.sv_ind,y=e.sv_val,b=e.sv_prev,w=e.sv_next,E=e.vr_max,S=e.rs_head,x=e.rs_prev,T=e.rs_next,N=e.cs_head,C=e.cs_prev,k=e.cs_next,L=e.flag,A=e.work,O=0,M,_,D,P,H,B,j,F,I,q,R,U,z;I=1,q=e.sv_size+1;for(D=1;D<=r;D++)i[D]=q,s[D]=0;for(M=1;M<=r;M++)u[M]=a[M]=0,L[M]=0;F=0,U=0;for(D=1;D<=r;D++){var W=p,X=A;j=t(n,D,W,X),0<=j&&j<=r||h("luf_factorize: j = "+D+"; len = "+j+"; invalid column length");if(q-I<j)return O=1,O;f[D]=I,l[D]=c[D]=j,F+=j;for(R=1;R<=j;R++)M=W[R],z=X[R],1<=M&&M<=r||h("luf_factorize: i = "+M+"; j = "+D+"; invalid row index"),L[M]&&h("luf_factorize: i = "+M+"; j = "+D+"; duplicate element not allowed"),z==0&&h("luf_factorize: i = "+M+"; j = "+D+"; zero element not allowed"),g[I]=M,y[I]=z,I++,z<0&&(z=-z),U<z&&(U=z),L[M]=1,a[M]++;for(R=1;R<=j;R++)L[W[R]]=0}for(M=1;M<=r;M++){j=a[M];if(q-I<j)return O=1,O;o[M]=I,I+=j}for(D=1;D<=r;D++){P=f[D],H=P+l[D]-1;for(B=P;B<=H;B++)M=g[B],z=y[B],_=o[M]+u[M],g[_]=D,y[_]=z,u[M]++}for(B=1;B<=r;B++)p[B]=d[B]=v[B]=m[B]=B;e.sv_beg=I,e.sv_end=q,e.sv_head=r+1,e.sv_tail=r;for(M=1;M<=r;M++)b[M]=M-1,w[M]=M+1;b[1]=r+r,w[r]=0;for(D=1;D<=r;D++)b[r+D]=r+D-1,w[r+D]=r+D+1;b[r+1]=0,w[r+r]=1;for(B=1;B<=r;B++)L[B]=0,A[B]=0;e.nnz_a=F,e.nnz_f=0,e.nnz_v=F,e.max_a=U,e.big_v=U,e.rank=-1;for(M=1;M<=r;M++)E[M]=-1;for(j=0;j<=r;j++)S[j]=0;for(M=1;M<=r;M++)j=u[M],x[M]=0,T[M]=S[j],T[M]!=0&&(x[T[M]]=M),S[j]=M;for(j=0;j<=r;j++)N[j]=0;for(D=1;D<=r;D++)j=l[D],C[D]=0,k[D]=N[j],k[D]!=0&&(C[k[D]]=D),N[j]=D;return O}function Zl(e,t){function R(){return t(E,S),E==0}var r=e.n,i=e.vr_ptr,o=e.vr_len,u=e.vc_ptr,a=e.vc_len,f=e.sv_ind,l=e.sv_val,c=e.vr_max,h=e.rs_head,d=e.rs_next,v=e.cs_head,m=e.cs_prev,g=e.cs_next,y=e.piv_tol,b=e.piv_lim,w=e.suhl,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j,F,I,q;E=S=0,j=n,_=0,L=v[1];if(L!=0)return p(a[L]==1),E=f[u[L]],S=L,R();T=h[1];if(T!=0)return p(o[T]==1),E=T,S=f[i[T]],R();for(x=2;x<=r;x++){for(L=v[x];L!=0;L=D){A=u[L],O=A+a[L]-1,D=g[L],P=H=0,B=s;for(M=A;M<=O;M++){T=f[M],N=i[T],C=N+o[T]-1;if(o[T]>=B)continue;I=c[T];if(I<0){for(k=N;k<=C;k++)q=l[k],q<0&&(q=-q),I<q&&(I=q);c[T]=I}for(k=i[T];f[k]!=L;k++);p(k<=C),q=l[k],q<0&&(q=-q);if(q<y*I)continue;P=T,H=L,B=o[T];if(B<=x)return E=P,S=H,R()}if(P!=0){_++,F=(B-1)*(x-1),F<j&&(E=P,S=H,j=F);if(_==b)return R()}else w&&(m[L]==0?v[x]=g[L]:g[m[L]]=g[L],g[L]!=0&&(m[g[L]]=m[L]),m[L]=g[L]=L)}for(T=h[x];T!=0;T=d[T]){N=i[T],C=N+o[T]-1,I=c[T];if(I<0){for(k=N;k<=C;k++)q=l[k],q<0&&(q=-q),I<q&&(I=q);c[T]=I}P=H=0,B=s;for(k=N;k<=C;k++){L=f[k];if(a[L]>=B)continue;q=l[k],q<0&&(q=-q);if(q<y*I)continue;P=T,H=L,B=a[L];if(B<=x)return E=P,S=H,R()}if(P!=0){_++,F=(x-1)*(B-1),F<j&&(E=P,S=H,j=F);if(_==b)return R()}else p(P!=P)}}return R()}function ec(e,t,n){var r=e.n,i=e.fc_ptr,s=e.fc_len,o=e.vr_ptr,u=e.vr_len,a=e.vr_cap,f=e.vr_piv,l=e.vc_ptr,c=e.vc_len,h=e.vc_cap,d=e.sv_ind,v=e.sv_val,m=e.sv_prev,g=e.sv_next,y=e.vr_max,b=e.rs_head,w=e.rs_prev,E=e.rs_next,S=e.cs_head,x=e.cs_prev,T=e.cs_next,N=e.flag,C=e.work,k=e.eps_tol,L=e.fr_len,A=0,O,M,_,D,P,H,B,j,F,I,q,R,U,z,W,X,V,$,J,K,Q;p(1<=t&&t<=r),p(1<=n&&n<=r),w[t]==0?b[u[t]]=E[t]:E[w[t]]=E[t],E[t]!=0&&(w[E[t]]=w[t]),x[n]==0?S[c[n]]=T[n]:T[x[n]]=T[n],T[n]!=0&&(x[T[n]]=x[n]),R=o[t],U=R+u[t]-1;for(z=R;d[z]!=n;z++);p(z<=U),K=f[t]=v[z],d[z]=d[U],v[z]=v[U],u[t]--,U--,W=l[n],X=W+c[n]-1;for(V=W;d[V]!=t;V++);p(V<=X),d[V]=d[X],c[n]--,X--;for(z=R;z<=U;z++){B=d[z],N[B]=1,C[B]=v[z],x[B]==0?S[c[B]]=T[B]:T[x[B]]=T[B],T[B]!=0&&(x[T[B]]=x[B]),j=l[B],F=j+c[B]-1;for(I=j;d[I]!=t;I++);p(I<=F),d[I]=d[F],c[B]--}while(W<=X){_=d[W],w[_]==0?b[u[_]]=E[_]:E[w[_]]=E[_],E[_]!=0&&(w[E[_]]=w[_]),D=o[_],P=D+u[_]-1;for(H=D;d[H]!=n;H++);p(H<=P),$=v[H]/K,d[H]=d[P],v[H]=v[P],u[_]--,P--,d[W]=d[X],c[n]--,X--,M=u[t];for(H=D;H<=P;H++){B=d[H];if(N[B]){Q=v[H]-=$*C[B],Q<0&&(Q=-Q),N[B]=0,M--;if(Q==0||Q<k){d[H]=d[P],v[H]=v[P],u[_]--,H--,P--,j=l[B],F=j+c[B]-1;for(I=j;d[I]!=_;I++);p(I<=F),d[I]=d[F],c[B]--}else e.big_v<Q&&(e.big_v=Q)}}if(u[_]+M>a[_]){if(Kl(e,_,u[_]+M))return A=1,A;R=o[t],U=R+u[t]-1,W=l[n],X=W+c[n]-1}O=0;for(z=R;z<=U;z++)B=d[z],N[B]?(Q=J=-$*C[B],Q<0&&(Q=-Q),Q==0||Q<k||(H=o[_]+u[_],d[H]=B,v[H]=J,u[_]++,L[++O]=B,e.big_v<Q&&(e.big_v=Q))):N[B]=1;for(q=1;q<=O;q++){B=L[q];if(c[B]+1>h[B]){if(Ql(e,B,c[B]+10))return A=1,A;R=o[t],U=R+u[t]-1,W=l[n],X=W+c[n]-1}I=l[B]+c[B],d[I]=_,c[B]++}w[_]=0,E[_]=b[u[_]],E[_]!=0&&(w[E[_]]=_),b[u[_]]=_,y[_]=-1;if(e.sv_end-e.sv_beg<1){Jl(e);if(e.sv_end-e.sv_beg<1)return A=1,A;R=o[t],U=R+u[t]-1,W=l[n],X=W+c[n]-1}e.sv_end--,d[e.sv_end]=_,v[e.sv_end]=$,s[t]++}p(c[n]==0),h[n]=0,q=r+n,m[q]==0?e.sv_head=g[q]:g[m[q]]=g[q],g[q]==0?e.sv_tail=m[q]:m[g[q]]=m[q],i[t]=e.sv_end;for(z=R;z<=U;z++){B=d[z],N[B]=0,C[B]=0;if(c[B]==1||x[B]!=B||T[B]!=B)x[B]=0,T[B]=S[c[B]],T[B]!=0&&(x[T[B]]=B),S[c[B]]=B}return A}function tc(e){var t=e.n,n=e.vr_ptr,r=e.vr_len,i=e.vc_ptr,s=e.vc_len,o=e.vc_cap,u=e.sv_ind,a=e.sv_val,f=e.sv_prev,l=e.sv_next,c=0,h,p,d,v,m,g,y,b;b=0;for(h=1;h<=t;h++){p=n[h],d=p+r[h]-1;for(v=p;v<=d;v++)o[u[v]]++;b+=r[h]}e.nnz_v=b;if(e.sv_end-e.sv_beg<b)return c=1,c;for(m=1;m<=t;m++)i[m]=e.sv_beg,e.sv_beg+=o[m];for(h=1;h<=t;h++){p=n[h],d=p+r[h]-1;for(v=p;v<=d;v++)m=u[v],g=i[m]+s[m],u[g]=h,a[g]=a[v],s[m]++}for(y=t+1;y<=t+t;y++)f[y]=y-1,l[y]=y+1;return f[t+1]=e.sv_tail,l[e.sv_tail]=t+1,l[t+t]=0,e.sv_tail=t+t,c}function nc(e){var t=e.n,n=e.fr_ptr,r=e.fr_len,i=e.fc_ptr,s=e.fc_len,o=e.sv_ind,u=e.sv_val,a=0,f,l,c,h,p,d,v;for(f=1;f<=t;f++)r[f]=0;v=0;for(l=1;l<=t;l++){c=i[l],h=c+s[l]-1;for(p=c;p<=h;p++)r[o[p]]++;v+=s[l]}e.nnz_f=v;if(e.sv_end-e.sv_beg<v)return a=1,a;for(f=1;f<=t;f++)n[f]=e.sv_end,e.sv_end-=r[f];for(l=1;l<=t;l++){c=i[l],h=c+s[l]-1;for(p=c;p<=h;p++)f=o[p],d=--n[f],o[d]=l,u[d]=u[p]}return a}function rc(e,t,n,r){function b(){e.new_sva>0&&(e.sv_size=e.new_sva,e.sv_ind=new Array(1+e.sv_size),e.sv_val=new Array(1+e.sv_size),e.new_sva=0);if(Yl(e,n,r))return e.new_sva=e.sv_size+e.sv_size,p(e.new_sva>e.sv_size),!0;for(d=1;d<=t;d++){if(Zl(e,function(e,t){v=e,m=t}))return e.rank=d-1,y=Xl,!1;l=s[v],c=o[m],p(d<=l&&l<=t&&d<=c&&c<=t),g=i[d],i[l]=g,s[g]=l,i[d]=v,s[v]=d,g=u[d],u[c]=g,o[g]=c,u[d]=m,o[m]=d;if(ec(e,v,m))return e.new_sva=e.sv_size+e.sv_size,p(e.new_sva>e.sv_size),!0;if(e.big_v>a*e.max_a)return e.rank=d-1,y=Vl,!1}return Jl(e),tc(e)?(e.new_sva=e.sv_size+e.sv_size,p(e.new_sva>e.sv_size),!0):nc(e)?(e.new_sva=e.sv_size+e.sv_size,p(e.new_sva>e.sv_size),!0):!1}var i,s,o,u,a=e.max_gro,l,c,d,v,m,g,y=null;t<1&&h("luf_factorize: n = "+t+"; invalid parameter"),t>f&&h("luf_factorize: n = "+t+"; matrix too big"),e.valid=0,Gl(e,t),i=e.pp_row,s=e.pp_col,o=e.qq_row,u=e.qq_col,e.sv_size==0&&e.new_sva==0&&(e.new_sva=5*(t+10));while(b());if(y!=null)return y;e.valid=1,e.rank=t,y=0,g=3*(t+e.nnz_v)+2*e.nnz_f;if(e.sv_size<g){e.new_sva=e.sv_size;while(e.new_sva<g)d=e.new_sva,e.new_sva=d+d,p(e.new_sva>d)}return y}function ic(e,t,n){var r=e.n,i=e.fr_ptr,s=e.fr_len,o=e.fc_ptr,u=e.fc_len,a=e.pp_row,f=e.sv_ind,l=e.sv_val,c,p,d,v,m,g,y;e.valid||h("luf_f_solve: LU-factorization is not valid");if(!t)for(p=1;p<=r;p++){d=a[p],y=n[d];if(y!=0){v=o[d],m=v+u[d]-1;for(g=v;g<=m;g++)n[f[g]]-=l[g]*y}}else for(c=r;c>=1;c--){d=a[c],y=n[d];if(y!=0){v=i[d],m=v+s[d]-1;for(g=v;g<=m;g++)n[f[g]]-=l[g]*y}}}function sc(e,t,n){var r=e.n,i=e.vr_ptr,s=e.vr_len,o=e.vr_piv,u=e.vc_ptr,a=e.vc_len,f=e.pp_row,l=e.qq_col,c=e.sv_ind,p=e.sv_val,d=e.work,v,m,g,y,b,w,E;e.valid||h("luf_v_solve: LU-factorization is not valid");for(g=1;g<=r;g++)d[g]=n[g],n[g]=0;if(!t)for(g=r;g>=1;g--){v=f[g],m=l[g],E=d[v];if(E!=0){n[m]=E/=o[v],y=u[m],b=y+a[m]-1;for(w=y;w<=b;w++)d[c[w]]-=p[w]*E}}else for(g=1;g<=r;g++){v=f[g],m=l[g],E=d[m];if(E!=0){n[v]=E/=o[v],y=i[v],b=y+s[v]-1;for(w=y;w<=b;w++)d[c[w]]-=p[w]*E}}}function oc(e,t,n){e.valid||h("luf_a_solve: LU-factorization is not valid"),t?(sc(e,1,n),ic(e,1,n)):(ic(e,0,n),sc(e,0,n))}function Ad(){return{index:{},par:{},set:{},"var":{},con:{},arg:{},loop:{}}}function Od(e){var t;e.token==Fc?t="_|_":e.token==Uc?t="'...'":t=e.image,p(0<=e.c_ptr&&e.c_ptr<Bc),e.context[e.c_ptr++]=" ",e.c_ptr==Bc&&(e.c_ptr=0);for(var n=0;n<t.length;n++)e.context[e.c_ptr++]=t[n],e.c_ptr==Bc&&(e.c_ptr=0)}function Md(e){var t;while(e.c_ptr>0)e.c_ptr--,t=e.context[0],m(e.context,0,e.context,1,Bc-1),e.context[Bc-1]=t;d("Context: "+(e.context[0]==" "?"":"...")+e.context)}function _d(e){var t;if(e.c==uc)return;e.c=="\n"&&e.line++,t=rb(e),t==uc?e.c=="\n"?e.line--:lb(e,"final NL missing before end of file"):t!="\n"&&(N(t)?t=" ":C(t)&&(Od(e),fb(e,"control character "+t+" not allowed"))),e.c=t}function Dd(e){p(0<=e.imlen&&e.imlen<=Hc);if(e.imlen==Hc)switch(e.token){case Ic:Od(e),fb(e,"symbolic name "+e.image+"... too long");break;case qc:Od(e),fb(e,"symbol "+e.image+"... too long");break;case Rc:Od(e),fb(e,"numeric literal "+e.image+"... too long");break;case Uc:Od(e),fb(e,"string literal too long");break;default:p(e!=e)}e.image+=e.c,e.imlen++,_d(e)}function Pd(e){function t(){Od(e),fb(e,"keyword s.t. incomplete")}function n(){Od(e),fb(e,"cannot convert numeric literal "+e.image+" to floating-point number")}function r(){if(e.c=="e"||e.c=="E"){Dd(e),(e.c=="+"||e.c=="-")&&Dd(e),A(e.c)||(Od(e),fb(e,"numeric literal "+e.image+" incomplete"));while(A(e.c))Dd(e)}if(k(e.c)||e.c=="_")Od(e),fb(e,"symbol "+e.image+e.c+"... should be enclosed in quotes")}e.b_token=e.token,e.b_imlen=e.imlen,e.b_image=e.image,e.b_value=e.value;if(e.f_scan){e.f_scan=0,e.token=e.f_token,e.imlen=e.f_imlen,e.image=e.f_image,e.value=e.f_value;return}for(;;){e.token=0,e.imlen=0,e.image="",e.value=0;while(e.c==" "||e.c=="\n")_d(e);if(e.c==uc)e.token=Fc;else{if(e.c=="#"){while(e.c!="\n"&&e.c!=uc)_d(e);continue}if(!e.flag_d&&(k(e.c)||e.c=="_")){e.token=Ic;while(L(e.c)||e.c=="_")Dd(e);e.image=="and"?e.token=zc:e.image=="by"?e.token=Wc:e.image=="cross"?e.token=Xc:e.image=="diff"?e.token=Vc:e.image=="div"?e.token=$c:e.image=="else"?e.token=Jc:e.image=="if"?e.token=Kc:e.image=="in"?e.token=Qc:e.image=="Infinity"?e.token=Gc:e.image=="inter"?e.token=Yc:e.image=="less"?e.token=Zc:e.image=="mod"?e.token=eh:e.image=="not"?e.token=th:e.image=="or"?e.token=nh:e.image=="s"&&e.c=="."?(e.token=rh,Dd(e),e.c!="t"&&t(),Dd(e),e.c!="."&&t(),Dd(e)):e.image=="symdiff"?e.token=ih:e.image=="then"?e.token=sh:e.image=="union"?e.token=oh:e.image=="within"&&(e.token=uh)}else if(!e.flag_d&&A(e.c)){e.token=Rc;while(A(e.c))Dd(e);var i=!1;if(e.c=="."){Dd(e);if(e.c==".")e.imlen--,e.image=e.image.substr(0,e.image.length-1),e.f_dots=1,i=!0;else while(A(e.c))Dd(e)}i||r(),wa(e.image,function(t){e.value=t})&&n()}else if(e.c=="'"||e.c=='"'){var s=e.c;e.token=Uc,_d(e);for(;;){if(e.c=="\n"||e.c==uc)Od(e),fb(e,"unexpected end of line; string literal incomplete");if(e.c==s){_d(e);if(e.c!=s)break}Dd(e)}}else if(!e.flag_d&&e.c=="+")e.token=ah,Dd(e);else if(!e.flag_d&&e.c=="-")e.token=fh,Dd(e);else if(e.c=="*")e.token=lh,Dd(e),e.c=="*"&&(e.token=hh,Dd(e));else if(e.c=="/"){e.token=ch,Dd(e);if(e.c=="*"){_d(e);for(;;)if(e.c==uc)fb(e,"unexpected end of file; comment sequence incomplete");else if(e.c=="*"){_d(e);if(e.c=="/")break}else _d(e);_d(e);continue}}else if(e.c=="^")e.token=hh,Dd(e);else if(e.c=="<")e.token=ph,Dd(e),e.c=="="?(e.token=dh,Dd(e)):e.c==">"?(e.token=yh,Dd(e)):e.c=="-"&&(e.token=Hh,Dd(e));else if(e.c=="=")e.token=vh,Dd(e),e.c=="="&&Dd(e);else if(e.c==">")e.token=gh,Dd(e),e.c=="="?(e.token=mh,Dd(e)):e.c==">"&&(e.token=Dh,Dd(e));else if(e.c=="!")e.token=th,Dd(e),e.c=="="&&(e.token=yh,Dd(e));else if(e.c=="&")e.token=bh,Dd(e),e.c=="&"&&(e.token=zc,Dd(e));else if(e.c=="|")e.token=wh,Dd(e),e.c=="|"&&(e.token=nh,Dd(e));else if(!e.flag_d&&e.c=="."){e.token=Eh,Dd(e);if(e.f_dots)e.token=Ch,e.imlen=2,e.image="..",e.f_dots=0;else if(e.c==".")e.token=Ch,Dd(e);else if(A(e.c)){e.token=Rc,Dd(e);while(A(e.c))Dd(e);r()}}else if(e.c==",")e.token=Sh,Dd(e);else if(e.c==":")e.token=xh,Dd(e),e.c=="="&&(e.token=Nh,Dd(e));else if(e.c==";")e.token=Th,Dd(e);else if(e.c=="(")e.token=kh,Dd(e);else if(e.c==")")e.token=Lh,Dd(e);else if(e.c=="[")e.token=Ah,Dd(e);else if(e.c=="]")e.token=Oh,Dd(e);else if(e.c=="{")e.token=Mh,Dd(e);else if(e.c=="}")e.token=_h,Dd(e);else if(e.c=="~")e.token=Ph,Dd(e);else if(L(e.c)||O("+-._",e.c)>=0){p(e.flag_d),e.token=qc;while(L(e.c)||O("+-._",e.c)>=0)Dd(e);switch(wa(e.image,function(t){e.value=t})){case 0:e.token=Rc;break;case 1:n();break;case 2:break;default:p(e!=e)}}else Od(e),fb(e,"character "+e.c+" not allowed")}break}Od(e),e.flag_x=0}function Hd(e){p(!e.f_scan),e.f_scan=1,e.f_token=e.token,e.f_imlen=e.imlen,e.f_image=e.image,e.f_value=e.value,e.token=e.b_token,e.imlen=e.b_imlen,e.image=e.b_image,e.value=e.b_value}function Bd(e,t){return e.token==Ic&&e.image==t}function jd(e){return e.token==zc&&e.image[0]=="a"||e.token==Wc||e.token==Xc||e.token==Vc||e.token==$c||e.token==Jc||e.token==Kc||e.token==Qc||e.token==Yc||e.token==Zc||e.token==eh||e.token==th&&e.image[0]=="n"||e.token==nh&&e.image[0]=="o"||e.token==ih||e.token==sh||e.token==oh||e.token==uh}function Fd(e,t,n,r,i){var s={},o,u,a;s.op=t,s.vflag=0,s.arg=Ad(),s.value={};switch(t){case Uh:s.arg.num=n.num;break;case zh:s.arg.str=n.str;break;case Wh:s.arg.index.slot=n.index.slot,s.arg.index.next=n.index.next;break;case Xh:case Vh:for(a=n.par.list;a!=null;a=a.next)p(a.x!=null),p(a.x.up==null),a.x.up=s,s.vflag|=a.x.vflag;s.arg.par.par=n.par.par,s.arg.par.list=n.par.list;break;case $h:for(a=n.set.list;a!=null;a=a.next)p(a.x!=null),p(a.x.up==null),a.x.up=s,s.vflag|=a.x.vflag;s.arg.set.set=n.set.set,s.arg.set.list=n.set.list;break;case Jh:for(a=n.var.list;a!=null;a=a.next)p(a.x!=null),p(a.x.up==null),a.x.up=s,s.vflag|=a.x.vflag;s.arg.var.var=n.var.var,s.arg.var.list=n.var.list,s.arg.var.suff=n.var.suff;break;case Kh:for(a=n.con.list;a!=null;a=a.next)p(a.x!=null),p(a.x.up==null),a.x.up=s,s.vflag|=a.x.vflag;s.arg.con.con=n.con.con,s.arg.con.list=n.con.list,s.arg.con.suff=n.con.suff;break;case Qh:case Gh:for(a=n.list;a!=null;a=a.next)p(a.x!=null),p(a.x.up==null),a.x.up=s,s.vflag|=a.x.vflag;s.arg.list=n.list;break;case Yh:p(n.slice!=null),s.arg.slice=n.slice;break;case Zh:case ep:case tp:case np:s.vflag=1;break;case rp:case ip:case sp:case op:case up:case ap:case fp:case lp:case cp:case hp:case pp:case dp:case vp:case mp:case gp:case yp:case bp:case wp:case Ep:case Sp:case xp:case Tp:p(n.arg.x!=null),p(n.arg.x.up==null),n.arg.x.up=s,s.vflag|=n.arg.x.vflag,s.arg.arg.x=n.arg.x;break;case Np:case Cp:case kp:case Lp:case Ap:case Op:case Mp:case _p:case Dp:case Pp:case Hp:case Bp:t==Bp&&(s.vflag=1);case jp:t==jp&&(s.vflag=1);case Fp:case Ip:case qp:case Rp:case Up:case zp:case Wp:case Xp:case Vp:case $p:case Jp:case Kp:case Qp:case Gp:case Yp:case Zp:case ed:case td:case nd:case rd:case id:p(n.arg.x!=null),p(n.arg.x.up==null),n.arg.x.up=s,s.vflag|=n.arg.x.vflag,p(n.arg.y!=null),p(n.arg.y.up==null),n.arg.y.up=s,s.vflag|=n.arg.y.vflag,s.arg.arg.x=n.arg.x,s.arg.arg.y=n.arg.y;break;case sd:case od:case ud:p(n.arg.x!=null),p(n.arg.x.up==null),n.arg.x.up=s,s.vflag|=n.arg.x.vflag,p(n.arg.y!=null),p(n.arg.y.up==null),n.arg.y.up=s,s.vflag|=n.arg.y.vflag,n.arg.z!=null&&(p(n.arg.z.up==null),n.arg.z.up=s,s.vflag|=n.arg.z.vflag),s.arg.arg.x=n.arg.x,s.arg.arg.y=n.arg.y,s.arg.arg.z=n.arg.z;break;case ad:case fd:for(a=n.list;a!=null;a=a.next)p(a.x!=null),p(a.x.up==null),a.x.up=s,s.vflag|=a.x.vflag;s.arg.list=n.list;break;case ld:case cd:case hd:case pd:case dd:case vd:case md:case gd:o=n.loop.domain,p(o!=null),o.code!=null&&(p(o.code.up==null),o.code.up=s,s.vflag|=o.code.vflag);for(u=o.list;u!=null;u=u.next)p(u.code!=null),p(u.code.up==null),u.code.up=s,s.vflag|=u.code.vflag;n.loop.x!=null&&(p(n.loop.x.up==null),n.loop.x.up=s,s.vflag|=n.loop.x.vflag),s.arg.loop.domain=n.loop.domain,s.arg.loop.x=n.loop.x;break;default:p(t!=t)}return s.type=r,s.dim=i,s.up=null,s.valid=0,s.value={},s}function Id(e,t,n,r,i){var s,o=Ad();return p(n!=null),o.arg.x=n,s=Fd(e,t,o,r,i),s}function qd(e,t,n,r,i,s){var o,u=Ad();return p(n!=null),p(r!=null),u.arg.x=n,u.arg.y=r,o=Fd(e,t,u,i,s),o}function Rd(e,t,n,r,i,s,o){var u,a=Ad();return p(n!=null),p(r!=null),a.arg.x=n,a.arg.y=r,a.arg.z=i,u=Fd(e,t,a,s,o),u}function Ud(e){var t,n=Ad();return p(e.token==Rc),n.num=e.value,t=Fd(e,Uh,n,Nc,0),Pd(e),t}function zd(e){var t,n=Ad();return p(e.token==Uc),n.str=e.image,t=Fd(e,zh,n,Mc,0),Pd(e),t}function Wd(e,t,n){var r={},i;p(n!=null),r.x=n,r.next=null;if(t==null)t=r;else{for(i=t;i.next!=null;i=i.next);i.next=r}return t}function Xd(e,t){var n,r;r=0;for(n=t;n!=null;n=n.next)r++;return r}function Vd(e){var t,n=null;for(;;){t=yv(e),t.type==Nc&&(t=Id(e,ip,t,Mc,0)),t.type!=Mc&&fb(e,"subscript expression has invalid type"),p(t.dim==0),n=Wd(e,n,t);if(e.token==Sh)Pd(e);else{if(e.token==Oh)break;fb(e,"syntax error in subscript list")}}return n}function $d(e){var t,n,r,i,s,o,u,a,f,l,c=Ad();p(e.token==Ic);var h=e.tree[e.image];h==null&&fb(e,e.image+" not defined");switch(h.type){case yc:t=h.link,a=t.name,f=0;break;case Ac:n=h.link,a=n.name,f=n.dim,n.dimen==0&&(n.dimen=1);break;case kc:r=h.link,a=r.name,f=r.dim;break;case Pc:i=h.link,a=i.name,f=i.dim;break;case lc:s=h.link,a=s.name,f=s.dim;break;default:p(h!=h)}Pd(e),e.token==Ah?(f==0&&fb(e,a+" cannot be subscripted"),Pd(e),o=Vd(e),f!=Xd(e,o)&&fb(e,a+" must have "+f+" subscript"+(f==1?"":"s")+" rather than "+Xd(e,o)),p(e.token==Oh),Pd(e)):(f!=0&&fb(e,a+" must be subscripted"),o=null),!e.flag_s&&h.type==Pc?l=Bh:l=qh,e.token==Eh&&(Pd(e),e.token!=Ic&&fb(e,"invalid use of period"),h.type!=Pc&&h.type!=lc&&fb(e,a+" cannot have a suffix"),e.image=="lb"?l=jh:e.image=="ub"?l=Fh:e.image=="status"?l=Ih:e.image=="val"?l=qh:e.image=="dual"?l=Rh:fb(e,"suffix ."+e.image+" invalid"),Pd(e));switch(h.type){case yc:c.index.slot=t,c.index.next=t.list,u=Fd(e,Wh,c,Mc,0),t.list=u;break;case Ac:c.set.set=n,c.set.list=o,u=Fd(e,$h,c,pc,n.dimen);break;case kc:c.par.par=r,c.par.list=o,r.type==Mc?u=Fd(e,Vh,c,Mc,0):u=Fd(e,Xh,c,Nc,0);break;case Pc:!e.flag_s&&(l==Ih||l==qh||l==Rh)&&fb(e,"invalid reference to status, primal value, or dual value of variable "+i.name+" above solve statement"),c.var.var=i,c.var.list=o,c.var.suff=l,u=Fd(e,Jh,c,l==Bh?gc:Nc,0);break;case lc:!e.flag_s&&(l==Ih||l==qh||l==Rh)&&fb(e,"invalid reference to status, primal value, or dual value of "+(s.type==lc?"constraint":"objective")+" "+s.name+" above solve statement"),c.con.con=s,c.con.list=o,c.con.suff=l,u=Fd(e,Kh,c,Nc,0);break;default:p(h!=h)}return u}function Jd(e,t){var n=yv(e);return n.type==Mc&&(n=Id(e,rp,n,Nc,0)),n.type!=Nc&&fb(e,"argument for "+t+" has invalid type"),p(n.dim==0),n}function Kd(e,t){var n=yv(e);return n.type==Nc&&(n=Id(e,ip,n,Mc,0)),n.type!=Mc&&fb(e,"argument for "+t+" has invalid type"),p(n.dim==0),n}function Qd(e,t){var n=Sv(e);return n.type!=pc&&fb(e,"argument for "+t+" has invalid type"),p(n.dim>0),n}function Gd(e){var t,n=Ad(),r,i;p(e.token==Ic),e.image=="abs"?r=cp:e.image=="ceil"?r=hp:e.image=="floor"?r=pp:e.image=="exp"?r=dp:e.image=="log"?r=vp:e.image=="log10"?r=mp:e.image=="sqrt"?r=gp:e.image=="sin"?r=yp:e.image=="cos"?r=bp:e.image=="atan"?r=wp:e.image=="min"?r=ad:e.image=="max"?r=fd:e.image=="round"?r=Ep:e.image=="trunc"?r=Sp:e.image=="Irand224"?r=Zh:e.image=="Uniform01"?r=ep:e.image=="Uniform"?r=Bp:e.image=="Normal01"?r=tp:e.image=="Normal"?r=jp:e.image=="card"?r=xp:e.image=="length"?r=Tp:e.image=="substr"?r=nd:e.image=="str2time"?r=rd:e.image=="time2str"?r=id:e.image=="gmtime"?r=np:fb(e,"function "+e.image+" unknown"),i=e.image,p(i.length<16),Pd(e),p(e.token==kh),Pd(e);if(r==ad||r==fd){n.list=null;for(;;){n.list=Wd(e,n.list,Jd(e,i));if(e.token==Sh)Pd(e);else{if(e.token==Lh)break;fb(e,"syntax error in argument list for "+i)}}}else if(r==Zh||r==ep||r==tp||r==np)e.token!=Lh&&fb(e,i+" needs no arguments");else if(r==Bp||r==jp)n.arg.x=Jd(e,i),e.token!=Sh&&(e.token==Lh?fb(e,i+" needs two arguments"):fb(e,"syntax error in argument for "+i)),Pd(e),n.arg.y=Jd(e,i),e.token==Sh?fb(e,i+" needs two argument"):e.token!=Lh&&fb(e,"syntax error in argument for "+i);else if(r==wp||r==Ep||r==Sp){n.arg.x=Jd(e,i);if(e.token==Sh){switch(r){case wp:r=Dp;break;case Ep:r=Pp;break;case Sp:r=Hp;break;default:p(r!=r)}Pd(e),n.arg.y=Jd(e,i)}e.token==Sh?fb(e,i+" needs one or two arguments"):e.token!=Lh&&fb(e,"syntax error in argument for "+i)}else r==nd?(n.arg.x=Kd(e,i),e.token!=Sh&&(e.token==Lh?fb(e,i+" needs two or three arguments"):fb(e,"syntax error in argument for "+i)),Pd(e),n.arg.y=Jd(e,i),e.token==Sh&&(r=ud,Pd(e),n.arg.z=Jd(e,i)),e.token==Sh?fb(e,i+" needs two or three arguments"):e.token!=Lh&&fb(e,"syntax error in argument for "+i)):r==rd?(n.arg.x=Kd(e,i),e.token!=Sh&&(e.token==Lh?fb(e,i+" needs two arguments"):fb(e,"syntax error in argument for "+i)),Pd(e),n.arg.y=Kd(e,i),e.token==Sh?fb(e,i+" needs two argument"):e.token!=Lh&&fb(e,"syntax error in argument for "+i)):r==id?(n.arg.x=Jd(e,i),e.token!=Sh&&(e.token==Lh?fb(e,i+" needs two arguments"):fb(e,"syntax error in argument for "+i)),Pd(e),n.arg.y=Kd(e,i),e.token==Sh?fb(e,i+" needs two argument"):e.token!=Lh&&fb(e,"syntax error in argument for "+i)):(r==xp?n.arg.x=Qd(e,i):r==Tp?n.arg.x=Kd(e,i):n.arg.x=Jd(e,i),e.token==Sh?fb(e,i+" needs one argument"):e.token!=Lh&&fb(e,"syntax error in argument for "+i));return r==nd||r==ud||r==id?t=Fd(e,r,n,Mc,0):t=Fd(e,r,n,Nc,0),p(e.token==Lh),Pd(e),t}function Yd(e,t,n){var r;p(t!=null),p(n!=null),p(n.next==null);if(t.list==null)t.list=n;else{for(r=t.list;r.next!=null;r=r.next);r.next=n}}function Zd(e,t,n,r){var i={},s;p(t!=null),i.name=n,i.code=r,i.value=null,i.list=null,i.next=null;if(t.list==null)t.list=i;else{for(s=t.list;s.next!=null;s=s.next);s.next=i}return i}function ev(e){var t,n=Ad();const r=20;var i=new Array(r+1);y(i,0,r+1);var s,o,u,a,f=0;p(e.token==kh),s=e.flag_x,Pd(e);for(u=1;;u++){u>r&&fb(e,"too many components within parentheses");function l(){t=Cv(e);if(e.token==Sh||u>1)t.type==Nc&&(t=Id(e,ip,t,Mc,0)),t.type!=Mc&&fb(e,"component expression has invalid type"),p(t.dim==0);i[u].name=null,i[u].code=t}if(e.token==Ic){Pd(e),o=e.token,Hd(e);if(!s||o!=Sh&&o!=Lh||e.tree[e.image]!=null)l();else{for(a=1;a<u;a++)i[a].name!=null&&i[a].name==e.image&&fb(e,"duplicate dummy index "+e.image+" not allowed");i[u].name=e.image,i[u].code=null,Pd(e),f=1,u==1&&e.token==Lh&&fb(e,i[u].name+" not defined")}}else l();if(e.token==Sh)Pd(e);else{if(e.token==Lh)break;fb(e,"right parenthesis missing where expected")}}if(u==1&&!f)t=i[1].code;else if(!f){n.list=null;for(a=1;a<=u;a++)n.list=Wd(e,n.list,i[a].code);t=Fd(e,Qh,n,Dc,u)}else{n.slice={};for(a=1;a<=u;a++)Zd(e,n.slice,i[a].name,i[a].code);t=Fd(e,Yh,n,Dc,u)}return Pd(e),f&&e.token!=Qc&&fb(e,"keyword in missing where expected"),s&&e.token==Qc&&!f&&(u==1?fb(e,"syntax error in indexing expression"):fb(e,"0-ary slice not allowed")),t}function tv(e,t){var n=Ad(),r;p(t!=null),n.list=null;for(r=1;;r++){t.type==Nc&&(t=Id(e,ip,t,Mc,0)),t.type==Mc&&(t=Id(e,op,t,Dc,1)),t.type!=Dc&&fb(e,"member expression has invalid type"),n.list!=null&&n.list.x.dim!=t.dim&&fb(e,"member "+(r-1)+" has "+n.list.x.dim+" component"+(n.list.x.dim==1?"":"s")+" while member "+r+" has "+t.dim+" component"+(t.dim==1?"":"s")),n.list=Wd(e,n.list,t);if(e.token==Sh)Pd(e);else{if(e.token==_h)break;fb(e,"syntax error in literal set")}t=yv(e)}return t=Fd(e,Gh,n,pc,n.list.x.dim),t}function nv(e){var t,n,r,i;p(e.token==Mh),Pd(e),e.token==_h&&fb(e,"empty indexing expression not allowed"),t={};for(;;){n=null,i=null;if(e.token==Ic){var s,o;Pd(e),s=e.token,Hd(e),s==Qc&&e.tree[e.image]==null&&(n={},o=e.image,Zd(e,n,o,null),Pd(e),p(e.token==Qc),Pd(e))}else e.token==kh&&(e.flag_x=1,i=Sv(e),i.op==Yh&&(n=i.arg.slice,i=null,p(e.token==Qc),Pd(e)));i==null&&(i=Sv(e)),i.type!=pc&&(n!=null&&fb(e,"domain expression has invalid type"),i=tv(e,i)),p(i!=null),p(i.type==pc),p(i.dim>0);if(n==null){var u;n={};for(u=1;u<=i.dim;u++)Zd(e,n,null,null)}var a=0;for(r=n.list;r!=null;r=r.next)a++;a!=i.dim&&fb(e,a+" "+(a==1?"index":"indices")+" specified for set of dimension "+i.dim),p(n.code==null),n.code=i,Yd(e,t,n);for(r=n.list;r!=null;r=r.next)if(r.name!=null){var f;p(e.tree[r.name]==null),e.tree[r.name]=f={type:yc,link:r}}if(e.token==Sh)Pd(e);else{if(e.token==xh||e.token==_h)break;fb(e,"syntax error in indexing expression")}}return e.token==xh&&(Pd(e),i=Cv(e),i.type==Mc&&(i=Id(e,rp,i,Nc,0)),i.type==Nc&&(i=Id(e,sp,i,Ec,0)),i.type!=Ec&&fb(e,"expression following colon has invalid type"),p(i.dim==0),t.code=i,e.token!=_h&&fb(e,"syntax error in indexing expression")),Pd(e),t}function rv(e,t){var n,r,i;p(t!=null);for(n=t.list;n!=null;n=n.next)for(r=n.list;r!=null;r=r.next)r.name!=null&&(i=e.tree[r.name],p(i!=null),p(i.type==yc),delete e.tree[r.name])}function iv(e){var t,n;for(t=e.arg.loop.domain.list;t!=null;t=t.next)for(n=t.list;n!=null;n=n.next)n.code!=null&&(p(n.code.up==null),n.code.up=e)}function sv(e){function s(){fb(e,"integrand following "+i+"{...} has invalid type")}var t,n=Ad(),r,i;p(e.token==Ic),e.image=="sum"?r=ld:e.image=="prod"?r=cd:e.image=="min"?r=hd:e.image=="max"?r=pd:e.image=="forall"?r=dd:e.image=="exists"?r=vd:e.image=="setof"?r=md:fb(e,"operator "+e.image+" unknown"),i=e.image,p(i.length<8),Pd(e),p(e.token==Mh),n.loop.domain=nv(e);switch(r){case ld:case cd:case hd:case pd:n.loop.x=mv(e),n.loop.x.type==Mc&&(n.loop.x=Id(e,rp,n.loop.x,Nc,0)),n.loop.x.type!=Nc&&(r!=ld||n.loop.x.type!=gc)&&s(),p(n.loop.x.dim==0),t=Fd(e,r,n,n.loop.x.type,0);break;case dd:case vd:n.loop.x=Nv(e),n.loop.x.type==Mc&&(n.loop.x=Id(e,rp,n.loop.x,Nc,0)),n.loop.x.type==Nc&&(n.loop.x=Id(e,sp,n.loop.x,Ec,0)),n.loop.x.type!=Ec&&s(),p(n.loop.x.dim==0),t=Fd(e,r,n,Ec,0);break;case md:n.loop.x=yv(e),n.loop.x.type==Nc&&(n.loop.x=Id(e,ip,n.loop.x,Mc,0)),n.loop.x.type==Mc&&(n.loop.x=Id(e,op,n.loop.x,Dc,1)),n.loop.x.type!=Dc&&s(),p(n.loop.x.dim>0),t=Fd(e,r,n,pc,n.loop.x.dim);break;default:p(r!=r)}return rv(e,n.loop.domain),iv(t),t}function ov(e,t){var n=0;for(var r=t.list;r!=null;r=r.next)for(var i=r.list;i!=null;i=i.next)i.code==null&&n++;return n}function uv(e){var t,n=Ad();return p(e.token==Mh),Pd(e),e.token==_h?(n.list=null,t=Fd(e,Gh,n,pc,1),Pd(e)):(Hd(e),n.loop.domain=nv(e),n.loop.x=null,rv(e,n.loop.domain),t=Fd(e,gd,n,pc,ov(e,n.loop.domain)),iv(t)),t}function av(e){var t,n,r;p(e.token==Kc),Pd(e),t=Cv(e),t.type==Mc&&(t=Id(e,rp,t,Nc,0)),t.type==Nc&&(t=Id(e,sp,t,Ec,0)),t.type!=Ec&&fb(e,"expression following if has invalid type"),p(t.dim==0),e.token!=sh&&fb(e,"keyword then missing where expected"),Pd(e),n=Sv(e),n.type!=Nc&&n.type!=Mc&&n.type!=pc&&n.type!=gc&&fb(e,"expression following then has invalid type");if(e.token!=Jc)n.type==pc&&fb(e,"keyword else missing where expected"),r=null;else{Pd(e),r=Sv(e),r.type!=Nc&&r.type!=Mc&&r.type!=pc&&r.type!=gc&&fb(e,"expression following else has invalid type");if(n.type==gc||r.type==gc)n.type==Mc&&(n=Id(e,rp,n,Nc,0)),n.type==Nc&&(n=Id(e,up,n,gc,0)),r.type==Mc&&(r=Id(e,rp,r,Nc,0)),r.type==Nc&&(r=Id(e,up,r,gc,0));if(n.type==Mc||r.type==Mc)n.type==Nc&&(n=Id(e,ip,n,Mc,0)),r.type==Nc&&(r=Id(e,ip,r,Mc,0));n.type!=r.type&&fb(e,"expressions following then and else have incompatible types"),n.dim!=r.dim&&fb(e,"expressions following then and else have different dimensions "+n.dim+" and "+r.dim+", respectively")}return Rd(e,od,t,n,r,n.type,n.dim)}function fv(e){var t;if(e.token==Rc)t=Ud(e);else if(e.token==Gc){var r=Ad();r.num=n,t=Fd(e,Uh,r,Nc,0),Pd(e)}else if(e.token==Uc)t=zd(e);else if(e.token==Ic){var i;Pd(e),i=e.token,Hd(e);switch(i){case Ah:t=$d(e);break;case kh:t=Gd(e);break;case Mh:t=sv(e);break;default:t=$d(e)}}else e.token==kh?t=ev(e):e.token==Mh?t=uv(e):e.token==Kc?t=av(e):jd(e)?fb(e,"invalid use of reserved keyword "+e.image):fb(e,"syntax error in expression");return t}function lv(e,t){fb(e,"operand preceding "+t+" has invalid type")}function cv(e,t){fb(e,"operand following "+t+" has invalid type")}function hv(e,t,n,r){fb(e,"operands preceding and following "+t+" have different di"+"mensions "+n+" and "+r+", respectively")}function pv(e){return fv(e)}function dv(e){var t,n=pv(e);if(e.token==hh){var r=e.image;p(r.length<8),n.type==Mc&&(n=Id(e,rp,n,Nc,0)),n.type!=Nc&&lv(e,r),Pd(e),e.token==ah||e.token==fh?t=vv(e):t=dv(e),t.type==Mc&&(t=Id(e,rp,t,Nc,0)),t.type!=Nc&&cv(e,r),n=qd(e,_p,n,t,Nc,0)}return n}function vv(e){var t;return e.token==ah?(Pd(e),t=dv(e),t.type==Mc&&(t=Id(e,rp,t,Nc,0)),t.type!=Nc&&t.type!=gc&&cv(e,"+"),t=Id(e,ap,t,t.type,0)):e.token==fh?(Pd(e),t=dv(e),t.type==Mc&&(t=Id(e,rp,t,Nc,0)),t.type!=Nc&&t.type!=gc&&cv(e,"-"),t=Id(e,fp,t,t.type,0)):t=dv(e),t}function mv(e){var t,n=vv(e);for(;;)if(e.token==lh)n.type==Mc&&(n=Id(e,rp,n,Nc,0)),n.type!=Nc&&n.type!=gc&&lv(e,"*"),Pd(e),t=vv(e),t.type==Mc&&(t=Id(e,rp,t,Nc,0)),t.type!=Nc&&t.type!=gc&&cv(e,"*"),n.type==gc&&t.type==gc&&fb(e,"multiplication of linear forms not allowed"),n.type==Nc&&t.type==Nc?n=qd(e,Lp,n,t,Nc,0):n=qd(e,Lp,n,t,gc,0);else if(e.token==ch)n.type==Mc&&(n=Id(e,rp,n,Nc,0)),n.type!=Nc&&n.type!=gc&&lv(e,"/"),Pd(e),t=vv(e),t.type==Mc&&(t=Id(e,rp,t,Nc,0)),t.type!=Nc&&cv(e,"/"),n.type==Nc?n=qd(e,Ap,n,t,Nc,0):n=qd(e,Ap,n,t,gc,0);else if(e.token==$c)n.type==Mc&&(n=Id(e,rp,n,Nc,0)),n.type!=Nc&&lv(e,"div"),Pd(e),t=vv(e),t.type==Mc&&(t=Id(e,rp,t,Nc,0)),t.type!=Nc&&cv(e,"div"),n=qd(e,Op,n,t,Nc,0);else{if(e.token!=eh)break;n.type==Mc&&(n=Id(e,rp,n,Nc,0)),n.type!=Nc&&lv(e,"mod"),Pd(e),t=vv(e),t.type==Mc&&(t=Id(e,rp,t,Nc,0)),t.type!=Nc&&cv(e,"mod"),n=qd(e,Mp,n,t,Nc,0)}return n}function gv(e){var t,n=mv(e);for(;;)if(e.token==ah)n.type==Mc&&(n=Id(e,rp,n,Nc,0)),n.type!=Nc&&n.type!=gc&&lv(e,"+"),Pd(e),t=mv(e),t.type==Mc&&(t=Id(e,rp,t,Nc,0)),t.type!=Nc&&t.type!=gc&&cv(e,"+"),n.type==Nc&&t.type==gc&&(n=Id(e,up,n,gc,0)),n.type==gc&&t.type==Nc&&(t=Id(e,up,t,gc,0)),n=qd(e,Np,n,t,n.type,0);else if(e.token==fh)n.type==Mc&&(n=Id(e,rp,n,Nc,0)),n.type!=Nc&&n.type!=gc&&lv(e,"-"),Pd(e),t=mv(e),t.type==Mc&&(t=Id(e,rp,t,Nc,0)),t.type!=Nc&&t.type!=gc&&cv(e,"-"),n.type==Nc&&t.type==gc&&(n=Id(e,up,n,gc,0)),n.type==gc&&t.type==Nc&&(t=Id(e,up,t,gc,0)),n=qd(e,Cp,n,t,n.type,0);else{if(e.token!=Zc)break;n.type==Mc&&(n=Id(e,rp,n,Nc,0)),n.type!=Nc&&lv(e,"less"),Pd(e),t=mv(e),t.type==Mc&&(t=Id(e,rp,t,Nc,0)),t.type!=Nc&&cv(e,"less"),n=qd(e,kp,n,t,Nc,0)}return n}function yv(e){var t,n=gv(e);for(;;){if(e.token!=bh)break;n.type==Nc&&(n=Id(e,ip,n,Mc,0)),n.type!=Mc&&lv(e,"&"),Pd(e),t=gv(e),t.type==Nc&&(t=Id(e,ip,t,Mc,0)),t.type!=Mc&&cv(e,"&"),n=qd(e,Fp,n,t,Mc,0)}return n}function bv(e){var t,n,r=yv(e);return e.token==Ch&&(r.type==Mc&&(r=Id(e,rp,r,Nc,0)),r.type!=Nc&&lv(e,".."),Pd(e),t=yv(e),t.type==Mc&&(t=Id(e,rp,t,Nc,0)),t.type!=Nc&&cv(e,".."),e.token==Wc?(Pd(e),n=yv(e),n.type==Mc&&(n=Id(e,rp,n,Nc,0)),n.type!=Nc&&cv(e,"by")):n=null,r=Rd(e,sd,r,t,n,pc,1)),r}function wv(e){var t,n=bv(e);for(;;){if(e.token!=Xc)break;n.type!=pc&&lv(e,"cross"),Pd(e),t=bv(e),t.type!=pc&&cv(e,"cross"),n=qd(e,Gp,n,t,pc,n.dim+t.dim)}return n}function Ev(e){var t,n=wv(e);for(;;){if(e.token!=Yc)break;n.type!=pc&&lv(e,"inter"),Pd(e),t=wv(e),t.type!=pc&&cv(e,"inter"),n.dim!=t.dim&&hv(e,"inter",n.dim,t.dim),n=qd(e,Qp,n,t,pc,n.dim)}return n}function Sv(e){var t,n=Ev(e);for(;;)if(e.token==oh)n.type!=pc&&lv(e,"union"),Pd(e),t=Ev(e),t.type!=pc&&cv(e,"union"),n.dim!=t.dim&&hv(e,"union",n.dim,t.dim),n=qd(e,$p,n,t,pc,n.dim);else if(e.token==Vc)n.type!=pc&&lv(e,"diff"),Pd(e),t=Ev(e),t.type!=pc&&cv(e,"diff"),n.dim!=t.dim&&hv(e,"diff",n.dim,t.dim),n=qd(e,Jp,n,t,pc,n.dim);else{if(e.token!=ih)break;n.type!=pc&&lv(e,"symdiff"),Pd(e),t=Ev(e),t.type!=pc&&cv(e,"symdiff"),n.dim!=t.dim&&hv(e,"symdiff",n.dim,t.dim),n=qd(e,Kp,n,t,pc,n.dim)}return n}function xv(e){var t,n=-1,r="",i=Sv(e);switch(e.token){case ph:n=Ip;break;case dh:n=qp;break;case vh:n=Rp;break;case mh:n=Up;break;case gh:n=zp;break;case yh:n=Wp;break;case Qc:n=Yp;break;case uh:n=ed;break;case th:r=e.image,Pd(e),e.token==Qc?n=Zp:e.token==uh?n=td:fb(e,"invalid use of "+r),r+=" ";break;default:return i}r+=e.image,p(r.length<16);switch(n){case Rp:case Wp:case Ip:case qp:case zp:case Up:i.type!=Nc&&i.type!=Mc&&lv(e,r),Pd(e),t=Sv(e),t.type!=Nc&&t.type!=Mc&&cv(e,r),i.type==Nc&&t.type==Mc&&(i=Id(e,ip,i,Mc,0)),i.type==Mc&&t.type==Nc&&(t=Id(e,ip,t,Mc,0)),i=qd(e,n,i,t,Ec,0);break;case Yp:case Zp:i.type==Nc&&(i=Id(e,ip,i,Mc,0)),i.type==Mc&&(i=Id(e,op,i,Dc,1)),i.type!=Dc&&lv(e,r),Pd(e),t=Sv(e),t.type!=pc&&cv(e,r),i.dim!=t.dim&&hv(e,r,i.dim,t.dim),i=qd(e,n,i,t,Ec,0);break;case ed:case td:i.type!=pc&&lv(e,r),Pd(e),t=Sv(e),t.type!=pc&&cv(e,r),i.dim!=t.dim&&hv(e,r,i.dim,t.dim),i=qd(e,n,i,t,Ec,0);break;default:p(n!=n)}return i}function Tv(e){var t,n;return e.token==th?(n=e.image,p(n.length<8),Pd(e),t=xv(e),t.type==Mc&&(t=Id(e,rp,t,Nc,0)),t.type==Nc&&(t=Id(e,sp,t,Ec,0)),t.type!=Ec&&cv(e,n),t=Id(e,lp,t,Ec,0)):t=xv(e),t}function Nv(e){var t,n="",r=Tv(e);for(;;){if(e.token!=zc)break;n=e.image,p(n.length<8),r.type==Mc&&(r=Id(e,rp,r,Nc,0)),r.type==Nc&&(r=Id(e,sp,r,Ec,0)),r.type!=Ec&&lv(e,n),Pd(e),t=Tv(e),t.type==Mc&&(t=Id(e,rp,t,Nc,0)),t.type==Nc&&(t=Id(e,sp,t,Ec,0)),t.type!=Ec&&cv(e,n),r=qd(e,Xp,r,t,Ec,0)}return r}function Cv(e){var t,n=Nv(e);for(;;){if(e.token!=nh)break;var r=e.image;p(r.length<8),n.type==Mc&&(n=Id(e,rp,n,Nc,0)),n.type==Nc&&(n=Id(e,sp,n,Ec,0)),n.type!=Ec&&lv(e,r),Pd(e),t=Nv(e),t.type==Mc&&(t=Id(e,rp,t,Nc,0)),t.type==Nc&&(t=Id(e,sp,t,Ec,0)),t.type!=Ec&&cv(e,r),n=qd(e,Vp,n,t,Ec,0)}return n}function kv(e){function s(){fb(e,"at most one := or default/data allowed")}function o(){fb(e,e.image+" not a plain set")}function u(){fb(e,"dimension of "+e.image+" too small")}function a(){fb(e,"component number must be integer between 1 and "+i.set.dimen)}var t,n,r=0,i;p(Bd(e,"set")),Pd(e),e.token!=Ic&&(jd(e)?fb(e,"invalid use of reserved keyword "+e.image):fb(e,"symbolic name missing where expected")),e.tree[e.image]!=null&&fb(e,e.image+" multiply declared"),t={},t.name=e.image,t.alias=null,t.dim=0,t.domain=null,t.dimen=0,t.within=null,t.assign=null,t.option=null,t.gadget=null,t.data=0,t.array=null,Pd(e),e.token==Uc&&(t.alias=e.image,Pd(e)),e.token==Mh&&(t.domain=nv(e),t.dim=ov(e,t.domain)),n=e.tree[t.name]={},n.type=Ac,n.link=t;for(;;){if(e.token==Sh)Pd(e);else if(e.token==Th)break;if(Bd(e,"dimen")){var f;Pd(e),e.token==Rc&&1<=e.value&&e.value<=20&&Math.floor(e.value)==e.value||fb(e,"dimension must be integer between 1 and 20"),f=e.value+.5|0,r&&fb(e,"at most one dimension attribute allowed"),t.dimen>0&&fb(e,"dimension "+f+" conflicts with dimension "+t.dimen+" already determined"),t.dimen=f,r=1,Pd(e)}else if(e.token==uh||e.token==Qc){var l,c;e.token==Qc&&!e.as_within&&(lb(e,"keyword in understood as within"),e.as_within=1),Pd(e),l={},l.code=null,l.next=null;if(t.within==null)t.within=l;else{for(c=t.within;c.next!=null;c=c.next);c.next=l}l.code=Sv(e),l.code.type!=pc&&fb(e,"expression following within has invalid type"),p(l.code.dim>0),t.dimen==0&&(t.dimen=l.code.dim),t.dimen!=l.code.dim&&fb(e,"set expression following within must have dimension "+t.dimen+" rather than "+l.code.dim)}else if(e.token==Nh)(t.assign!=null||t.option!=null||t.gadget!=null)&&s(),Pd(e),t.assign=Sv(e),t.assign.type!=pc&&fb(e,"expression following := has invalid type"),p(t.assign.dim>0),t.dimen==0&&(t.dimen=t.assign.dim),t.dimen!=t.assign.dim&&fb(e,"set expression following := must have dimension "+t.dimen+" rather than "+t.assign.dim);else if(Bd(e,"default"))(t.assign!=null||t.option!=null)&&s(),Pd(e),t.option=Sv(e),t.option.type!=pc&&fb(e,"expression following default has invalid type"),p(t.option.dim>0),t.dimen==0&&(t.dimen=t.option.dim),t.dimen!=t.option.dim&&fb(e,"set expression following default must have dimension "+t.dimen+" rather than "+t.option.dim);else if(Bd(e,"data")){var h=0,d,v=new Array(20);(t.assign!=null||t.gadget!=null)&&s(),Pd(e),t.gadget=i={},e.token!=Ic&&(jd(e)?fb(e,"invalid use of reserved keyword "+e.image):fb(e,"set name missing where expected")),n=e.tree[e.image],n==null&&fb(e,e.image+" not defined"),n.type!=Ac&&o(),i.set=n.link,i.set.dim!=0&&o(),i.set==t&&fb(e,"set cannot be initialized by itself"),t.dim>=i.set.dimen&&u(),t.dimen==0&&(t.dimen=i.set.dimen-t.dim),t.dim+t.dimen>i.set.dimen?u():t.dim+t.dimen<i.set.dimen&&fb(e,"dimension of "+e.image+" too big"),Pd(e),e.token==kh?Pd(e):fb(e,"left parenthesis missing where expected");for(d=0;d<i.set.dimen;d++)v[d]=0;d=0;for(;;){e.token!=Rc&&fb(e,"component number missing where expected"),Ea(e.image,function(e){h=e})!=0&&a(),1<=h&&h<=i.set.dimen||a(),v[h-1]!=0&&fb(e,"component "+h+" multiply specified"),i.ind[d++]=h,v[h-1]=1,p(d<=i.set.dimen),Pd(e);if(e.token==Sh)Pd(e);else{if(e.token==Lh)break;fb(e,"syntax error in data attribute")}}d<i.set.dimen&&fb(e,"there are must be "+i.set.dimen+" components rather than "+d),Pd(e)}else fb(e,"syntax error in set statement")}return t.domain!=null&&rv(e,t.domain),t.dimen==0&&(t.dimen=1),p(e.token==Th),Pd(e),t}function Lv(e){function o(){i&&fb(e,"at most one binary allowed"),t.type==Mc&&fb(e,"symbolic parameter cannot be binary"),t.type=ac,i=1,Pd(e)}function u(){fb(e,"at most one := or default allowed")}var t,n,r=0,i=0,s=0;p(Bd(e,"param")),Pd(e),e.token!=Ic&&(jd(e)?fb(e,"invalid use of reserved keyword "+e.image):fb(e,"symbolic name missing where expected")),e.tree[e.image]!=null&&fb(e,e.image+" multiply declared"),t={},t.name=e.image,t.alias=null,t.dim=0,t.domain=null,t.type=Nc,t.cond=null,t.in=null,t.assign=null,t.option=null,t.data=0,t.defval=null,t.array=null,Pd(e),e.token==Uc&&(t.alias=e.image,Pd(e)),e.token==Mh&&(t.domain=nv(e),t.dim=ov(e,t.domain));var a=e.tree[t.name]={};a.type=kc,a.link=t;for(;;){if(e.token==Sh)Pd(e);else if(e.token==Th)break;if(Bd(e,"integer"))r&&fb(e,"at most one integer allowed"),t.type==Mc&&fb(e,"symbolic parameter cannot be integer"),t.type!=ac&&(t.type=wc),r=1,Pd(e);else if(Bd(e,"binary"))o();else if(Bd(e,"logical"))e.as_binary||(lb(e,"keyword logical understood as binary"),e.as_binary=1),o();else if(Bd(e,"symbolic"))s&&fb(e,"at most one symbolic allowed"),t.type!=Nc&&fb(e,"integer or binary parameter cannot be symbolic"),(t.cond!=null||t.in!=null||t.assign!=null||t.option!=null)&&fb(e,"keyword symbolic must precede any other parameter attributes"),t.type=Mc,s=1,Pd(e);else if(e.token==ph||e.token==dh||e.token==vh||e.token==mh||e.token==gh||e.token==yh){var f,l={};switch(e.token){case ph:l.rho=Ip,f=e.image;break;case dh:l.rho=qp,f=e.image;break;case vh:l.rho=Rp,f=e.image;break;case mh:l.rho=Up,f=e.image;break;case gh:l.rho=zp,f=e.image;break;case yh:l.rho=Wp,f=e.image;break;default:p(e.token!=e.token)}p(f.length<8),l.code=null,l.next=null;if(t.cond==null)t.cond=l;else{for(n=t.cond;n.next!=null;n=n.next);n.next=l}Pd(e),l.code=yv(e),l.code.type!=Nc&&l.code.type!=Mc&&fb(e,"expression following "+f+" has invalid type"),p(l.code.dim==0),t.type!=Mc&&l.code.type==Mc&&(l.code=Id(e,rp,l.code,Nc,0)),t.type==Mc&&l.code.type!=Mc&&(l.code=Id(e,ip,l.code,Mc,0))}else if(e.token==Qc||e.token==uh){var c;e.token==uh&&!e.as_in&&(lb(e,"keyword within understood as in"),e.as_in=1),Pd(e),c={},c.code=null,c.next=null;if(t.in==null)t.in=c;else{for(n=t.in;n.next!=null;n=n.next);n.next=c}c.code=Sv(e),c.code.type!=pc&&fb(e,"expression following in has invalid type"),p(c.code.dim>0),c.code.dim!=1&&fb(e,"set expression following in must have dimension 1 rather than "+c.code.dim)}else e.token==Nh?((t.assign!=null||t.option!=null)&&u(),Pd(e),t.assign=yv(e),t.assign.type!=Nc&&t.assign.type!=Mc&&fb(e,"expression following := has invalid type"),p(t.assign.dim==0),t.type!=Mc&&t.assign.type==Mc&&(t.assign=Id(e,rp,t.assign,Nc,0)),t.type==Mc&&t.assign.type!=Mc&&(t.assign=Id(e,ip,t.assign,Mc,0))):Bd(e,"default")?((t.assign!=null||t.option!=null)&&u(),Pd(e),t.option=yv(e),t.option.type!=Nc&&t.option.type!=Mc&&fb(e,"expression following default has invalid type"),p(t.option.dim==0),t.type!=Mc&&t.option.type==Mc&&(t.option=Id(e,rp,t.option,Nc,0)),t.type==Mc&&t.option.type!=Mc&&(t.option=Id(e,ip,t.option,Mc,0))):fb(e,"syntax error in parameter statement")}return t.domain!=null&&rv(e,t.domain),p(e.token==Th),Pd(e),t}function Av(e){function r(){n&&fb(e,"at most one binary allowed"),i.type=ac,n=1,Pd(e)}var t=0,n=0;p(Bd(e,"var")),e.flag_s&&fb(e,"variable statement must precede solve statement"),Pd(e),e.token!=Ic&&(jd(e)?fb(e,"invalid use of reserved keyword "+e.image):fb(e,"symbolic name missing where expected")),e.tree[e.image]!=null&&fb(e,e.image+" multiply declared");var i={};i.name=e.image,i.alias=null,i.dim=0,i.domain=null,i.type=Nc,i.lbnd=null,i.ubnd=null,i.array=null,Pd(e),e.token==Uc&&(i.alias=e.image,Pd(e)),e.token==Mh&&(i.domain=nv(e),i.dim=ov(e,i.domain));var s=e.tree[i.name]={};s.type=Pc,s.link=i;for(;;){if(e.token==Sh)Pd(e);else if(e.token==Th)break;if(Bd(e,"integer"))t&&fb(e,"at most one integer allowed"),i.type!=ac&&(i.type=wc),t=1,Pd(e);else if(Bd(e,"binary"))r();else if(Bd(e,"logical"))e.as_binary||(lb(e,"keyword logical understood as binary"),e.as_binary=1),r();else if(Bd(e,"symbolic"))fb(e,"variable cannot be symbolic");else if(e.token==mh)i.lbnd!=null&&(i.lbnd==i.ubnd?fb(e,"both fixed value and lower bound not allowed"):fb(e,"at most one lower bound allowed")),Pd(e),i.lbnd=yv(e),i.lbnd.type==Mc&&(i.lbnd=Id(e,rp,i.lbnd,Nc,0)),i.lbnd.type!=Nc&&fb(e,"expression following >= has invalid type"),p(i.lbnd.dim==0);else if(e.token==dh)i.ubnd!=null&&(i.ubnd==i.lbnd?fb(e,"both fixed value and upper bound not allowed"):fb(e,"at most one upper bound allowed")),Pd(e),i.ubnd=yv(e),i.ubnd.type==Mc&&(i.ubnd=Id(e,rp,i.ubnd,Nc,0)),i.ubnd.type!=Nc&&fb(e,"expression following <= has invalid type"),p(i.ubnd.dim==0);else if(e.token==vh){var o;if(i.lbnd!=null||i.ubnd!=null)i.lbnd==i.ubnd?fb(e,"at most one fixed value allowed"):i.lbnd!=null?fb(e,"both lower bound and fixed value not allowed"):fb(e,"both upper bound and fixed value not allowed");o=e.image,p(o.length<8),Pd(e),i.lbnd=yv(e),i.lbnd.type==Mc&&(i.lbnd=Id(e,rp,i.lbnd,Nc,0)),i.lbnd.type!=Nc&&fb(e,"expression following "+o+" has invalid type"),p(i.lbnd.dim==0),i.ubnd=i.lbnd}else e.token==ph||e.token==gh||e.token==yh?fb(e,"strict bound not allowed"):fb(e,"syntax error in variable statement")}return i.domain!=null&&rv(e,i.domain),p(e.token==Th),Pd(e),i}function Ov(e){function o(){fb(e,"syntax error in constraint statement")}var t,n,r,i,s;e.flag_s&&fb(e,"constraint statement must precede solve statement"),Bd(e,"subject")?(Pd(e),Bd(e,"to")||fb(e,"keyword subject to incomplete"),Pd(e)):Bd(e,"subj")?(Pd(e),Bd(e,"to")||fb(e,"keyword subj to incomplete"),Pd(e)):e.token==rh&&Pd(e),e.token!=Ic&&(jd(e)?fb(e,"invalid use of reserved keyword "+e.image):fb(e,"symbolic name missing where expected")),e.tree[e.image]!=null&&fb(e,e.image+" multiply declared");var u={};u.name=e.image,u.alias=null,u.dim=0,u.domain=null,u.type=lc,u.code=null,u.lbnd=null,u.ubnd=null,u.array=null,Pd(e),e.token==Uc&&(u.alias=e.image,Pd(e)),e.token==Mh&&(u.domain=nv(e),u.dim=ov(e,u.domain));var a=e.tree[u.name]={};a.type=lc,a.link=u,e.token!=xh&&fb(e,"colon missing where expected"),Pd(e),t=yv(e),t.type==Mc&&(t=Id(e,rp,t,Nc,0)),t.type!=Nc&&t.type!=gc&&fb(e,"expression following colon has invalid type"),p(t.dim==0),e.token==Sh&&Pd(e);switch(e.token){case dh:case mh:case vh:break;case ph:case gh:case yh:fb(e,"strict inequality not allowed");break;case Th:fb(e,"constraint must be equality or inequality");break;default:o()}i=e.token,s=e.image,p(s.length<8),Pd(e),n=yv(e),n.type==Mc&&(n=Id(e,rp,n,Nc,0)),n.type!=Nc&&n.type!=gc&&fb(e,"expression following "+s+" has invalid type"),p(n.dim==0),e.token==Sh&&(Pd(e),e.token==Th&&o()),e.token==ph||e.token==dh||e.token==vh||e.token==mh||e.token==gh||e.token==yh?((i==vh||e.token!=i)&&fb(e,"double inequality must be ... <= ... <= ... or ... >= ... >= ..."),t.type==gc&&fb(e,"leftmost expression in double inequality cannot be linear form"),Pd(e),r=yv(e),r.type==Mc&&(r=Id(e,rp,n,Nc,0)),r.type!=Nc&&r.type!=gc&&fb(e,"rightmost expression in double inequality constraint has invalid type"),p(r.dim==0),r.type==gc&&fb(e,"rightmost expression in double inequality cannot be linear form")):r=null,u.domain!=null&&rv(e,u.domain),t.type!=gc&&(t=Id(e,up,t,gc,0)),n.type!=gc&&(n=Id(e,up,n,gc,0)),r!=null&&(r=Id(e,up,r,gc,0));if(r==null)switch(i){case dh:u.code=t,u.lbnd=null,u.ubnd=n;break;case mh:u.code=t,u.lbnd=n,u.ubnd=null;break;case vh:u.code=t,u.lbnd=n,u.ubnd=n;break;default:p(i!=i)}else switch(i){case dh:u.code=n,u.lbnd=t,u.ubnd=r;break;case mh:u.code=n,u.lbnd=r,u.ubnd=t;break;default:p(i!=i)}return e.token!=Th&&o(),Pd(e),u}function Mv(e){var t,n;Bd(e,"minimize")?n=xc:Bd(e,"maximize")?n=Sc:p(e!=e),e.flag_s&&fb(e,"objective statement must precede solve statement"),Pd(e),e.token!=Ic&&(jd(e)?fb(e,"invalid use of reserved keyword "+e.image):fb(e,"symbolic name missing where expected")),e.tree[e.image]!=null&&fb(e,e.image+" multiply declared"),t={},t.name=e.image,t.alias=null,t.dim=0,t.domain=null,t.type=n,t.code=null,t.lbnd=null,t.ubnd=null,t.array=null,Pd(e),e.token==Uc&&(t.alias=e.image,Pd(e)),e.token==Mh&&(t.domain=nv(e),t.dim=ov(e,t.domain));var r=e.tree[t.name]={};return r.type=lc,r.link=t,e.token!=xh&&fb(e,"colon missing where expected"),Pd(e),t.code=yv(e),t.code.type==Mc&&(t.code=Id(e,rp,t.code,Nc,0)),t.code.type==Nc&&(t.code=Id(e,up,t.code,gc,0)),t.code.type!=gc&&fb(e,"expression following colon has invalid type"),p(t.code.dim==0),t.domain!=null&&rv(e,t.domain),e.token!=Th&&fb(e,"syntax error in objective statement"),Pd(e),t}function _v(e){var t,n,r,i,s,o,u,a,f,l,c;p(Bd(e,"table")),Pd(e),e.token!=Ic&&(jd(e)?fb(e,"invalid use of reserved keyword "+e.image):fb(e,"symbolic name missing where expected")),e.tree[e.image]!=null&&fb(e,e.image+" multiply declared");var h={u:{"in":{},out:{}}};h.name=e.image,Pd(e),e.token==Uc?(h.alias=e.image,Pd(e)):h.alias=null,e.token==Mh?(h.type=Cc,h.u.out.domain=nv(e),Bd(e,"OUT")||fb(e,"keyword OUT missing where expected"),Pd(e)):(h.type=bc,Bd(e,"IN")||fb(e,"keyword IN missing where expected"),Pd(e)),h.arg=t=null;for(;;){n={},(e.token==Sh||e.token==xh||e.token==Th)&&fb(e,"argument expression missing where expected"),n.code=yv(e),n.code.type==Nc&&(n.code=Id(e,ip,n.code,Mc,0)),n.code.type!=Mc&&fb(e,"argument expression has invalid type"),n.next=null,t==null?h.arg=n:t.next=n,t=n;if(e.token==Sh)Pd(e);else if(e.token==xh||e.token==Th)break}p(h.arg!=null),e.token==xh?Pd(e):fb(e,"colon missing where expected");switch(h.type){case bc:e.token==Ic?(f=e.tree[e.image],f==null&&fb(e,e.image+" not defined"),f.type!=Ac&&fb(e,e.image+" not a set"),h.u.in.set=f.link,h.u.in.set.assign!=null&&fb(e,e.image+" needs no data"),h.u.in.set.dim!=0&&fb(e,e.image+" must be a simple set"),Pd(e),e.token==Hh?Pd(e):fb(e,"delimiter <- missing where expected")):jd(e)?fb(e,"invalid use of reserved keyword "+e.image):h.u.in.set=null,h.u.in.fld=r=null,l=0,e.token==Ah?Pd(e):fb(e,"field list missing where expected");for(;;){i={},e.token!=Ic&&(jd(e)?fb(e,"invalid use of reserved keyword "+e.image):fb(e,"field name missing where expected")),i.name=e.image,Pd(e),i.next=null,r==null?h.u.in.fld=i:r.next=i,r=i,l++;if(e.token==Sh)Pd(e);else{if(e.token==Oh)break;fb(e,"syntax error in field list")}}h.u.in.set!=null&&h.u.in.set.dimen!=l&&fb(e,"there must be "+h.u.in.set.dimen+" field"+(h.u.in.set.dimen==1?"":"s")+" rather than "+l),Pd(e),h.u.in.list=s=null;while(e.token==Sh)Pd(e),o={},e.token!=Ic&&(jd(e)?fb(e,"invalid use of reserved keyword "+e.image):fb(e,"parameter name missing where expected")),f=e.tree[e.image],f==null&&fb(e,e.image+" not defined"),f.type!=kc&&fb(e,e.image+" not a parameter"),o.par=f.link,o.par.dim!=l&&fb(e,e.image+" must have "+l+" subscript"+(l==1?"":"s")+" rather than "+o.par.dim),o.par.assign!=null&&fb(e,e.image+" needs no data"),Pd(e),e.token==Ph?(Pd(e),e.token!=Ic&&(jd(e)?fb(e,"invalid use of reserved keyword "+e.image):fb(e,"field name missing where expected")),p(e.image.length<Hc+1),c=e.image,Pd(e)):(p(o.par.name.length<Hc+1),c=o.par.name),o.name=c,o.next=null,s==null?h.u.in.list=o:s.next=o,s=o;break;case Cc:h.u.out.list=u=null;for(;;){a={},(e.token==Sh||e.token==Th)&&fb(e,"expression missing where expected"),e.token==Ic?(p(e.image.length<Hc+1),c=e.image):c="",a.code=yv(e),e.token==Ph&&(Pd(e),e.token!=Ic&&(jd(e)?fb(e,"invalid use of reserved keyword "+e.image):fb(e,"field name missing where expected")),p(e.image.length<Hc+1),c=e.image,Pd(e)),c==""&&fb(e,"field name required"),a.name=c,a.next=null,u==null?h.u.out.list=a:u.next=a,u=a;if(e.token==Sh)Pd(e);else{if(e.token==Th)break;fb(e,"syntax error in output list")}}rv(e,h.u.out.domain);break;default:p(h!=h)}return e.token!=Th&&fb(e,"syntax error in table statement"),Pd(e),h}function Dv(e){return p(Bd(e,"solve")),e.flag_s&&fb(e,"at most one solve statement allowed"),e.flag_s=1,Pd(e),e.token!=Th&&fb(e,"syntax error in solve statement"),Pd(e),null}function Pv(e){p(Bd(e,"check"));var t={};return t.domain=null,t.code=null,Pd(e),e.token==Mh&&(t.domain=nv(e)),e.token==xh&&Pd(e),t.code=Cv(e),t.code.type!=Ec&&fb(e,"expression has invalid type"),p(t.code.dim==0),t.domain!=null&&rv(e,t.domain),e.token!=Th&&fb(e,"syntax error in check statement"),Pd(e),t}function Hv(e){var t;p(Bd(e,"display"));var n={};n.domain=null,n.list=t=null,Pd(e),e.token==Mh&&(n.domain=nv(e)),e.token==xh&&Pd(e);for(;;){var r={u:{}};function i(){r.type=vc,r.u.code=Cv(e)}r.type=0,r.next=null,n.list==null?n.list=r:t.next=r,t=r;if(e.token==Ic){var s,o;Pd(e),o=e.token,Hd(e);if(o!=Sh&&o!=Th)i();else{s=e.tree[e.image],s==null&&fb(e,e.image+" not defined"),r.type=s.type;switch(s.type){case yc:r.u.slot=s.link;break;case Ac:r.u.set=s.link;break;case kc:r.u.par=s.link;break;case Pc:r.u.var=s.link,e.flag_s||fb(e,"invalid reference to variable "+r.u.var.name+" above solve statement");break;case lc:r.u.con=s.link,e.flag_s||fb(e,"invalid reference to "+(r.u.con.type==lc?"constraint":"objective")+" "+r.u.con.name+" above solve statement");break;default:p(s!=s)}Pd(e)}}else i();if(e.token!=Sh)break;Pd(e)}return n.domain!=null&&rv(e,n.domain),e.token!=Th&&fb(e,"syntax error in display statement"),Pd(e),n}function Bv(e){var t,n;p(Bd(e,"printf"));var r={};r.domain=null,r.fmt=null,r.list=n=null,Pd(e),e.token==Mh&&(r.domain=nv(e)),e.token==xh&&Pd(e),r.fmt=yv(e),r.fmt.type==Nc&&(r.fmt=Id(e,ip,r.fmt,Mc,0)),r.fmt.type!=Mc&&fb(e,"format expression has invalid type");while(e.token==Sh)Pd(e),t={},t.code=null,t.next=null,r.list==null?r.list=t:n.next=t,n=t,t.code=Sv(e),t.code.type!=Nc&&t.code.type!=Mc&&t.code.type!=Ec&&fb(e,"only numeric, symbolic, or logical expression allowed");r.domain!=null&&rv(e,r.domain),r.fname=null,r.app=0;if(e.token==gh||e.token==Dh)r.app=e.token==Dh,Pd(e),r.fname=yv(e),r.fname.type==Nc&&(r.fname=Id(e,ip,r.fname,Mc,0)),r.fname.type!=Mc&&fb(e,"file name expression has invalid type");return e.token!=Th&&fb(e,"syntax error in printf statement"),Pd(e),r}function jv(e){var t,n;p(Bd(e,"for"));var r={};r.domain=null,r.list=n=null,Pd(e),e.token!=Mh&&fb(e,"indexing expression missing where expected"),r.domain=nv(e),e.token==xh&&Pd(e);if(e.token!=Mh)r.list=Iv(e,1);else{Pd(e);while(e.token!=_h)t=Iv(e,1),n==null?r.list=t:n.next=t,n=t;Pd(e)}return p(r.domain!=null),rv(e,r.domain),r}function Fv(e){!e.flag_d&&Bd(e,"end")||e.flag_d&&Jv(e,"end")?(Pd(e),e.token==Th?Pd(e):lb(e,"no semicolon following end statement; missing semicolon inserted")):lb(e,"unexpected end of file; missing end statement inserted"),e.token!=Fc&&lb(e,"some text detected beyond end statement; text ignored")}function Iv(e,t){var n={u:{}};return n.line=e.line,n.next=null,Bd(e,"set")?(t&&fb(e,"set statement not allowed here"),n.type=Ac,n.u.set=kv(e)):Bd(e,"param")?(t&&fb(e,"parameter statement not allowed here"),n.type=kc,n.u.par=Lv(e)):Bd(e,"var")?(t&&fb(e,"variable statement not allowed here"),n.type=Pc,n.u.var=Av(e)):Bd(e,"subject")||Bd(e,"subj")||e.token==rh?(t&&fb(e,"constraint statement not allowed here"),n.type=lc,n.u.con=Ov(e)):Bd(e,"minimize")||Bd(e,"maximize")?(t&&fb(e,"objective statement not allowed here"),n.type=lc,n.u.con=Mv(e)):Bd(e,"table")?(t&&fb(e,"table statement not allowed here"),n.type=_c,n.u.tab=_v(e)):Bd(e,"solve")?(t&&fb(e,"solve statement not allowed here"),n.type=Oc,n.u.slv=Dv(e)):Bd(e,"check")?(n.type=fc,n.u.chk=Pv(e)):Bd(e,"display")?(n.type=cc,n.u.dpy=Hv(e)):Bd(e,"printf")?(n.type=Lc,n.u.prt=Bv(e)):Bd(e,"for")?(n.type=mc,n.u.fur=jv(e)):e.token==Ic?(t&&fb(e,"constraint statement not allowed here"),n.type=lc,n.u.con=Ov(e)):jd(e)?fb(e,"invalid use of reserved keyword "+e.image):fb(e,"syntax error in model section"),n}function qv(e){var t,n;p(e.model==null),n=null;while(e.token!=Fc&&!Bd(e,"data")&&!Bd(e,"end"))t=Iv(e,0),n==null?e.model=t:n.next=t,n=t}function Rv(e,t,n){var r,i={};i.sym=n,i.next=null;if(t==null)t=i;else{for(r=t;r.next!=null;r=r.next);r.next=i}return t}function Uv(e,t){var n,r=0;for(n=t;n!=null;n=n.next)r++;return r}function zv(e,t){var n,r=0;for(n=t;n!=null;n=n.next)n.sym==null&&r++;return r}function Wv(e,t){var n=null;while(t-->0)n=Rv(e,n,null);return n}function Xv(e,t){var n;while(t!=null)n=t,t=n.next}function Vv(e){return e.token==Rc}function $v(e){return e.token==Rc||e.token==qc||e.token==Uc}function Jv(e,t){return $v(e)&&e.image==t}function Kv(e){p(Vv(e));var t=e.value;return Pd(e),t}function Qv(e){var t;return p($v(e)),Vv(e)?t=Pm(e,e.value):t=Hm(e,e.image),Pd(e),t}function Gv(e,t,n){var r,i;p(t!=null);switch(e.token){case Ah:i=Oh;break;case kh:p(n>0),i=Lh;break;default:p(e!=e)}n==0&&fb(e,t+" cannot be subscripted"),Pd(e),r=null;for(;;){$v(e)?r=Rv(e,r,Qv(e)):e.token==lh?(r=Rv(e,r,null),Pd(e)):fb(e,"number, symbol, or asterisk missing where expected");if(e.token==Sh)Pd(e);else{if(e.token==i)break;fb(e,"syntax error in slice")}}if(Uv(e,r)!=n)switch(i){case Oh:fb(e,t+" must have "+n+" subscript"+(n==1?"":"s")+", not "+Uv(e,r));break;case Lh:fb(e,t+" has dimension "+n+", not "+Uv(e,r));break;default:p(i!=i)}return Pd(e),r}function Yv(e,t){var n,r;return p(t!=null),r=e.tree[t],(r==null||r.type!=Ac)&&fb(e,t+" not a set"),n=r.link,(n.assign!=null||n.gadget!=null)&&fb(e,t+" needs no data"),n.data=1,n}function Zv(e,t,n,r){var i,s,o,u=null;p(t!=null),p(n!=null),p(r!=null),p(t.dimen==Uv(e,r)),p(n.value.set.dim==t.dimen),zv(e,r)>0&&p($v(e)),i=null;for(s=r;s!=null;s=s.next){if(s.sym==null){if(!$v(e)){var a=zv(e,s);p(u!=null),a==1?fb(e,"one item missing in data group beginning with "+Fm(e,u)):fb(e,a+" items missing in data group beginning with "+Fm(e,u))}o=Qv(e),u==null&&(u=o)}else o=Bm(e,s.sym);i=qm(e,i,o),s.next!=null&&e.token==Sh&&Pd(e)}Km(e,n.value.set,i)}function em(e,t,n,r,i){var s,o,u,a,f;p(t!=null),p(n!=null),p(r!=null),p(t.dimen==Uv(e,r)),p(n.value.set.dim==t.dimen),p(zv(e,r)==2),s=null;while(e.token!=Nh)$v(e)||fb(e,"number, symbol, or := missing where expected"),s=Rv(e,s,Qv(e));Pd(e);while($v(e)){f=Qv(e);for(o=s;o!=null;o=o.next){var l=0;if(!Jv(e,"+")){if(Jv(e,"-")){Pd(e);continue}var c=Uv(e,o);c==1?fb(e,"one item missing in data group beginning with "+Fm(e,f)):fb(e,c+" items missing in data group beginning with "+Fm(e,f))}a=null;for(u=r;u!=null;u=u.next)if(u.sym==null)switch(++l){case 1:a=qm(e,a,Bm(e,i?o.sym:f));break;case 2:a=qm(e,a,Bm(e,i?f:o.sym));break;default:p(l!=l)}else a=qm(e,a,Bm(e,u.sym));p(l==2),Km(e,n.value.set,a),Pd(e)}}Xv(e,s)}function tm(e){function o(){fb(e,"slice currently used must specify 2 asterisks, not "+zv(e,i))}function u(){fb(e,"transpose indicator (tr) incomplete")}function a(){Pd(e),Jv(e,"tr")||u(),zv(e,i)!=2&&o(),Pd(e),e.token!=Lh&&u(),Pd(e),e.token==xh&&Pd(e),s=1,em(e,t,r,i,s)}var t,n,r,i,s=0;p(Jv(e,"set")),Pd(e),$v(e)||fb(e,"set name missing where expected"),t=Yv(e,e.image),Pd(e),n=null;if(e.token==Ah){t.dim==0&&fb(e,t.name+" cannot be subscripted"),Pd(e);for(;;){$v(e)||fb(e,"number or symbol missing where expected"),n=qm(e,n,Qv(e));if(e.token==Sh)Pd(e);else{if(e.token==Oh)break;fb(e,"syntax error in subscript list")}}t.dim!=Rm(e,n)&&fb(e,t.name+" must have "+t.dim+" subscript"+(t.dim==1?"":"s")+" rather than "+Rm(e,n)),Pd(e)}else t.dim!=0&&fb(e,t.name+" must be subscripted");dg(e,t.array,n)!=null&&fb(e,t.name+Xm(e,"[",n)+" already defined"),r=vg(e,t.array,n),r.value.set=Vm(e,t.dimen),i=Wv(e,t.dimen);for(;;){e.token==Sh&&Pd(e);if(e.token==Nh)Pd(e);else if(e.token==kh){var f;Pd(e),f=Jv(e,"tr"),Hd(e),f?a():(Xv(e,i),i=Gv(e,t.name,t.dimen),s=0,zv(e,i)==0&&Zv(e,t,r,i))}else if($v(e))Zv(e,t,r,i);else if(e.token==xh)zv(e,i)!=2&&o(),Pd(e),em(e,t,r,i,s);else if(e.token==kh)a();else{if(e.token==Th){Pd(e);break}fb(e,"syntax error in set data block")}}Xv(e,i)}function nm(e,t){var n,r;return p(t!=null),r=e.tree[t],(r==null||r.type!=kc)&&fb(e,t+" not a parameter"),n=r.link,n.assign!=null&&fb(e,t+" needs no data"),n.data&&fb(e,t+" already provided with data"),n.data=1,n}function rm(e,t,n){p(t!=null),p(n!=null),t.option!=null&&fb(e,"default value for "+t.name+" already specified in model section"),p(t.defval==null),t.defval=n}function im(e,t,n){var r;p(t!=null),p($v(e)),dg(e,t.array,n)!=null&&fb(e,t.name+Xm(e,"[",n)+" already defined"),r=vg(e,t.array,n);switch(t.type){case Nc:case wc:case ac:Vv(e)||fb(e,t.name+" requires numeric data"),r.value.num=Kv(e);break;case Mc:r.value.sym=Qv(e);break;default:p(t!=t)}return r}function sm(e,t,n){var r,i,s,o=null;p(t!=null),p(t.dim==Uv(e,n)),p($v(e)),r=null;for(i=n;i!=null;i=i.next){if(i.sym==null){if(!$v(e)){var u=zv(e,i)+1;p(o!=null),p(u>1),fb(e,u+" items missing in data group beginning with "+Fm(e,o))}s=Qv(e),o==null&&(o=s)}else s=Bm(e,i.sym);r=qm(e,r,s),e.token==Sh&&Pd(e)}$v(e)||(p(o!=null),fb(e,"one item missing in data group beginning with "+Fm(e,o))),im(e,t,r)}function om(e,t,n,r){var i,s,o,u,a;p(t!=null),p(t.dim==Uv(e,n)),p(zv(e,n)==2),i=null;while(e.token!=Nh)$v(e)||fb(e,"number, symbol, or := missing where expected"),i=Rv(e,i,Qv(e));Pd(e);while($v(e)){a=Qv(e);for(s=i;s!=null;s=s.next){var f=0;if(Jv(e,".")){Pd(e);continue}u=null;for(o=n;o!=null;o=o.next)if(o.sym==null)switch(++f){case 1:u=qm(e,u,Bm(e,r?s.sym:a));break;case 2:u=qm(e,u,Bm(e,r?a:s.sym));break;default:p(f!=f)}else u=qm(e,u,Bm(e,o.sym));p(f==2);if(!$v(e)){var l=Uv(e,s);l==1?fb(e,"one item missing in data group beginning with "+Fm(e,a)):fb(e,l+" items missing in data group beginning with "+Fm(e,a))}im(e,t,u)}}Xv(e,i)}function um(e,t){var n=null,r,i,s,o,u,a,f=0,l=null;$v(e)&&(Pd(e),u=e.token,Hd(e),u==xh&&(n=Yv(e,e.image),n.dim!=0&&fb(e,n.name+" must be a simple set"),n.array.head!=null&&fb(e,n.name+" already defined"),vg(e,n.array,null).value.set=Vm(e,n.dimen),l=n.name,f=n.dimen,Pd(e),p(e.token==xh),Pd(e))),i=null;while(e.token!=Nh)$v(e)||fb(e,"parameter name or := missing where expected"),r=nm(e,e.image),r.dim==0&&fb(e,e.image+" not a subscripted parameter"),f!=0&&r.dim!=f&&(p(l!=null),fb(e,l+" has dimension "+f+" while "+r.name+" has dimension "+r.dim)),t!=null&&rm(e,r,Bm(e,t)),i=Rv(e,i,r),l=r.name,f=r.dim,Pd(e),e.token==Sh&&Pd(e);Uv(e,i)==0&&fb(e,"at least one parameter name required"),Pd(e),e.token==Sh&&Pd(e);while($v(e)){var c;o=null;for(a=1;a<=f;a++)$v(e)||(c=Uv(e,i)+f-a+1,p(o!=null),p(c>1),fb(e,c+" items missing in data group beginning with "+Fm(e,o.sym))),o=qm(e,o,Qv(e)),a<f&&e.token==Sh&&Pd(e);n!=null&&Km(e,n.array.head.value.set,Um(e,o)),e.token==Sh&&Pd(e);for(s=i;s!=null;s=s.next){if(Jv(e,".")){Pd(e);continue}$v(e)||(c=Uv(e,s),p(o!=null),c==1?fb(e,"one item missing in data group beginning with "+Fm(e,o.sym)):fb(e,c+" items missing in data group beginning with "+Fm(e,o.sym))),im(e,s.sym,Um(e,o)),s.next!=null&&e.token==Sh&&Pd(e)}e.token==Sh&&(Pd(e),$v(e)||Hd(e))}for(s=i;s!=null;s=s.next)s.sym=null;Xv(e,i)}function am(e){function s(){fb(e,t.name+" not a subscripted parameter")}function o(){fb(e,"slice currently used must specify 2 asterisks, not "+zv(e,r))}function u(){fb(e,"transpose indicator (tr) incomplete")}var t,n=null,r,i=0;p(Jv(e,"param")),Pd(e),Jv(e,"default")&&(Pd(e),$v(e)||fb(e,"default value missing where expected"),n=Qv(e),e.token!=xh&&fb(e,"colon missing where expected"));if(e.token==xh){Pd(e),e.token==Sh&&Pd(e),um(e,n),e.token!=Th&&fb(e,"symbol, number, or semicolon missing where expected"),Pd(e);return}$v(e)||fb(e,"parameter name missing where expected"),t=nm(e,e.image),Pd(e),Jv(e,"default")&&(Pd(e),$v(e)||fb(e,"default value missing where expected"),n=Qv(e),rm(e,t,n)),r=Wv(e,t.dim);for(;;){e.token==Sh&&Pd(e);if(e.token==Nh)Pd(e);else if(e.token==Ah)Xv(e,r),r=Gv(e,t.name,t.dim),i=0;else if($v(e))sm(e,t,r);else if(e.token==xh)t.dim==0&&s(),zv(e,r)!=2&&o(),Pd(e),om(e,t,r,i);else if(e.token==kh)Pd(e),Jv(e,"tr")||u(),t.dim==0&&s(),zv(e,r)!=2&&o(),Pd(e),e.token!=Lh&&u(),Pd(e),e.token==xh&&Pd(e),i=1,om(e,t,r,i);else{if(e.token==Th){Pd(e);break}fb(e,"syntax error in parameter data block")}}Xv(e,r)}function fm(e){while(e.token!=Fc&&!Jv(e,"end"))Jv(e,"set")?tm(e):Jv(e,"param")?am(e):fb(e,"syntax error in data section")}function lm(e,t,r){return(t>0&&r>0&&t>.999*n-r||t<0&&r<0&&t<-0.999*n-r)&&fb(e,t+" + "+r+"; floating-point overflow"),t+r}function cm(e,t,r){return(t>0&&r<0&&t>.999*n+r||t<0&&r>0&&t<-0.999*n+r)&&fb(e,t+" - "+r+"; floating-point overflow"),t-r}function hm(e,t,r){return t<r?0:(t>0&&r<0&&t>.999*n+r&&fb(e,t+" less "+r+"; floating-point overflow"),t-r)}function pm(e,t,r){return Math.abs(r)>1&&Math.abs(t)>.999*n/Math.abs(r)&&fb(e,t+" * "+r+"; floating-point overflow"),t*r}function dm(e,t,i){return Math.abs(i)<r&&fb(e,t+" / "+i+"; floating-point zero divide"),Math.abs(i)<1&&Math.abs(t)>.999*n*Math.abs(i)&&fb(e,t+" / "+i+"; floating-point overflow"),t/i}function vm(e,t,i){return Math.abs(i)<r&&fb(e,t+" div "+i+"; floating-point zero divide"),Math.abs(i)<1&&Math.abs(t)>.999*n*Math.abs(i)&&fb(e,t+" div "+i+"; floating-point overflow"),t/=i,t>0?Math.floor(t):t<0?Math.ceil(t):0}function mm(e,t,n){var r;if(t==0)r=0;else if(n==0)r=t;else{r=Math.abs(t)%Math.abs(n);if(r!=0){t<0&&(r=-r);if(t>0&&n<0||t<0&&n>0)r+=n}}return r}function gm(e,t,r){var i;return(t==0&&r<=0||t<0&&r!=Math.floor(r))&&fb(e,t+" ** "+r+"; result undefined"),t==0?i=Math.pow(t,r):((Math.abs(t)>1&&r>1&&+Math.log(Math.abs(t))>.999*Math.log(n)/r||Math.abs(t)<1&&r<-1&&+Math.log(Math.abs(t))<.999*Math.log(n)/r)&&fb(e,t+" ** "+r+"; floating-point overflow"),Math.abs(t)>1&&r<-1&&-Math.log(Math.abs(t))<.999*Math.log(n)/r||Math.abs(t)<1&&r>1&&-Math.log(Math.abs(t))>.999*Math.log(n)/r?i=0:i=Math.pow(t,r)),i}function ym(e,t){return t>.999*Math.log(n)&&fb(e,"exp("+t+"); floating-point overflow"),Math.exp(t)}function bm(e,t){return t<=0&&fb(e,"log("+t+"); non-positive argument"),Math.log(t)}function wm(e,t){return t<=0&&fb(e,"log10("+t+"); non-positive argument"),Math.log(t)/Math.LN10}function Em(e,t){return t<0&&fb(e,"sqrt("+t+"); negative argument"),Math.sqrt(t)}function Sm(e,t){return-1e6<=t&&t<=1e6||fb(e,"sin("+t+"); argument too large"),Math.sin(t)}function xm(e,t){return-1e6<=t&&t<=1e6||fb(e,"cos("+t+"); argument too large"),Math.cos(t)}function Tm(e,t){return Math.atan(t)}function Nm(e,t,n){return Math.atan2(t,n)}function Cm(e,t,r){var s;return r!=Math.floor(r)&&fb(e,"round("+t+", "+r+"); non-integer second argument"),r<=i+2&&(s=Math.pow(10,r),Math.abs(t)<.999*n/s&&(t=Math.floor(t*s+.5),t!=0&&(t/=s))),t}function km(e,t,r){var s;return r!=Math.floor(r)&&fb(e,"trunc("+t+", "+r+"); non-integer second argument"),r<=i+2&&(s=Math.pow(10,r),Math.abs(t)<.999*n/s&&(t=t>=0?Math.floor(t*s):Math.ceil(t*s),t!=0&&(t/=s))),t}function Lm(e){const t=16777216;return sE(e.rand,t)}function Am(e){const t=2147483648;return iE(e.rand)/t}function Om(e,t,n){var r;return t>=n&&fb(e,"Uniform("+t+", "+n+"); invalid range"),r=Am(e),r=lm(e,t*(1-r),n*r),r}function Mm(e){var t,n,r;do t=-1+2*Am(e),n=-1+2*Am(e),r=t*t+n*n;while(r>1||r==0);return n*Math.sqrt(-2*Math.log(r)/r)}function _m(e,t,n){return lm(e,t,pm(e,n,Mm(e)))}function Dm(e,t,n){return t==n?0:t>n?1:-1}function Pm(e,t){var n={};return n.num=t,n.str=null,n}function Hm(e,t){p(t!=null);var n={};return n.num=0,n.str=t,n}function Bm(e,t){p(t!=null);var n={};return t.str==null?(n.num=t.num,n.str=null):(n.num=0,n.str=t.str),n}function jm(e,t,n){return p(t!=null),p(n!=null),t.str==null&&n.str==null?t.num<n.num?-1:t.num>n.num?1:0:t.str==null?-1:n.str==null?1:Dm(e,t.str,n.str)}function Fm(e,t){p(t!=null);var n;if(t.str==null)n=String(t.num);else{var r,i,s,o=t.str;if(!k(o[0])&&o[0]!="_")r=!0;else{r=!1;for(i=1;i<o.length;i++)if(!(L(o[i])||O("+-._",o[i])>=0)){r=!0;break}}n="",s=0;function u(e){s<255&&(n+=e,s++)}r&&u("'");for(i=0;i<o.length;i++)r&&o[i]=="'"&&u("'"),u(o[i]);r&&u("'"),s==255&&(n=n.slice(0,252)+"...")}return p(n.length<=255),n}function Im(e,t,n){var r,s;p(Hc>=i+i),t.str==null?r=String(t.num):r=t.str,n.str==null?s=String(n.num):s=n.str;if(r.length+s.length>Hc){var o=Fm(e,t);p(o.length<Hc),fb(e,o+" & "+Fm(e,n)+"; resultant symbol exceeds "+Hc+" characters")}return Hm(e,r+s)}function qm(e,t,n){var r;p(n!=null);var i={};i.sym=n,i.next=null;if(t==null)t=i;else{for(r=t;r.next!=null;r=r.next);r.next=i}return t}function Rm(e,t){var n=0;for(var r=t;r!=null;r=r.next)n++;return n}function Um(e,t){var n,r;if(t==null)n=null;else{n=r={};for(;t!=null;t=t.next)p(t.sym!=null),r.sym=Bm(e,t.sym),t.next!=null&&(r=r.next={});r.next=null}return n}function zm(e,t,n){var r,i,s;for(r=t,i=n;r!=null;r=r.next,i=i.next){p(i!=null),p(r.sym!=null),p(i.sym!=null),s=jm(e,r.sym,i.sym);if(s!=0)return s}return p(i==null),0}function Wm(e,t,n){var r=null;for(var i=1,s=t;i<=n;i++,s=s.next)p(s!=null),r=qm(e,r,Bm(e,s.sym));return r}function Xm(e,t,n){function f(e){s<255&&(o+=e),s++}var r,i,s=0,o="",u="",a,l=Rm(e,n);t=="["&&l>0&&f("["),t=="("&&l>1&&f("(");for(r=n;r!=null;r=r.next){r!=n&&f(","),p(r.sym!=null),u=Fm(e,r.sym),p(u.length<=255);for(i=0;i<u.length;i++)f(u[i])}return t=="["&&l>0&&f("]"),t=="("&&l>1&&f(")"),s==255&&(o=o.slice(0,252)+"..."),p(o.length<=255),o}function Vm(e,t){return p(t>0),hg(e,Tc,t)}function $m(e,t,n){return p(t!=null),p(t.type==Tc),p(t.dim==Rm(e,n)),dg(e,t,n)}function Jm(e,t,n){var r;return p(t!=null),p(t.type==Tc),p(t.dim==Rm(e,n)),r=vg(e,t,n),r.value.none=null,r}function Km(e,t,n){return $m(e,t,n)!=null&&fb(e,"duplicate tuple "+Xm(e,"(",n)+" detected"),Jm(e,t,n)}function Qm(e,t){var n,r;p(t!=null),p(t.type==Tc),p(t.dim>0),n=Vm(e,t.dim);for(r=t.head;r!=null;r=r.next)Jm(e,n,Um(e,r.tuple));return n}function Gm(e,t,r,i){var o;return i==0&&fb(e,t+" .. "+r+" by "+i+"; zero stride not allowed"),r>0&&t<0&&r>.999*n+t?o=+n:r<0&&t>0&&r<-0.999*n+t?o=-n:o=r-t,Math.abs(i)<1&&Math.abs(o)>.999*n*Math.abs(i)?o>0&&i>0||o<0&&i<0?o=+n:o=0:(o=Math.floor(o/i)+1,o<0&&(o=0)),p(o>=0),o>s-1&&fb(e,t+" .. "+r+" by "+i+"; set too large"),o+.5|0}function Ym(e,t,n,r,i){return p(1<=i&&i<=Gm(e,t,n,r)),t+(i-1)*r}function Zm(e,t,n,r){var i=Vm(e,1),s=Gm(e,t,n,r);for(var o=1;o<=s;o++)Jm(e,i,qm(e,null,Pm(e,Ym(e,t,n,r,o))));return i}function eg(e,t,n){p(t!=null),p(t.type==Tc),p(t.dim>0),p(n!=null),p(n.type==Tc),p(n.dim>0),p(t.dim==n.dim);for(var r=n.head;r!=null;r=r.next)$m(e,t,r.tuple)==null&&Jm(e,t,Um(e,r.tuple));return t}function tg(e,t,n){p(t!=null),p(t.type==Tc),p(t.dim>0),p(n!=null),p(n.type==Tc),p(n.dim>0),p(t.dim==n.dim);var r=Vm(e,t.dim);for(var i=t.head;i!=null;i=i.next)$m(e,n,i.tuple)==null&&Jm(e,r,Um(e,i.tuple));return r}function ng(e,t,n){var r;p(t!=null),p(t.type==Tc),p(t.dim>0),p(n!=null),p(n.type==Tc),p(n.dim>0),p(t.dim==n.dim);var i=Vm(e,t.dim);for(r=t.head;r!=null;r=r.next)$m(e,n,r.tuple)==null&&Jm(e,i,Um(e,r.tuple));for(r=n.head;r!=null;r=r.next)$m(e,t,r.tuple)==null&&Jm(e,i,Um(e,r.tuple));return i}function rg(e,t,n){p(t!=null),p(t.type==Tc),p(t.dim>0),p(n!=null),p(n.type==Tc),p(n.dim>0),p(t.dim==n.dim);var r=Vm(e,t.dim);for(var i=t.head;i!=null;i=i.next)$m(e,n,i.tuple)!=null&&Jm(e,r,Um(e,i.tuple));return r}function ig(e,t,n){var r,i,s,o;p(t!=null),p(t.type==Tc),p(t.dim>0),p(n!=null),p(n.type==Tc),p(n.dim>0);var u=Vm(e,t.dim+n.dim);for(r=t.head;r!=null;r=r.next)for(i=n.head;i!=null;i=i.next){s=Um(e,r.tuple);for(o=i.tuple;o!=null;o=o.next)s=qm(e,s,Bm(e,o.sym));Jm(e,u,s)}return u}function sg(e,t){var n;return t==0?n=null:(n={},n.coef=t,n.var=null,n.next=null),n}function og(e,t){p(t!=null);var n={};return n.coef=1,n.var=t,n.next=null,n}function ug(e,t){var n,r;if(t==null)n=null;else{n=r={};for(;t!=null;t=t.next)r.coef=t.coef,r.var=t.var,t.next!=null&&(r=r.next={});r.next=null}return n}function ag(e,t,n,r,i){var s=null,o,u,a=0;for(o=n;o!=null;o=o.next)o.var==null?a=lm(e,a,pm(e,t,o.coef)):o.var.temp=lm(e,o.var.temp,pm(e,t,o.coef));for(o=i;o!=null;o=o.next)o.var==null?a=lm(e,a,pm(e,r,o.coef)):o.var.temp=lm(e,o.var.temp,pm(e,r,o.coef));for(o=n;o!=null;o=o.next)o.var!=null&&o.var.temp!=0&&(u={},u.coef=o.var.temp,u.var=o.var,u.next=s,s=u,o.var.temp=0);for(o=i;o!=null;o=o.next)o.var!=null&&o.var.temp!=0&&(u={},u.coef=o.var.temp,u.var=o.var,u.next=s,s=u,o.var.temp=0);return a!=0&&(u={},u.coef=a,u.var=null,u.next=s,s=u),s}function fg(e,t,n){var r=null,i,s=0;while(t!=null)i=t,t=t.next,i.var==null?s=lm(e,s,i.coef):(i.next=r,r=i);return n(s),r}function lg(e,t){var n,r,i=0;for(n=t;n!=null;n=n.next)n.var==null?i=lm(e,i,n.coef):n.var.temp=lm(e,n.var.temp,n.coef);r=t,t=null;for(n=r;n!=null;n=r)r=n.next,n.var==null&&i!=0?(n.coef=i,i=0,n.next=t,t=n):n.var!=null&&n.var.temp!=0&&(n.coef=n.var.temp,n.var.temp=0,n.next=t,t=n);return t}function cg(e,t,n){p(n!=null);switch(t){case Tc:n.none=null;break;case Nc:n.num=0;break;case Mc:n.sym=null;break;case Ec:n.bit=0;break;case Dc:n.tuple=null;break;case pc:n.set=null;break;case dc:n.var=null;break;case gc:n.form=null;break;case hc:n.con=null;break;default:p(t!=t)}}function hg(e,t,n){p(t==Tc||t==Nc||t==Mc||t==pc||t==dc||t==hc),p(n>=0);var r={};return r.type=t,r.dim=n,r.size=0,r.head=null,r.tail=null,r.tree=!1,r.prev=null,r.next=e.a_list,r.next!=null&&(r.next.prev=r),e.a_list=r,r}function pg(e,t,n){return zm(e,t,n)}function dg(e,t,n){var r;p(t!=null),p(Rm(e,n)==t.dim);if(t.size>30&&!t.tree)for(r=t.head;r!=null;r=r.next)r.tuple.memb=r;if(!t.tree){for(r=t.head;r!=null;r=r.next)if(zm(e,r.tuple,n)==0)break}else{var i=n.memb;r=i==null?null:i.link}return r}function vg(e,t,n){p(t!=null),p(Rm(e,n)==t.dim);var r={};return r.tuple=n,r.next=null,r.value={},t.size++,t.head==null?t.head=r:t.tail.next=r,t.tail=r,t.tree&&(r.tuple.memb=r),r}function mg(e,t,n){var r,i;p(t!=null),p(n!=null);if(t.value!=null){if(jm(e,t.value,n)==0)return;t.value=null}for(r=t.list;r!=null;r=r.arg.index.next){p(r.op==Wh);for(i=r;i!=null;i=i.up)i.valid&&(i.valid=0,cg(e,i.type,i.value))}t.value=Bm(e,n)}function gg(e,t){var n,r;if(t.backup!=null)for(n=t.list,r=t.backup;n!=null;n=n.next,r=r.next)p(r!=null),p(r.sym!=null),mg(e,n,r.sym)}function yg(e,t,n,r,i){var s,o=0;return p(t.code!=null),hy(e,t.code,n)?(s=t.backup,t.backup=n,gg(e,t),i(e,r),t.backup=s,gg(e,t),o):(o=1,o)}function bg(e,t){if(t.block!=null){var n,r,i=null,s=null;n=t.block,t.block=n.next;for(r=n.list;r!=null;r=r.next)i==null?i=s={}:s=s.next={},r.code==null?(p(t.tuple!=null),s.sym=t.tuple.sym,p(s.sym!=null),t.tuple=t.tuple.next):s.sym=sy(e,r.code);s.next=null,yg(e,n,i,t,bg)&&(t.failure=1);for(r=n.list;r!=null;r=r.next)p(i!=null),s=i,i=i.next}else p(t.tuple==null),t.domain.code!=null&&!uy(e,t.domain.code)?t.failure=2:t.func(e,t.info)}function wg(e,t,n,r,i){var s={};return t==null?(p(n==null),i(e,r),s.failure=0):(p(n!=null),s.domain=t,s.block=t.list,s.tuple=n,s.info=r,s.func=i,s.failure=0,bg(e,s)),s.failure}function Eg(e,t){if(t.block!=null){var n,r,i;n=t.block,t.block=n.next,i=null;for(r=n.list;r!=null;r=r.next)r.code!=null&&(i=qm(e,i,sy(e,r.code)));p(n.code!=null);if(n.code.op==sd){var s,o,u,a,f,l;a=iy(e,n.code.arg.arg.x),f=iy(e,n.code.arg.arg.y),n.code.arg.arg.z==null?l=1:l=iy(e,n.code.arg.arg.z),o=Gm(e,a,f,l),s=qm(e,null,Pm(e,0)),p(i==null);for(u=1;u<=o&&t.looping;u++)s.sym.num=Ym(e,a,f,l,u),yg(e,n,s,t,Eg)}else{var c,h,d,v;c=ly(e,n.code);for(h=c.head;h!=null&&t.looping;h=h.next){d=h.tuple,v=i;var m=!1;for(r=n.list;r!=null;r=r.next){p(d!=null);if(r.code!=null){p(v!=null);if(jm(e,d.sym,v.sym)!=0){m=!0;break}v=v.next}d=d.next}m||(p(d==null),p(v==null),yg(e,n,h.tuple,t,Eg))}}t.block=n}else if(t.domain.code==null||!!uy(e,t.domain.code))t.looping=!t.func(e,t.info)}function Sg(e,t,n,r){var i={};t==null?r(e,n):(i.domain=t,i.block=t.list,i.looping=1,i.info=n,i.func=r,Eg(e,i))}function xg(e,t,n){p(t!=null),p(n!=null),fb(e,t+Xm(e,"[",n)+" out of domain")}function Tg(e,t){var n=null;if(t!=null)for(var r=t.list;r!=null;r=r.next)for(var i=r.list;i!=null;i=i.next)i.code==null&&(p(i.value!=null),n=qm(e,n,Bm(e,i.value)));return n}function Ng(e,t){if(t==null)return;for(var n=t.list;n!=null;n=n.next){for(var r=n.list;r!=null;r=r.next)vy(e,r.code),r.value=null;vy(e,n.code)}vy(e,t.code)}function Cg(e,t,n,r){for(var i=t.within,s=1;i!=null;i=i.next,s++){p(i.code!=null);for(var o=r.head;o!=null;o=o.next)if(!hy(e,i.code,o.tuple)){var u=Xm(e,"(",o.tuple);p(u.length<255),fb(e,t.name+Xm(e,"[",n)+" contains "+u+" which not within specified set; see ("+s+")")}}}function kg(e,t,n){function s(){Cg(e,t,n,r),i=vg(e,t.array,Um(e,n)),i.value.set=r}var r,i=dg(e,t.array,n);return i!=null?r=i.value.set:t.assign!=null?(r=ly(e,t.assign),s()):t.option!=null?(r=ly(e,t.option),s()):fb(e,"no value for "+t.name+Xm(e,"[",n)),r}function Lg(e,t){t.memb!=null?Cg(e,t.set,t.memb.tuple,t.memb.value.set):t.refer=kg(e,t.set,t.tuple)}function Ag(e,t){var n=t.gadget,r,i,s,o,u=new Array(20),a;d("Generating "+t.name+"..."),_g(e,n.set),p(n.set.array!=null),p(n.set.array.head!=null),p(n.set.array.head==n.set.array.tail),r=n.set.array.head.value.set,p(r.type==Tc),p(r.dim==n.set.dimen);for(i=r.head;i!=null;i=i.next){o=Um(e,i.tuple);for(a=0;a<n.set.dimen;a++)u[a]=null;for(a=0;o!=null;o=o.next)u[n.ind[a++]-1]=o;p(a==n.set.dimen);for(a=0;a<n.set.dimen;a++)p(u[a]!=null),u[a].next=u[a+1];t.dim==0?o=null:(o=u[0],u[t.dim-1].next=null),s=dg(e,t.array,o),s==null&&(s=vg(e,t.array,o),s.value.set=Vm(e,t.dimen)),o=u[t.dim],p(t.dim+t.dimen==n.set.dimen),u[n.set.dimen-1].next=null,Jm(e,s.value.set,o)}t.data=1}function Og(e,t,n){var r={};p(t.dim==Rm(e,n)),r.set=t,r.tuple=n,t.gadget!=null&&t.data==0&&Ag(e,t);if(t.data==1){var i=t.array.tail;t.data=2;for(r.memb=t.array.head;r.memb!=null;r.memb=r.memb.next){wg(e,t.domain,r.memb.tuple,r,Lg)&&xg(e,t.name,r.memb.tuple);if(r.memb==i)break}}return r.memb=null,wg(e,r.set.domain,r.tuple,r,Lg)&&xg(e,t.name,r.tuple),r.refer}function Mg(e,t){var n=Tg(e,t.domain);return Og(e,t,n),0}function _g(e,t){Sg(e,t.domain,t,Mg)}function Dg(e,t){var n,r;Ng(e,t.domain);for(n=t.within;n!=null;n=n.next)vy(e,n.code);vy(e,t.assign),vy(e,t.option),t.data=0;for(r=t.array.head;r!=null;r=r.next)cg(e,t.array.type,r.value);t.array=null}function Pg(e,t,n,r){var i,s;switch(t.type){case Nc:break;case wc:r!=Math.floor(r)&&fb(e,t.name+Xm(e,"[",n)+" = "+r+" not integer");break;case ac:r!=0&&r!=1&&fb(e,t.name+Xm(e,"[",n)+" = "+r+" not binary");break;default:p(t!=t)}for(i=t.cond,s=1;i!=null;i=i.next,s++){var o;p(i.code!=null),o=iy(e,i.code);function u(i){fb(e,t.name+Xm(e,"[",n)+" = "+r+" not "+i+" "+o+"; see ("+s+")")}switch(i.rho){case Ip:r<o||u("<");break;case qp:r<=o||u("<=");break;case Rp:r!=o&&u("=");break;case Up:r>=o||u(">=");break;case zp:r>o||u(">");break;case Wp:r==o&&u("<>");break;default:p(i!=i)}}s=1;for(var a=t.in;a!=null;a=a.next,s++){p(a.code!=null),p(a.code.dim==1);var f=qm(e,null,Pm(e,r));hy(e,a.code,f)||fb(e,t.name+Xm(e,"[",n)+" = "+r+" not in specified set; see ("+s+")")}}function Hg(e,t,n){function i(i){return Pg(e,t,n,i),r=vg(e,t.array,Um(e,n)),r.value.num=i,i}var r=dg(e,t.array,n);return r!=null?r.value.num:t.assign!=null?i(iy(e,t.assign)):t.option!=null?i(iy(e,t.option)):t.defval!=null?(t.defval.str!=null&&fb(e,"cannot convert "+Fm(e,t.defval)+" to floating-point number"),i(t.defval.num)):fb(e,"no value for "+t.name+Xm(e,"[",n))}function Bg(e,t){t.memb!=null?Pg(e,t.par,t.memb.tuple,t.memb.value.num):t.value=Hg(e,t.par,t.tuple)}function jg(e,t,n){var r={};p(t.type==Nc||t.type==wc||t.type==ac),p(t.dim==Rm(e,n)),r.par=t,r.tuple=n;if(t.data==1){var i=t.array.tail;t.data=2;for(r.memb=t.array.head;r.memb!=null;r.memb=r.memb.next){wg(e,t.domain,r.memb.tuple,r,Bg)&&xg(e,t.name,r.memb.tuple);if(r.memb==i)break}}return r.memb=null,wg(e,r.par.domain,r.tuple,r,Bg)&&xg(e,t.name,r.tuple),r.value}function Fg(e,t,n,r){var i,s=1;for(var o=t.cond;o!=null;o=o.next,s++){var u;p(o.code!=null);var a=sy(e,o.code);switch(o.rho){case Ip:jm(e,r,a)<0||(u=Fm(e,a),p(u.length<=255),fb(e,t.name+Xm(e,"[",n)+" = "+Fm(e,r)+" not < "+u));break;case qp:jm(e,r,a)<=0||(u=Fm(e,a),p(u.length<=255),fb(e,t.name+Xm(e,"[",n)+" = "+Fm(e,r)+" not <= "+u));break;case Rp:jm(e,r,a)!=0&&(u=Fm(e,a),p(u.length<=255),fb(e,t.name+Xm(e,"[",n)+" = "+Fm(e,r)+" not = "+u));break;case Up:jm(e,r,a)>=0||(u=Fm(e,a),p(u.length<=255),fb(e,t.name+Xm(e,"[",n)+" = "+Fm(e,r)+" not >= "+u));break;case zp:jm(e,r,a)>0||(u=Fm(e,a),p(u.length<=255),fb(e,t.name+Xm(e,"[",n)+" = "+Fm(e,r)+" not > "+u));break;case Wp:jm(e,r,a)==0&&(u=Fm(e,a),p(u.length<=255),fb(e,t.name+Xm(e,"[",n)+" <> "+Fm(e,r)+" not > "+u));break;default:p(o!=o)}}s=1;for(i=t.in;i!=null;i=i.next,s++){p(i.code!=null),p(i.code.dim==1);var f=qm(e,null,Bm(e,r));hy(e,i.code,f)||fb(e,t.name,Xm(e,"[",n)+" = "+Fm(e,r)+" not in specified set; see ("+s+")")}}function Ig(e,t,n){function i(i){return Fg(e,t,n,i),r=vg(e,t.array,Um(e,n)),r.value.sym=Bm(e,i),i}var r=dg(e,t.array,n);return r!=null?Bm(e,r.value.sym):t.assign!=null?i(sy(e,t.assign)):t.option!=null?i(sy(e,t.option)):t.defval!=null?Bm(e,t.defval):fb(e,"no value for "+t.name+Xm(e,"[",n))}function qg(e,t){t.memb!=null?Fg(e,t.par,t.memb.tuple,t.memb.value.sym):t.value=Ig(e,t.par,t.tuple)}function Rg(e,t,n){var r={};p(t.type==Mc),p(t.dim==Rm(e,n)),r.par=t,r.tuple=n;if(t.data==1){var i=t.array.tail;t.data=2;for(r.memb=t.array.head;r.memb!=null;r.memb=r.memb.next){wg(e,t.domain,r.memb.tuple,r,qg)&&xg(e,t.name,r.memb.tuple);if(r.memb==i)break}}return r.memb=null,wg(e,r.par.domain,r.tuple,r,qg)&&xg(e,t.name,r.tuple),r.value}function Ug(e,t){var n=Tg(e,t.domain);switch(t.type){case Nc:case wc:case ac:jg(e,t,n);break;case Mc:Rg(e,t,n);break;default:p(t!=t)}return 0}function zg(e,t){Sg(e,t.domain,t,Ug)}function Wg(e,t){var n,r,i;Ng(e,t.domain);for(n=t.cond;n!=null;n=n.next)vy(e,n.code);for(r=t.in;r!=null;r=r.next)vy(e,r.code);vy(e,t.assign),vy(e,t.option),t.data=0,t.defval=null;for(i=t.array.head;i!=null;i=i.next)cg(e,t.array.type,i.value);t.array=null}function Xg(e,t,n){var r,i=dg(e,t.array,n);return i!=null?r=i.value.var:(i=vg(e,t.array,Um(e,n)),r=i.value.var={},r.j=0,r.var=t,r.memb=i,t.lbnd==null?r.lbnd=0:r.lbnd=iy(e,t.lbnd),t.ubnd==null?r.ubnd=0:t.ubnd==t.lbnd?r.ubnd=r.lbnd:r.ubnd=iy(e,t.ubnd),r.temp=0,r.stat=0,r.prim=r.dual=0),r}function Vg(e,t){t.refer=Xg(e,t.var,t.tuple)}function $g(e,t,n){var r={};return p(t.dim==Rm(e,n)),r.var=t,r.tuple=n,wg(e,r.var.domain,r.tuple,r,Vg)&&xg(e,t.name,r.tuple),r.refer}function Jg(e,t){var n=Tg(e,t.domain);return $g(e,t,n),0}function Kg(e,t){Sg(e,t.domain,t,Jg)}function Qg(e,t){var n;Ng(e,t.domain),vy(e,t.lbnd),t.ubnd!=t.lbnd&&vy(e,t.ubnd),t.array=null}function Gg(e,t,n){var r,i=null,s=dg(e,t.array,n);if(s!=null)r=s.value.con;else{s=vg(e,t.array,Um(e,n)),r=s.value.con={},r.i=0,r.con=t,r.memb=s,p(t.code!=null),r.form=dy(e,t.code);if(t.lbnd==null&&t.ubnd==null)p(t.type==xc||t.type==Sc),r.form=fg(e,r.form,function(e){i=e}),r.lbnd=r.ubnd=-i;else if(t.lbnd!=null&&t.ubnd==null)p(t.type==lc),r.form=ag(e,1,r.form,-1,dy(e,t.lbnd)),r.form=fg(e,r.form,function(e){i=e}),r.lbnd=-i,r.ubnd=0;else if(t.lbnd==null&&t.ubnd!=null)p(t.type==lc),r.form=ag(e,1,r.form,-1,dy(e,t.ubnd)),r.form=fg(e,r.form,function(e){i=e}),r.lbnd=0,r.ubnd=-i;else if(t.lbnd==t.ubnd)p(t.type==lc),r.form=ag(e,1,r.form,-1,dy(e,t.lbnd)),r.form=fg(e,r.form,function(e){i=e}),r.lbnd=r.ubnd=-i;else{var o=null,u=null;p(t.type==lc),r.form=fg(e,r.form,function(e){i=e}),p(fg(e,dy(e,t.lbnd),function(e){o=e})==null),p(fg(e,dy(e,t.ubnd),function(e){u=e})==null),r.lbnd=cm(e,o,i),r.ubnd=cm(e,u,i)}r.stat=0,r.prim=r.dual=0}return r}function Yg(e,t){t.refer=Gg(e,t.con,t.tuple)}function Zg(e,t,n){var r={};return p(t.dim==Rm(e,n)),r.con=t,r.tuple=n,wg(e,r.con.domain,r.tuple,r,Yg)&&xg(e,t.name,r.tuple),r.refer}function ey(e,t){var n=Tg(e,t.domain);return Zg(e,t,n),0}function ty(e,t){Sg(e,t.domain,t,ey)}function ny(e,t){Ng(e,t.domain),vy(e,t.code),vy(e,t.lbnd),t.ubnd!=t.lbnd&&vy(e,t.ubnd),t.array=null}function ry(e,t){var n=iy(e,t.code.arg.loop.x);switch(t.code.op){case ld:t.value=lm(e,t.value,n);break;case cd:t.value=pm(e,t.value,n);break;case hd:t.value>n&&(t.value=n);break;case pd:t.value<n&&(t.value=n);break;default:p(t!=t)}return 0}function iy(e,t){var r,i,s,o,u,a,f;p(t!=null),p(t.type==Nc),p(t.dim==0),t.vflag&&t.valid&&(t.valid=0,cg(e,t.type,t.value));if(t.valid)return t.value.num;switch(t.op){case Uh:r=t.arg.num;break;case Xh:i=null;for(s=t.arg.par.list;s!=null;s=s.next)i=qm(e,i,sy(e,s.x));r=jg(e,t.arg.par.par,i);break;case Jh:var l;i=null;for(s=t.arg.var.list;s!=null;s=s.next)i=qm(e,i,sy(e,s.x));l=$g(e,t.arg.var.var,i);switch(t.arg.var.suff){case jh:l.var.lbnd==null?r=-n:r=l.lbnd;break;case Fh:l.var.ubnd==null?r=+n:r=l.ubnd;break;case Ih:r=l.stat;break;case qh:r=l.prim;break;case Rh:r=l.dual;break;default:p(t!=t)}break;case Kh:var c;i=null;for(s=t.arg.con.list;s!=null;s=s.next)i=qm(e,i,sy(e,s.x));c=Zg(e,t.arg.con.con,i);switch(t.arg.con.suff){case jh:c.con.lbnd==null?r=-n:r=c.lbnd;break;case Fh:c.con.ubnd==null?r=+n:r=c.ubnd;break;case Ih:r=c.stat;break;case qh:r=c.prim;break;case Rh:r=c.dual;break;default:p(t!=t)}break;case Zh:r=Lm(e);break;case ep:r=Am(e);break;case tp:r=Mm(e);break;case np:r=Mb(e);break;case rp:o=sy(e,t.arg.arg.x),o.str==null?r=o.num:wa(o.str,function(e){r=e})&&fb(e,"cannot convert "+Fm(e,o)+" to floating-point number");break;case ap:r=+iy(e,t.arg.arg.x);break;case fp:r=-iy(e,t.arg.arg.x);break;case cp:r=Math.abs(iy(e,t.arg.arg.x));break;case hp:r=Math.ceil(iy(e,t.arg.arg.x));break;case pp:r=Math.floor(iy(e,t.arg.arg.x));break;case dp:r=ym(e,iy(e,t.arg.arg.x));break;case vp:r=bm(e,iy(e,t.arg.arg.x));break;case mp:r=wm(e,iy(e,t.arg.arg.x));break;case gp:r=Em(e,iy(e,t.arg.arg.x));break;case yp:r=Sm(e,iy(e,t.arg.arg.x));break;case bp:r=xm(e,iy(e,t.arg.arg.x));break;case wp:r=Tm(e,iy(e,t.arg.arg.x));break;case Dp:r=Nm(e,iy(e,t.arg.arg.x),iy(e,t.arg.arg.y));break;case Ep:r=Cm(e,iy(e,t.arg.arg.x),0);break;case Pp:r=Cm(e,iy(e,t.arg.arg.x),iy(e,t.arg.arg.y));break;case Sp:r=km(e,iy(e,t.arg.arg.x),0);break;case Hp:r=km(e,iy(e,t.arg.arg.x),iy(e,t.arg.arg.y));break;case Np:r=lm(e,iy(e,t.arg.arg.x),iy(e,t.arg.arg.y));break;case Cp:r=cm(e,iy(e,t.arg.arg.x),iy(e,t.arg.arg.y));break;case kp:r=hm(e,iy(e,t.arg.arg.x),iy(e,t.arg.arg.y));break;case Lp:r=pm(e,iy(e,t.arg.arg.x),iy(e,t.arg.arg.y));break;case Ap:r=dm(e,iy(e,t.arg.arg.x),iy(e,t.arg.arg.y));break;case Op:r=vm(e,iy(e,t.arg.arg.x),iy(e,t.arg.arg.y));break;case Mp:r=mm(e,iy(e,t.arg.arg.x),iy(e,t.arg.arg.y));break;case _p:r=gm(e,iy(e,t.arg.arg.x),iy(e,t.arg.arg.y));break;case Bp:r=Om(e,iy(e,t.arg.arg.x),iy(e,t.arg.arg.y));break;case jp:r=_m(e,iy(e,t.arg.arg.x),iy(e,t.arg.arg.y));break;case xp:var h=ly(e,t.arg.arg.x);r=h.size;break;case Tp:o=sy(e,t.arg.arg.x),o.str==null?u=String(o.num):u=o.str,r=u.length;break;case rd:var d;o=sy(e,t.arg.arg.x),o.str==null?u=String(o.num):u=o.str,o=sy(e,t.arg.arg.y),o.str==null?d=String(o.num):d=o.str,r=Bb(e,u,d);break;case od:uy(e,t.arg.arg.x)?r=iy(e,t.arg.arg.y):t.arg.arg.z==null?r=0:r=iy(e,t.arg.arg.z);break;case ad:r=+n;for(s=t.arg.list;s!=null;s=s.next)a=iy(e,s.x),r>a&&(r=a);break;case fd:r=-n;for(s=t.arg.list;s!=null;s=s.next)a=iy(e,s.x),r<a&&(r=a);break;case ld:f={},f.code=t,f.value=0,Sg(e,t.arg.loop.domain,f,ry),r=f.value;break;case cd:f={},f.code=t,f.value=1,Sg(e,t.arg.loop.domain,f,ry),r=f.value;break;case hd:f={},f.code=t,f.value=+n,Sg(e,t.arg.loop.domain,f,ry),f.value==+n&&fb(e,"min{} over empty set; result undefined"),r=f.value;break;case pd:f={},f.code=t,f.value=-n,Sg(e,t.arg.loop.domain,f,ry),f.value==-n&&fb(e,"max{} over empty set; result undefined"),r=f.value;break;default:p(t!=t)}return p(!t.valid),t.valid=1,t.value.num=r,r}function sy(e,t){var n,r;p(t!=null),p(t.type==Mc),p(t.dim==0),t.vflag&&t.valid&&(t.valid=0,cg(e,t.type,t.value));if(t.valid)return Bm(e,t.value.sym);switch(t.op){case zh:n=Hm(e,t.arg.str);break;case Wh:p(t.arg.index.slot.value!=null),n=Bm(e,t.arg.index.slot.value);break;case Vh:var i,s;i=null;for(s=t.arg.par.list;s!=null;s=s.next)i=qm(e,i,sy(e,s.x));n=Rg(e,t.arg.par.par,i);break;case ip:n=Pm(e,iy(e,t.arg.arg.x));break;case Fp:n=Im(e,sy(e,t.arg.arg.x),sy(e,t.arg.arg.y));break;case od:uy(e,t.arg.arg.x)?n=sy(e,t.arg.arg.y):t.arg.arg.z==null?n=Pm(e,0):n=sy(e,t.arg.arg.z);break;case nd:case ud:var o,u;n=sy(e,t.arg.arg.x),n.str==null?r=String(n.num):r=n.str,t.op==nd?(o=iy(e,t.arg.arg.y),o!=Math.floor(o)&&fb(e,"substr('...', "+o+"); non-integer second argument"),(o<1||o>r.length+1)&&fb(e,"substr('...', "+o+"); substring out of range")):(o=iy(e,t.arg.arg.y),u=iy(e,t.arg.arg.z),(o!=Math.floor(o)||u!=Math.floor(u))&&fb(e,"substr('...', "+o+", "+u+"); non-integer second and/or third argument"),(o<1||u<0||o+u>r.length+1)&&fb(e,"substr('...', "+o+", "+u+"); substring out of range")),n=Hm(e,r.slice(o-1,o+u-1));break;case id:var a,f,l;a=iy(e,t.arg.arg.x),f=sy(e,t.arg.arg.y),f.str==null?l=String(f.num):l=f.str,r=qb(e,a,l),n=Hm(e,r);break;default:p(t!=t)}return p(!t.valid),t.valid=1,t.value.sym=Bm(e,n),n}function oy(e,t){var n=0;switch(t.code.op){case dd:t.value&=uy(e,t.code.arg.loop.x),t.value||(n=1);break;case vd:t.value|=uy(e,t.code.arg.loop.x),t.value&&(n=1);break;default:p(t!=t)}return n}function uy(e,t){var n,r,i,s,o,u,a;p(t.type==Ec),p(t.dim==0),t.vflag&&t.valid&&(t.valid=0,cg(e,t.type,t.value));if(t.valid)return t.value.bit;switch(t.op){case sp:n=iy(e,t.arg.arg.x)!=0;break;case lp:n=!uy(e,t.arg.arg.x);break;case Ip:p(t.arg.arg.x!=null),t.arg.arg.x.type==Nc?n=iy(e,t.arg.arg.x)<iy(e,t.arg.arg.y):(r=sy(e,t.arg.arg.x),i=sy(e,t.arg.arg.y),n=jm(e,r,i)<0);break;case qp:p(t.arg.arg.x!=null),t.arg.arg.x.type==Nc?n=iy(e,t.arg.arg.x)<=iy(e,t.arg.arg.y):(r=sy(e,t.arg.arg.x),i=sy(e,t.arg.arg.y),n=jm(e,r,i)<=0);break;case Rp:p(t.arg.arg.x!=null),t.arg.arg.x.type==Nc?n=iy(e,t.arg.arg.x)==iy(e,t.arg.arg.y):(r=sy(e,t.arg.arg.x),i=sy(e,t.arg.arg.y),n=jm(e,r,i)==0);break;case Up:p(t.arg.arg.x!=null),t.arg.arg.x.type==Nc?n=iy(e,t.arg.arg.x)>=iy(e,t.arg.arg.y):(r=sy(e,t.arg.arg.x),i=sy(e,t.arg.arg.y),n=jm(e,r,i)>=0);break;case zp:p(t.arg.arg.x!=null),t.arg.arg.x.type==Nc?n=iy(e,t.arg.arg.x)>iy(e,t.arg.arg.y):(r=sy(e,t.arg.arg.x),i=sy(e,t.arg.arg.y),n=jm(e,r,i)>0);break;case Wp:p(t.arg.arg.x!=null),t.arg.arg.x.type==Nc?n=iy(e,t.arg.arg.x)!=iy(e,t.arg.arg.y):(r=sy(e,t.arg.arg.x),i=sy(e,t.arg.arg.y),n=jm(e,r,i)!=0);break;case Xp:n=uy(e,t.arg.arg.x)&&uy(e,t.arg.arg.y);break;case Vp:n=uy(e,t.arg.arg.x)||uy(e,t.arg.arg.y);break;case Yp:s=ay(e,t.arg.arg.x),n=hy(e,t.arg.arg.y,s);break;case Zp:s=ay(e,t.arg.arg.x),n=!hy(e,t.arg.arg.y,s);break;case ed:o=ly(e,t.arg.arg.x),n=1;for(u=o.head;u!=null;u=u.next)if(!hy(e,t.arg.arg.y,u.tuple)){n=0;break}break;case td:o=ly(e,t.arg.arg.x),n=1;for(u=o.head;u!=null;u=u.next)if(hy(e,t.arg.arg.y,u.tuple)){n=0;break}break;case dd:a={},a.code=t,a.value=1,Sg(e,t.arg.loop.domain,a,oy),n=a.value;break;case vd:a={},a.code=t,a.value=0,Sg(e,t.arg.loop.domain,a,oy),n=a.value;break;default:p(t!=t)}return p(!t.valid),t.valid=1,t.value.bit=n,n}function ay(e,t){var n;p(t!=null),p(t.type==Dc),p(t.dim>0),t.vflag&&t.valid&&(t.valid=0,cg(e,t.type,t.value));if(t.valid)return Um(e,t.value.tuple);switch(t.op){case Qh:n=null;for(var r=t.arg.list;r!=null;r=r.next)n=qm(e,n,sy(e,r.x));break;case op:n=qm(e,null,sy(e,t.arg.arg.x));break;default:p(t!=t)}return p(!t.valid),t.valid=1,t.value.tuple=Um(e,n),n}function fy(e,t){var n;switch(t.code.op){case md:n=ay(e,t.code.arg.loop.x),$m(e,t.value,n)==null&&Jm(e,t.value,n);break;case gd:Jm(e,t.value,Tg(e,t.code.arg.loop.domain));break;default:p(t!=t)}return 0}function ly(e,t){var n,r,i;p(t!=null),p(t.type==pc),p(t.dim>0),t.vflag&&t.valid&&(t.valid=0,cg(e,t.type,t.value));if(t.valid)return Qm(e,t.value.set);switch(t.op){case $h:var s;s=null;for(r=t.arg.set.list;r!=null;r=r.next)s=qm(e,s,sy(e,r.x));n=Qm(e,Og(e,t.arg.set.set,s));break;case Gh:n=Vm(e,t.dim);for(r=t.arg.list;r!=null;r=r.next)Km(e,n,ay(e,r.x));break;case $p:n=eg(e,ly(e,t.arg.arg.x),ly(e,t.arg.arg.y));break;case Jp:n=tg(e,ly(e,t.arg.arg.x),ly(e,t.arg.arg.y));break;case Kp:n=ng(e,ly(e,t.arg.arg.x),ly(e,t.arg.arg.y));break;case Qp:n=rg(e,ly(e,t.arg.arg.x),ly(e,t.arg.arg.y));break;case Gp:n=ig(e,ly(e,t.arg.arg.x),ly(e,t.arg.arg.y));break;case sd:n=Zm(e,iy(e,t.arg.arg.x),iy(e,t.arg.arg.y),t.arg.arg.z==null?1:iy(e,t.arg.arg.z));break;case od:uy(e,t.arg.arg.x)?n=ly(e,t.arg.arg.y):n=ly(e,t.arg.arg.z);break;case md:i={},i.code=t,i.value=Vm(e,t.dim),Sg(e,t.arg.loop.domain,i,fy),n=i.value;break;case gd:i={},i.code=t,i.value=Vm(e,t.dim),Sg(e,t.arg.loop.domain,i,fy),n=i.value;break;default:p(t!=t)}return p(!t.valid),t.valid=1,t.value.set=Qm(e,n),n}function cy(e,t){p(t==null)}function hy(e,t,n){var r,i,s,o;p(t!=null),p(t.type==pc),p(t.dim>0),p(n!=null);switch(t.op){case $h:var u;s=null;for(i=t.arg.set.list;i!=null;i=i.next)s=qm(e,s,sy(e,i.x));u=Og(e,t.arg.set.set,s),s=Wm(e,n,u.dim),r=$m(e,u,s)!=null;break;case Gh:var a;r=0,s=Wm(e,n,t.dim);for(i=t.arg.list;i!=null;i=i.next){a=ay(e,i.x),r=zm(e,s,a)==0;if(r)break}break;case $p:r=hy(e,t.arg.arg.x,n)||hy(e,t.arg.arg.y,n);break;case Jp:r=hy(e,t.arg.arg.x,n)&&!hy(e,t.arg.arg.y,n);break;case Kp:var f=hy(e,t.arg.arg.x,n),l=hy(e,t.arg.arg.y,n);r=f&&!l||!f&&l;break;case Qp:r=hy(e,t.arg.arg.x,n)&&hy(e,t.arg.arg.y,n);break;case Gp:r=hy(e,t.arg.arg.x,n);if(r){for(o=1;o<=t.arg.arg.x.dim;o++)p(n!=null),n=n.next;r=hy(e,t.arg.arg.y,n)}break;case sd:var c,h,d,v;p(t.dim==1),h=iy(e,t.arg.arg.x),d=iy(e,t.arg.arg.y),t.arg.arg.z==null?v=1:v=iy(e,t.arg.arg.z),Gm(e,h,d,v),p(n.sym!=null);if(n.sym.str!=null){r=0;break}c=n.sym.num;if(v>0&&!(h<=c&&c<=d)||v<0&&!(d<=c&&c<=h)){r=0;break}o=((c-h)/v+.5|0)+1,r=Ym(e,h,d,v,o)==c;break;case od:uy(e,t.arg.arg.x)?r=hy(e,t.arg.arg.y,n):r=hy(e,t.arg.arg.z,n);break;case md:fb(e,"implementation restriction; in/within setof{} not allowed");break;case gd:s=Wm(e,n,t.dim),r=wg(e,t.arg.loop.domain,s,null,cy)==0;break;default:p(t!=t)}return r}function py(e,t){switch(t.code.op){case ld:var n,r=dy(e,t.code.arg.loop.x);t.value==null?(p(t.tail==null),t.value=r):(p(t.tail!=null),t.tail.next=r);for(n=r;n!=null;n=n.next)t.tail=n;break;default:p(t!=t)}return 0}function dy(e,t){var n;p(t!=null),p(t.type==gc),p(t.dim==0),t.vflag&&t.valid&&(t.valid=0,cg(e,t.type,t.value));if(t.valid)return ug(e,t.value.form);switch(t.op){case Jh:var r,i=null;for(r=t.arg.var.list;r!=null;r=r.next)i=qm(e,i,sy(e,r.x));p(t.arg.var.suff==Bh),n=og(e,$g(e,t.arg.var.var,i));break;case up:n=sg(e,iy(e,t.arg.arg.x));break;case ap:n=ag(e,0,sg(e,0),1,dy(e,t.arg.arg.x));break;case fp:n=ag(e,0,sg(e,0),-1,dy(e,t.arg.arg.x));break;case Np:n=ag(e,1,dy(e,t.arg.arg.x),1,dy(e,t.arg.arg.y));break;case Cp:n=ag(e,1,dy(e,t.arg.arg.x),-1,dy(e,t.arg.arg.y));break;case Lp:p(t.arg.arg.x!=null),p(t.arg.arg.y!=null),t.arg.arg.x.type==Nc?(p(t.arg.arg.y.type==gc),n=ag(e,iy(e,t.arg.arg.x),dy(e,t.arg.arg.y),0,sg(e,0))):(p(t.arg.arg.x.type==gc),p(t.arg.arg.y.type==Nc),n=ag(e,iy(e,t.arg.arg.y),dy(e,t.arg.arg.x),0,sg(e,0)));break;case Ap:n=ag(e,dm(e,1,iy(e,t.arg.arg.y)),dy(e,t.arg.arg.x),0,sg(e,0));break;case od:uy(e,t.arg.arg.x)?n=dy(e,t.arg.arg.y):t.arg.arg.z==null?n=sg(e,0):n=dy(e,t.arg.arg.z);break;case ld:var s={};s.code=t,s.value=sg(e,0),s.tail=null,Sg(e,t.arg.loop.domain,s,py),n=lg(e,s.value);break;default:p(t!=t)}return p(!t.valid),t.valid=1,t.value.form=ug(e,n),n}function vy(e,t){var n;if(t==null)return;t.valid&&(t.valid=0,cg(e,t.type,t.value));switch(t.op){case Uh:case zh:case Wh:break;case Xh:case Vh:for(n=t.arg.par.list;n!=null;n=n.next)vy(e,n.x);break;case $h:for(n=t.arg.set.list;n!=null;n=n.next)vy(e,n.x);break;case Jh:for(n=t.arg.var.list;n!=null;n=n.next)vy(e,n.x);break;case Kh:for(n=t.arg.con.list;n!=null;n=n.next)vy(e,n.x);break;case Qh:case Gh:for(n=t.arg.list;n!=null;n=n.next)vy(e,n.x);break;case Yh:p(t!=t);case Zh:case ep:case tp:case np:break;case rp:case ip:case sp:case op:case up:case ap:case fp:case lp:case cp:case hp:case pp:case dp:case vp:case mp:case gp:case yp:case bp:case wp:case Ep:case Sp:case xp:case Tp:vy(e,t.arg.arg.x);break;case Np:case Cp:case kp:case Lp:case Ap:case Op:case Mp:case _p:case Dp:case Pp:case Hp:case Bp:case jp:case Fp:case Ip:case qp:case Rp:case Up:case zp:case Wp:case Xp:case Vp:case $p:case Jp:case Kp:case Qp:case Gp:case Yp:case Zp:case ed:case td:case nd:case rd:case id:vy(e,t.arg.arg.x),vy(e,t.arg.arg.y);break;case sd:case od:case ud:vy(e,t.arg.arg.x),vy(e,t.arg.arg.y),vy(e,t.arg.arg.z);break;case ad:case fd:for(n=t.arg.list;n!=null;n=n.next)vy(e,n.x);break;case ld:case cd:case hd:case pd:case dd:case vd:case md:case gd:Ng(e,t.arg.loop.domain),vy(e,t.arg.loop.x);break;default:p(t.op!=t.op)}}function Ny(e,t){var n=e.dca,r,i,s;s=0;for(r=t.u.out.list;r!=null;r=r.next){s++;switch(r.code.type){case Nc:n.type[s]="N",n.num[s]=iy(e,r.code),n.str[s][0]="\0";break;case Mc:i=sy(e,r.code),i.str==null?(n.type[s]="N",n.num[s]=i.num,n.str[s][0]="\0"):(n.type[s]="S",n.num[s]=0,n.str[s]=i.str);break;default:p(r!=r)}}return mpl_tab_drv_write(e),0}function Cy(e,t){var n,r,i,s,o,u,a,f;p(e.dca==null),e.dca=o={},o.id=0,o.link=null,o.na=0,o.arg=null,o.nf=0,o.name=null,o.type=null,o.num=null,o.str=null,p(o.na==0);for(n=t.arg;n!=null;n=n.next)o.na++;o.arg=new Array(1+o.na);for(a=1;a<=o.na;a++)o.arg[a]=null;a=0;for(n=t.arg;n!=null;n=n.next){a++,p(n.code.type==Mc);var l=sy(e,n.code);l.str==null?f=String(l.num):f=l.str,o.arg[a]=f}switch(t.type){case bc:u=t.u.in.set,u!=null&&(u.data&&fb(e,u.name+" already provided with data"),p(u.array.head==null),vg(e,u.array,null).value.set=Vm(e,u.dimen),u.data=1);for(i=t.u.in.list;i!=null;i=i.next)i.par.data&&fb(e,i.par.name+" already provided with data"),i.par.data=1;p(o.nf==0);for(r=t.u.in.fld;r!=null;r=r.next)o.nf++;for(i=t.u.in.list;i!=null;i=i.next)o.nf++;o.name=new Array(1+o.nf),o.type=new Array(1+o.nf),o.num=new Array(1+o.nf),o.str=new Array(1+o.nf),a=0;for(r=t.u.in.fld;r!=null;r=r.next)a++,o.name[a]=r.name,o.type[a]="?",o.num[a]=0,o.str[a]="";for(i=t.u.in.list;i!=null;i=i.next)a++,o.name[a]=i.name,o.type[a]="?",o.num[a]=0,o.str[a]="";mpl_tab_drv_open(e,"R");for(;;){var c;for(a=1;a<=o.nf;a++)o.type[a]="?";if(mpl_tab_drv_read(e))break;for(a=1;a<=o.nf;a++)o.type[a]=="?"&&fb(e,"field "+o.name[a]+" missing in input table");c=null,a=0;for(r=t.u.in.fld;r!=null;r=r.next){a++,p(a<=o.nf);switch(o.type[a]){case"N":c=qm(e,c,Pm(e,o.num[a]));break;case"S":p(o.str[a].length<=Hc),c=qm(e,c,Hm(e,o.str[a]));break;default:p(o!=o)}}t.u.in.set!=null&&Km(e,t.u.in.set.array.head.value.set,Um(e,c));for(i=t.u.in.list;i!=null;i=i.next){var h;a++,p(a<=o.nf),dg(e,i.par.array,c)!=null&&fb(e,i.par.name+Xm(e,"[",c)+" already defined"),h=vg(e,i.par.array,Um(e,c));switch(i.par.type){case Nc:case wc:case ac:o.type[a]!="N"&&fb(e,i.par.name+" requires numeric data"),h.value.num=o.num[a];break;case Mc:switch(o.type[a]){case"N":h.value.sym=Pm(e,o.num[a]);break;case"S":p(o.str[a].length<=Hc),h.value.sym=Hm(e,o.str[a]);break;default:p(o!=o)}break;default:p(i!=i)}}}mpl_tab_drv_close(e);break;case Cc:p(o.nf==0);for(s=t.u.out.list;s!=null;s=s.next)o.nf++;o.name=new Array(1+o.nf),o.type=new Array(1+o.nf),o.num=new Array(1+o.nf),o.str=new Array(1+o.nf),a=0;for(s=t.u.out.list;s!=null;s=s.next)a++,o.name[a]=s.name,o.type[a]="?",o.num[a]=0,o.str[a]="";mpl_tab_drv_open(e,"W"),Sg(e,t.u.out.domain,t,Ny),mpl_tab_drv_close(e);break;default:p(t!=t)}ky(e)}function ky(e){var t=e.dca;t!=null&&(t.link!=null&&mpl_tab_drv_close(e),e.dca=null)}function Ly(e,t){var n,r;for(n=t.arg;n!=null;n=n.next)vy(e,n.code);switch(t.type){case bc:break;case Cc:Ng(e,t.u.out.domain);for(r=t.u.out.list;r!=null;r=r.next)vy(e,r.code);break;default:p(t!=t)}}function Ay(e,t){return uy(e,t.code)||fb(e,"check"+Xm(e,"[",Tg(e,t.domain))+" failed"),0}function Oy(e,t){Sg(e,t.domain,t,Ay)}function My(e,t){Ng(e,t.domain),vy(e,t.code)}function _y(e,t,n){var r=n.value.set,i;ub(e,t.name+Xm(e,"[",n.tuple)+(r.head==null?" is empty":":"));for(i=r.head;i!=null;i=i.next)ub(e,"   "+Xm(e,"(",i.tuple))}function Dy(e,t,n){switch(t.type){case Nc:case wc:case ac:ub(e,t.name+Xm(e,"[",n.tuple)+" = "+n.value.num);break;case Mc:ub(e,t.name+Xm(e,"[",n.tuple)+" = "+Fm(e,n.value.sym));break;default:p(t!=t)}}function Py(e,t,r,i){i==Bh||i==qh?ub(e,t.name+Xm(e,"[",r.tuple)+".val = "+r.value.var.prim):i==jh?ub(e,t.name+Xm(e,"[",r.tuple)+".lb = "+(r.value.var.var.lbnd==null?-n:r.value.var.lbnd)):i==Fh?ub(e,t.name+Xm(e,"[",r.tuple)+".ub = "+(r.value.var.var.ubnd==null?+n:r.value.var.ubnd)):i==Ih?ub(e,t.name+Xm(e,"[",r.tuple)+".status = "+r.value.var.stat):i==Rh?ub(e,t.name+Xm(e,"[",r.tuple)+".dual = "+r.value.var.dual):p(i!=i)}function Hy(e,t,r,i){i==Bh||i==qh?ub(e,t.name+Xm(e,"[",r.tuple)+".val = "+r.value.con.prim):i==jh?ub(e,t.name+Xm(e,"[",r.tuple)+".lb = "+(r.value.con.con.lbnd==null?-n:r.value.con.lbnd)):i==Fh?ub(e,t.name+Xm(e,"[",r.tuple)+".ub = "+(r.value.con.con.ubnd==null?+n:r.value.con.ubnd)):i==Ih?ub(e,t.name+Xm(e,"[",r.tuple)+".status = "+r.value.con.stat):i==Rh?ub(e,t.name+Xm(e,"[",r.tuple)+".dual = "+r.value.con.dual):p(i!=i)}function By(e,t){var n={},r;p(t.op==Xh||t.op==Vh||t.op==$h||t.op==Jh||t.op==Kh),n.tuple=null;for(r=t.arg.par.list;r!=null;r=r.next)n.tuple=qm(e,n.tuple,sy(e,r.x));switch(t.op){case Xh:n.value.num=jg(e,t.arg.par.par,n.tuple),Dy(e,t.arg.par.par,n);break;case Vh:n.value.sym=Rg(e,t.arg.par.par,n.tuple),Dy(e,t.arg.par.par,n);break;case $h:n.value.set=Og(e,t.arg.set.set,n.tuple),_y(e,t.arg.set.set,n);break;case Jh:n.value.var=$g(e,t.arg.var.var,n.tuple),Py(e,t.arg.var.var,n,t.arg.var.suff);break;case Kh:n.value.con=Zg(e,t.arg.con.con,n.tuple),Hy(e,t.arg.con.con,n,t.arg.con.suff);break;default:p(t!=t)}}function jy(e,t){switch(t.type){case Nc:var n=iy(e,t);ub(e,String(n));break;case Mc:var r=sy(e,t);ub(e,Fm(e,r));break;case Ec:var i=uy(e,t);ub(e,i?"true":"false");break;case Dc:var s=ay(e,t);ub(e,Xm(e,"(",s));break;case pc:var o=ly(e,t);o.head==0&&ub(e,"set is empty");for(var u=o.head;u!=null;u=u.next)ub(e,"   "+Xm(e,"(",u.tuple));break;case gc:var a,f=dy(e,t);f==null&&ub(e,"linear form is empty");for(a=f;a!=null;a=a.next)a.var==null?ub(e,"   "+a.coef):ub(e,"   "+a.coef+" "+a.var.var.name+Xm(e,"[",a.var.memb.tuple));break;default:p(t!=t)}}function Fy(e,t){var n;for(var r=t.list;r!=null;r=r.next)if(r.type==yc){var i=r.u.slot;ub(e,i.name+" = "+Fm(e,i.value))}else if(r.type==Ac){var s=r.u.set;s.assign!=null?_g(e,s):(s.gadget!=null&&s.data==0&&Ag(e,s),s.array.head!=null&&Og(e,s,s.array.head.tuple)),s.array.head==null&&ub(e,s.name+" has empty content");for(n=s.array.head;n!=null;n=n.next)_y(e,s,n)}else if(r.type==kc){var o=r.u.par;o.assign!=null?zg(e,o):o.array.head!=null&&(o.type!=Mc?jg(e,o,o.array.head.tuple):Rg(e,o,o.array.head.tuple)),o.array.head==null&&ub(e,o.name+" has empty content");for(n=o.array.head;n!=null;n=n.next)Dy(e,o,n)}else if(r.type==Pc){var u=r.u.var;p(e.flag_p),u.array.head==null&&ub(e,u.name+" has empty content");for(n=u.array.head;n!=null;n=n.next)Py(e,u,n,Bh)}else if(r.type==lc){var a=r.u.con;p(e.flag_p),a.array.head==null&&ub(e,a.name+" has empty content");for(n=a.array.head;n!=null;n=n.next)Hy(e,a,n,Bh)}else if(r.type==vc){var f=r.u.code;f.op==Xh||f.op==Vh||f.op==$h||f.op==Jh||f.op==Kh?By(e,f):jy(e,f)}else p(r!=r);return 0}function Iy(e,t){Sg(e,t.domain,t,Fy)}function qy(e,t){var n;Ng(e,t.domain);for(n=t.list;n!=null;n=n.next)n.type==vc&&vy(e,n.u.code)}function Ry(e,t){e.prt_fp==null?ob(e,t):e.prt_fp(t)}function Uy(e,t){p(t.length<jc);for(var n=0;n<t.length;n++)Ry(e,t[n])}function zy(e,t){var n,r,i,o,u=sy(e,t.fmt);u.str==null?r=String(u.num):r=u.str,n=t.list;for(i=0;i<r.length;i++)if(r[i]=="%"){i++;if(r[i]=="%"){Ry(e,"%");continue}if(n==null)break;while(r[i]=="-"||r[i]=="+"||r[i]==" "||r[i]=="#"||r[i]=="0")i++;while(A(r[i]))i++;if(r[i]=="."){i++;while(A(r[i]))i++}if(r[i]=="d"||r[i]=="i"||r[i]=="e"||r[i]=="E"||r[i]=="f"||r[i]=="F"||r[i]=="g"||r[i]=="G"){p(n!=null);switch(n.code.type){case Nc:o=iy(e,n.code);break;case Mc:u=sy(e,n.code),u.str!=null&&fb(e,"cannot convert "+Fm(e,u)+" to floating-point number"),o=u.num;break;case Ec:uy(e,n.code)?o=1:o=0;break;default:p(n!=n)}if(r[i]=="d"||r[i]=="i"){var a=s;-a<=o&&o<=+a||fb(e,"cannot convert "+o+" to integer"),Uy(e,String(Math.floor(o+.5)|0))}else Uy(e,String(o))}else if(r[i]=="s"){switch(n.code.type){case Nc:o=String(iy(e,n.code));break;case Ec:uy(e,n.code)?o="T":o="F";break;case Mc:u=sy(e,n.code),u.str==null?o=String(u.num):o=u.str;break;default:p(n!=n)}Uy(e,String(o))}else fb(e,"format specifier missing or invalid");n=n.next}else r[i]=="\\"?(i++,r[i]=="t"?Ry(e,"	"):r[i]=="n"?Ry(e,"\n"):r[i]=="\0"?fb(e,"invalid use of escape character \\ in format control string"):Ry(e,r[i])):Ry(e,r[i]);return 0}function Wy(e,t){Sg(e,t.domain,t,zy)}function Xy(e,t){var n;Ng(e,t.domain),vy(e,t.fmt);for(n=t.list;n!=null;n=n.next)vy(e,n.code);vy(e,t.fname)}function Vy(e,t){var n=e.stmt;for(var r=t.list;r!=null;r=r.next)Ky(e,r);return e.stmt=n,0}function $y(e,t){Sg(e,t.domain,t,Vy)}function Jy(e,t){Ng(e,t.domain);for(var n=t.list;n!=null;n=n.next)Qy(e,n)}function Ky(e,t){e.stmt=t;switch(t.type){case Ac:case kc:case Pc:break;case lc:d("Generating "+t.u.con.name+"..."),ty(e,t.u.con);break;case _c:switch(t.u.tab.type){case bc:d("Reading "+t.u.tab.name+"...");break;case Cc:d("Writing "+t.u.tab.name+"...");break;default:p(t!=t)}Cy(e,t.u.tab);break;case Oc:break;case fc:d("Checking (line "+t.line+")..."),Oy(e,t.u.chk);break;case cc:ub(e,"Display statement at line "+t.line),Iy(e,t.u.dpy);break;case Lc:Wy(e,t.u.prt);break;case mc:$y(e,t.u.fur);break;default:p(t!=t)}}function Qy(e,t){switch(t.type){case Ac:Dg(e,t.u.set);break;case kc:Wg(e,t.u.par);break;case Pc:Qg(e,t.u.var);break;case lc:ny(e,t.u.con);break;case _c:Ly(e,t.u.tab);break;case Oc:break;case fc:My(e,t.u.chk);break;case cc:qy(e,t.u.dpy);break;case Lc:Xy(e,t.u.prt);break;case mc:Jy(e,t.u.fur);break;default:p(t!=t)}}function Gy(e){var t;for(t=e.model;t!=null;t=t.next)switch(t.type){case Ac:p(t.u.set.array==null),t.u.set.array=hg(e,pc,t.u.set.dim);break;case kc:p(t.u.par.array==null);switch(t.u.par.type){case Nc:case wc:case ac:t.u.par.array=hg(e,Nc,t.u.par.dim);break;case Mc:t.u.par.array=hg(e,Mc,t.u.par.dim);break;default:p(t!=t)}break;case Pc:p(t.u.var.array==null),t.u.var.array=hg(e,dc,t.u.var.dim);break;case lc:p(t.u.con.array==null),t.u.con.array=hg(e,hc,t.u.con.dim);break;case _c:case Oc:case fc:case cc:case Lc:case mc:break;default:p(t!=t)}}function Yy(e){var t;p(!e.flag_p);for(t=e.model;t!=null;t=t.next){Ky(e,t);if(e.stmt.type==Oc)break}e.stmt=t}function Zy(e){var t,n,r,i,s,o,u;p(e.m==0),p(e.n==0),p(e.row==null),p(e.col==null);for(t=e.model;t!=null;t=t.next)if(t.type==Pc){r=t.u.var;for(n=r.array.head;n!=null;n=n.next)p(n.value.var.j==0)}for(t=e.model;t!=null;t=t.next)if(t.type==lc){i=t.u.con;for(n=i.array.head;n!=null;n=n.next){p(n.value.con.i==0),n.value.con.i=++e.m;for(s=n.value.con.form;s!=null;s=s.next)p(s.var!=null),s.var.memb.value.var.j=-1}}for(t=e.model;t!=null;t=t.next)if(t.type==Pc){r=t.u.var;for(n=r.array.head;n!=null;n=n.next)n.value.var.j!=0&&(n.value.var.j=++e.n)}e.row=new Array(1+e.m);for(o=1;o<=e.m;o++)e.row[o]=null;for(t=e.model;t!=null;t=t.next)if(t.type==lc){i=t.u.con;for(n=i.array.head;n!=null;n=n.next)o=n.value.con.i,p(1<=o&&o<=e.m),p(e.row[o]==null),e.row[o]=n.value.con}for(o=1;o<=e.m;o++)p(e.row[o]!=null);e.col=new Array(1+e.n);for(u=1;u<=e.n;u++)e.col[u]=null;for(t=e.model;t!=null;t=t.next)if(t.type==Pc){r=t.u.var;for(n=r.array.head;n!=null;n=n.next){u=n.value.var.j;if(u==0)continue;p(1<=u&&u<=e.n),p(e.col[u]==null),e.col[u]=n.value.var}}for(u=1;u<=e.n;u++)p(e.col[u]!=null)}function eb(e){var t;p(!e.flag_p),e.flag_p=1;for(t=e.stmt;t!=null;t=t.next)Ky(e,t);e.stmt=null}function tb(e){var t;for(t=e.model;t!=null;t=t.next)Qy(e,t)}function nb(e,t,n){e.line=0,e.c="\n",e.token=0,e.imlen=0,e.image="",e.value=0,e.b_token=Fc,e.b_imlen=0,e.b_image="",e.b_value=0,e.f_dots=0,e.f_scan=0,e.f_token=0,e.f_imlen=0,e.f_image="",e.f_value=0,g(e.context,0," ",Bc),e.c_ptr=0,p(e.in_fp==null),e.in_fp=n,e.in_file=t||"input",_d(e),Pd(e)}function rb(e){var t;return p(e.in_fp!=null),t=e.in_fp(),t<0&&(t=uc),t}function ib(e){p(e.in_fp!=null),e.in_fp=null}function sb(e,t,n){p(e.out_fp==null),n==null?e.out_fp=d:(e.out_fp=n,e.out_fp==null&&fb(e,"unable to use output callback"),e.out_file=t),e.flush=""}function ob(e,t){p(e.out_fp!=null),t=="\n"?(e.out_fp(e.flush),e.flush=""):e.flush+=t}function ub(e,t){p(e.out_fp!=null),e.out_fp(t)}function ab(e){p(e.out_fp!=null)}function fb(e,t){var n;switch(e.phase){case 1:case 2:n=e.in_file+":"+e.line+": "+t,Md(e);break;case 3:n=(e.stmt==null?0:e.stmt.line)+": "+t;break;default:p(e!=e)}throw e.phase=4,new Error(t)}function lb(e,t){switch(e.phase){case 1:case 2:d(e.in_file+":"+e.line+": warning: "+t);break;case 3:d(e.mod_file+":"+(e.stmt==null?0:e.stmt.line)+": warning: "+t);break;default:p(e!=e)}}function Mb(e){return Math.round(Date.now()/1e3)}function Pb(e,t){var n="";while(t>0)n+=e,t--;return n}function Hb(e,t,n,r,i,s){d("Input string passed to str2time:"),d(t),d(Pb("^",n+1)),d("Format string passed to str2time:\n"),d(r),d(Pb("^",i+1)),fb(e,s)}function Bb(e,t,n){function v(){Hb(e,t,h,n,d,"time zone offset value incomplete or invalid")}function m(){Hb(e,t,h,n,d,"time zone offset value out of range")}function g(){t[h]!=n[d]&&Hb(e,t,h,n,d,"character mismatch"),h++}var r,i,o,u,a,f,l,c,h,d;i=o=u=a=f=l=-1,c=s,h=0;for(d=0;d<n.length;d++)if(n[d]=="%"){d++;if(n[d]=="b"||n[d]=="h"){var y,b;o>=0&&Hb(e,t,h,n,d,"month multiply specified");while(t[h]==" ")h++;for(o=1;o<=12;o++){b=Db[o-1];var w=!1;for(y=0;y<=2;y++)if(h[y].toUpperCase()!=b[y].toUpperCase()){w=!0;break}if(w)continue;h+=3;for(y=3;b[y]!="\0";y++){if(t[h].toUpperCase()!=b[y].toUpperCase())break;h++}break}o>12&&Hb(e,t,h,n,d,"abbreviated month name missing or invalid")}else if(n[d]=="d"){u>=0&&Hb(e,t,h,n,d,"day multiply specified");while(t[h]==" ")h++;"0"<=t[h]&&t[h]<="9"||Hb(e,t,h,n,d,"day missing or invalid"),u=t[h++]-"0","0"<=t[h]&&t[h]<="9"&&(u=10*u+(t[h++]-"0")),1<=u&&u<=31||Hb(e,t,h,n,d,"day out of range")}else if(n[d]=="H"){a>=0&&Hb(e,t,h,n,d,"hour multiply specified");while(t[h]==" ")h++;"0"<=t[h]&&t[h]<="9"||Hb(e,t,h,n,d,"hour missing or invalid"),a=t[h++]-"0","0"<=t[h]&&t[h]<="9"&&(a=10*a+(t[h++]-"0")),0<=a&&a<=23||Hb(e,t,h,n,d,"hour out of range")}else if(n[d]=="m"){o>=0&&Hb(e,t,h,n,d,"month multiply specified");while(t[h]==" ")h++;"0"<=t[h]&&t[h]<="9"||Hb(e,t,h,n,d,"month missing or invalid"),o=t[h++]-"0","0"<=t[h]&&t[h]<="9"&&(o=10*o+(t[h++]-"0")),1<=o&&o<=12||Hb(e,t,h,n,d,"month out of range")}else if(n[d]=="M"){f>=0&&Hb(e,t,h,n,d,"minute multiply specified");while(t[h]==" ")h++;"0"<=t[h]&&t[h]<="9"||Hb(e,t,h,n,d,"minute missing or invalid"),f=t[h++]-"0","0"<=t[h]&&t[h]<="9"&&(f=10*f+(t[h++]-"0")),0<=f&&f<=59||Hb(e,t,h,n,d,"minute out of range")}else if(n[d]=="S"){l>=0&&Hb(e,t,h,n,d,"second multiply specified");while(t[h]==" ")h++;"0"<=t[h]&&t[h]<="9"||Hb(e,t,h,n,d,"second missing or invalid"),l=t[h++]-"0","0"<=t[h]&&t[h]<="9"&&(l=10*l+(t[h++]-"0")),0<=l&&l<=60||Hb(e,t,h,n,d,"second out of range")}else if(n[d]=="y"){i>=0&&Hb(e,t,h,n,d,"year multiply specified");while(t[h]==" ")h++;"0"<=t[h]&&t[h]<="9"||Hb(e,t,h,n,d,"year missing or invalid"),i=t[h++]-"0","0"<=t[h]&&t[h]<="9"&&(i=10*i+(t[h++]-"0")),i+=i>=69?1900:2e3}else if(n[d]=="Y"){i>=0&&Hb(e,t,h,n,d,"year multiply specified");while(t[h]==" ")h++;"0"<=t[h]&&t[h]<="9"||Hb(e,t,h,n,d,"year missing or invalid"),i=0;for(r=1;r<=4;r++){if(!("0"<=t[h]&&t[h]<="9"))break;i=10*i+(t[h++]-"0")}1<=i&&i<=4e3||Hb(e,t,h,n,d,"year out of range")}else if(n[d]=="z"){var E;c!=s&&Hb(e,t,h,n,d,"time zone offset multiply specified");while(t[h]==" ")h++;if(t[h]=="Z")E=a=f=0,h++;else{t[h]=="+"?(E=1,h++):t[h]=="-"?(E=-1,h++):Hb(e,t,h,n,d,"time zone offset sign missing"),a=0;for(r=1;r<=2;r++)"0"<=t[h]&&t[h]<="9"||v(),a=10*a+(t[h++]-"0");a>23&&m(),t[h]==":"&&(h++,"0"<=t[h]&&t[h]<="9"||v()),f=0;if("0"<=t[h]&&t[h]<="9"){for(r=1;r<=2;r++)"0"<=t[h]&&t[h]<="9"||v(),f=10*f+(t[h++]-"0");f>59&&m()}}c=E*(60*a+f)}else n[d]=="%"?g():Hb(e,t,h,n,d,"invalid conversion specifier")}else n[d]!=" "&&g();return i<0&&(i=1970),o<0&&(o=1),u<0&&(u=1),a<0&&(a=0),f<0&&(f=0),l<0&&(l=0),c==s&&(c=0),r=Sa(u,o,i),p(r>=0),(((r-Sa(1,1,1970))*24+a)*60+f)*60+l-60*c}function jb(e,t,n,r){d("Format string passed to time2str:"),d(t),d(Pb("^",n)),fb(e,r)}function Fb(e){return(e+Sa(1,1,1970))%7+1}function Ib(e){var t;t=Sa(1,1,e)-Sa(1,1,1970);switch(Fb(t)){case 1:t+=0;break;case 2:t-=1;break;case 3:t-=2;break;case 4:t-=3;break;case 5:t+=3;break;case 6:t+=2;break;case 7:t+=1;break;default:p(t!=t)}return p(Fb(t)==1),t}function qb(e,t,n){var r,i=0,s=0,o=0,u,a,f,l,c,h,d="",v;-62135596800<=t&&t<=64092211199||fb(e,"time2str("+t+",...); argument out of range"),t=Math.floor(t+.5),c=Math.abs(t)/86400,r=Math.floor(c),t<0&&(c==Math.floor(c)?r=-r:r=-(r+1)),p(xa(r+Sa(1,1,1970),function(e,t,n){o=e;s=t;i=n})==0),f=t-86400*r|0,p(0<=f&&f<86400),a=f/60,f%=60,u=a/60,a%=60,l=0;for(h=0;h<n.length;h++){if(n[h]=="%"){h++;if(n[h]=="a")v=_b[Fb(r)-1].slice(0,3);else if(n[h]=="A")v=_b[Fb(r)-1];else if(n[h]=="b"||n[h]=="h")v=Db[s-1].slice(0,3);else if(n[h]=="B")v=Db[s-1];else if(n[h]=="C")v=String(Math.floor(i/100));else if(n[h]=="d")v=String(o);else if(n[h]=="D")v=s+"/"+o+"/"+i%100;else if(n[h]=="e")v=String(o);else if(n[h]=="F")sprintf(v,i+"-"+s+"-"+o);else if(n[h]=="g"){var m;r<Ib(i)?m=i-1:r<Ib(i+1)?m=i:m=i+1,v=String(m%100)}else if(n[h]=="G"){var m;r<Ib(i)?m=i-1:r<Ib(i+1)?m=i:m=i+1,v=String(m)}else if(n[h]=="H")v=String(u);else if(n[h]=="I")v=String(u==0?12:u<=12?u:u-12);else if(n[h]=="j")v=String(Sa(o,s,i)-Sa(1,1,i)+1);else if(n[h]=="k")v=String(u);else if(n[h]=="l")v=String(u==0?12:u<=12?u:u-12);else if(n[h]=="m")v=String(s);else if(n[h]=="M")v=String(a);else if(n[h]=="p")v=u<=11?"AM":"PM";else if(n[h]=="P")v=u<=11?"am":"pm";else if(n[h]=="r")v=(u==0?12:u<=12?u:u-12)+":"+a+":"+f+" "+(u<=11?"AM":"PM");else if(n[h]=="R")v=u+":"+a;else if(n[h]=="S")v=String(f);else if(n[h]=="T")v=u+":"+a+":"+f;else if(n[h]=="u")v=String(Fb(r));else if(n[h]=="U"){var g=Sa(1,1,i)-Sa(1,1,1970);g+=7-Fb(g),v=String((r+7-g)/7)}else if(n[h]=="V"){var m;r<Ib(i)?m=r-Ib(i-1):r<Ib(i+1)?m=r-Ib(i):m=r-Ib(i+1),v=String(m/7+1)}else if(n[h]=="w")v=String(Fb(r)%7);else if(n[h]=="W"){var y=Sa(1,1,i)-Sa(1,1,1970);y+=(8-Fb(y))%7,v=String((r+7-y)/7)}else n[h]=="y"?v=String(i%100):n[h]=="Y"?v=String(i):n[h]=="%"?v="%":jb(e,n,h,"invalid conversion specifier")}else v=n[h];l+v.length>Hc&&fb(e,"time2str; output string length exceeds "+Hc+" charaters"),d+=v,l+=v.length}return d}function Rb(){}function Ub(){var e={};return e.orig_dir=0,e.orig_m=e.orig_n=e.orig_nnz=0,e.name=e.obj=null,e.c0=0,e.nrows=e.ncols=0,e.r_head=e.r_tail=null,e.c_head=e.c_tail=null,e.top=null,e.m=e.n=e.nnz=0,e.row_ref=e.col_ref=null,e.sol=e.scaling=0,e.p_stat=e.d_stat=e.t_stat=e.i_stat=0,e.r_stat=null,e.r_pi=null,e.c_stat=null,e.c_value=null,e}function zb(e,t,n){n==0?(t.prev=null,t.next=e.r_head,t.next==null?e.r_tail=t:t.next.prev=t,e.r_head=t):(t.prev=e.r_tail,t.next=null,t.prev==null?e.r_head=t:t.prev.next=t,e.r_tail=t)}function Wb(e,t){t.prev==null?e.r_head=t.next:t.prev.next=t.next,t.next==null?e.r_tail=t.prev:t.next.prev=t.prev}function Xb(e,t){t.temp||(t.temp=1,Wb(e,t),zb(e,t,0))}function Vb(e,t){t.temp&&(t.temp=0,Wb(e,t),zb(e,t,1))}function $b(e,t,n){n==0?(t.prev=null,t.next=e.c_head,t.next==null?e.c_tail=t:t.next.prev=t,e.c_head=t):(t.prev=e.c_tail,t.next=null,t.prev==null?e.c_head=t:t.prev.next=t,e.c_tail=t)}function Jb(e,t){t.prev==null?e.c_head=t.next:t.prev.next=t.next,t.next==null?e.c_tail=t.prev:t.next.prev=t.prev}function Kb(e,t){t.temp||(t.temp=1,Jb(e,t),$b(e,t,0))}function Qb(e,t){t.temp&&(t.temp=0,Jb(e,t),$b(e,t,1))}function Gb(e){var t={};return t.i=++e.nrows,t.name=null,t.lb=-n,t.ub=+n,t.ptr=null,t.temp=0,zb(e,t,1),t}function Yb(e){var t={};return t.j=++e.ncols,t.name=null,t.is_int=0,t.lb=t.ub=t.coef=0,t.ptr=null,t.temp=0,t.ll={},t.uu={},$b(e,t,1),t}function Zb(e,t,n){var r={};return r.row=e,r.col=t,r.val=n,r.r_prev=null,r.r_next=e.ptr,r.c_prev=null,r.c_next=t.ptr,r.r_next!=null&&(r.r_next.r_prev=r),r.c_next!=null&&(r.c_next.c_prev=r),e.ptr=t.ptr=r,r}function ew(e){var t=0;for(var n=e.ptr;n!=null;n=n.r_next)t++;return t}function tw(e){var t=0;for(var n=e.ptr;n!=null;n=n.c_next)t++;return t}function nw(e,t){var n;return n={},n.func=t,n.info={},n.link=e.top,e.top=n,n.info}function rw(e){var t;while(e.ptr!=null)t=e.ptr,e.ptr=t.r_next,t.c_prev==null?t.col.ptr=t.c_next:t.c_prev.c_next=t.c_next,t.c_next!=null&&(t.c_next.c_prev=t.c_prev)}function iw(e,t){rw(t),Wb(e,t)}function sw(e,t){var n;while(t.ptr!=null)n=t.ptr,t.ptr=n.c_next,n.r_prev==null?n.row.ptr=n.r_next:n.r_prev.r_next=n.r_next,n.r_next!=null&&(n.r_next.r_prev=n.r_prev);Jb(e,t)}function ow(e){e.r_prev==null?e.row.ptr=e.r_next:e.r_prev.r_next=e.r_next,e.r_next!=null&&(e.r_next.r_prev=e.r_prev),e.c_prev==null?e.col.ptr=e.c_next:e.c_prev.c_next=e.c_next,e.c_next!=null&&(e.c_next.c_prev=e.c_prev)}function uw(e,t,r,i,s){var o=t.m,u=t.n,a,f,l,c;p(r==Ks||r==Js),p(i==ts||i==ns||i==rs),p(s==Ks||s==Js),i==rs&&p(!s),e.orig_dir=t.dir,e.orig_dir==Hi?c=1:e.orig_dir==Bi?c=-1:p(e!=e),e.orig_m=o,e.orig_n=u,e.orig_nnz=t.nnz,r&&t.name!=null&&(e.name=t.name),r&&t.obj!=null&&(e.obj=t.obj),e.c0=c*t.c0,a=new Array(1+o);for(f=1;f<=o;f++){var h=t.row[f],d;a[f]=d=Gb(e),p(d.i==f),r&&h.name!=null&&(d.name=h.name);if(!s)h.type==qi?(d.lb=-n,d.ub=+n):h.type==Ri?(d.lb=h.lb,d.ub=+n):h.type==Ui?(d.lb=-n,d.ub=h.ub):h.type==zi?(d.lb=h.lb,d.ub=h.ub):h.type==Wi?d.lb=d.ub=h.lb:p(h!=h);else{var v=h.rii;h.type==qi?(d.lb=-n,d.ub=+n):h.type==Ri?(d.lb=h.lb*v,d.ub=+n):h.type==Ui?(d.lb=-n,d.ub=h.ub*v):h.type==zi?(d.lb=h.lb*v,d.ub=h.ub*v):h.type==Wi?d.lb=d.ub=h.lb*v:p(h!=h)}}for(l=1;l<=u;l++){var m=t.col[l],g,y;y=Yb(e),p(y.j==l),r&&m.name!=null&&(y.name=m.name),i==rs&&(y.is_int=Number(m.kind==Fi));if(!s){m.type==qi?(y.lb=-n,y.ub=+n):m.type==Ri?(y.lb=m.lb,y.ub=+n):m.type==Ui?(y.lb=-n,y.ub=m.ub):m.type==zi?(y.lb=m.lb,y.ub=m.ub):m.type==Wi?y.lb=y.ub=m.lb:p(m!=m),y.coef=c*m.coef;for(g=m.ptr;g!=null;g=g.c_next)Zb(a[g.row.i],y,g.val)}else{var b=m.sjj;m.type==qi?(y.lb=-n,y.ub=+n):m.type==Ri?(y.lb=m.lb/b,y.ub=+n):m.type==Ui?(y.lb=-n,y.ub=m.ub/b):m.type==zi?(y.lb=m.lb/b,y.ub=m.ub/b):m.type==Wi?y.lb=y.ub=m.lb/b:p(m!=m),y.coef=c*m.coef*b;for(g=m.ptr;g!=null;g=g.c_next)Zb(a[g.row.i],y,g.row.rii*g.val*b)}}e.sol=i,e.scaling=s}function aw(e,t){var r,i,s,o,u,a,f,l,c,h;Z(t),H(t,e.name),B(t,e.obj),j(t,e.orig_dir),e.orig_dir==Hi?c=1:e.orig_dir==Bi?c=-1:p(e!=e),W(t,0,c*e.c0);for(r=e.r_head;r!=null;r=r.next)r.temp=o=F(t,1),q(t,o,r.name),r.lb==-n&&r.ub==+n?a=qi:r.ub==+n?a=Ri:r.lb==-n?a=Ui:r.lb!=r.ub?a=zi:a=Wi,U(t,o,a,r.lb,r.ub);l=new Array(1+t.m),h=new Array(1+t.m);for(i=e.c_head;i!=null;i=i.next){u=I(t,1),R(t,u,i.name),Wt(t,u,i.is_int?Fi:ji),i.lb==-n&&i.ub==+n?a=qi:i.ub==+n?a=Ri:i.lb==-n?a=Ui:i.lb!=i.ub?a=zi:a=Wi,z(t,u,a,i.lb,i.ub),W(t,u,c*i.coef),f=0;for(s=i.ptr;s!=null;s=s.c_next)f++,l[f]=s.row.temp,h[f]=s.val;V(t,u,f,l,h)}e.m=t.m,e.n=t.n,e.nnz=t.nnz,e.row_ref=new Array(1+e.m),e.col_ref=new Array(1+e.n);for(r=e.r_head,o=0;r!=null;r=r.next)e.row_ref[++o]=r.i;for(i=e.c_head,u=0;i!=null;i=i.next)e.col_ref[++u]=i.j;e.name=e.obj=null,e.c0=0,e.r_head=e.r_tail=null,e.c_head=e.c_tail=null}function fw(e,t){var r,i,s,o,u,a,f;p(e.orig_dir==t.dir),e.orig_dir==Hi?f=1:e.orig_dir==Bi?f=-1:p(e!=e),p(e.m==t.m),p(e.n==t.n),p(e.nnz==t.nnz),e.sol==ts?(e.p_stat=t.pbs_stat,e.d_stat=t.dbs_stat):e.sol==ns?e.t_stat=t.ipt_stat:e.sol==rs?e.i_stat=t.mip_stat:p(e!=e);if(e.sol==ts){e.r_stat==null&&(e.r_stat=new Array(1+e.nrows));for(o=1;o<=e.nrows;o++)e.r_stat[o]=0;e.c_stat==null&&(e.c_stat=new Array(1+e.ncols));for(u=1;u<=e.ncols;u++)e.c_stat[u]=0}e.c_value==null&&(e.c_value=new Array(1+e.ncols));for(u=1;u<=e.ncols;u++)e.c_value[u]=n;if(e.sol!=rs){e.r_pi==null&&(e.r_pi=new Array(1+e.nrows));for(o=1;o<=e.nrows;o++)e.r_pi[o]=n}if(e.sol==ts){for(o=1;o<=e.m;o++)r=t.row[o],a=e.row_ref[o],e.r_stat[a]=r.stat,e.r_pi[a]=f*r.dual;for(u=1;u<=e.n;u++)i=t.col[u],a=e.col_ref[u],e.c_stat[a]=i.stat,e.c_value[a]=i.prim}else if(e.sol==ns){for(o=1;o<=e.m;o++)r=t.row[o],a=e.row_ref[o],e.r_pi[a]=f*r.dval;for(u=1;u<=e.n;u++)i=t.col[u],a=e.col_ref[u],e.c_value[a]=i.pval}else if(e.sol==rs)for(u=1;u<=e.n;u++)i=t.col[u],a=e.col_ref[u],e.c_value[a]=i.mipx;else p(e!=e);for(s=e.top;s!=null;s=s.link)p(s.func!=null),p(s.func(e,s.info)==0)}function lw(e,t){var n,r,i,s,o,u,a;p(e.orig_dir==t.dir),e.orig_dir==Hi?o=1:e.orig_dir==Bi?o=-1:p(e!=e),p(e.orig_m==t.m),p(e.orig_n==t.n),p(e.orig_nnz==t.nnz);if(e.sol==ts){t.valid=0,t.pbs_stat=e.p_stat,t.dbs_stat=e.d_stat,t.obj_val=t.c0,t.some=0;for(i=1;i<=t.m;i++)n=t.row[i],n.stat=e.r_stat[i],e.scaling?n.dual=o*e.r_pi[i]*n.rii:n.dual=o*e.r_pi[i],n.stat==Xi?n.dual=0:n.stat==Vi?(p(n.type==Ri||n.type==zi),n.prim=n.lb):n.stat==$i?(p(n.type==Ui||n.type==zi),n.prim=n.ub):n.stat==Ji?(p(n.type==qi),n.prim=0):n.stat==Ki?(p(n.type==Wi),n.prim=n.lb):p(n!=n);for(s=1;s<=t.n;s++)r=t.col[s],r.stat=e.c_stat[s],e.scaling?r.prim=e.c_value[s]*r.sjj:r.prim=e.c_value[s],r.stat==Xi?r.dual=0:r.stat==Vi?(p(r.type==Ri||r.type==zi),r.prim=r.lb):r.stat==$i?(p(r.type==Ui||r.type==zi),r.prim=r.ub):r.stat==Ji?(p(r.type==qi),r.prim=0):r.stat==Ki?(p(r.type==Wi),r.prim=r.lb):p(r!=r),t.obj_val+=r.coef*r.prim;for(i=1;i<=t.m;i++){n=t.row[i];if(n.stat==Xi){a=0;for(u=n.ptr;u!=null;u=u.r_next)a+=u.val*u.col.prim;n.prim=a}}for(s=1;s<=t.n;s++){r=t.col[s];if(r.stat!=Xi){a=r.coef;for(u=r.ptr;u!=null;u=u.c_next)a-=u.val*u.row.dual;r.dual=a}}}else if(e.sol==ns){t.ipt_stat=e.t_stat,t.ipt_obj=t.c0;for(i=1;i<=t.m;i++)n=t.row[i],e.scaling?n.dval=o*e.r_pi[i]*n.rii:n.dval=o*e.r_pi[i];for(s=1;s<=t.n;s++)r=t.col[s],e.scaling?r.pval=e.c_value[s]*r.sjj:r.pval=e.c_value[s],t.ipt_obj+=r.coef*r.pval;for(i=1;i<=t.m;i++){n=t.row[i],a=0;for(u=n.ptr;u!=null;u=u.r_next)a+=u.val*u.col.pval;n.pval=a}for(s=1;s<=t.n;s++){r=t.col[s],a=r.coef;for(u=r.ptr;u!=null;u=u.c_next)a-=u.val*u.row.dval;r.dval=a}}else if(e.sol==rs){p(!e.scaling),t.mip_stat=e.i_stat,t.mip_obj=t.c0;for(s=1;s<=t.n;s++)r=t.col[s],r.mipx=e.c_value[s],r.kind==Fi&&p(r.mipx==Math.floor(r.mipx)),t.mip_obj+=r.coef*r.mipx;for(i=1;i<=t.m;i++){n=t.row[i],a=0;for(u=n.ptr;u!=null;u=u.r_next)a+=u.val*u.col.mipx;n.mipx=a}}else p(e!=e)}function cw(e,t){var r;p(t.lb==-n&&t.ub==+n),r=nw(e,function(e,t){return e.sol==ts&&(e.r_stat[t.p]=Xi),e.sol!=rs&&(e.r_pi[t.p]=0),0}),r.p=t.i,iw(e,t)}function hw(e,t){var r,i;p(t.lb!=-n),p(t.lb<t.ub),i=Yb(e),i.lb=0,i.ub=t.ub==+n?+n:t.ub-t.lb,Zb(t,i,-1),r=nw(e,function(t,n){if(t.sol==ts)if(t.r_stat[n.p]==Xi){if(t.c_stat[n.s]==Xi)return Rb(),1;if(t.c_stat[n.s]!=Vi&&t.c_stat[n.s]!=$i)return Rb(),1;t.r_stat[n.p]=Xi}else{if(t.r_stat[n.p]!=Ki)return Rb(),1;if(t.c_stat[n.s]==Xi)t.r_stat[n.p]=Xi;else if(t.c_stat[n.s]==Vi)t.r_stat[n.p]=Vi;else{if(t.c_stat[n.s]!=$i)return Rb(),1;t.r_stat[n.p]=$i}}return 0}),r.p=t.i,r.s=i.j,t.ub=t.lb}function pw(e,t){var r,i;p(t.ub!=+n),p(t.lb<t.ub),i=Yb(e),i.lb=0,i.ub=t.lb==-n?+n:t.ub-t.lb,Zb(t,i,1),r=nw(e,function(e,t){if(e.sol==ts)if(e.r_stat[t.p]==Xi){if(e.c_stat[t.s]==Xi)return Rb(),1;if(e.c_stat[t.s]!=Vi&&e.c_stat[t.s]!=$i)return Rb(),1;e.r_stat[t.p]=Xi}else{if(e.r_stat[t.p]!=Ki)return Rb(),1;if(e.c_stat[t.s]==Xi)e.r_stat[t.p]=Xi;else if(e.c_stat[t.s]==Vi)e.r_stat[t.p]=$i;else{if(e.c_stat[t.s]!=$i)return Rb(),1;e.r_stat[t.p]=Vi}}return 0}),r.p=t.i,r.s=i.j,t.lb=t.ub}function dw(e,t){var r,i,s;p(t.lb==-n&&t.ub==+n),t.lb=0,t.ub=+n,i=Yb(e),i.is_int=t.is_int,i.lb=0,i.ub=+n,i.coef=-t.coef;for(s=t.ptr;s!=null;s=s.c_next)Zb(s.row,i,-s.val);r=nw(e,function(e,t){if(e.sol==ts)if(e.c_stat[t.q]==Xi){if(e.c_stat[t.s]==Xi)return Rb(),1;if(e.c_stat[t.s]!=Vi)return Rb(),-1;e.c_stat[t.q]=Xi}else{if(e.c_stat[t.q]!=Vi)return Rb(),-1;if(e.c_stat[t.s]==Xi)e.c_stat[t.q]=Xi;else{if(e.c_stat[t.s]!=Vi)return Rb(),-1;e.c_stat[t.q]=Ji}}return e.c_value[t.q]-=e.c_value[t.s],0}),r.q=t.j,r.s=i.j}function vw(e,t){var r,i,s;p(t.lb!=0),p(t.lb!=-n),p(t.lb<t.ub),r=nw(e,function(e,t){if(e.sol==ts){if(e.c_stat[t.q]!=Xi&&e.c_stat[t.q]!=Vi&&e.c_stat[t.q]!=$i)return Rb(),1;e.c_stat[t.q]=e.c_stat[t.q]}return e.c_value[t.q]=t.bnd+e.c_value[t.q],0}),r.q=t.j,r.bnd=t.lb,e.c0+=t.coef*t.lb;for(s=t.ptr;s!=null;s=s.c_next)i=s.row,i.lb==i.ub?i.ub=i.lb-=s.val*t.lb:(i.lb!=-n&&(i.lb-=s.val*t.lb),i.ub!=+n&&(i.ub-=s.val*t.lb));t.ub!=+n&&(t.ub-=t.lb),t.lb=0}function mw(e,t){var r,i,s;p(t.ub!=+n),p(t.lb<t.ub),r=nw(e,function(e,t){if(e.sol==Xi)if(e.c_stat[t.q]==Xi)e.c_stat[t.q]=Xi;else if(e.c_stat[t.q]==Vi)e.c_stat[t.q]=$i;else{if(e.c_stat[t.q]!=$i)return Rb(),1;e.c_stat[t.q]=Vi}return e.c_value[t.q]=t.bnd-e.c_value[t.q],0}),r.q=t.j,r.bnd=t.ub,e.c0+=t.coef*t.ub,t.coef=-t.coef;for(s=t.ptr;s!=null;s=s.c_next)i=s.row,i.lb==i.ub?i.ub=i.lb-=s.val*t.ub:(i.lb!=-n&&(i.lb-=s.val*t.ub),i.ub!=+n&&(i.ub-=s.val*t.ub)),s.val=-s.val;t.lb!=-n?t.ub-=t.lb:t.ub=+n,t.lb=0}function gw(e,t){var r,i,s;p(t.lb==0),p(t.ub>0),p(t.ub!=+n),s=Yb(e),s.is_int=t.is_int,s.lb=0,s.ub=+n,i=Gb(e),i.lb=i.ub=t.ub,Zb(i,t,1),Zb(i,s,1),r=nw(e,function(e,t){if(e.sol==Xi)if(e.c_stat[t.q]==Xi)if(e.c_stat[t.s]==Xi)e.c_stat[t.q]=Xi;else{if(e.c_stat[t.s]!=Vi)return Rb(),1;e.c_stat[t.q]=$i}else{if(e.c_stat[t.q]!=Vi)return Rb(),1;if(e.c_stat[t.s]!=Xi&&e.c_stat[t.s]!=Vi)return Rb(),1;e.c_stat[t.q]=Vi}return 0}),r.q=t.j,r.s=s.j,t.ub=+n}function yw(e,t){var r,i,s;p(t.lb==t.ub),r=nw(e,function(e,t){return e.sol==ts&&(e.c_stat[t.q]=Ki),e.c_value[t.q]=t.s,0}),r.q=t.j,r.s=t.lb,e.c0+=t.coef*t.lb;for(s=t.ptr;s!=null;s=s.c_next)i=s.row,i.lb==i.ub?i.ub=i.lb-=s.val*t.lb:(i.lb!=-n&&(i.lb-=s.val*t.lb),i.ub!=+n&&(i.ub-=s.val*t.lb));sw(e,t)}function bw(e,t){var r,i,s,o;return p(t.lb!=-n),p(t.ub!=+n),p(t.lb<t.ub),s=1e-9+1e-12*Math.abs(t.lb),t.ub-t.lb>s?0:(r=nw(e,function(e,t){if(e.sol==ts)if(e.r_stat[t.p]==Xi)e.r_stat[t.p]=Xi;else{if(e.r_stat[t.p]!=Ki)return Rb(),1;e.r_pi[t.p]>=0?e.r_stat[t.p]=Vi:e.r_stat[t.p]=$i}return 0}),r.p=t.i,i=.5*(t.ub+t.lb),o=Math.floor(i+.5),Math.abs(i-o)<=s&&(i=o),t.lb=t.ub=i,1)}function ww(e,t){var r,i,s,o,u,a;p(t.lb!=-n),p(t.ub!=+n),p(t.lb<t.ub),u=1e-9+1e-12*Math.abs(t.lb);if(t.ub-t.lb>u)return 0;r=nw(e,function(e,t){var n,r;if(e.sol==ts)if(e.c_stat[t.q]==Xi)e.c_stat[t.q]=Xi;else{if(e.c_stat[t.q]!=Ki)return Rb(),1;r=t.c;for(n=t.ptr;n!=null;n=n.next)r-=n.val*e.r_pi[n.ref];r>=0?e.c_stat[t.q]=Vi:e.c_stat[t.q]=$i}return 0}),r.q=t.j,r.c=t.coef,r.ptr=null;if(e.sol==ts)for(i=t.ptr;i!=null;i=i.c_next)s={},s.ref=i.row.i,s.val=i.val,s.next=r.ptr,r.ptr=s;return o=.5*(t.ub+t.lb),a=Math.floor(o+.5),Math.abs(o-a)<=u&&(o=a),t.lb=t.ub=o,1}function Ew(e,t){var r=.001;return p(t.ptr==null),t.lb>+r||t.ub<-r?1:(t.lb=-n,t.ub=+n,cw(e,t),0)}function Sw(e,t){function s(){r.stat=Vi,t.ub=t.lb}function u(){r.stat=$i,t.lb=t.ub}var r,i=.001;return p(t.ptr==null),t.coef>+i&&t.lb==-n?1:t.coef<-i&&t.ub==+n?1:(r=nw(e,function(e,t){return e.sol==ts&&(e.c_stat[t.q]=t.stat),0}),r.q=t.j,t.lb==-n&&t.ub==+n?(r.stat=Ji,t.lb=t.ub=0):t.ub==+n?s():t.lb==-n?u():t.lb!=t.ub?t.coef>=+o?s():t.coef<=-o?u():Math.abs(t.lb)<=Math.abs(t.ub)?s():u():r.stat=Ki,yw(e,t),0)}function xw(e,t,r){var i,s;p(e==e),p(t.lb<t.ub);if(t.is_int){s=Math.floor(r+.5);if(!(Math.abs(r-s)<=1e-5))return 2;r=s}if(t.lb!=-n){i=t.is_int?1e-5:1e-5+1e-8*Math.abs(t.lb);if(r<t.lb-i)return 1;if(r<t.lb+.001*i)return t.ub=t.lb,0}if(t.ub!=+n){i=t.is_int?1e-5:1e-5+1e-8*Math.abs(t.ub);if(r>t.ub+i)return 1;if(r>t.ub-.001*i)return t.lb=t.ub,0}return t.lb=t.ub=r,0}function Tw(e,t){var n,r,i,s,o,u;p(t.lb==t.ub),p(t.ptr!=null&&t.ptr.r_next==null),i=t.ptr,r=i.col,u=t.lb/i.val,o=xw(e,r,u),p(0<=o&&o<=2);if(o!=0)return o;n=nw(e,function(e,t){var n,r;if(e.sol==ts){if(e.c_stat[t.q]!=Ki)return Rb(),1;e.r_stat[t.p]=Ki,e.c_stat[t.q]=Xi}if(e.sol!=rs){r=t.c;for(n=t.ptr;n!=null;n=n.next)r-=n.val*e.r_pi[n.ref];e.r_pi[t.p]=r/t.apq}return 0}),n.p=t.i,n.q=r.j,n.apq=i.val,n.c=r.coef,n.ptr=null;if(e.sol!=rs)for(i=r.ptr;i!=null;i=i.c_next){if(i.row==t)continue;s={},s.ref=i.row.i,s.val=i.val,s.next=n.ptr,n.ptr=s}return iw(e,t),0}function Nw(e,t,r){var i,s,o;p(e==e),p(t.lb<t.ub),p(r!=-n),t.is_int&&(o=Math.floor(r+.5),Math.abs(r-o)<=1e-5?r=o:r=Math.ceil(r));if(t.lb!=-n){s=t.is_int?.001:.001+1e-6*Math.abs(t.lb);if(r<t.lb+s)return i=0,i}if(t.ub!=+n){s=t.is_int?1e-5:1e-5+1e-8*Math.abs(t.ub);if(r>t.ub+s)return i=4,i;if(r>t.ub-.001*s)return t.lb=t.ub,i=3,i}return t.lb==-n?i=2:t.is_int&&r>t.lb+.5?i=2:r>t.lb+.3*(1+Math.abs(t.lb))?i=2:i=1,t.lb=r,i}function Cw(e,t,r){var i,s,o;p(e==e),p(t.lb<t.ub),p(r!=+n),t.is_int&&(o=Math.floor(r+.5),Math.abs(r-o)<=1e-5?r=o:r=Math.floor(r));if(t.ub!=+n){s=t.is_int?.001:.001+1e-6*Math.abs(t.ub);if(r>t.ub-s)return i=0,i}if(t.lb!=-n){s=t.is_int?1e-5:1e-5+1e-8*Math.abs(t.lb);if(r<t.lb-s)return i=4,i;if(r<t.lb+.001*s)return t.ub=t.lb,i=3,i}return t.ub==+n?i=2:t.is_int&&r<t.ub-.5?i=2:r<t.ub-.3*(1+Math.abs(t.ub))?i=2:i=1,t.ub=r,i}function kw(e,t){var r,i,s,u,a,f,l,c,h;p(t.lb!=-n||t.ub!=+n),p(t.lb<t.ub),p(t.ptr!=null&&t.ptr.r_next==null),s=t.ptr,i=s.col,p(i.lb<i.ub),s.val>0?(c=t.lb==-n?-n:t.lb/s.val,h=t.ub==+n?+n:t.ub/s.val):(c=t.ub==+n?-n:t.ub/s.val,h=t.lb==-n?+n:t.lb/s.val);if(c==-n)f=0;else{f=Nw(e,i,c),p(0<=f&&f<=4);if(f==4)return 4}if(h==+n)l=0;else if(f==3)l=0;else{l=Cw(e,i,h),p(0<=l&&l<=4);if(l==4)return 4}if(!f&&!l)return t.lb=-n,t.ub=+n,cw(e,t),0;r=nw(e,function(e,t){var r,i;if(e.sol==rs)return 0;i=t.c;for(r=t.ptr;r!=null;r=r.next)i-=r.val*e.r_pi[r.ref];if(e.sol==ts){function s(){return t.lb_changed?(e.r_stat[t.p]=t.apq>0?Vi:$i,e.c_stat[t.q]=Xi,e.r_pi[t.p]=i/t.apq):(e.r_stat[t.p]=Xi,e.r_pi[t.p]=0),0}function u(){return t.ub_changed?(e.r_stat[t.p]=t.apq>0?$i:Vi,e.c_stat[t.q]=Xi,e.r_pi[t.p]=i/t.apq):(e.r_stat[t.p]=Xi,e.r_pi[t.p]=0),0}if(e.c_stat[t.q]==Xi)e.r_stat[t.p]=Xi,e.r_pi[t.p]=0;else if(e.c_stat[t.q]==Vi)s();else if(e.c_stat[t.q]==$i)u();else{if(e.c_stat[t.q]!=Ki)return Rb(),1;if(i>1e-7)if(t.apq>0&&t.lb!=-n||t.apq<0&&t.ub!=+n||!t.lb_changed)return e.c_stat[t.q]=Vi,s();if(i<-1e-7)if(t.apq>0&&t.ub!=+n||t.apq<0&&t.lb!=-n||!t.ub_changed)return e.c_stat[t.q]=$i,u();if(t.lb!=-n&&t.ub==+n)e.r_stat[t.p]=Vi;else if(t.lb==-n&&t.ub!=+n)e.r_stat[t.p]=$i;else{if(t.lb==-n||t.ub==+n)return Rb(),1;t.apq*e.c_value[t.q]<=.5*(t.lb+t.ub)?e.r_stat[t.p]=Vi:e.r_stat[t.p]=$i}e.c_stat[t.q]=Xi,e.r_pi[t.p]=i/t.apq}}return e.sol==ns&&(i>+o&&t.lb_changed||i<-o&&t.ub_changed?e.r_pi[t.p]=i/t.apq:e.r_pi[t.p]=0),0}),r.p=t.i,r.q=i.j,r.apq=s.val,r.c=i.coef,r.lb=t.lb,r.ub=t.ub,r.lb_changed=f,r.ub_changed=l,r.ptr=null;if(e.sol!=rs)for(u=i.ptr;u!=null;u=u.c_next){if(u==s)continue;a={},a.ref=u.row.i,a.val=u.val,a.next=r.ptr,r.ptr=a}return iw(e,t),f>=l?f:l}function Lw(e,t){var r,i,s,o;p(!t.is_int),p(t.lb<t.ub),p(t.ptr!=null&&t.ptr.c_next==null),s=t.ptr,i=s.row,p(i.lb==i.ub),r=nw(e,function(e,t){var n,r;if(e.sol==ts){if(e.r_stat[t.p]==Xi||e.r_stat[t.p]==Ji)e.c_stat[t.q]=e.r_stat[t.p];else if(e.r_stat[t.p]==Vi)e.c_stat[t.q]=t.apq>0?$i:Vi;else{if(e.r_stat[t.p]!=$i)return Rb(),1;e.c_stat[t.q]=t.apq>0?Vi:$i}e.r_stat[t.p]=Ki}e.sol!=rs&&(e.r_pi[t.p]+=t.c/t.apq),n=t.b;for(r=t.ptr;r!=null;r=r.next)n-=r.val*e.c_value[r.ref];return e.c_value[t.q]=n/t.apq,0}),r.p=i.i,r.q=t.j,r.apq=s.val,r.b=i.lb,r.c=t.coef,r.ptr=null;for(s=i.ptr;s!=null;s=s.r_next){if(s.col==t)continue;o={},o.ref=s.col.j,o.val=s.val,o.next=r.ptr,r.ptr=o,s.col.coef-=r.c*(s.val/r.apq)}e.c0+=r.c*(r.b/r.apq),r.apq>0?(i.lb=t.ub==+n?-n:r.b-r.apq*t.ub,i.ub=t.lb==-n?+n:r.b-r.apq*t.lb):(i.lb=t.lb==-n?-n:r.b-r.apq*t.lb,i.ub=t.ub==+n?+n:r.b-r.apq*t.ub),sw(e,t)}function Aw(e,t){function v(){r.stat=Vi,i.ub=i.lb}function m(){r.stat=$i,i.lb=i.ub}var r,i,s,u,a,f,l,c,h,d;p(t.lb<t.ub),p(t.ptr!=null&&t.ptr.c_next==null),s=t.ptr,i=s.row,p(i.lb!=-n||i.ub!=+n),p(i.lb<i.ub),a=i.lb;if(a!=-n)for(u=i.ptr;u!=null;u=u.r_next){if(u==s)continue;if(u.val>0){if(u.col.ub==+n){a=-n;break}a-=u.val*u.col.ub}else{if(u.col.lb==-n){a=-n;break}a-=u.val*u.col.lb}}f=i.ub;if(f!=+n)for(u=i.ptr;u!=null;u=u.r_next){if(u==s)continue;if(u.val>0){if(u.col.lb==-n){f=+n;break}f-=u.val*u.col.lb}else{if(u.col.ub==+n){f=+n;break}f-=u.val*u.col.ub}}s.val>0?l=a==-n?-n:a/s.val:l=f==+n?-n:f/s.val,s.val>0?c=f==+n?+n:f/s.val:c=a==-n?+n:a/s.val;if(t.lb!=-n){d=1e-9+1e-12*Math.abs(t.lb);if(l<t.lb-d)return 1}if(t.ub!=+n){d=1e-9+1e-12*Math.abs(t.ub);if(c>t.ub+d)return 1}t.lb=-n,t.ub=+n,r=nw(e,function(e,t){if(e.sol==ts)if(e.r_stat[t.p]==Xi)e.r_stat[t.p]=Xi;else{if(e.r_stat[t.p]!=Ki)return Rb(),1;p(t.stat==Vi||t.stat==$i),e.r_stat[t.p]=t.stat}return 0}),r.p=i.i,r.stat=-1,h=t.coef/s.val;if(h>+o)if(i.lb!=-n)v();else{if(h>1e-5)return 2;p(i.ub!=+n),m()}else if(h<-o)if(i.ub!=+n)m();else{if(h<-0.00001)return 2;p(i.lb!=-n),v()}else i.ub==+n?(p(i.lb!=-n),v()):i.lb==-n?(p(i.ub!=+n),m()):Math.abs(i.lb)<=Math.abs(i.ub)?v():m();return 0}function Ow(e,t){var r,i,s,o,u,a,f,l,c,h,d;p(t.lb==t.ub),p(t.ptr!=null&&t.ptr.r_next!=null&&t.ptr.r_next.r_next==null);var v,m;v=t.ptr,m=v.r_next,Math.abs(m.val)<.001*Math.abs(v.val)?(u=v,a=m):Math.abs(v.val)<.001*Math.abs(m.val)?(u=m,a=v):tw(v.col)<=tw(m.col)?(u=v,a=m):(u=m,a=v),s=u.col,o=a.col,r=nw(e,function(e,t){var n,r,i;if(e.sol==ts&&e.r_stat[t.p]!=Ki)return Rb(),1;if(e.sol!=rs){i=e.r_pi[t.p];for(n=t.ptr;n!=null;n=n.next)r=n.val/t.apq,i-=r*e.r_pi[n.ref];e.r_pi[t.p]=i}return 0}),r.p=t.i,r.apq=u.val,r.ptr=null;for(f=s.ptr;f!=null;f=c){c=f.c_next;if(f==u)continue;i=f.row,e.sol!=rs&&(h={},h.ref=i.i,h.val=f.val,h.next=r.ptr,r.ptr=h);for(l=i.ptr;l!=null;l=l.r_next)if(l.col==o)break;l==null&&(l=Zb(i,o,0)),d=f.val/u.val,ow(f),l.val-=d*a.val,Math.abs(l.val)<=1e-10&&ow(l),i.lb==i.ub?i.lb=i.ub=i.lb-d*t.lb:(i.lb!=-n&&(i.lb-=d*t.lb),i.ub!=+n&&(i.ub-=d*t.lb))}return s}function Mw(e,t,r){var i,s=null,o,u,a,f,l;p(r==0||r==1),l=1;for(u=t.ptr;u!=null;u=u.r_next)l<Math.abs(u.val)&&(l=Math.abs(u.val));for(u=t.ptr;u!=null;u=u.r_next)if(Math.abs(u.val)<1e-7*l)return 1;i=nw(e,function(e,t){var n,r,i,s,o,u;if(e.sol==rs)return 0;if(e.sol==ts){if(e.r_stat[t.p]!=Xi)return Rb(),1;for(n=t.ptr;n!=null;n=n.next){if(e.c_stat[n.j]!=Ki)return Rb(),1;e.c_stat[n.j]=n.stat}}for(n=t.ptr;n!=null;n=n.next){s=n.c;for(i=n.ptr;i!=null;i=i.next)s-=i.val*e.r_pi[i.ref];n.c=s}r=null,o=0;for(n=t.ptr;n!=null;n=n.next){s=n.c,u=Math.abs(s/n.a);if(n.stat==Vi)s<0&&o<u&&(r=n,o=u);else{if(n.stat!=$i)return Rb(),1;s>0&&o<u&&(r=n,o=u)}}return r!=null&&(e.sol==ts&&(e.r_stat[t.p]=t.stat,e.c_stat[r.j]=Xi),e.r_pi[t.p]=r.c/r.a),0}),i.p=t.i,t.lb==t.ub?i.stat=Ki:r==0?(i.stat=Vi,p(t.lb!=-n)):(i.stat=$i,p(t.ub!=+n)),i.ptr=null;for(u=t.ptr;u!=null;u=u.r_next){o=u.col,p(o.lb<o.ub),e.sol!=rs&&(s={},s.j=o.j,s.stat=-1,s.a=u.val,s.c=o.coef,s.ptr=null,s.next=i.ptr,i.ptr=s),r==0&&u.val<0||r!=0&&u.val>0?(e.sol!=rs&&(s.stat=Vi),p(o.lb!=-n),o.ub=o.lb):(e.sol!=rs&&(s.stat=$i),p(o.ub!=+n),o.lb=o.ub);if(e.sol!=rs)for(a=o.ptr;a!=null;a=a.c_next){if(a==u)continue;f={},f.ref=a.row.i,f.val=a.val,f.next=s.ptr,s.ptr=f}}return t.lb=-n,t.ub=+n,0}function _w(e,t){var r,i=0,s,o,u;p(e==e),s=0;for(r=t.ptr;r!=null;r=r.r_next)if(r.val>0){if(r.col.lb==-n){s=-n;break}s+=r.val*r.col.lb}else{if(r.col.ub==+n){s=-n;break}s+=r.val*r.col.ub}o=0;for(r=t.ptr;r!=null;r=r.r_next)if(r.val>0){if(r.col.ub==+n){o=+n;break}o+=r.val*r.col.ub}else{if(r.col.lb==-n){o=+n;break}o+=r.val*r.col.lb}if(t.lb!=-n){u=.001+1e-6*Math.abs(t.lb);if(t.lb-u>o)return i=51,i}if(t.ub!=+n){u=.001+1e-6*Math.abs(t.ub);if(t.ub+u<s)return i=51,i}return t.lb!=-n&&(u=1e-9+1e-12*Math.abs(t.lb),t.lb-u>s&&(t.lb+u<=o?i|=1:i|=2)),t.ub!=+n&&(u=1e-9+1e-12*Math.abs(t.ub),t.ub+u<o&&(t.ub-u>=s?i|=16:i|=32)),i}function Dw(e,t,r){var i;e.sol==ts&&(i=nw(e,function(e,t){return e.sol!=ts?(Rb(),1):(e.r_stat[t.p]==Xi?e.r_stat[t.p]=Xi:e.r_stat[t.p]=t.stat,0)}),i.p=t.i,t.ub==+n?i.stat=Vi:t.lb==-n?i.stat=$i:t.lb!=t.ub?i.stat=r==0?$i:Vi:i.stat=Ki),r==0?(p(t.lb!=-n),t.lb=-n):r==1?(p(t.ub!=+n),t.ub=+n):p(r!=r)}function Pw(e,t){var r,i,s,o,u,a=!1;p(e==e),s=1;for(r=t.ptr;r!=null;r=r.r_next)r.col.ll.ll=-n,r.col.uu.uu=+n,s<Math.abs(r.val)&&(s=Math.abs(r.val));o=1e-6*s;if(t.lb!=-n){i=null;for(r=t.ptr;r!=null;r=r.r_next)if(r.val>0&&r.col.ub==+n||r.val<0&&r.col.lb==-n){if(i!=null){a=!0;break}i=r}if(!a){u=t.lb;for(r=t.ptr;r!=null;r=r.r_next)r!=i&&(r.val>0?u-=r.val*r.col.ub:u-=r.val*r.col.lb);if(i==null)for(r=t.ptr;r!=null;r=r.r_next)r.val>=+o?r.col.ll.ll=r.col.ub+u/r.val:r.val<=-o&&(r.col.uu.uu=r.col.lb+u/r.val);else i.val>=+o?i.col.ll.ll=u/i.val:i.val<=-o&&(i.col.uu.uu=u/i.val)}}a=!1;if(t.ub!=+n){i=null;for(r=t.ptr;r!=null;r=r.r_next)if(r.val>0&&r.col.lb==-n||r.val<0&&r.col.ub==+n){if(i!=null){a=!0;break}i=r}if(!a){u=t.ub;for(r=t.ptr;r!=null;r=r.r_next)r!=i&&(r.val>0?u-=r.val*r.col.lb:u-=r.val*r.col.ub);if(i==null)for(r=t.ptr;r!=null;r=r.r_next)r.val>=+o?r.col.uu.uu=r.col.lb+u/r.val:r.val<=-o&&(r.col.ll.ll=r.col.ub+u/r.val);else i.val>=+o?i.col.uu.uu=u/i.val:i.val<=-o&&(i.col.ll.ll=u/i.val)}}}function Hw(e){var t,r,i,s,o,u,a,f,l,c,h,v,m;c=h=v=m=0;for(i=e.c_tail;i!=null;i=i.prev){if(!i.is_int)continue;if(i.lb==i.ub)continue;if(i.lb==0&&i.ub==1)continue;if(i.lb<-1e6||i.ub>1e6||i.ub-i.lb>4095){c++;continue}h++,i.lb!=0&&vw(e,i),p(i.lb==0),u=i.ub|0,p(i.ub==u);if(u==1)continue;a=2,l=4;while(u>=l)a++,l+=l;v+=a,t=nw(e,function(e,t){var n,r,i=e.c_value[t.q];for(n=1,r=2;n<t.n;n++,r+=r)i+=r*e.c_value[t.j+(n-1)];return e.c_value[t.q]=i,0}),t.q=i.j,t.j=0,t.n=a,u<l-1?(r=Gb(e),m++,r.lb=-n,r.ub=u):r=null,i.ub=1,r!=null&&Zb(r,i,1);for(f=1,l=2;f<a;f++,l+=l){s=Yb(e),s.is_int=1,s.lb=0,s.ub=1,s.coef=l*i.coef,t.j==0?t.j=s.j:p(t.j+(f-1)==s.j);for(o=i.ptr;o!=null;o=o.c_next)Zb(o.row,s,l*o.val)}}return h>0&&d(h+" integer variable(s) were replaced by "+v+" binary ones"),m>0&&d(m+" row(s) were added due to binarization"),c>0&&d("Binarization failed for "+c+" integer variable(s)"),c}function Bw(e,t){var n,r,i;r=null;for(n=e.ptr;n!=null;n=n.r_next)i={},i.aj=t*n.val,i.xj=n.col,i.next=r,r=i;return r}function jw(e,t){var r,i,s;p(e==e);if(t.lb!=-n||t.ub==+n)return 0;s=1;for(i=t.ptr;i!=null;i=i.r_next){r=i.col;if(!r.is_int||r.lb!=0||r.ub!=1)return 0;if(i.val!=+1){if(i.val!=-1)return 0;s--}}return t.ub!=s?0:1}function Fw(e,t,n,r){var i,s,o,u,a;p(e==e);for(i=t;i!=null;i=i.next)p(i.aj!=0),p(i.xj.is_int),p(i.xj.lb==0&&i.xj.ub==1);u=0;for(i=t;i!=null;i=i.next)if(i.aj!=+1){if(i.aj!=-1)break;u++}if(i==null&&n==1-u)return 1;for(i=t;i!=null;i=i.next)i.aj<0&&(n-=i.aj);for(i=t;i!=null;i=i.next)if(Math.abs(i.aj)>n)return 0;s=null;for(i=t;i!=null;i=i.next)if(s==null||Math.abs(s.aj)>Math.abs(i.aj))s=i;p(s!=null),o=null;for(i=t;i!=null;i=i.next)i!=s&&(o==null||Math.abs(o.aj)>Math.abs(i.aj))&&(o=i);p(o!=null),a=.001+1e-6*Math.abs(n);if(Math.abs(s.aj)+Math.abs(o.aj)<=n+a)return 0;n=1;for(i=t;i!=null;i=i.next)i.aj>0?i.aj=1:(i.aj=-1,n-=1);return r(n),2}function Iw(e,r){var i,s,o,u,a,f,l=0,c;p(r.lb<r.ub);for(a=0;a<=1;a++){if(a==0){if(r.ub==+n)continue;o=Bw(r,1),c=+r.ub}else{if(r.lb==-n)continue;o=Bw(r,-1),c=-r.lb}f=Fw(e,o,c,function(e){c=e}),p(0<=f&&f<=2);if(a==1&&f==1||f==2){l++;if(t){d("Original constraint:");for(s=r.ptr;s!=null;s=s.r_next)d(" "+s.val+" x"+s.col.j);r.lb!=-n&&d(", >= "+r.lb),r.ub!=+n&&d(", <= "+r.ub),d(""),d("Equivalent packing inequality:");for(u=o;u!=null;u=u.next)d(" "+(u.aj>0?"+":"-")+"x"+u.xj.j);d(", <= "+c+"")}if(r.lb==-n||r.ub==+n)i=null;else{i=Gb(e),a==0?(i.lb=r.lb,i.ub=+n):(i.lb=-n,i.ub=r.ub);for(s=r.ptr;s!=null;s=s.r_next)Zb(i,s.col,s.val)}rw(r),r.lb=-n,r.ub=c;for(u=o;u!=null;u=u.next)Zb(r,u.xj,u.aj);i!=null&&(r=i)}}return l}function qw(e,t,r,i){var s,o,u,a,f=0,l,c;t==0?(s=Bw(e,-1),p(e.lb!=-n),l=-e.lb):t==1&&(s=Bw(e,1),p(e.ub!=+n),l=+e.ub);for(o=s;o!=null;o=o.next)if(!o.xj.is_int||o.xj.lb!=0||o.xj.ub!=1){if(o.aj>0){if(o.xj.lb==-n)return f;l-=o.aj*o.xj.lb}else{if(o.xj.ub==+n)return f;l-=o.aj*o.xj.ub}o.aj=0}for(o=s;o!=null;o=o.next)o.aj<0&&(l-=o.aj);if(l<.001)return f;c=.001+1e-6*l,u=a=null;for(o=s;o!=null;o=o.next)if(Math.abs(o.aj)>.5*(l+c)){r[++f]=o.xj,i[f]=o.aj>0?0:1;if(u==null||Math.abs(u.aj)>Math.abs(o.aj))u=o}else Math.abs(o.aj)>=.001&&(a==null||Math.abs(a.aj)<Math.abs(o.aj))&&(a=o);return u!=null&&a!=null&&Math.abs(u.aj)+Math.abs(a.aj)>l+c&&(r[++f]=a.xj,i[f]=a.aj>0?0:1),f<2&&(f=0),f}function Rw(e,t){var r,i,s;p(e==e);if(t.lb==-n||t.ub!=+n)return 0;s=1;for(i=t.ptr;i!=null;i=i.r_next){r=i.col;if(!r.is_int||r.lb!=0||r.ub!=1)return 0;if(i.val!=+1){if(i.val!=-1)return 0;s--}}return t.lb!=s?0:1}function Uw(e,t,n,r){var i,s,o;p(e==e);for(i=t;i!=null;i=i.next)p(i.aj!=0),p(i.xj.is_int),p(i.xj.lb==0&&i.xj.ub==1);s=0;for(i=t;i!=null;i=i.next)if(i.aj!=+1){if(i.aj!=-1)break;s++}if(i==null&&n==1-s)return 1;for(i=t;i!=null;i=i.next)i.aj<0&&(n-=i.aj);if(n<.001)return 0;o=1e-9+1e-12*Math.abs(n);for(i=t;i!=null;i=i.next)if(Math.abs(i.aj)<n-o)return 0;n=1;for(i=t;i!=null;i=i.next)i.aj>0?i.aj=1:(i.aj=-1,n-=1);return r(n),2}function zw(e,r){var i,s,o,u,a,f,l=0,c;p(r.lb<r.ub);for(a=0;a<=1;a++){if(a==0){if(r.lb==-n)continue;o=Bw(r,1),c=+r.lb}else{if(r.ub==+n)continue;o=Bw(r,-1),c=-r.ub}f=Uw(e,o,c,function(e){c=e}),p(0<=f&&f<=2);if(a==1&&f==1||f==2){l++;if(t){d("Original constraint:");for(s=r.ptr;s!=null;s=s.r_next)d(" "+s.val+" x"+s.col.j);r.lb!=-n&&d(", >= "+r.lb),r.ub!=+n&&d(", <= "+r.ub),d(""),d("Equivalent covering inequality:");for(u=o;u!=null;u=u.next)d(" "+(u.aj>0?"+":"-")+"x"+u.xj.j);d(", >= "+c+"")}if(r.lb==-n||r.ub==+n)i=null;else{i=Gb(e),a==0?(i.lb=-n,i.ub=r.ub):(i.lb=r.lb,i.ub=+n);for(s=r.ptr;s!=null;s=s.r_next)Zb(i,s.col,s.val)}rw(r),r.lb=c,r.ub=+n;for(u=o;u!=null;u=u.next)Zb(r,u.xj,u.aj);i!=null&&(r=i)}}return l}function Ww(e,t){var n,r,i;p(e==e);if(t.lb!=t.ub)return 0;i=1;for(r=t.ptr;r!=null;r=r.r_next){n=r.col;if(!n.is_int||n.lb!=0||n.ub!=1)return 0;if(r.val!=+1){if(r.val!=-1)return 0;i--}}return t.lb!=i?0:1}function Xw(e,r,i,s){var o,u=0,a,f,l;p(e==e),a=0;for(o=r;o!=null;o=o.next)if(o.aj>0){if(o.xj.lb==-n)return u;a+=o.aj*o.xj.lb}else{if(o.xj.ub==+n)return u;a+=o.aj*o.xj.ub}for(o=r;o!=null;o=o.next){if(!o.xj.is_int||o.xj.lb!=0||o.xj.ub!=1)continue;o.aj>0?(f=a,i-o.aj<f&&f<i&&(l=i-f,l>=.001&&o.aj-l>=.01*(1+o.aj)&&(t&&d("+"),o.aj=l,u++))):(f=a-o.aj,i<f&&f<i-o.aj&&(l=o.aj+(f-i),l<=-0.001&&l-o.aj>=.01*(1-o.aj)&&(t&&d("-"),o.aj=l,a+=f-i,i=f,u++)))}return s(i),u}function Vw(e,r){var i,s,o,u,a,f=new Array(2),l;p(r.lb<r.ub),f[0]=f[1]=0;for(a=0;a<=1;a++){if(a==0){if(r.lb==-n)continue;t&&d("L"),o=Bw(r,1),l=+r.lb}else{if(r.ub==+n)continue;t&&d("U"),o=Bw(r,-1),l=-r.ub}f[a]=Xw(e,o,l,function(e){l=e});if(f[a]>0){if(r.lb==-n||r.ub==+n)i=null;else{t&&d("*"),i=Gb(e),a==0?(i.lb=-n,i.ub=r.ub):(i.lb=r.lb,i.ub=+n);for(s=r.ptr;s!=null;s=s.r_next)Zb(i,s.col,s.val)}rw(r),r.lb=l,r.ub=+n;for(u=o;u!=null;u=u.next)Zb(r,u.xj,u.aj);i!=null&&(r=i)}}return f[0]+f[1]}function $w(e){var r,i,s,o,u;p(e==e);for(r=e.r_head;r!=null;r=i)i=r.next,r.lb==-n&&r.ub==+n&&(t&&d("1"),cw(e,r));for(r=e.r_head;r!=null;r=i)i=r.next,r.lb!=-n&&r.ub!=+n&&r.lb<r.ub&&(u=bw(e,r),u!=0&&(u==1?t&&d("2"):p(u!=u)));for(s=e.c_head;s!=null;s=o)o=s.next,s.lb==s.ub&&(t&&d("3"),yw(e,s));for(s=e.c_head;s!=null;s=o)o=s.next,s.lb!=-n&&s.ub!=+n&&s.lb<s.ub&&(u=ww(e,s),u!=0&&u==1&&(t&&d("4"),yw(e,s)))}function Jw(e,r,i){function l(){for(o=r.ptr;o!=null;o=u){t&&d("H"),s=o.col,u=o.r_next;for(a=s.ptr;a!=null;a=a.c_next)Xb(e,a.row);yw(e,s)}return cw(e,r),0}var s,o,u,a,f;p(r.lb!=-n||r.ub!=+n);if(r.ptr==null){f=Ew(e,r);if(f==0)return t&&d("A"),0;if(f==1)return mo;p(f!=f)}if(r.ptr.r_next==null){s=r.ptr.col;if(r.lb==r.ub){f=Tw(e,r);if(f==0){t&&d("B");for(o=s.ptr;o!=null;o=o.c_next)Xb(e,o.row);return yw(e,s),0}if(f==1||f==2)return mo;p(f!=f)}else{f=kw(e,r);if(0<=f&&f<=3){t&&d("C"),Kb(e,s);if(f>=2)for(o=s.ptr;o!=null;o=o.c_next)Xb(e,o.row);return f==3&&(t&&d("D"),yw(e,s)),0}if(f==4)return mo;p(f!=f)}}f=_w(e,r),p(0<=f&&f<=255);if(f==51)return mo;if((f&15)==0)r.lb!=-n&&(t&&d("F"),Dw(e,r,0));else if((f&15)!=1)if((f&15)==2){t&&d("G");if(Mw(e,r,0)==0)return l()}else p(f!=f);if((f&240)==0)r.ub!=+n&&(t&&d("I"),Dw(e,r,1));else if((f&240)!=16)if((f&240)==32){t&&d("J");if(Mw(e,r,1)==0)return l()}else p(f!=f);if(r.lb==-n&&r.ub==+n){t&&d("K");for(o=r.ptr;o!=null;o=o.r_next)Kb(e,o.col);return cw(e,r),0}return e.sol==rs&&i&&Kw(e,r,1)<0?mo:0}function Kw(e,r,i){var s,o,u,a,f,l,c=0,h,v;p(e.sol==rs),p(r.lb!=-n||r.ub!=+n),Pw(e,r);for(o=r.ptr;o!=null;o=u){s=o.col,u=o.r_next;for(f=0;f<=1;f++){h=s.lb,v=s.ub;if(f==0){if(s.ll.ll==-n)continue;l=Nw(e,s,s.ll.ll)}else{if(s.uu.uu==+n)continue;l=Cw(e,s,s.uu.uu)}if(l==0||l==1)s.lb=h,s.ub=v;else if(l==2||l==3){t&&d("L"),c++;if(i)for(a=s.ptr;a!=null;a=a.c_next)a.row!=r&&Xb(e,a.row);if(l==3){t&&d("M"),yw(e,s);break}}else{if(l==4)return-1;p(l!=l)}}}return c}function Qw(e,r){var i,s,o;p(r.lb<r.ub);if(r.ptr==null){o=Sw(e,r);if(o==0)return t&&d("N"),0;if(o==1)return go;p(o!=o)}if(r.ptr.c_next==null){i=r.ptr.row;function u(){t&&d("O"),Lw(e,r);if(i.lb==-n&&i.ub==+n){t&&d("P");for(s=i.ptr;s!=null;s=s.r_next)Kb(e,s.col);cw(e,i)}else Xb(e,i);return 0}if(i.lb==i.ub){if(!r.is_int)return u()}else if(!r.is_int){o=Aw(e,r);if(o==0)return t&&d("Q"),u();if(o!=1&&o==2)return go}}return 0}function Gw(e,n){function u(){return p(o==0||o==mo||o==go),t&&d(""),o}var r,i,s,o;$w(e);for(r=e.r_head;r!=null;r=r.next)r.temp=1;for(i=e.c_head;i!=null;i=i.next)i.temp=1;s=1;while(s){s=0;for(;;){r=e.r_head;if(r==null||!r.temp)break;Vb(e,r),o=Jw(e,r,n);if(o!=0)return u();s=1}for(;;){i=e.c_head;if(i==null||!i.temp)break;Qb(e,i),o=Qw(e,i);if(o!=0)return u();s=1}}if(e.sol==rs&&!n)for(r=e.r_head;r!=null;r=r.next)if(Kw(e,r,0)<0)return o=mo,u();return o=0,u()}function Yw(e,t){return p(e.sol==ts),p(t==t),Gw(e,0)}function Zw(e,t){var r,i,s,o,u,a;p(e.sol==rs),p(t==t),a=Gw(e,1);if(a!=0)return a;t.binarize&&Hw(e),u=0;for(r=e.r_tail;r!=null;r=i){i=r.prev;if(r.lb==-n&&r.ub==+n)continue;if(r.lb==r.ub)continue;if(r.ptr==null||r.ptr.r_next==null)continue;for(o=r.ptr;o!=null;o=o.r_next){s=o.col;if(!s.is_int||s.lb!=0||s.ub!=1)break}if(o!=null)continue;u+=Iw(e,r)}u>0&&d(u+" hidden packing inequaliti(es) were detected"),u=0;for(r=e.r_tail;r!=null;r=i){i=r.prev;if(r.lb==-n&&r.ub==+n)continue;if(r.lb==r.ub)continue;if(r.ptr==null||r.ptr.r_next==null||r.ptr.r_next.r_next==null)continue;for(o=r.ptr;o!=null;o=o.r_next){s=o.col;if(!s.is_int||s.lb!=0||s.ub!=1)break}if(o!=null)continue;u+=zw(e,r)}u>0&&d(u+" hidden covering inequaliti(es) were detected"),u=0;for(r=e.r_tail;r!=null;r=i){i=r.prev;if(r.lb==r.ub)continue;u+=Vw(e,r)}return u>0&&d(u+" constraint coefficient(s) were reduced"),a=0,a}function eE(e,t){return e-t&2147483647}function tE(e){var t,n;for(t=1,n=32;n<=55;t++,n++)e.A[t]=eE(e.A[t],e.A[n]);for(n=1;t<=55;t++,n++)e.A[t]=eE(e.A[t],e.A[n]);return e.fptr=54,e.A[55]}function nE(){var e={},t;e.A=new Array(56),e.A[0]=-1;for(t=1;t<=55;t++)e.A[t]=0;return e.fptr=0,rE(e,1),e}function rE(e,t){var n,r=t,i=1;t=r=eE(r,0),e.A[55]=r;for(n=21;n;n=(n+21)%55)e.A[n]=i,i=eE(r,i),t&1?t=1073741824+(t>>1):t>>=1,i=eE(i,t),r=e.A[n];tE(e),tE(e),tE(e),tE(e),tE(e)}function iE(e){return e.A[e.fptr]>=0?e.A[e.fptr--]:tE(e)}function sE(e,t){const n=2147483648;var r=n-n%t,i;p(t>0);do i=iE(e);while(r<=i);return i%t}function oE(e){var t=iE(e)/2147483647;return p(0<=t&&t<=1),t}function uE(e,t,n){t>=n&&h("rng_uniform: a = "+t+", b = "+n+"; invalid range");var r=oE(e);return r=t*(1-r)+n*r,p(t<=r&&r<=n),r}function dE(e){hE&&d("scf_create_it: warning: debug mode enabled"),1<=e&&e<=32767||h("scf_create_it: n_max = "+e+"; invalid parameter");var t={};return t.n_max=e,t.n=0,t.f=new Array(1+e*e),t.u=new Array(1+e*(e+1)/2),t.p=new Array(1+e),t.t_opt=aE,t.rank=0,hE?t.c=new Array(1+e*e):t.c=null,t.w=new Array(1+e),t}function vE(e,t,n){var r=e.n_max,i=e.n;return p(1<=t&&t<=i),p(1<=n&&n<=i),(t-1)*r+n}function mE(e,t,n){var r=e.n_max,i=e.n;return p(1<=t&&t<=i),p(t<=n&&n<=i),(t-1)*r+n-t*(t-1)/2}function gE(e,t,n){var r=e.n,i=e.f,s=e.u,o,u,a,f,l,c,h;p(1<=t&&t<=r);for(;t<r;t++){f=mE(e,t,t),u=vE(e,t,1),l=vE(e,r,1);if(Math.abs(s[f])<Math.abs(n[t])){for(o=t,a=f;o<=r;o++,a++)h=s[a],s[a]=n[o],n[o]=h;for(o=1,a=u,c=l;o<=r;o++,a++,c++)h=i[a],i[a]=i[c],i[c]=h}Math.abs(s[f])<pE&&(s[f]=n[t]=0);if(n[t]==0)continue;h=n[t]/s[f];for(o=t+1,a=f+1;o<=r;o++,a++)n[o]-=h*s[a];for(o=1,a=u,c=l;o<=r;o++,a++,c++)i[c]-=h*i[a]}Math.abs(n[r])<pE&&(n[r]=0),s[mE(e,r,r)]=n[r]}function yE(e,t,n){var r,i,s;t==0?(i=1,s=0):Math.abs(e)<=Math.abs(t)?(r=-e/t,s=1/Math.sqrt(1+r*r),i=s*r):(r=-t/e,i=1/Math.sqrt(1+r*r),s=i*r),n(i,s)}function bE(e,t,n){var r=e.n,i=e.f,s=e.u,o,u,a,f,l,c;p(1<=t&&t<=r);for(;t<r;t++){f=mE(e,t,t),u=vE(e,t,1),l=vE(e,r,1),Math.abs(s[f])<pE&&Math.abs(n[t])<pE&&(s[f]=n[t]=0);if(n[t]==0)continue;yE(s[f],n[t],function(e,h){for(o=t,a=f;o<=r;o++,a++){var p=s[a],d=n[o];s[a]=e*p-h*d,n[o]=h*p+e*d}for(o=1,a=u,c=l;o<=r;o++,a++,c++){var v=i[a],m=i[c];i[a]=e*v-h*m,i[c]=h*v+e*m}})}Math.abs(n[r])<pE&&(n[r]=0),s[mE(e,r,r)]=n[r]}function wE(e,t,n){switch(e.t_opt){case aE:gE(e,t,n);break;case fE:bE(e,t,n);break;default:p(e!=e)}}function EE(e){var t=e.n_max,n=e.n,r=e.u,i,s,o,u=0;for(i=1,s=mE(e,i,i),o=t;i<=n;i++,s+=o,o--)r[s]!=0&&u++;return u}function SE(e,t,n,r,i,s){var o=e.n_max,u=e.n,a=e.f,f=e.u,l=e.p;if(hE)var c=e.c;var h=e.w,p,d,v,m,g,y,b=0,w;if(u==o)return b=cE,b;e.n=++u;for(p=1,v=vE(e,p,u);p<u;p++,v+=o)a[v]=0;for(m=1,y=vE(e,u,m);m<u;m++,y++)a[y]=0;a[vE(e,u,u)]=1;for(p=1;p<u;p++){w=0;for(m=1,d=vE(e,p,1);m<u;m++,d++)w+=a[d]*t[m+n];f[mE(e,p,u)]=w}for(m=1;m<u;m++)h[m]=r[l[m]+i];h[u]=s,l[u]=u;if(hE){for(p=1,v=vE(e,p,u);p<u;p++,v+=o)c[v]=t[p+n];for(m=1,y=vE(e,u,m);m<u;m++,y++)c[y]=r[m+i];c[vE(e,u,u)]=s}for(g=1;g<u;g++)if(h[g]!=0)break;return wE(e,g,h),e.rank=EE(e),e.rank!=u&&(b=lE),hE&&_a(e,"scf_update_exp"),b}function xE(e,t,n){var r=e.n,i=e.f,s=e.u,o=e.p,u=e.w,a,f,l,c;for(a=1;a<=r;a++){c=0;for(f=1,l=vE(e,a,1);f<=r;f++,l++)c+=i[l]*t[f+n];u[a]=c}for(a=r;a>=1;a--){c=u[a];for(f=r,l=mE(e,a,r);f>a;f--,l--)c-=s[l]*u[f];u[a]=c/s[l]}for(a=1;a<=r;a++)t[o[a]+n]=u[a]}function TE(e,t,n){var r=e.n,i=e.f,s=e.u,o=e.p,u=e.w,a,f,l,c;for(a=1;a<=r;a++)u[a]=t[o[a]+n];for(a=1;a<=r;a++){l=mE(e,a,a),c=u[a]/=s[l];for(f=a+1,l++;f<=r;f++,l++)u[f]-=s[l]*c}for(f=1;f<=r;f++)t[f+n]=0;for(a=1;a<=r;a++){c=u[a];for(f=1,l=vE(e,a,1);f<=r;f++,l++)t[f+n]+=i[l]*c}}function NE(e,t,n,r){e.rank<e.n&&h("scf_solve_it: singular matrix"),t?TE(e,n,r):xE(e,n,r)}function CE(e){e.n=e.rank=0}function LE(e,r){function u(e){var t=e.m,n=e.n,r=e.nnz,i={};return p(t>0&&n>0),i.m=t,i.n=n,i.type=new Array(1+t+n),i.lb=new Array(1+t+n),i.ub=new Array(1+t+n),i.coef=new Array(1+t+n),i.obj=new Array(1+n),i.A_ptr=new Array(1+n+1),i.A_ind=new Array(1+r),i.A_val=new Array(1+r),i.head=new Array(1+t+n),i.stat=new Array(1+n),i.N_ptr=new Array(1+t+1),i.N_len=new Array(1+t),i.N_ind=null,i.N_val=null,i.bbar=new Array(1+t),i.cbar=new Array(1+n),i.refsp=new Array(1+t+n),i.gamma=new Array(1+n),i.tcol_ind=new Array(1+t),i.tcol_vec=new Array(1+t),i.trow_ind=new Array(1+n),i.trow_vec=new Array(1+n),i.work1=new Array(1+t),i.work2=new Array(1+t),i.work3=new Array(1+t),i.work4=new Array(1+t),i}function a(e,t){var n=e.m,r=e.n,i=e.type,s=e.lb,o=e.ub,u=e.coef,a=e.obj,f=e.A_ptr,l=e.A_ind,c=e.A_val,h=e.head,d=e.stat,v=e.refsp,y=e.gamma,w,E,x,T,C,k,L;for(w=1;w<=n;w++)k=t.row[w],i[w]=k.type,s[w]=k.lb*k.rii,o[w]=k.ub*k.rii,u[w]=0;for(E=1;E<=r;E++)L=t.col[E],i[n+E]=L.type,s[n+E]=L.lb/L.sjj,o[n+E]=L.ub/L.sjj,u[n+E]=L.coef*L.sjj;a[0]=t.c0,m(a,1,u,n+1,r),C=0;for(E=1;E<=r;E++)C<Math.abs(a[E])&&(C=Math.abs(a[E]));C==0&&(C=1);switch(t.dir){case Hi:e.zeta=1/C;break;case Bi:e.zeta=-1/C;break;default:p(t!=t)}Math.abs(e.zeta)<1&&(e.zeta*=1e3),T=1;for(E=1;E<=r;E++){f[E]=T;for(var A=t.col[E].ptr;A!=null;A=A.c_next)l[T]=A.row.i,c[T]=A.row.rii*A.val*A.col.sjj,T++}f[r+1]=T,p(T==t.nnz+1),p(t.valid),m(h,1,t.head,1,n),x=0;for(w=1;w<=n;w++)k=t.row[w],k.stat!=Xi&&(x++,p(x<=r),h[n+x]=w,d[x]=k.stat);for(E=1;E<=r;E++)L=t.col[E],L.stat!=Xi&&(x++,p(x<=r),h[n+x]=n+E,d[x]=L.stat);p(x==r),e.valid=1,t.valid=0,e.bfd=t.bfd,t.bfd=null,S(e),N(e),e.phase=0,e.tm_beg=b(),e.it_beg=e.it_cnt=t.it_cnt,e.it_dpy=-1,e.refct=0,g(v,1,0,n+r);for(E=1;E<=r;E++)y[E]=1}function f(e,n,r,i){var s=e.m;if(t)var o=e.n;var u=e.A_ptr,a=e.A_ind,f=e.A_val,l=e.head,c,h,d,v;t&&p(1<=n&&n<=s),c=l[n],t&&p(1<=c&&c<=s+o);if(c<=s)h=1,r[1]=c,i[1]=1;else{d=u[c-s],h=u[c-s+1]-d,m(r,1,a,d,h),m(i,1,f,d,h);for(v=1;v<=h;v++)i[v]=-i[v]}return h}function l(e){var t=ar(e.bfd,e.m,null,f,e);return e.valid=t==0,t}function c(e,n,r){var i=e.m;if(t)var s=e.n;var o,u;t&&(p(1<=n&&n<=i),p(1<=r&&r<=i+s));if(r<=i){var a=new Array(2);o=new Array(2),a[1]=r,o[1]=1,p(e.valid),u=cr(e.bfd,n,0,1,a,0,o)}else{var f=e.A_ptr,l=e.A_ind,c=e.A_val;o=e.work1;var h,d,v,m;h=f[r-i],d=f[r-i+1],m=0;for(v=h;v<d;v++)o[++m]=-c[v];p(e.valid),u=cr(e.bfd,n,0,m,l,h-1,o)}return e.valid=u==0,u}function h(e,n,r,i){var s=e.m;if(t)var o=e.n;var u=e.A_ptr,a=e.A_ind,f=e.A_val,l=e.head,c,h,d,v,g,y;m(i,1,n,1,s);for(c=1;c<=s;c++){y=r[c];if(y==0)continue;h=l[c],t&&p(1<=h&&h<=s+o);if(h<=s)i[h]-=y;else{d=u[h-s],v=u[h-s+1];for(g=d;g<v;g++)i[a[g]]+=f[g]*y}}}function v(e,t,n){var r=e.m,i=e.work1,s=e.work1,o;h(e,t,n,i),p(e.valid),fr(e.bfd,s);for(o=1;o<=r;o++)n[o]+=s[o]}function y(e,n,r,i){var s=e.m;if(t)var o=e.n;var u=e.A_ptr,a=e.A_ind,f=e.A_val,l=e.head,c,h,d,v,m,g;for(c=1;c<=s;c++){h=l[c],t&&p(1<=h&&h<=s+o),g=n[c];if(h<=s)g-=r[h];else{d=u[h-s],v=u[h-s+1];for(m=d;m<v;m++)g+=f[m]*r[a[m]]}i[c]=g}}function E(e,t,n){var r=e.m,i=e.work1,s=e.work1,o;y(e,t,n,i),p(e.valid),lr(e.bfd,s);for(o=1;o<=r;o++)n[o]+=s[o]}function S(e){var t=e.m,n=e.n,r=e.A_ptr,i=e.A_ind,s=e.N_ptr,o=e.N_len,u,a,f,l,c;for(u=1;u<=t;u++)o[u]=1;for(a=1;a<=n;a++){f=r[a],l=r[a+1];for(c=f;c<l;c++)o[i[c]]++}s[1]=1;for(u=1;u<=t;u++)o[u]>n&&(o[u]=n),s[u+1]=s[u]+o[u];e.N_ind=new Array(s[t+1]),e.N_val=new Array(s[t+1])}function x(e,n,r){var i=e.m;if(t)var s=e.n;var o=e.N_ptr,u=e.N_len,a=e.N_ind,f=e.N_val,l;t&&(p(1<=n&&n<=s),p(1<=r&&r<=i+s));if(r<=i)l=o[r]+u[r]++,t&&p(l<o[r+1]),a[l]=n,f[l]=1;else{var c=e.A_ptr,h=e.A_ind,d=e.A_val,v,m,g,y;m=c[r-i],g=c[r-i+1];for(y=m;y<g;y++)v=h[y],l=o[v]+u[v]++,t&&p(l<o[v+1]),a[l]=n,f[l]=-d[y]}}function T(e,n,r){var i=e.m;if(t)var s=e.n;var o=e.N_ptr,u=e.N_len,a=e.N_ind,f=e.N_val,l,c,h;t&&(p(1<=n&&n<=s),p(1<=r&&r<=i+s));if(r<=i){c=o[r];for(l=c;a[l]!=n;l++);h=c+ --u[r],t&&p(l<=h),a[l]=a[h],f[l]=f[h]}else{var d=e.A_ptr,v=e.A_ind,m,g,y,b;g=d[r-i],y=d[r-i+1];for(b=g;b<y;b++){m=v[b],c=o[m];for(l=c;a[l]!=n;l++);h=c+ --u[m],t&&p(l<=h),a[l]=a[h],f[l]=f[h]}}}function N(e){var n=e.m,r=e.n,i=e.head,s=e.stat,o=e.N_len,u,a;g(o,1,0,n);for(u=1;u<=r;u++)s[u]!=Ki&&(a=i[n+u],t&&p(1<=a&&a<=n+r),x(e,u,a))}function C(e,n){var r=e.m;if(t)var i=e.n;var s=e.lb,o=e.ub,u=e.head,a=e.stat,f,l;t&&p(1<=n&&n<=i),f=u[r+n],t&&p(1<=f&&f<=r+i);switch(a[n]){case Vi:l=s[f];break;case $i:l=o[f];break;case Ji:l=0;break;case Ki:l=s[f];break;default:p(a!=a)}return l}function k(e,n){var r=e.m,i=e.n,s=e.A_ptr,o=e.A_ind,u=e.A_val,a=e.head,f=e.work2,l,c,h,d,g,y,b;for(l=1;l<=r;l++)f[l]=0;for(c=1;c<=i;c++){h=a[r+c],t&&p(1<=h&&h<=r+i),b=C(e,c);if(b==0)continue;if(h<=r)f[h]-=b;else{d=s[h-r],g=s[h-r+1];for(y=d;y<g;y++)f[o[y]]+=b*u[y]}}m(n,1,f,1,r),p(e.valid),fr(e.bfd,n),v(e,f,n)}function L(e,t){var n=e.m,r=e.coef,i=e.head,s=e.work2,o;for(o=1;o<=n;o++)s[o]=r[i[o]];m(t,1,s,1,n),p(e.valid),lr(e.bfd,t),E(e,s,t)}function A(e,n,r){var i=e.m;if(t)var s=e.n;var o=e.coef,u=e.head,a,f;t&&p(1<=r&&r<=s),a=u[i+r],t&&p(1<=a&&a<=i+s),f=o[a];if(a<=i)f-=n[a];else{var l=e.A_ptr,c=e.A_ind,h=e.A_val,d,v,m;d=l[a-i],v=l[a-i+1];for(m=d;m<v;m++)f+=h[m]*n[c[m]]}return f}function O(e){k(e,e.bbar)}function M(e){if(t)var n=e.m;var r=e.n;if(t)var i=e.head;var s=e.cbar,o=e.work3,u;if(t)var a;L(e,o);for(u=1;u<=r;u++)t&&(a=i[n+u],p(1<=a&&a<=n+r)),s[u]=A(e,o,u)}function _(e){var t=e.m,n=e.n,r=e.head,i=e.refsp,s=e.gamma,o,u;p(e.refct==0),e.refct=1e3,g(i,1,0,t+n);for(o=1;o<=n;o++)u=r[t+o],i[u]=1,s[o]=1}function D(e,n){var r=e.m;if(t)var i=e.n;var s=e.head,o=e.refsp,u=e.work3,a=e.work3,f,l,c;t&&p(1<=n&&n<=i),l=s[r+n],t&&p(1<=l&&l<=r+i);for(f=1;f<=r;f++)a[f]=0;if(l<=r)a[l]=-1;else{var h=e.A_ptr,d=e.A_ind,v=e.A_val,m,g,y;m=h[l-r],g=h[l-r+1];for(y=m;y<g;y++)a[d[y]]=v[y]}p(e.valid),fr(e.bfd,u),c=o[l]?1:0;for(f=1;f<=r;f++)l=s[f],t&&p(1<=l&&l<=r+i),o[l]&&(c+=u[f]*u[f]);return c}function P(e,n){var r=e.n,i=e.stat,s=e.cbar,o=e.gamma,u,a,f,l,c;a=0,l=0;for(u=1;u<=r;u++){f=s[u];switch(i[u]){case Vi:if(f>=-n)continue;break;case $i:if(f<=+n)continue;break;case Ji:if(-n<=f&&f<=+n)continue;break;case Ki:continue;default:p(i!=i)}t&&p(o[u]>0),c=f*f/o[u],l<c&&(a=u,l=c)}e.q=a}function H(e){var n=e.m;if(t)var r=e.n;var i=e.head,s=e.q,o=e.tcol_ind,u=e.tcol_vec,a=e.tcol_vec,f,l,c;t&&p(1<=s&&s<=r),l=i[n+s],t&&p(1<=l&&l<=n+r);for(f=1;f<=n;f++)a[f]=0;if(l<=n)a[l]=-1;else{var h=e.A_ptr,d=e.A_ind,v=e.A_val,m,g,y;m=h[l-n],g=h[l-n+1];for(y=m;y<g;y++)a[d[y]]=v[y]}p(e.valid),fr(e.bfd,u),c=0;for(f=1;f<=n;f++)u[f]!=0&&(o[++c]=f);e.tcol_nnz=c}function B(e){var n=e.m;if(t)var r=e.n;var i=e.head,s=e.q,o=e.tcol_ind,u=e.tcol_vec,a=e.work3,f,l,c;t&&p(1<=s&&s<=r),l=i[n+s],t&&p(1<=l&&l<=n+r);for(f=1;f<=n;f++)a[f]=0;if(l<=n)a[l]=-1;else{var h=e.A_ptr,d=e.A_ind,m=e.A_val,g,y,b;g=h[l-n],y=h[l-n+1];for(b=g;b<y;b++)a[d[b]]=m[b]}v(e,a,u),c=0;for(f=1;f<=n;f++)u[f]!=0&&(o[++c]=f);e.tcol_nnz=c}function j(e,n){if(t)var r=e.m;var i=e.tcol_nnz,s=e.tcol_ind,o=e.tcol_vec,u,a,f,l,c,h;l=0;for(f=1;f<=i;f++)t&&(u=s[f],p(1<=u&&u<=r)),h=Math.abs(o[s[f]]),l<h&&(l=h);e.tcol_max=l,c=n*(1+.01*l);for(a=0;a<i;)u=s[i],Math.abs(o[u])<c?i--:(a++,s[i]=s[a],s[a]=u);e.tcol_num=a}function F(e,r){function D(){e.p=x,x>0&&u[c[x]]==Wi?e.p_stat=Ki:e.p_stat=T,t&&p(M>=0),e.teta=A*M}var s=e.m;if(t)var o=e.n;var u=e.type,a=e.lb,f=e.ub,l=e.coef,c=e.head,h=e.phase,d=e.bbar,v=e.cbar,m=e.q,g=e.tcol_ind,y=e.tcol_vec,b=e.tcol_num,w,E,S,x,T,N,C,k,L,A,O,M,_;t&&p(1<=m&&m<=o),t&&p(v[m]!=0),A=v[m]>0?-1:1,S=c[s+m],t&&p(1<=S&&S<=s+o),u[S]==zi?(x=-1,T=0,M=f[S]-a[S],k=1):(x=0,T=0,M=n,k=0);for(N=1;N<=b;N++){w=g[N],t&&p(1<=w&&w<=s),S=c[w],t&&p(1<=S&&S<=s+o),C=A*y[w],t&&p(C!=0);if(C>0)if(h==1&&l[S]<0)L=r*(1+i*Math.abs(a[S])),O=(a[S]+L-d[w])/C,E=Vi;else{if(h==1&&l[S]>0)continue;if(u[S]!=Ui&&u[S]!=zi&&u[S]!=Wi)continue;L=r*(1+i*Math.abs(f[S])),O=(f[S]+L-d[w])/C,E=$i}else if(h==1&&l[S]>0)L=r*(1+i*Math.abs(f[S])),O=(f[S]-L-d[w])/C,E=$i;else{if(h==1&&l[S]<0)continue;if(u[S]!=Ri&&u[S]!=zi&&u[S]!=Wi)continue;L=r*(1+i*Math.abs(a[S])),O=(a[S]-L-d[w])/C,E=Vi}O<0&&(O=0);if(M>O||M==O&&k<Math.abs(C))x=w,T=E,M=O,k=Math.abs(C)}if(r==0)return D();if(x<=0)return D();if(M==0)return D();_=M,x=0,T=0,M=n,k=0;for(N=1;N<=b;N++){w=g[N],t&&p(1<=w&&w<=s),S=c[w],t&&p(1<=S&&S<=s+o),C=A*y[w],t&&p(C!=0);if(C>0)if(h==1&&l[S]<0)O=(a[S]-d[w])/C,E=Vi;else{if(h==1&&l[S]>0)continue;if(u[S]!=Ui&&u[S]!=zi&&u[S]!=Wi)continue;O=(f[S]-d[w])/C,E=$i}else if(h==1&&l[S]>0)O=(f[S]-d[w])/C,E=$i;else{if(h==1&&l[S]<0)continue;if(u[S]!=Ri&&u[S]!=zi&&u[S]!=Wi)continue;O=(a[S]-d[w])/C,E=Vi}O<0&&(O=0),O<=_&&k<Math.abs(C)&&(x=w,T=E,M=O,k=Math.abs(C))}p(x!=0),D()}function I(e,n){var r=e.m,i=e.p,s;t&&p(1<=i&&i<=r);for(s=1;s<=r;s++)n[s]=0;n[i]=1,p(e.valid),lr(e.bfd,n)}function q(e,n){var r=e.m,i=e.p,s=e.work3,o;t&&p(1<=i&&i<=r);for(o=1;o<=r;o++)s[o]=0;s[i]=1,E(e,s,n)}function R(e,n){var r=e.m,i=e.n;if(t)var s=e.stat;var o=e.N_ptr,u=e.N_len,a=e.N_ind,f=e.N_val,l=e.trow_ind,c=e.trow_vec,h,d,v,m,g,y,b;for(d=1;d<=i;d++)c[d]=0;for(h=1;h<=r;h++){b=n[h];if(b==0)continue;v=o[h],m=v+u[h];for(g=v;g<m;g++)t&&(d=a[g],p(1<=d&&d<=i),p(s[d]!=Ki)),c[a[g]]-=b*f[g]}y=0;for(d=1;d<=i;d++)c[d]!=0&&(l[++y]=d);e.trow_nnz=y}function U(e){if(t)var n=e.m,r=e.n;var i=e.bbar,s=e.q,o=e.tcol_nnz,u=e.tcol_ind,a=e.tcol_vec,f=e.p,l=e.teta,c,h;t&&(p(1<=s&&s<=r),p(f<0||1<=f&&f<=n)),f>0&&(i[f]=C(e,s)+l);if(l==0)return;for(h=1;h<=o;h++){c=u[h];if(c==f)continue;i[c]+=a[c]*l}}function z(e){var n=e.m;if(t)var r=e.n;var i=e.coef,s=e.head,o=e.q,u=e.tcol_nnz,a=e.tcol_ind,f=e.tcol_vec,l,c,h;t&&p(1<=o&&o<=r),h=i[s[n+o]];for(c=1;c<=u;c++)l=a[c],t&&p(1<=l&&l<=n),h+=i[s[l]]*f[l];return h}function W(e){if(t)var n=e.n;var r=e.cbar,i=e.q,s=e.trow_nnz,o=e.trow_ind,u=e.trow_vec,a,f,l;t&&p(1<=i&&i<=n),t&&p(u[i]!=0),l=r[i]/=u[i];for(f=1;f<=s;f++){a=o[f];if(a==i)continue;r[a]-=u[a]*l}}function X(e){var n=e.m;if(t)var r=e.n;var i=e.type,s=e.A_ptr,u=e.A_ind,a=e.A_val,f=e.head,l=e.refsp,c=e.gamma,h=e.q,d=e.tcol_nnz,v=e.tcol_ind,m=e.tcol_vec,g=e.p,y=e.trow_nnz,b=e.trow_ind,w=e.trow_vec,E=e.work3,S,x,T,N,C,k,L,A,O,M,_,D,P,H;t&&(p(1<=g&&g<=n),p(1<=h&&h<=r)),p(e.refct>0),e.refct--,A=O=l[f[n+h]]?1:0;for(S=1;S<=n;S++)E[S]=0;for(N=1;N<=d;N++)S=v[N],l[f[S]]?(E[S]=D=m[S],A+=D*D):E[S]=0;p(e.valid),lr(e.bfd,E),M=w[h],t&&p(M!=0);for(N=1;N<=y;N++){x=b[N];if(x==h)continue;D=w[x]/M,T=f[n+x];if(T<=n)_=E[T];else{_=0,C=s[T-n],k=s[T-n+1];for(L=C;L<k;L++)_-=a[L]*E[u[L]]}P=c[x]+D*D*A+2*D*_,H=(l[T]?1:0)+O*D*D,c[x]=P>=H?P:H,c[x]<o&&(c[x]=o)}i[f[g]]==Wi?c[h]=1:(c[h]=A/(M*M),c[h]<o&&(c[h]=o))}function V(e){var t=e.m,n=e.bbar,r,i,s,o;o=new Array(1+t),k(e,o),s=0;for(r=1;r<=t;r++)i=Math.abs(o[r]-n[r])/(1+Math.abs(o[r])),s<i&&(s=i);return s}function $(e){var t=e.m,n=e.n,r=e.stat,i=e.cbar,s,o,u,a,f;f=new Array(1+t),L(e,f),u=0;for(s=1;s<=n;s++){if(r[s]==Ki)continue;a=A(e,f,s),o=Math.abs(a-i[s])/(1+Math.abs(a)),u<o&&(u=o)}return u}function J(e){var t=e.n,n=e.stat,r=e.gamma,i,s,o,u;o=0;for(i=1;i<=t;i++){if(n[i]==Ki){p(r[i]==1);continue}u=D(e,i),s=Math.abs(u-r[i])/(1+Math.abs(u)),o<s&&(o=s)}return o}function K(e){var n=e.m;if(t)var r=e.n,i=e.type;var s=e.head,o=e.stat,u=e.q,a=e.p,f=e.p_stat,l;t&&p(1<=u&&u<=r);if(a<0){t&&(l=s[n+u],p(1<=l&&l<=n+r),p(i[l]==zi));switch(o[u]){case Vi:o[u]=$i;break;case $i:o[u]=Vi;break;default:p(o!=o)}}else{if(t){p(1<=a&&a<=n),l=s[a];switch(f){case Vi:p(i[l]==Ri||i[l]==zi);break;case $i:p(i[l]==Ui||i[l]==zi);break;case Ki:p(i[l]==Ki);break;default:p(f!=f)}}l=s[a],s[a]=s[n+u],s[n+u]=l,o[u]=f}}function Q(e,t){var n=e.m,r=e.n,s=e.type,o=e.lb,u=e.ub,a=e.coef,f=e.head,l=e.bbar,c,h,p=0,d;t*=.9;for(h=1;h<=n+r;h++)a[h]=0;for(c=1;c<=n;c++){h=f[c];if(s[h]==Ri||s[h]==zi||s[h]==Wi)d=t*(1+i*Math.abs(o[h])),l[c]<o[h]-d&&(a[h]=-1,p++);if(s[h]==Ui||s[h]==zi||s[h]==Wi)d=t*(1+i*Math.abs(u[h])),l[c]>u[h]+d&&(a[h]=1,p++)}return p}function G(e){var t=e.m,n=e.n,r=e.coef,i=e.obj,s=e.zeta,o,u;for(o=1;o<=t;o++)r[o]=0;for(u=1;u<=n;u++)r[t+u]=s*i[u]}function Y(e,n){var r=e.m;if(t)var s=e.n;var o=e.type,u=e.lb,a=e.ub,f=e.coef,l=e.head,c=e.phase,h=e.bbar,d,v,m;for(d=1;d<=r;d++){v=l[d],t&&p(1<=v&&v<=r+s);if(c==1&&f[v]<0){t&&p(o[v]==Ri||o[v]==zi||o[v]==Wi),m=n*(1+i*Math.abs(u[v]));if(h[d]>u[v]+m)return 1}else if(c==1&&f[v]>0){t&&p(o[v]==Ui||o[v]==zi||o[v]==Wi),m=n*(1+i*Math.abs(a[v]));if(h[d]<a[v]-m)return 1}else{if(o[v]==Ri||o[v]==zi||o[v]==Wi){m=n*(1+i*Math.abs(u[v]));if(h[d]<u[v]-m)return 1}if(o[v]==Ui||o[v]==zi||o[v]==Wi){m=n*(1+i*Math.abs(a[v]));if(h[d]>a[v]+m)return 1}}}return 0}function Z(e,n){var r=e.m;if(t)var s=e.n,o=e.type;var u=e.lb,a=e.ub,f=e.coef,l=e.head,c=e.bbar,h,d,v;p(e.phase==1);for(h=1;h<=r;h++){d=l[h],t&&p(1<=d&&d<=r+s);if(f[d]<0){t&&p(o[d]==Ri||o[d]==zi||o[d]==Wi),v=n*(1+i*Math.abs(u[d]));if(c[h]<u[d]-v)return 1}else if(f[d]>0){t&&p(o[d]==Ui||o[d]==zi||o[d]==Wi),v=n*(1+i*Math.abs(a[d]));if(c[h]>a[d]+v)return 1}}return 0}function et(e){var n=e.m,r=e.n,i=e.obj,s=e.head,o=e.bbar,u,a,f,l;l=i[0];for(u=1;u<=n;u++)f=s[u],t&&p(1<=f&&f<=n+r),f>n&&(l+=i[f-n]*o[u]);for(a=1;a<=r;a++)f=s[n+a],t&&p(1<=f&&f<=n+r),f>n&&(l+=i[f-n]*C(e,a));return l}function tt(e,n,r){var i=e.m;if(t)var s=e.n;var o=e.type,u=e.lb,a=e.ub,f=e.phase,l=e.head,c=e.bbar,h,v,m,g;if(n.msg_lev<vs)return;if(n.out_dly>0&&1e3*w(b(),e.tm_beg)<n.out_dly)return;if(e.it_cnt==e.it_dpy)return;if(!r&&e.it_cnt%n.out_frq!=0)return;g=0,m=0;for(h=1;h<=i;h++)v=l[h],t&&p(1<=v&&v<=i+s),(o[v]==Ri||o[v]==zi||o[v]==Wi)&&c[h]<u[v]&&(g+=u[v]-c[h]),(o[v]==Ui||o[v]==zi||o[v]==Wi)&&c[h]>a[v]&&(g+=c[h]-a[v]),o[v]==Wi&&m++;d((f==1?" ":"*")+e.it_cnt+": obj = "+et(e)+"  infeas = "+g+" ("+m+")"),e.it_dpy=e.it_cnt}function nt(e,n,r,i,s){var o=e.m,u=e.n,a=e.zeta,f=e.head,l=e.stat,c=e.bbar,h=e.cbar,d,v,g,y,b;t&&(p(n.m==o),p(n.n==u),p(!n.valid&&n.bfd==null),p(e.valid&&e.bfd!=null)),n.valid=1,e.valid=0,n.bfd=e.bfd,e.bfd=null,m(n.head,1,f,1,o),n.pbs_stat=r,n.dbs_stat=i,n.obj_val=et(e),n.it_cnt=e.it_cnt,n.some=s;for(d=1;d<=o;d++)g=f[d],t&&p(1<=g&&g<=o+u),g<=o?(y=n.row[g],y.stat=Xi,y.bind=d,y.prim=c[d]/y.rii,y.dual=0):(b=n.col[g-o],b.stat=Xi,b.bind=d,b.prim=c[d]*b.sjj,b.dual=0);for(v=1;v<=u;v++){g=f[o+v],t&&p(1<=g&&g<=o+u);if(g<=o){y=n.row[g],y.stat=l[v],y.bind=0;switch(l[v]){case Vi:y.prim=y.lb;break;case $i:y.prim=y.ub;break;case Ji:y.prim=0;break;case Ki:y.prim=y.lb;break;default:p(l!=l)}y.dual=h[v]*y.rii/a}else{b=n.col[g-o],b.stat=l[v],b.bind=0;switch(l[v]){case Vi:b.prim=b.lb;break;case $i:b.prim=b.ub;break;case Ji:b.prim=0;break;case Ki:b.prim=b.lb;break;default:p(l!=l)}b.dual=h[v]/b.sjj/a}}}const i=.1;var rt,it=2,st=0,ot=0,ut=0,at=0,ft,lt,ct;rt=u(e),a(rt,e),r.msg_lev>=gs&&d("Objective scale factor = "+rt.zeta+"");for(;;){if(it==0){ct=l(rt);if(ct!=0)return r.msg_lev>=ds&&(d("Error: unable to factorize the basis matrix ("+ct+")"),d("Sorry, basis recovery procedure not implemented yet")),p(!e.valid&&e.bfd==null),e.bfd=rt.bfd,rt.bfd=null,e.pbs_stat=e.dbs_stat=is,e.obj_val=0,e.it_cnt=rt.it_cnt,e.some=0,ct=lo,ct;rt.valid=1,it=1,st=ot=0}if(st==0){O(rt),st=1,rt.phase==0&&(Q(rt,r.tol_bnd)>0?rt.phase=1:(G(rt),rt.phase=2),p(Y(rt,r.tol_bnd)==0),ot=0,tt(rt,r,1));if(Y(rt,r.tol_bnd)){r.msg_lev>=ds&&d("Warning: numerical instability (primal simplex, phase "+(rt.phase==1?"I":"II")+")"),rt.phase=0,it=0,ut=5;continue}}p(rt.phase==1||rt.phase==2),rt.phase==1&&!Z(rt,r.tol_bnd)&&(rt.phase=2,G(rt),ot=0,tt(rt,r,1)),ot==0&&(M(rt),ot=1);switch(r.pricing){case Es:break;case Ss:rt.refct==0&&_(rt);break;default:p(r!=r)}p(it&&st&&ot);if(at){var ht=V(rt),pt=$(rt),dt=r.pricing==Ss?J(rt):0;d("e_bbar = "+ht+"; e_cbar = "+pt+"; e_gamma = "+dt+""),p(ht<=1e-5&&pt<=1e-5&&dt<=.001)}if(r.it_lim<s&&rt.it_cnt-rt.it_beg>=r.it_lim){if(st!=1||rt.phase==2&&ot!=1){st!=1&&(st=0),rt.phase==2&&ot!=1&&(ot=0);continue}tt(rt,r,1),r.msg_lev>=ms&&d("ITERATION LIMIT EXCEEDED; SEARCH TERMINATED");switch(rt.phase){case 1:ft=os,G(rt),M(rt);break;case 2:ft=ss;break;default:p(rt!=rt)}return P(rt,r.tol_dj),lt=rt.q==0?ss:os,nt(rt,e,ft,lt,0),ct=po,ct}if(r.tm_lim<s&&1e3*w(b(),rt.tm_beg)>=r.tm_lim){if(st!=1||rt.phase==2&&ot!=1){st!=1&&(st=0),rt.phase==2&&ot!=1&&(ot=0);continue}tt(rt,r,1),r.msg_lev>=ms&&d("TIME LIMIT EXCEEDED; SEARCH TERMINATED");switch(rt.phase){case 1:ft=os,G(rt),M(rt);break;case 2:ft=ss;break;default:p(rt!=rt)}return P(rt,r.tol_dj),lt=rt.q==0?ss:os,nt(rt,e,ft,lt,0),ct=vo,ct}tt(rt,r,0),P(rt,r.tol_dj);if(rt.q==0){if(st!=1||ot!=1){st!=1&&(st=0),ot!=1&&(ot=0);continue}tt(rt,r,1);switch(rt.phase){case 1:r.msg_lev>=ms&&d("PROBLEM HAS NO FEASIBLE SOLUTION"),ft=us,G(rt),M(rt),P(rt,r.tol_dj),lt=rt.q==0?ss:os;break;case 2:r.msg_lev>=ms&&d("OPTIMAL SOLUTION FOUND"),ft=lt=ss;break;default:p(rt!=rt)}return nt(rt,e,ft,lt,0),ct=0,ct}H(rt),ut&&B(rt),j(rt,r.tol_piv);var vt=rt.cbar[rt.q],mt=z(rt);p(vt!=0);if(Math.abs(vt-mt)>1e-5*(1+Math.abs(mt))||!(vt<0&&mt<0||vt>0&&mt>0)){r.msg_lev>=gs&&d("d1 = "+vt+"; d2 = "+mt+"");if(ot!=1||!ut){ot!=1&&(ot=0),ut=5;continue}}vt>0?rt.cbar[rt.q]=mt>0?mt:+o:rt.cbar[rt.q]=mt<0?mt:-o;switch(r.r_test){case xs:F(rt,0);break;case Ts:F(rt,.3*r.tol_bnd);break;default:p(r!=r)}if(rt.p==0){if(st!=1||ot!=1||!ut){st!=1&&(st=0),ot!=1&&(ot=0),ut=1;continue}tt(rt,r,1);switch(rt.phase){case 1:r.msg_lev>=ds&&d("Error: unable to choose basic variable on phase I"),p(!e.valid&&e.bfd==null),e.bfd=rt.bfd,rt.bfd=null,e.pbs_stat=e.dbs_stat=is,e.obj_val=0,e.it_cnt=rt.it_cnt,e.some=0,ct=lo;break;case 2:r.msg_lev>=ms&&d("PROBLEM HAS UNBOUNDED SOLUTION"),nt(rt,e,ss,us,rt.head[rt.m+rt.q]),ct=0;break;default:p(rt!=rt)}return ct}if(rt.p>0){var gt=rt.tcol_vec[rt.p],yt=1e-5*(1+.01*rt.tcol_max);if(Math.abs(gt)<yt){r.msg_lev>=gs&&d("piv = "+gt+"; eps = "+yt+"");if(!ut){ut=5;continue}}}if(rt.p>0){var bt=rt.work4;I(rt,bt),ut&&q(rt,bt),R(rt,bt)}if(rt.p>0){var wt=rt.tcol_vec[rt.p],Et=rt.trow_vec[rt.q];p(wt!=0);if(Math.abs(wt-Et)>1e-8*(1+Math.abs(wt))||!(wt>0&&Et>0||wt<0&&Et<0)){r.msg_lev>=gs&&d("piv1 = "+wt+"; piv2 = "+Et+"");if(it!=1||!ut){it!=1&&(it=0),ut=5;continue}rt.trow_vec[rt.q]==0&&(rt.trow_nnz++,p(rt.trow_nnz<=rt.n),rt.trow_ind[rt.trow_nnz]=rt.q),rt.trow_vec[rt.q]=wt}}U(rt),st=2;if(rt.p>0){W(rt),ot=2;if(rt.phase==1){var St=rt.head[rt.p];rt.cbar[rt.q]-=rt.coef[St],rt.coef[St]=0}}if(rt.p>0)switch(r.pricing){case Es:break;case Ss:rt.refct>0&&X(rt);break;default:p(r!=r)}rt.p>0&&(ct=c(rt,rt.p,rt.head[rt.m+rt.q]),ct==0?it=2:(rt.valid=0,it=0)),rt.p>0&&(T(rt,rt.q,rt.head[rt.m+rt.q]),rt.type[rt.head[rt.p]]!=Wi&&x(rt,rt.q,rt.head[rt.p])),K(rt),rt.it_cnt++,ut>0&&ut--;continue}return ct}function AE(e,r){function u(e){var t=e.m,n=e.n,r=e.nnz,i={};return p(t>0&&n>0),i.m=t,i.n=n,i.type=new Array(1+t+n),i.lb=new Array(1+t+n),i.ub=new Array(1+t+n),i.coef=new Array(1+t+n),i.orig_type=new Array(1+t+n),i.orig_lb=new Array(1+t+n),i.orig_ub=new Array(1+t+n),i.obj=new Array(1+n),i.A_ptr=new Array(1+n+1),i.A_ind=new Array(1+r),i.A_val=new Array(1+r),i.AT_ptr=new Array(1+t+1),i.AT_ind=new Array(1+r),i.AT_val=new Array(1+r),i.head=new Array(1+t+n),i.bind=new Array(1+t+n),i.stat=new Array(1+n),i.bbar=new Array(1+t),i.cbar=new Array(1+n),i.refsp=new Array(1+t+n),i.gamma=new Array(1+t),i.trow_ind=new Array(1+n),i.trow_vec=new Array(1+n),i.tcol_ind=new Array(1+t),i.tcol_vec=new Array(1+t),i.work1=new Array(1+t),i.work2=new Array(1+t),i.work3=new Array(1+t),i.work4=new Array(1+t),i}function a(e,t){var n=e.m,r=e.n,i=e.type,s=e.lb,o=e.ub,u=e.coef,a=e.orig_type,f=e.orig_lb,l=e.orig_ub,c=e.obj,h=e.A_ptr,d=e.A_ind,v=e.A_val,y=e.AT_ptr,w=e.AT_ind,E=e.AT_val,S=e.head,x=e.bind,T=e.stat,N=e.refsp,C=e.gamma,k,L,A,O,M,_,D,P;for(k=1;k<=n;k++)D=t.row[k],i[k]=D.type,s[k]=D.lb*D.rii,o[k]=D.ub*D.rii,u[k]=0;for(L=1;L<=r;L++)P=t.col[L],i[n+L]=P.type,s[n+L]=P.lb/P.sjj,o[n+L]=P.ub/P.sjj,u[n+L]=P.coef*P.sjj;m(a,1,i,1,n+r),m(f,1,s,1,n+r),m(l,1,o,1,n+r),c[0]=t.c0,m(c,1,u,n+1,r),M=0;for(L=1;L<=r;L++)M<Math.abs(c[L])&&(M=Math.abs(c[L]));M==0&&(M=1);switch(t.dir){case Hi:e.zeta=1/M;break;case Bi:e.zeta=-1/M;break;default:p(t!=t)}Math.abs(e.zeta)<1&&(e.zeta*=1e3);for(L=1;L<=r;L++)u[n+L]*=e.zeta;O=1;for(L=1;L<=r;L++){h[L]=O;for(_=t.col[L].ptr;_!=null;_=_.c_next)d[O]=_.row.i,v[O]=_.row.rii*_.val*_.col.sjj,O++}h[r+1]=O,p(O-1==t.nnz),O=1;for(k=1;k<=n;k++){y[k]=O;for(_=t.row[k].ptr;_!=null;_=_.r_next)w[O]=_.col.j,E[O]=_.row.rii*_.val*_.col.sjj,O++}y[n+1]=O,p(O-1==t.nnz),p(t.valid),m(S,1,t.head,1,n),A=0;for(k=1;k<=n;k++)D=t.row[k],D.stat!=Xi&&(A++,p(A<=r),S[n+A]=k,T[A]=D.stat);for(L=1;L<=r;L++)P=t.col[L],P.stat!=Xi&&(A++,p(A<=r),S[n+A]=n+L,T[A]=P.stat);p(A==r);for(A=1;A<=n+r;A++)x[S[A]]=A;e.valid=1,t.valid=0,e.bfd=t.bfd,t.bfd=null,e.phase=0,e.tm_beg=b(),e.it_beg=e.it_cnt=t.it_cnt,e.it_dpy=-1,e.refct=0,g(N,1,0,n+r);for(k=1;k<=n;k++)C[k]=1}function f(e,n,r,i){var s=e.m;if(t)var o=e.n;var u=e.A_ptr,a=e.A_ind,f=e.A_val,l=e.head,c,h,d,v;t&&p(1<=n&&n<=s),c=l[n],t&&p(1<=c&&c<=s+o);if(c<=s)h=1,r[1]=c,i[1]=1;else{d=u[c-s],h=u[c-s+1]-d,m(r,1,a,d,h),m(i,1,f,d,h);for(v=1;v<=h;v++)i[v]=-i[v]}return h}function l(e){var t=ar(e.bfd,e.m,null,f,e);return e.valid=t==0,t}function c(e,n,r){var i=e.m;if(t)var s=e.n;var o,u;t&&(p(1<=n&&n<=i),p(1<=r&&r<=i+s));if(r<=i){var a=new Array(2);u=new Array(2),a[1]=r,u[1]=1,p(e.valid),o=cr(e.bfd,n,0,1,a,0,u)}else{var f=e.A_ptr,l=e.A_ind,c=e.A_val;u=e.work1;var h,d,v,m;h=f[r-i],d=f[r-i+1],m=0;for(v=h;v<d;v++)u[++m]=-c[v];p(e.valid),o=cr(e.bfd,n,0,m,l,h-1,u)}return e.valid=o==0,o}function h(e,n,r,i){var s=e.m;if(t)var o=e.n;var u=e.A_ptr,a=e.A_ind,f=e.A_val,l=e.head,c,h,d,v,g,y;m(i,1,n,1,s);for(c=1;c<=s;c++){y=r[c];if(y==0)continue;h=l[c],t&&p(1<=h&&h<=s+o);if(h<=s)i[h]-=y;else{d=u[h-s],v=u[h-s+1];for(g=d;g<v;g++)i[a[g]]+=f[g]*y}}}function v(e,t,n){var r=e.m,i=e.work1,s=e.work1,o;h(e,t,n,i),p(e.valid),fr(e.bfd,s);for(o=1;o<=r;o++)n[o]+=s[o]}function y(e,n,r,i){var s=e.m;if(t)var o=e.n;var u=e.A_ptr,a=e.A_ind,f=e.A_val,l=e.head,c,h,d,v,m,g;for(c=1;c<=s;c++){h=l[c],t&&p(1<=h&&h<=s+o),g=n[c];if(h<=s)g-=r[h];else{d=u[h-s],v=u[h-s+1];for(m=d;m<v;m++)g+=f[m]*r[a[m]]}i[c]=g}}function E(e,t,n){var r=e.m,i=e.work1,s=e.work1,o;y(e,t,n,i),p(e.valid),lr(e.bfd,s);for(o=1;o<=r;o++)n[o]+=s[o]}function S(e,n){var r=e.m;if(t)var i=e.n;var s=e.lb,o=e.ub,u=e.head,a=e.stat,f,l;t&&p(1<=n&&n<=i),f=u[r+n],t&&p(1<=f&&f<=r+i);switch(a[n]){case Vi:l=s[f];break;case $i:l=o[f];break;case Ji:l=0;break;case Ki:l=s[f];break;default:p(a!=a)}return l}function x(e,n){var r=e.m,i=e.n,s=e.A_ptr,o=e.A_ind,u=e.A_val,a=e.head,f=e.work2,l,c,h,d,g,y,b;for(l=1;l<=r;l++)f[l]=0;for(c=1;c<=i;c++){h=a[r+c],t&&p(1<=h&&h<=r+i),b=S(e,c);if(b==0)continue;if(h<=r)f[h]-=b;else{d=s[h-r],g=s[h-r+1];for(y=d;y<g;y++)f[o[y]]+=b*u[y]}}m(n,1,f,1,r),p(e.valid),fr(e.bfd,n),v(e,f,n)}function T(e,t){var n=e.m,r=e.coef,i=e.head,s=e.work2,o;for(o=1;o<=n;o++)s[o]=r[i[o]];m(t,1,s,1,n),p(e.valid),lr(e.bfd,t),E(e,s,t)}function N(e,n,r){var i=e.m;if(t)var s=e.n;var o=e.coef,u=e.head,a,f;t&&p(1<=r&&r<=s),a=u[i+r],t&&p(1<=a&&a<=i+s),f=o[a];if(a<=i)f-=n[a];else{var l=e.A_ptr,c=e.A_ind,h=e.A_val,d,v,m;d=l[a-i],v=l[a-i+1];for(m=d;m<v;m++)f+=h[m]*n[c[m]]}return f}function C(e){x(e,e.bbar)}function k(e){if(t)var n=e.m;var r=e.n;if(t)var i=e.head;var s=e.cbar,o=e.work3,u;if(t)var a;T(e,o);for(u=1;u<=r;u++)t&&(a=i[n+u],p(1<=a&&a<=n+r)),s[u]=N(e,o,u)}function L(e){var t=e.m,n=e.n,r=e.head,i=e.refsp,s=e.gamma,o,u;p(e.refct==0),e.refct=1e3,g(i,1,0,t+n);for(o=1;o<=t;o++)u=r[o],i[u]=1,s[o]=1}function A(e,n){var r=e.m,i=e.n,s=e.type,o=e.head,u=e.refsp,a=e.work3,f=e.work3,l,c,h;for(l=1;l<=r;l++)h=o[l],t&&p(1<=h&&h<=r+i),s[h]==qi?n[l]=1:n[l]=u[h]?1:0;for(c=1;c<=i;c++){h=o[r+c],t&&p(1<=h&&h<=r+i);if(!u[h])continue;t&&p(s[h]!=Wi);for(l=1;l<=r;l++)f[l]=0;if(h<=r)f[h]=-1;else{var d=e.A_ptr,v=e.A_ind,m=e.A_val,g,y,b;g=d[h-r],y=d[h-r+1];for(b=g;b<y;b++)f[v[b]]=m[b]}p(e.valid),fr(e.bfd,a);for(l=1;l<=r;l++)h=o[l],s[h]!=qi&&(n[l]+=a[l]*a[l])}}function O(e,n){var r=e.m;if(t)var s=e.n;var u=e.type,a=e.lb,f=e.ub,l=e.head,c=e.bbar,h=e.gamma,d,v,m,g,y,b,w,E;m=0,g=0,y=0;for(d=1;d<=r;d++){v=l[d],t&&p(1<=v&&v<=r+s),w=0;if(u[v]==Ri||u[v]==zi||u[v]==Wi)b=n*(1+i*Math.abs(a[v])),c[d]<a[v]-b&&(w=a[v]-c[d]);if(u[v]==Ui||u[v]==zi||u[v]==Wi)b=n*(1+i*Math.abs(f[v])),c[d]>f[v]+b&&(w=f[v]-c[d]);if(w==0)continue;t&&p(h[d]>=0),E=h[d],E<o&&(E=o),E=w*w/E,y<E&&(m=d,g=w,y=E)}e.p=m,e.delta=g}function M(e,n){var r=e.m,i=e.p,s;t&&p(1<=i&&i<=r);for(s=1;s<=r;s++)n[s]=0;n[i]=1,p(e.valid),lr(e.bfd,ht)}function _(e,n){var r=e.m,i=e.p,s=e.work3,o;t&&p(1<=i&&i<=r);for(o=1;o<=r;o++)s[o]=0;s[i]=1,E(e,s,n)}function D(e,t){var n=e.m,r=e.n,i=e.A_ptr,s=e.A_ind,o=e.A_val,u=e.head,a=e.stat,f=e.trow_ind,l=e.trow_vec,c,h,p,d,v,m,g;m=0;for(c=1;c<=r;c++){if(a[c]==Ki){l[c]=0;continue}h=u[n+c];if(h<=n)g=-t[h];else{p=i[h-n],d=i[h-n+1],g=0;for(v=p;v<d;v++)g+=t[s[v]]*o[v]}g!=0&&(f[++m]=c),l[c]=g}e.trow_nnz=m}function P(e,t){var n=e.m,r=e.n,i=e.AT_ptr,s=e.AT_ind,o=e.AT_val,u=e.bind,a=e.stat,f=e.trow_ind,l=e.trow_vec,c,h,p,d,v,m,g;for(h=1;h<=r;h++)l[h]=0;for(c=1;c<=n;c++){g=t[c];if(g==0)continue;h=u[c]-n,h>=1&&a[h]!=Ki&&(l[h]-=g),p=i[c],d=i[c+1];for(v=p;v<d;v++)h=u[n+s[v]]-n,h>=1&&a[h]!=Ki&&(l[h]+=g*o[v])}m=0;for(h=1;h<=r;h++)l[h]!=0&&(f[++m]=h);e.trow_nnz=m}function H(e,t){var n=e.m,r,i,s;i=0;for(r=1;r<=n;r++)t[r]!=0&&i++;s=i/n,s>=.2?D(e,t):P(e,t)}function B(e,n){if(t)var r=e.n,i=e.stat;var s=e.trow_nnz,o=e.trow_ind,u=e.trow_vec,a,f,l,c,h,d;c=0;for(l=1;l<=s;l++)t&&(a=o[l],p(1<=a&&a<=r),p(i[a]!=Ki)),d=Math.abs(u[o[l]]),c<d&&(c=d);e.trow_max=c,h=n*(1+.01*c);for(f=0;f<s;)a=o[s],Math.abs(u[a])<h?s--:(f++,o[s]=o[f],o[f]=a);e.trow_num=f}function j(e,r){function x(){e.q=m,e.new_dq=b*E}if(t)var i=e.m,s=e.n;var o=e.stat,u=e.cbar;if(t)var a=e.p;var f=e.delta,l=e.trow_ind,c=e.trow_vec,h=e.trow_num,d,v,m,g,y,b,w,E,S;t&&p(1<=a&&a<=i),t&&p(f!=0),b=f>0?1:-1,m=0,E=n,y=0;for(v=1;v<=h;v++){d=l[v],t&&p(1<=d&&d<=s),g=b*c[d],t&&p(g!=0);if(g>0){if(o[d]!=Vi&&o[d]!=Ji)continue;w=(u[d]+r)/g}else{if(o[d]!=$i&&o[d]!=Ji)continue;w=(u[d]-r)/g}w<0&&(w=0);if(E>w||E==w&&y<Math.abs(g))m=d,E=w,y=Math.abs(g)}if(r==0)return x();if(m==0)return x();if(E==0)return x();S=E,m=0,E=n,y=0;for(v=1;v<=h;v++){d=l[v],t&&p(1<=d&&d<=s),g=b*c[d],t&&p(g!=0);if(g>0){if(o[d]!=Vi&&o[d]!=Ji)continue;w=u[d]/g}else{if(o[d]!=$i&&o[d]!=Ji)continue;w=u[d]/g}w<0&&(w=0),w<=S&&y<Math.abs(g)&&(m=d,E=w,y=Math.abs(g))}p(m!=0),x()}function F(e){var n=e.m;if(t)var r=e.n;var i=e.head,s=e.q,o=e.tcol_ind,u=e.tcol_vec,a=e.tcol_vec,f,l,c;t&&p(1<=s&&s<=r),l=i[n+s],t&&p(1<=l&&l<=n+r);for(f=1;f<=n;f++)a[f]=0;if(l<=n)a[l]=-1;else{var h=e.A_ptr,d=e.A_ind,v=e.A_val,m,g,y;m=h[l-n],g=h[l-n+1];for(y=m;y<g;y++)a[d[y]]=v[y]}p(e.valid),fr(e.bfd,u),c=0;for(f=1;f<=n;f++)u[f]!=0&&(o[++c]=f);e.tcol_nnz=c}function I(e){var n=e.m;if(t)var r=e.n;var i=e.head,s=e.q,o=e.tcol_ind,u=e.tcol_vec,a=e.work3,f,l,c;t&&p(1<=s&&s<=r),l=i[n+s],t&&p(1<=l&&l<=n+r);for(f=1;f<=n;f++)a[f]=0;if(l<=n)a[l]=-1;else{var h=e.A_ptr,d=e.A_ind,m=e.A_val,g,y,b;g=h[l-n],y=h[l-n+1];for(b=g;b<y;b++)a[d[b]]=m[b]}v(e,a,u),c=0;for(f=1;f<=n;f++)u[f]!=0&&(o[++c]=f);e.tcol_nnz=c}function q(e){if(t)var n=e.n;var r=e.cbar,i=e.trow_nnz,s=e.trow_ind,o=e.trow_vec,u=e.q,a=e.new_dq,f,l;t&&p(1<=u&&u<=n),r[u]=a;if(a==0)return;for(l=1;l<=i;l++)f=s[l],t&&p(1<=f&&f<=n),f!=u&&(r[f]-=o[f]*a)}function R(e){if(t)var n=e.m,r=e.n;var i=e.bbar,s=e.p,o=e.delta,u=e.q,a=e.tcol_nnz,f=e.tcol_ind,l=e.tcol_vec,c,h,d;t&&(p(1<=s&&s<=n),p(1<=u&&u<=r),p(l[s]!=0)),d=o/l[s],i[s]=S(e,u)+d;if(d==0)return;for(h=1;h<=a;h++)c=f[h],t&&p(1<=c&&c<=n),c!=s&&(i[c]+=l[c]*d)}function U(e){var n=e.m;if(t)var r=e.n;var i=e.type,s=e.head,u=e.refsp,a=e.gamma,f=e.p,l=e.trow_nnz,c=e.trow_ind,h=e.trow_vec,d=e.q,v=e.tcol_nnz,m=e.tcol_ind,g=e.tcol_vec,y=e.work3,b,w,E,S,x,T,N,C,k,L;t&&(p(1<=f&&f<=n),p(1<=d&&d<=r)),p(e.refct>0),e.refct--,t&&p(i[s[f]]!=qi),x=T=u[s[f]]?1:0;for(b=1;b<=n;b++)y[b]=0;for(S=1;S<=l;S++){w=c[S],t&&p(1<=w&&w<=r),E=s[n+w],t&&(p(1<=E&&E<=n+r),p(i[E]!=Wi));if(!u[E])continue;C=h[w],x+=C*C;if(E<=n)y[E]+=C;else{var A=e.A_ptr,O=e.A_ind,M=e.A_val,_,D,P;_=A[E-n],D=A[E-n+1];for(P=_;P<D;P++)y[O[P]]-=C*M[P]}}p(e.valid),fr(e.bfd,y),N=g[f],t&&p(N!=0);for(S=1;S<=v;S++){b=m[S],t&&p(1<=b&&b<=n),E=s[b],t&&p(1<=E&&E<=n+r);if(b==f)continue;if(i[s[b]]==qi){t&&p(a[b]==1);continue}C=g[b]/N,k=a[b]+C*C*x+2*C*y[b],L=(u[E]?1:0)+T*C*C,a[b]=k>=L?k:L,a[b]<o&&(a[b]=o)}i[s[n+d]]==qi?a[f]=1:(a[f]=x/(N*N),a[f]<o&&(a[f]=o)),E=s[f];if(i[E]==Wi&&u[E]){u[E]=0;for(S=1;S<=v;S++){b=m[S];if(b==f){if(i[s[n+d]]==qi)continue;C=1/g[f]}else{if(i[s[b]]==qi)continue;C=g[b]/g[f]}a[b]-=C*C,a[b]<o&&(a[b]=o)}}}function z(e){var t=e.m,n=e.bbar,r,i,s,o=new Array(1+t);x(e,o),s=0;for(r=1;r<=t;r++)i=Math.abs(o[r]-n[r])/(1+Math.abs(o[r])),s<i&&(s=i);return s}function W(e){var t=e.m,n=e.n,r=e.stat,i=e.cbar,s,o,u,a,f=new Array(1+t);T(e,f),u=0;for(s=1;s<=n;s++){if(r[s]==Ki)continue;a=N(e,f,s),o=Math.abs(a-i[s])/(1+Math.abs(a)),u<o&&(u=o)}return u}function X(e){var t=e.m,n=e.type,r=e.head,i=e.gamma,s=e.work4,o,u,a,f;A(e,s),a=0;for(o=1;o<=t;o++){if(n[r[o]]==qi){p(i[o]==1),p(s[o]==1);continue}f=s[o],u=Math.abs(f-i[o])/(1+Math.abs(f)),a<u&&(a=u)}return a}function V(e){var n=e.m;if(t)var r=e.n;var i=e.type,s=e.head,o=e.bind,u=e.stat,a=e.p,f=e.delta,l=e.q,c;t&&(p(1<=a&&a<=n),p(1<=l&&l<=r)),c=s[a],s[a]=s[n+l],s[n+l]=c,o[s[a]]=a,o[s[n+l]]=n+l,i[c]==Wi?u[l]=Ki:f>0?(t&&p(i[c]==Ri||i[c]==zi),u[l]=Vi):(t&&p(i[c]==Ui||i[c]==zi),u[l]=$i)}function $(e,n){var r=e.m,i=e.n,s=e.orig_type,o=e.head,u=e.cbar,a,f;for(a=1;a<=i;a++){f=o[r+a],t&&p(1<=f&&f<=r+i);if(u[a]<-n)if(s[f]==Ri||s[f]==qi)return 1;if(u[a]>+n)if(s[f]==Ui||s[f]==qi)return 1}return 0}function J(e){var n=e.m,r=e.n,i=e.type,s=e.lb,o=e.ub,u=e.orig_type,a=e.head,f=e.stat,l=e.cbar,c,h;for(h=1;h<=n+r;h++)switch(u[h]){case qi:i[h]=zi,s[h]=-1e3,o[h]=1e3;break;case Ri:i[h]=zi,s[h]=0,o[h]=1;break;case Ui:i[h]=zi,s[h]=-1,o[h]=0;break;case zi:case Wi:i[h]=Wi,s[h]=o[h]=0;break;default:p(u!=u)}for(c=1;c<=r;c++)h=a[n+c],t&&p(1<=h&&h<=n+r),i[h]==Wi?f[c]=Ki:l[c]>=0?f[c]=Vi:f[c]=$i}function K(e){var n=e.m,r=e.n,i=e.type,s=e.lb,u=e.ub,a=e.orig_type,f=e.orig_lb,l=e.orig_ub,c=e.head,h=e.stat,d=e.cbar,v,g;m(i,1,a,1,n+r),m(s,1,f,1,n+r),m(u,1,l,1,n+r);for(v=1;v<=r;v++){g=c[n+v],t&&p(1<=g&&g<=n+r);switch(i[g]){case qi:h[v]=Ji;break;case Ri:h[v]=Vi;break;case Ui:h[v]=$i;break;case zi:d[v]>=+o?h[v]=Vi:d[v]<=-o?h[v]=$i:Math.abs(s[g])<=Math.abs(u[g])?h[v]=Vi:h[v]=$i;break;case Wi:h[v]=Ki;break;default:p(i!=i)}}}function Q(e,t){var n=e.n,r=e.stat,i=e.cbar,s;for(s=1;s<=n;s++){if(i[s]<-t)if(r[s]==Vi||r[s]==Ji)return 1;if(i[s]>+t)if(r[s]==$i||r[s]==Ji)return 1}return 0}function G(e){var n=e.m,r=e.n,i=e.obj,s=e.head,o=e.bbar,u,a,f,l;l=i[0];for(u=1;u<=n;u++)f=s[u],t&&p(1<=f&&f<=n+r),f>n&&(l+=i[f-n]*o[u]);for(a=1;a<=r;a++)f=s[n+a],t&&p(1<=f&&f<=n+r),f>n&&(l+=i[f-n]*S(e,a));return l}function Y(e,t,n){var r=e.m,i=e.n,s=e.coef,o=e.orig_type,u=e.head,a=e.stat,f=e.phase,l=e.bbar,c=e.cbar,h,p,v,m;if(t.msg_lev<vs)return;if(t.out_dly>0&&1e3*w(b(),e.tm_beg)<t.out_dly)return;if(e.it_cnt==e.it_dpy)return;if(!n&&e.it_cnt%t.out_frq!=0)return;m=0;if(f==1){for(h=1;h<=r;h++)m-=s[u[h]]*l[h];for(p=1;p<=i;p++)m-=s[u[r+p]]*S(e,p)}else for(p=1;p<=i;p++)c[p]<0&&(a[p]==Vi||a[p]==Ji)&&(m-=c[p]),c[p]>0&&(a[p]==$i||a[p]==Ji)&&(m+=c[p]);v=0;for(h=1;h<=r;h++)o[u[h]]==Wi&&v++;e.phase==1?d(" "+e.it_cnt+":  infeas = "+m+" ("+v+")"):d("|"+e.it_cnt+": obj = "+G(e)+"  infeas = "+m+" ("+v+")"),e.it_dpy=e.it_cnt}function Z(e,n,r,i,s){var o=e.m,u=e.n,a=e.zeta,f=e.head,l=e.stat,c=e.bbar,h=e.cbar,d,v,g,y,b;t&&(p(n.m==o),p(n.n==u),p(!n.valid&&n.bfd==null),p(e.valid&&e.bfd!=null)),n.valid=1,e.valid=0,n.bfd=e.bfd,e.bfd=null,m(n.head,1,f,1,o),n.pbs_stat=r,n.dbs_stat=i,n.obj_val=G(e),n.it_cnt=e.it_cnt,n.some=s;for(d=1;d<=o;d++)g=f[d],t&&p(1<=g&&g<=o+u),g<=o?(b=n.row[g],b.stat=Xi,b.bind=d,b.prim=c[d]/b.rii,b.dual=0):(y=n.col[g-o],y.stat=Xi,y.bind=d,y.prim=c[d]*y.sjj,y.dual=0);for(v=1;v<=u;v++){g=f[o+v],t&&p(1<=g&&g<=o+u);if(g<=o){b=n.row[g],b.stat=l[v],b.bind=0;switch(l[v]){case Vi:b.prim=b.lb;break;case $i:b.prim=b.ub;break;case Ji:b.prim=0;break;case Ki:b.prim=b.lb;break;default:p(l!=l)}b.dual=h[v]*b.rii/a}else{y=n.col[g-o],y.stat=l[v],y.bind=0;switch(l[v]){case Vi:y.prim=y.lb;break;case $i:y.prim=y.ub;break;case Ji:y.prim=0;break;case Ki:y.prim=y.lb;break;default:p(l!=l)}y.dual=h[v]/y.sjj/a}}}const i=.1;var et,tt=2,nt=0,rt=0,it=0,st=0,ot,ut,at;et=u(e),a(et,e),r.msg_lev>=gs&&d("Objective scale factor = "+et.zeta+"");for(;;){if(tt==0){at=l(et);if(at!=0)return r.msg_lev>=ds&&(d("Error: unable to factorize the basis matrix ("+at+")"),d("Sorry, basis recovery procedure not implemented yet")),p(!e.valid&&e.bfd==null),e.bfd=et.bfd,et.bfd=null,e.pbs_stat=e.dbs_stat=is,e.obj_val=0,e.it_cnt=et.it_cnt,e.some=0,at=lo,at;et.valid=1,tt=1,nt=rt=0}if(rt==0){k(et),rt=1,et.phase==0&&($(et,.9*r.tol_dj)!=0?(et.phase=1,J(et)):(et.phase=2,K(et)),p(Q(et,r.tol_dj)==0),et.refct=0,nt=0);if(Q(et,r.tol_dj)!=0){r.msg_lev>=ds&&d("Warning: numerical instability (dual simplex, phase "+(et.phase==1?"I":"II")+")");if(r.meth==bs)return Z(et,e,is,is,0),at=lo,at;et.phase=0,tt=0,it=5;continue}}p(et.phase==1||et.phase==2),et.phase==1&&$(et,r.tol_dj)==0&&(Y(et,r,1),et.phase=2,rt!=1&&(k(et),rt=1),K(et),et.refct=0,nt=0),nt==0&&(C(et),et.phase==2&&(et.bbar[0]=G(et)),nt=1);switch(r.pricing){case Es:break;case Ss:et.refct==0&&L(et);break;default:p(r!=r)}p(tt&&nt&&rt);if(st){var ft=z(et),lt=W(et),ct=r.pricing==Ss?X(et):0;d("e_bbar = "+ft+"; e_cbar = "+lt+"; e_gamma = "+ct+""),p(ft<=1e-5&&lt<=1e-5&&ct<=.001)}if(et.phase==2&&et.zeta<0&&r.obj_ll>-n&&et.bbar[0]<=r.obj_ll){if(nt!=1||rt!=1){nt!=1&&(nt=0),rt!=1&&(rt=0);continue}return Y(et,r,1),r.msg_lev>=ms&&d("OBJECTIVE LOWER LIMIT REACHED; SEARCH TERMINATED"),Z(et,e,os,ss,0),at=co,at}if(et.phase==2&&et.zeta>0&&r.obj_ul<+n&&et.bbar[0]>=r.obj_ul){if(nt!=1||rt!=1){nt!=1&&(nt=0),rt!=1&&(rt=0);continue}return Y(et,r,1),r.msg_lev>=ms&&d("OBJECTIVE UPPER LIMIT REACHED; SEARCH TERMINATED"),Z(et,e,os,ss,0),at=ho,at}if(r.it_lim<s&&et.it_cnt-et.it_beg>=r.it_lim){if(et.phase==2&&nt!=1||rt!=1){et.phase==2&&nt!=1&&(nt=0),rt!=1&&(rt=0);continue}Y(et,r,1),r.msg_lev>=ms&&d("ITERATION LIMIT EXCEEDED; SEARCH TERMINATED");switch(et.phase){case 1:ut=os,K(et),C(et);break;case 2:ut=ss;break;default:p(et!=et)}return Z(et,e,os,ut,0),at=po,at}if(r.tm_lim<s&&1e3*w(b(),et.tm_beg)>=r.tm_lim){if(et.phase==2&&nt!=1||rt!=1){et.phase==2&&nt!=1&&(nt=0),rt!=1&&(rt=0);continue}Y(et,r,1),r.msg_lev>=ms&&d("TIME LIMIT EXCEEDED; SEARCH TERMINATED");switch(et.phase){case 1:ut=os,K(et),C(et);break;case 2:ut=ss;break;default:p(et!=et)}return Z(et,e,os,ut,0),at=vo,at}Y(et,r,0),O(et,r.tol_bnd);if(et.p==0){if(nt!=1||rt!=1){nt!=1&&(nt=0),rt!=1&&(rt=0);continue}Y(et,r,1);switch(et.phase){case 1:r.msg_lev>=ms&&d("PROBLEM HAS NO DUAL FEASIBLE SOLUTION"),K(et),C(et),ot=os,ut=us;break;case 2:r.msg_lev>=ms&&d("OPTIMAL SOLUTION FOUND"),ot=ut=ss;break;default:p(et!=et)}return Z(et,e,ot,ut,0),at=0,at}var ht=et.work4;M(et,ht),it&&_(et,ht),H(et,ht),B(et,r.tol_bnd);switch(r.r_test){case xs:j(et,0);break;case Ts:j(et,.3*r.tol_dj);break;default:p(r!=r)}if(et.q==0){if(nt!=1||rt!=1||!it){nt!=1&&(nt=0),rt!=1&&(rt=0),it=1;continue}Y(et,r,1);switch(et.phase){case 1:r.msg_lev>=ds&&d("Error: unable to choose basic variable on phase I"),p(!e.valid&&e.bfd==null),e.bfd=et.bfd,et.bfd=null,e.pbs_stat=e.dbs_stat=is,e.obj_val=0,e.it_cnt=et.it_cnt,e.some=0,at=lo;break;case 2:r.msg_lev>=ms&&d("PROBLEM HAS NO FEASIBLE SOLUTION"),Z(et,e,us,ss,et.head[et.p]),at=0;break;default:p(et!=et)}return at}var pt=et.trow_vec[et.q],dt=1e-5*(1+.01*et.trow_max);if(Math.abs(pt)<dt){r.msg_lev>=gs&&d("piv = "+pt+"; eps = "+dt+"");if(!it){it=5;continue}}F(et),it&&I(et);var vt=et.tcol_vec[et.p],mt=et.trow_vec[et.q];p(vt!=0);if(Math.abs(vt-mt)>1e-8*(1+Math.abs(vt))||!(vt>0&&mt>0||vt<0&&mt<0)){r.msg_lev>=gs&&d("piv1 = "+vt+"; piv2 = "+mt+"");if(tt!=1||!it){tt!=1&&(tt=0),it=5;continue}et.tcol_vec[et.p]==0&&(et.tcol_nnz++,p(et.tcol_nnz<=et.m),et.tcol_ind[et.tcol_nnz]=et.p),et.tcol_vec[et.p]=mt}R(et),et.phase==2&&(et.bbar[0]+=et.cbar[et.q]/et.zeta*(et.delta/et.tcol_vec[et.p])),nt=2,q(et),rt=2;switch(r.pricing){case Es:break;case Ss:et.refct>0&&U(et);break;default:p(r!=r)}at=c(et,et.p,et.head[et.m+et.q]),at==0?tt=2:(et.valid=0,tt=0),V(et),et.it_cnt++,it>0&&it--}}const t=!1,n=Number.MAX_VALUE,r=Number.MIN_VALUE,i=16,s=2147483647,o=2.220446049250313e-16,u=1,a=1e8,f=1e8,l=5e8,c=-1;var d=function(e){console.log(e)};e.__defineGetter__("glp_print_func",function(){return d}),e.__defineSetter__("glp_print_func",function(e){d=e});var S={},T=e.glp_version=function(){return Di+"."+Pi},_=3621377730,P=e.glp_create_prob=function(){var e={};return D(e),e},H=e.glp_set_prob_name=function(e,t){var n=e.tree;n!=null&&n.reason!=0&&h("glp_set_prob_name: operation not allowed"),e.name=t},B=e.glp_set_obj_name=function(e,t){var n=e.tree;n!=null&&n.reason!=0&&h("glp_set_obj_name: operation not allowed"),e.obj=t},j=e.glp_set_obj_dir=function(e,t){var n=e.tree;n!=null&&n.reason!=0&&h("glp_set_obj_dir: operation not allowed"),t!=Hi&&t!=Bi&&h("glp_set_obj_dir: dir = "+t+"; invalid direction flag"),e.dir=t},F=e.glp_add_rows=function(e,t){var n=e.tree,r;t<1&&h("glp_add_rows: nrs = "+t+"; invalid number of rows"),t>a-e.m&&h("glp_add_rows: nrs = "+t+"; too many rows");var i=e.m+t;if(e.m_max<i){while(e.m_max<i)e.m_max+=e.m_max,p(e.m_max>0);e.row.length=1+e.m_max,e.head=new Array(1+e.m_max)}for(var s=e.m+1;s<=i;s++){e.row[s]=r={},r.i=s,r.name=null,r.node=null,r.level=0,r.origin=0,r.klass=0;if(n!=null)switch(n.reason){case 0:break;case Qs:p(n.curr!=null),r.level=n.curr.level,r.origin=Us;break;case Zs:p(n.curr!=null),r.level=n.curr.level,r.origin=zs;break;default:p(n!=n)}r.type=qi,r.lb=r.ub=0,r.ptr=null,r.rii=1,r.stat=Xi,r.bind=0,r.prim=r.dual=0,r.pval=r.dval=0,r.mipx=0}return e.m=i,e.valid=0,n!=null&&n.reason!=0&&(n.reopt=1),i-t+1},I=e.glp_add_cols=function(e,t){var n=e.tree,r;n!=null&&n.reason!=0&&h("glp_add_cols: operation not allowed"),t<1&&h("glp_add_cols: ncs = "+t+"; invalid number of columns"),t>f-e.n&&h("glp_add_cols: ncs = "+t+"; too many columns");var i=e.n+t;if(e.n_max<i){while(e.n_max<i)e.n_max+=e.n_max,p(e.n_max>0);e.col.length=1+e.n_max}for(var s=e.n+1;s<=i;s++)e.col[s]=r={},r.j=s,r.name=null,r.node=null,r.kind=ji,r.type=Wi,r.lb=r.ub=0,r.coef=0,r.ptr=null,r.sjj=1,r.stat=Ki,r.bind=0,r.prim=r.dual=0,r.pval=r.dval=0,r.mipx=0;return e.n=i,i-t+1},q=e.glp_set_row_name=function(e,t,n){var r=e.tree;1<=t&&t<=e.m||h("glp_set_row_name: i = "+t+"; row number out of range");var i=e.row[t];r!=null&&r.reason!=0&&(p(r.curr!=null),p(i.level==r.curr.level)),i.name!=null&&(delete e.r_tree[i.name],i.name=null),n!=null&&(i.name=n,e.r_tree[i.name]=i)},R=e.glp_set_col_name=function(e,t,n){var r=e.tree;r!=null&&r.reason!=0&&h("glp_set_col_name: operation not allowed"),1<=t&&t<=e.n||h("glp_set_col_name: j = "+t+"; column number out of range");var i=e.col[t];i.name!=null&&(delete e.c_tree[i.name],i.name=null),n!=null&&(i.name=n,e.c_tree[i.name]=i)},U=e.glp_set_row_bnds=function(e,t,n,r,i){1<=t&&t<=e.m||h("glp_set_row_bnds: i = "+t+"; row number out of range");var s=e.row[t];s.type=n;switch(n){case qi:s.lb=s.ub=0,s.stat!=Xi&&(s.stat=Ji);break;case Ri:s.lb=r,s.ub=0,s.stat!=Xi&&(s.stat=Vi);break;case Ui:s.lb=0,s.ub=i,s.stat!=Xi&&(s.stat=$i);break;case zi:s.lb=r,s.ub=i,s.stat!=Xi&&s.stat!=Vi&&s.stat!=$i&&(s.stat=Math.abs(r)<=Math.abs(i)?Vi:$i);break;case Wi:s.lb=s.ub=r,s.stat!=Xi&&(s.stat=Ki);break;default:h("glp_set_row_bnds: i = "+t+"; type = "+n+"; invalid row type")}},z=e.glp_set_col_bnds=function(e,t,n,r,i){1<=t&&t<=e.n||h("glp_set_col_bnds: j = "+t+"; column number out of range");var s=e.col[t];s.type=n;switch(n){case qi:s.lb=s.ub=0,s.stat!=Xi&&(s.stat=Ji);break;case Ri:s.lb=r,s.ub=0,s.stat!=Xi&&(s.stat=Vi);break;case Ui:s.lb=0,s.ub=i,s.stat!=Xi&&(s.stat=$i);break;case zi:s.lb=r,s.ub=i,s.stat!=Xi&&s.stat!=Vi&&s.stat!=$i&&(s.stat=Math.abs(r)<=Math.abs(i)?Vi:$i);break;case Wi:s.lb=s.ub=r,s.stat!=Xi&&(s.stat=Ki);break;default:h("glp_set_col_bnds: j = "+t+"; type = "+n+"; invalid column type")}},W=e.glp_set_obj_coef=function(e,t,n){var r=e.tree;r!=null&&r.reason!=0&&h("glp_set_obj_coef: operation not allowed"),0<=t&&t<=e.n||h("glp_set_obj_coef: j = "+t+"; column number out of range"),t==0?e.c0=n:e.col[t].coef=n},X=e.glp_set_mat_row=function(e,t,n,r,i){var s=e.tree,o,u,a,f,c;1<=t&&t<=e.m||h("glp_set_mat_row: i = "+t+"; row number out of range");var d=e.row[t];s!=null&&s.reason!=0&&(p(s.curr!=null),p(d.level==s.curr.level));while(d.ptr!=null)u=d.ptr,d.ptr=u.r_next,o=u.col,u.c_prev==null?o.ptr=u.c_next:u.c_prev.c_next=u.c_next,u.c_next!=null&&(u.c_next.c_prev=u.c_prev),e.nnz--,o.stat==Xi&&(e.valid=0);0<=n&&n<=e.n||h("glp_set_mat_row: i = "+t+"; len = "+n+"; invalid row length "),n>l-e.nnz&&h("glp_set_mat_row: i = "+t+"; len = "+n+"; too many constraint coefficients");for(c=1;c<=n;c++)f=r[c],1<=f&&f<=e.n||h("glp_set_mat_row: i = "+t+"; ind["+c+"] = "+f+"; column index out of range"),o=e.col[f],o.ptr!=null&&o.ptr.row.i==t&&h("glp_set_mat_row: i = "+t+"; ind["+c+"] = "+f+"; duplicate column indices not allowed"),u={},e.nnz++,u.row=d,u.col=o,u.val=i[c],u.r_prev=null,u.r_next=d.ptr,u.c_prev=null,u.c_next=o.ptr,u.r_next!=null&&(u.r_next.r_prev=u),u.c_next!=null&&(u.c_next.c_prev=u),d.ptr=o.ptr=u,o.stat==Xi&&u.val!=0&&(e.valid=0);for(u=d.ptr;u!=null;u=a)a=u.r_next,u.val==0&&(u.r_prev==null?d.ptr=a:u.r_prev.r_next=a,a!=null&&(a.r_prev=u.r_prev),p(u.c_prev==null),u.col.ptr=u.c_next,u.c_next!=null&&(u.c_next.c_prev=null),e.nnz--)},V=e.glp_set_mat_col=function(e,t,n,r,i){var s=e.tree,o,u,a,f,c;s!=null&&s.reason!=0&&h("glp_set_mat_col: operation not allowed"),1<=t&&t<=e.n||h("glp_set_mat_col: j = "+t+"; column number out of range");var d=e.col[t];while(d.ptr!=null)u=d.ptr,d.ptr=u.c_next,o=u.row,u.r_prev==null?o.ptr=u.r_next:u.r_prev.r_next=u.r_next,u.r_next!=null&&(u.r_next.r_prev=u.r_prev),e.nnz--;0<=n&&n<=e.m||h("glp_set_mat_col: j = "+t+"; len = "+n+"; invalid column length"),n>l-e.nnz&&h("glp_set_mat_col: j = "+t+"; len = "+n+"; too many constraint coefficients");for(c=1;c<=n;c++)f=r[c],1<=f&&f<=e.m||h("glp_set_mat_col: j = "+t+"; ind["+c+"] = "+f+"; row index out of range"),o=e.row[f],o.ptr!=null&&o.ptr.col.j==t&&h("glp_set_mat_col: j = "+t+"; ind["+c+"] = "+f+"; duplicate row indices not allowed"),u={},e.nnz++,u.row=o,u.col=d,u.val=i[c],u.r_prev=null,u.r_next=o.ptr,u.c_prev=null,u.c_next=d.ptr,u.r_next!=null&&(u.r_next.r_prev=u),u.c_next!=null&&(u.c_next.c_prev=u),o.ptr=d.ptr=u;for(u=d.ptr;u!=null;u=a)a=u.c_next,u.val==0&&(p(u.r_prev==null),u.row.ptr=u.r_next,u.r_next!=null&&(u.r_next.r_prev=null),u.c_prev==null?d.ptr=a:u.c_prev.c_next=a,a!=null&&(a.c_prev=u.c_prev),e.nnz--);d.stat==Xi&&(e.valid=0)},$=e.glp_load_matrix=function(e,t,n,r,i){var s=e.tree,o,u,a,f,c,d,v;s!=null&&s.reason!=0&&h("glp_load_matrix: operation not allowed");for(c=1;c<=e.m;c++){o=e.row[c];while(o.ptr!=null)a=o.ptr,o.ptr=a.r_next,e.nnz--}p(e.nnz==0);for(d=1;d<=e.n;d++)e.col[d].ptr=null;t<0&&h("glp_load_matrix: ne = "+t+"; invalid number of constraint coefficients"),t>l&&h("glp_load_matrix: ne = "+t+"; too many constraint coefficients");for(v=1;v<=t;v++)c=n[v],d=r[v],1<=c&&c<=e.m||h("glp_load_matrix: ia["+v+"] = "+c+"; row index out of range"),o=e.row[c],1<=d&&d<=e.n||h("glp_load_matrix: ja["+v+"] = "+d+"; column index out of range"),u=e.col[d],a={},e.nnz++,a.row=o,a.col=u,a.val=i[v],a.r_prev=null,a.r_next=o.ptr,a.r_next!=null&&(a.r_next.r_prev=a),o.ptr=a;p(e.nnz==t);for(c=1;c<=e.m;c++)for(a=e.row[c].ptr;a!=null;a=a.r_next){u=a.col;if(u.ptr!=null&&u.ptr.row.i==c){for(v=1;v<=t;v++)if(n[v]==c&&r[v]==u.j)break;h("glp_load_mat: ia["+v+"] = "+c+"; ja["+v+"] = "+u.j+"; duplicate indices not allowed")}a.c_prev=null,a.c_next=u.ptr,a.c_next!=null&&(a.c_next.c_prev=a),u.ptr=a}for(c=1;c<=e.m;c++){o=e.row[c];for(a=o.ptr;a!=null;a=f)f=a.r_next,a.val==0&&(a.r_prev==null?o.ptr=f:a.r_prev.r_next=f,f!=null&&(f.r_prev=a.r_prev),a.c_prev==null?a.col.ptr=a.c_next:a.c_prev.c_next=a.c_next,a.c_next!=null&&(a.c_next.c_prev=a.c_prev),e.nnz--)}e.valid=0},J=e.glp_check_dup=function(e,t,n,r,i){var s,o,u,a,f,l,c;e<0&&h("glp_check_dup: m = %d; invalid parameter"),t<0&&h("glp_check_dup: n = %d; invalid parameter"),n<0&&h("glp_check_dup: ne = %d; invalid parameter"),n>0&&r==null&&h("glp_check_dup: ia = "+r+"; invalid parameter"),n>0&&i==null&&h("glp_check_dup: ja = "+i+"; invalid parameter");for(u=1;u<=n;u++){s=r[u],o=i[u];if(!(1<=s&&s<=e&&1<=o&&o<=t))return l=-u,l}if(e==0||t==0)return l=0,l;a=new Array(1+e),f=new Array(1+n),c=new Array(1+t);for(s=1;s<=e;s++)a[s]=0;for(u=1;u<=n;u++)s=r[u],f[u]=a[s],a[s]=u;for(o=1;o<=t;o++)c[o]=0;for(s=1;s<=e;s++){for(u=a[s];u!=0;u=f[u]){o=i[u];if(c[o]){for(u=1;u<=n;u++)if(r[u]==s&&i[u]==o)break;p(u<=n);for(u++;u<=n;u++)if(r[u]==s&&i[u]==o)break;return p(u<=n),l=+u,l}c[o]=1}for(u=a[s];u!=0;u=f[u])c[i[u]]=0}return l=0,l},K=e.glp_sort_matrix=function(e){var t,n,r;(e==null||e.magic!=_)&&h("glp_sort_matrix: P = "+e+"; invalid problem object");for(n=e.m;n>=1;n--)e.row[n].ptr=null;for(r=e.n;r>=1;r--)for(t=e.col[r].ptr;t!=null;t=t.c_next)n=t.row.i,t.r_prev=null,t.r_next=e.row[n].ptr,t.r_next!=null&&(t.r_next.r_prev=t),e.row[n].ptr=t;for(r=e.n;r>=1;r--)e.col[r].ptr=null;for(n=e.m;n>=1;n--)for(t=e.row[n].ptr;t!=null;t=t.r_next)r=t.col.j,t.c_prev=null,t.c_next=e.col[r].ptr,t.c_next!=null&&(t.c_next.c_prev=t),e.col[r].ptr=t},Q=e.glp_del_rows=function(e,t,n){var r=e.tree,i,s,o,u;1<=t&&t<=e.m||h("glp_del_rows: nrs = "+t+"; invalid number of rows");for(o=1;o<=t;o++)s=n[o],1<=s&&s<=e.m||h("glp_del_rows: num["+o+"] = "+s+"; row number out of range"),i=e.row[s],r!=null&&r.reason!=0&&(r.reason!=Qs&&r.reason!=Zs&&h("glp_del_rows: operation not allowed"),p(r.curr!=null),i.level!=r.curr.level&&h("glp_del_rows: num["+o+"] = "+s+"; invalid attempt to delete row created not in current subproblem"),i.stat!=Xi&&h("glp_del_rows: num["+o+"] = "+s+"; invalid attempt to delete active row (constraint)"),r.reinv=1),i.i==0&&h("glp_del_rows: num["+o+"] = "+s+"; duplicate row numbers not allowed"),q(e,s,null),p(i.node==null),X(e,s,0,null,null),p(i.ptr==null),i.i=0;u=0;for(s=1;s<=e.m;s++)i=e.row[s],i.i!=0&&(i.i=++u,e.row[i.i]=i);e.m=u,e.valid=0},G=e.glp_del_cols=function(e,t,n){var r=e.tree,i,s,o,u;r!=null&&r.reason!=0&&h("glp_del_cols: operation not allowed"),1<=t&&t<=e.n||h("glp_del_cols: ncs = "+t+"; invalid number of columns");for(o=1;o<=t;o++)s=n[o],1<=s&&s<=e.n||h("glp_del_cols: num["+o+"] = "+s+"; column number out of range"),i=e.col[s],i.j==0&&h("glp_del_cols: num["+o+"] = "+s+"; duplicate column numbers not allowed"),R(e,s,null),p(i.node==null),V(e,s,0,null,null),p(i.ptr==null),i.j=0,i.stat==Xi&&(e.valid=0);u=0;for(s=1;s<=e.n;s++)i=e.col[s],i.j!=0&&(i.j=++u,e.col[i.j]=i);e.n=u;if(e.valid){var a=e.m,f=e.head;for(s=1;s<=u;s++)o=e.col[s].bind,o!=0&&(p(1<=o&&o<=a),f[o]=a+s)}},Y=e.glp_copy_prob=function(e,t,n){var r=e.tree,i={},s,o,u,a,f;r!=null&&r.reason!=0&&h("glp_copy_prob: operation not allowed"),e==t&&h("glp_copy_prob: copying problem object to itself not allowed"),n!=Js&&n!=Ks&&h("glp_copy_prob: names = "+n+"; invalid parameter"),Z(e),n&&t.name!=null&&H(e,t.name),n&&t.obj!=null&&B(e,t.obj),e.dir=t.dir,e.c0=t.c0,t.m>0&&F(e,t.m),t.n>0&&I(e,t.n),sn(t,i),un(e,i),e.pbs_stat=t.pbs_stat,e.dbs_stat=t.dbs_stat,e.obj_val=t.obj_val,e.some=t.some,e.ipt_stat=t.ipt_stat,e.ipt_obj=t.ipt_obj,e.mip_stat=t.mip_stat,e.mip_obj=t.mip_obj;var l,c;for(s=1;s<=t.m;s++)l=e.row[s],c=t.row[s],n&&c.name!=null&&q(e,s,c.name),l.type=c.type,l.lb=c.lb,l.ub=c.ub,l.rii=c.rii,l.stat=c.stat,l.prim=c.prim,l.dual=c.dual,l.pval=c.pval,l.dval=c.dval,l.mipx=c.mipx;a=new Array(1+t.m),f=new Array(1+t.m);for(o=1;o<=t.n;o++)l=e.col[o],c=t.col[o],n&&c.name!=null&&R(e,o,c.name),l.kind=c.kind,l.type=c.type,l.lb=c.lb,l.ub=c.ub,l.coef=c.coef,u=yt(t,o,a,f),V(e,o,u,a,f),l.sjj=c.sjj,l.stat=c.stat,l.prim=c.prim,l.dual=c.dual,l.pval=c.pval,l.dval=c.dval,l.mipx=c.mipx},Z=e.glp_erase_prob=function(e){var t=e.tree;t!=null&&t.reason!=0&&h("glp_erase_prob: operation not allowed"),et(e),D(e)},tt=e.glp_delete_prob=function(e){var t=e.tree;t!=null&&t.reason!=0&&h("glp_delete_prob: operation not allowed"),et(e)},nt=e.glp_get_prob_name=function(e){return e.name},rt=e.glp_get_obj_name=function(e){return e.obj},it=e.glp_get_obj_dir=function(e){return e.dir},st=e.glp_get_num_rows=function(e){return e.m},ot=e.glp_get_num_cols=function(e){return e.n},ut=e.glp_get_row_name=function(e,t){return 1<=t&&t<=e.m||h("glp_get_row_name: i = "+t+"; row number out of range"),e.row[t].name},at=e.glp_get_col_name=function(e,t){return 1<=t&&t<=e.n||h("glp_get_col_name: j = "+t+"; column number out of range"),e.col[t].name},ft=e.glp_get_row_type=function(e,t){return 1<=t&&t<=e.m||h("glp_get_row_type: i = "+t+"; row number out of range"),e.row[t].type},lt=e.glp_get_row_lb=function(e,t){var r;1<=t&&t<=e.m||h("glp_get_row_lb: i = "+t+"; row number out of range");switch(e.row[t].type){case qi:case Ui:r=-n;break;case Ri:case zi:case Wi:r=e.row[t].lb;break;default:p(e!=e)}return r},ct=e.glp_get_row_ub=function(e,t){var r;1<=t&&t<=e.m||h("glp_get_row_ub: i = "+t+"; row number out of range");switch(e.row[t].type){case qi:case Ri:r=+n;break;case Ui:case zi:case Wi:r=e.row[t].ub;break;default:p(e!=e)}return r},ht=e.glp_get_col_type=function(e,t){return 1<=t&&t<=e.n||h("glp_get_col_type: j = "+t+"; column number out of range"),e.col[t].type},pt=e.glp_get_col_lb=function(e,t){var r;1<=t&&t<=e.n||h("glp_get_col_lb: j = "+t+"; column number out of range");switch(e.col[t].type){case qi:case Ui:r=-n;break;case Ri:case zi:case Wi:r=e.col[t].lb;break;default:p(e!=e)}return r},dt=e.glp_get_col_ub=function(e,t){var r;1<=t&&t<=e.n||h("glp_get_col_ub: j = "+t+"; column number out of range");switch(e.col[t].type){case qi:case Ri:r=+n;break;case Ui:case zi:case Wi:r=e.col[t].ub;break;default:p(e!=e)}return r},vt=e.glp_get_obj_coef=function(e,t){return 0<=t&&t<=e.n||h("glp_get_obj_coef: j = "+t+"; column number out of range"),t==0?e.c0:e.col[t].coef},mt=e.glp_get_num_nz=function(e){return e.nnz},gt=e.glp_get_mat_row=function(e,t,n,r){var i,s;1<=t&&t<=e.m||h("glp_get_mat_row: i = "+t+"; row number out of range"),s=0;for(i=e.row[t].ptr;i!=null;i=i.r_next)s++,n!=null&&(n[s]=i.col.j),r!=null&&(r[s]=i.val);return p(s<=e.n),s},yt=e.glp_get_mat_col=function(e,t,n,r){var i,s;1<=t&&t<=e.n||h("glp_get_mat_col: j = "+t+"; column number out of range"),s=0;for(i=e.col[t].ptr;i!=null;i=i.c_next)s++,n!=null&&(n[s]=i.row.i),r!=null&&(r[s]=i.val);return p(s<=e.m),s},bt=e.glp_create_index=function(e){var t,n,r,i;if(e.r_tree==null){e.r_tree={};for(r=1;r<=e.m;r++)t=e.row[r],t.name!=null&&(e.r_tree[t.name]=t)}if(e.c_tree==null){e.c_tree={};for(i=1;i<=e.n;i++)n=e.col[i],n.name!=null&&(e.c_tree[n.name]=n)}},wt=e.glp_find_row=function(e,t){var n=0;e.r_tree==null&&h("glp_find_row: row name index does not exist");var r=e.r_tree[t];return r&&(n=r.i),n},Et=e.glp_find_col=function(e,t){var n=0;e.c_tree==null&&h("glp_find_col: column name index does not exist");var r=e.c_tree[t];return r&&(n=r.j),n},St=e.glp_delete_index=function(e){e.r_tree=null,e.r_tree=null},xt=e.glp_set_rii=function(e,t,n){1<=t&&t<=e.m||h("glp_set_rii: i = "+t+"; row number out of range"),n<=0&&h("glp_set_rii: i = "+t+"; rii = "+n+"; invalid scale factor");if(e.valid&&e.row[t].rii!=n)for(var r=e.row[t].ptr;r!=null;r=r.r_next)if(r.col.stat==Xi){e.valid=0;break}e.row[t].rii=n},Tt=e.glp_set_sjj=function(e,t,n){1<=t&&t<=e.n||h("glp_set_sjj: j = "+t+"; column number out of range"),n<=0&&h("glp_set_sjj: j = "+t+"; sjj = "+n+"; invalid scale factor"),e.valid&&e.col[t].sjj!=n&&e.col[t].stat==Xi&&(e.valid=0),e.col[t].sjj=n},Nt=e.glp_get_rii=function(e,t){return 1<=t&&t<=e.m||h("glp_get_rii: i = "+t+"; row number out of range"),e.row[t].rii},Ct=e.glp_get_sjj=function(e,t){return 1<=t&&t<=e.n||h("glp_get_sjj: j = "+t+"; column number out of range"),e.col[t].sjj},kt=e.glp_unscale_prob=function(e){var t=st(e),n=ot(e),r,i;for(r=1;r<=t;r++)xt(e,r,1);for(i=1;i<=n;i++)Tt(e,i,1)},Lt=e.glp_set_row_stat=function(e,t,n){var r;1<=t&&t<=e.m||h("glp_set_row_stat: i = "+t+"; row number out of range"),n!=Xi&&n!=Vi&&n!=$i&&n!=Ji&&n!=Ki&&h("glp_set_row_stat: i = "+t+"; stat = "+n+"; invalid status"),r=e.row[t];if(n!=Xi)switch(r.type){case qi:n=Ji;break;case Ri:n=Vi;break;case Ui:n=$i;break;case zi:n!=$i&&(n=Vi);break;case Wi:n=Ki;break;default:p(r!=r)}if(r.stat==Xi&&n!=Xi||r.stat!=Xi&&n==Xi)e.valid=0;r.stat=n},At=e.glp_set_col_stat=function(e,t,n){var r;1<=t&&t<=e.n||h("glp_set_col_stat: j = "+t+"; column number out of range"),n!=Xi&&n!=Vi&&n!=$i&&n!=Ji&&n!=Ki&&h("glp_set_col_stat: j = "+t+"; stat = "+n+"; invalid status"),r=e.col[t];if(n!=Xi)switch(r.type){case qi:n=Ji;break;case Ri:n=Vi;break;case Ui:n=$i;break;case zi:n!=$i&&(n=Vi);break;case Wi:n=Ki;break;default:p(r!=r)}if(r.stat==Xi&&n!=Xi||r.stat!=Xi&&n==Xi)e.valid=0;r.stat=n},Ot=e.glp_std_basis=function(e){var t,n;for(t=1;t<=e.m;t++)Lt(e,t,Xi);for(n=1;n<=e.n;n++){var r=e.col[n];r.type==zi&&Math.abs(r.lb)>Math.abs(r.ub)?At(e,n,$i):At(e,n,Vi)}},Mt=e.glp_simplex=function(e,t){function n(e,t){var n;if(!tn(e)){n=nn(e),n!=0&&(n==oo?t.msg_lev>=ds&&d("glp_simplex: initial basis is invalid"):n==uo?t.msg_lev>=ds&&d("glp_simplex: initial basis is singular"):n==ao?t.msg_lev>=ds&&d("glp_simplex: initial basis is ill-conditioned"):p(n!=n));if(n!=0)return n}return t.meth==ys?n=LE(e,t):t.meth==bs?(n=AE(e,t),n==lo&&e.valid&&(n=LE(e,t))):t.meth==ws?n=AE(e,t):p(t!=t),n}function r(e,t){function u(){return i!=null&&tt(i),o}function a(){return fw(r,i),tt(i),i=null,lw(r,e),o=0,u()}var r,i=null,s={},o;t.msg_lev>=ms&&d("Preprocessing..."),r=Ub(),uw(r,e,Ks,ts,Ks),o=Yw(r,t),o!=0&&(o==mo?t.msg_lev>=ms&&d("PROBLEM HAS NO PRIMAL FEASIBLE SOLUTION"):o==go?t.msg_lev>=ms&&d("PROBLEM HAS NO DUAL FEASIBLE SOLUTION"):p(o!=o));if(o!=0)return u();i=P(),aw(r,i);if(i.m==0&&i.n==0)return i.pbs_stat=i.dbs_stat=ss,i.obj_val=i.c0,t.msg_lev>=vs&&t.out_dly==0&&d(e.it_cnt+": obj = "+i.obj_val+"  infeas = 0.0"),t.msg_lev>=ms&&d("OPTIMAL SOLUTION FOUND BY LP PREPROCESSOR"),a();t.msg_lev>=ms&&d(i.m+" row"+(i.m==1?"":"s")+", "+i.n+" column"+(i.n==1?"":"s")+", "+i.nnz+" non-zero"+(i.nnz==1?"":"s")+""),sn(e,s),un(i,s);var f=x(),l=f.term_out;return!l||t.msg_lev<ms?f.term_out=Ks:f.term_out=Js,kE(i,es),f.term_out=l,f=x(),l=f.term_out,!l||t.msg_lev<ms?f.term_out=Ks:f.term_out=Js,Ar(i,0),f.term_out=l,i.it_cnt=e.it_cnt,o=n(i,t),e.it_cnt=i.it_cnt,o!=0||i.pbs_stat!=ss||i.dbs_stat!=ss?(t.msg_lev>=ds&&d("glp_simplex: unable to recover undefined or non-optimal solution"),o==0&&(i.pbs_stat==us?o=mo:i.dbs_stat==us?o=go:p(i!=i)),u()):a()}function i(e,t){function f(){r.stat=Vi,r.prim=r.lb}function l(){r.stat=$i,r.prim=r.ub}var n,r,i,s,o,u,a;e.valid=0,e.pbs_stat=e.dbs_stat=ss,e.obj_val=e.c0,e.some=0,o=u=0;for(i=1;i<=e.m;i++){n=e.row[i],n.stat=Xi,n.prim=n.dual=0;if(n.type==Ri||n.type==zi||n.type==Wi)n.lb>+t.tol_bnd&&(e.pbs_stat=us,e.some==0&&t.meth!=ys&&(e.some=i)),o<+n.lb&&(o=+n.lb);if(n.type==Ui||n.type==zi||n.type==Wi)n.ub<-t.tol_bnd&&(e.pbs_stat=us,e.some==0&&t.meth!=ys&&(e.some=i)),o<-n.ub&&(o=-n.ub)}a=1;for(s=1;s<=e.n;s++)r=e.col[s],a<Math.abs(r.coef)&&(a=Math.abs(r.coef));a=(e.dir==Hi?1:-1)/a;for(s=1;s<=e.n;s++){r=e.col[s],r.type==qi?(r.stat=Ji,r.prim=0):r.type==Ri?f():r.type==Ui?l():r.type==zi?a*r.coef>0?f():a*r.coef<0?l():Math.abs(r.lb)<=Math.abs(r.ub)?f():l():r.type==Wi&&(r.stat=Ki,r.prim=r.lb),r.dual=r.coef,e.obj_val+=r.coef*r.prim;if(r.type==qi||r.type==Ri)a*r.dual<-t.tol_dj&&(e.dbs_stat=us,e.some==0&&t.meth==ys&&(e.some=e.m+s)),u<-a*r.dual&&(u=-a*r.dual);if(r.type==qi||r.type==Ui)a*r.dual>+t.tol_dj&&(e.dbs_stat=us,e.some==0&&t.meth==ys&&(e.some=e.m+s)),u<+a*r.dual&&(u=+a*r.dual)}t.msg_lev>=vs&&t.out_dly==0&&d("~"+e.it_cnt+": obj = "+e.obj_val+"  infeas = "+(t.meth==ys?o:u)+""),t.msg_lev>=ms&&t.out_dly==0&&(e.pbs_stat==ss&&e.dbs_stat==ss?d("OPTIMAL SOLUTION FOUND"):e.pbs_stat==us?d("PROBLEM HAS NO FEASIBLE SOLUTION"):t.meth==ys?d("PROBLEM HAS UNBOUNDED SOLUTION"):d("PROBLEM HAS NO DUAL FEASIBLE SOLUTION"))}var s={},o,u,a;(e==null||e.magic!=_)&&h("glp_simplex: P = "+e+"; invalid problem object"),e.tree!=null&&e.tree.reason!=0&&h("glp_simplex: operation not allowed"),t==null&&(t=s,_t(t)),t.msg_lev!=ps&&t.msg_lev!=ds&&t.msg_lev!=vs&&t.msg_lev!=ms&&t.msg_lev!=gs&&h("glp_simplex: msg_lev = "+t.msg_lev+"; invalid parameter"),t.meth!=ys&&t.meth!=bs&&t.meth!=ws&&h("glp_simplex: meth = "+t.meth+"; invalid parameter"),t.pricing!=Es&&t.pricing!=Ss&&h("glp_simplex: pricing = "+t.pricing+"; invalid parameter"),t.r_test!=xs&&t.r_test!=Ts&&h("glp_simplex: r_test = "+t.r_test+"; invalid parameter"),0<t.tol_bnd&&t.tol_bnd<1||h("glp_simplex: tol_bnd = "+t.tol_bnd+"; invalid parameter"),0<t.tol_dj&&t.tol_dj<1||h("glp_simplex: tol_dj = "+t.tol_dj+"; invalid parameter"),0<t.tol_piv&&t.tol_piv<1||h("glp_simplex: tol_piv = "+t.tol_piv+"; invalid parameter"),t.it_lim<0&&h("glp_simplex: it_lim = "+t.it_lim+"; invalid parameter"),t.tm_lim<0&&h("glp_simplex: tm_lim = "+t.tm_lim+"; invalid parameter"),t.out_frq<1&&h("glp_simplex: out_frq = "+t.out_frq+"; invalid parameter"),t.out_dly<0&&h("glp_simplex: out_dly = "+t.out_dly+"; invalid parameter"),t.presolve!=Js&&t.presolve!=Ks&&h("glp_simplex: presolve = "+t.presolve+"; invalid parameter"),e.pbs_stat=e.dbs_stat=is,e.obj_val=0,e.some=0;for(o=1;o<=e.m;o++){var f=e.row[o];if(f.type==zi&&f.lb>=f.ub)return t.msg_lev>=ds&&d("glp_simplex: row "+o+": lb = "+f.lb+", ub = "+f.ub+"; incorrect bounds"),a=fo,a}for(u=1;u<=e.n;u++){var l=e.col[u];if(l.type==zi&&l.lb>=l.ub)return t.msg_lev>=ds&&d("glp_simplex: column "+u+": lb = "+l.lb+", ub = "+l.ub+"; incorrect bounds"),a=fo,a}return t.msg_lev>=ms&&(d("GLPK Simplex Optimizer, v"+T()+""),d(e.m+" row"+(e.m==1?"":"s")+", "+e.n+" column"+(e.n==1?"":"s")+", "+e.nnz+" non-zero"+(e.nnz==1?"":"s")+"")),e.nnz==0?(i(e,t),a=0):t.presolve?a=r(e,t):a=n(e,t),a},_t=e.glp_init_smcp=function(e){e.msg_lev=ms,e.meth=ys,e.pricing=Ss,e.r_test=Ts,e.tol_bnd=1e-7,e.tol_dj=1e-7,e.tol_piv=1e-10,e.obj_ll=-n,e.obj_ul=+n,e.it_lim=s,e.tm_lim=s,e.out_frq=500,e.out_dly=0,e.presolve=Ks},Dt=e.glp_get_status=function(e){var t;t=Pt(e);switch(t){case ss:switch(Ht(e)){case ss:t=as;break;case us:t=fs;break;case is:case os:break;default:p(e!=e)}break;case is:case os:case us:break;default:p(e!=e)}return t},Pt=e.glp_get_prim_stat=function(e){return e.pbs_stat},Ht=e.glp_get_dual_stat=function(e){return e.dbs_stat},Bt=e.glp_get_obj_val=function(e){return e.obj_val},jt=e.glp_get_row_stat=function(e,t){return 1<=t&&t<=e.m||h("glp_get_row_stat: i = "+t+"; row number out of range"),e.row[t].stat},Ft=e.glp_get_row_prim=function(e,t){return 1<=t&&t<=e.m||h("glp_get_row_prim: i = "+t+"; row number out of range"),e.row[t].prim},It=e.glp_get_row_dual=function(e,t){return 1<=t&&t<=e.m||h("glp_get_row_dual: i = "+t+"; row number out of range"),e.row[t].dual},qt=e.glp_get_col_stat=function(e,t){return 1<=t&&t<=e.n||h("glp_get_col_stat: j = "+t+"; column number out of range"),e.col[t].stat},Rt=e.glp_get_col_prim=function(e,t){return 1<=t&&t<=e.n||h("glp_get_col_prim: j = "+t+"; column number out of range"),e.col[t].prim},Ut=e.glp_get_col_dual=function(e,t){return 1<=t&&t<=e.n||h("glp_get_col_dual: j = "+t+"; column number out of range"),e.col[t].dual},zt=e.glp_get_unbnd_ray=function(e){var t=e.some;return p(t>=0),t>e.m+e.n&&(t=0),t},Wt=e.glp_set_col_kind=function(e,t,n){1<=t&&t<=e.n||h("glp_set_col_kind: j = "+t+"; column number out of range");var r=e.col[t];switch(n){case ji:r.kind=ji;break;case Fi:r.kind=Fi;break;case Ii:r.kind=Fi,(r.type!=zi||r.lb!=0||r.ub!=1)&&z(e,t,zi,0,1);break;default:h("glp_set_col_kind: j = "+t+"; kind = "+n+"; invalid column kind")}},Xt=e.glp_get_col_kind=function(e,t){1<=t&&t<=e.n||h("glp_get_col_kind: j = "+t+"; column number out of range");var n=e.col[t],r=n.kind;switch(r){case ji:break;case Fi:n.type==zi&&n.lb==0&&n.ub==1&&(r=Ii);break;default:p(r!=r)}return r},Vt=e.glp_get_num_int=function(e){var t,n=0;for(var r=1;r<=e.n;r++)t=e.col[r],t.kind==Fi&&n++;return n},$t=e.glp_get_num_bin=function(e){var t,n=0;for(var r=1;r<=e.n;r++)t=e.col[r],t.kind==Fi&&t.type==zi&&t.lb==0&&t.ub==1&&n++;return n},Jt=e.glp_intopt=function(e,t){function n(e,t){var n,r;return Dt(e)!=as?(t.msg_lev>=ds&&d("glp_intopt: optimal basis to initial LP relaxation not provided"),r=yo,r):(t.msg_lev>=ms&&d("Integer optimization begins..."),n=Pr(e,t),r=Zr(n),Ir(n),r==0?e.mip_stat==ss?(t.msg_lev>=ms&&d("INTEGER OPTIMAL SOLUTION FOUND"),e.mip_stat=as):(t.msg_lev>=ms&&d("PROBLEM HAS NO INTEGER FEASIBLE SOLUTION"),e.mip_stat=us):r==wo?t.msg_lev>=ms&&d("RELATIVE MIP GAP TOLERANCE REACHED; SEARCH TERMINATED"):r==vo?t.msg_lev>=ms&&d("TIME LIMIT EXCEEDED; SEARCH TERMINATED"):r==lo?t.msg_lev>=ds&&d("glp_intopt: cannot solve current LP relaxation"):r==bo?t.msg_lev>=ms&&d("SEARCH TERMINATED BY APPLICATION"):p(r!=r),r)}function r(e,t){function l(){return o!=null&&tt(o),f}function c(){return fw(s,o),tt(o),o=null,lw(s,e),l()}var r=x(),i=r.term_out,s,o=null,u={},a={},f;t.msg_lev>=ms&&d("Preprocessing..."),s=Ub(),uw(s,e,Ks,rs,Ks),!i||t.msg_lev<ms?r.term_out=Ks:r.term_out=Js,f=Zw(s,t),r.term_out=i,f!=0&&(f==mo?t.msg_lev>=ms&&d("PROBLEM HAS NO PRIMAL FEASIBLE SOLUTION"):f==go?t.msg_lev>=ms&&d("LP RELAXATION HAS NO DUAL FEASIBLE SOLUTION"):p(f!=f));if(f!=0)return l();o=P(),aw(s,o);if(o.m==0&&o.n==0)return o.mip_stat=as,o.mip_obj=o.c0,t.msg_lev>=ms&&(d("Objective value = "+o.mip_obj+""),d("INTEGER OPTIMAL SOLUTION FOUND BY MIP PREPROCESSOR")),c();if(t.msg_lev>=ms){var h=Vt(o),v=$t(o),m;d(o.m+" row"+(o.m==1?"":"s")+", "+o.n+" column"+(o.n==1?"":"s")+", "+o.nnz+" non-zero"+(o.nnz==1?"":"s")+""),v==0?m="none of":h==1&&v==1?m="":v==1?m="one of":v==h?m="all of":m=v+" of",d(h+" integer variable"+(h==1?"":"s")+", "+m+" which "+(v==1?"is":"are")+" binary")}return sn(e,u),un(o,u),!i||t.msg_lev<ms?r.term_out=Ks:r.term_out=Js,kE(o,Qi|Gi|Yi|Zi),r.term_out=i,!i||t.msg_lev<ms?r.term_out=Ks:r.term_out=Js,Ar(o,0),r.term_out=i,t.msg_lev>=ms&&d("Solving LP relaxation..."),_t(a),a.msg_lev=t.msg_lev,o.it_cnt=e.it_cnt,f=Mt(o,a),e.it_cnt=o.it_cnt,f!=0?(t.msg_lev>=ds&&d("glp_intopt: cannot solve LP relaxation"),f=lo,l()):(f=Dt(o),f==as?f=0:f==us?f=mo:f==fs?f=go:p(f!=f),f!=0?l():(o.it_cnt=e.it_cnt,f=n(o,t),e.it_cnt=o.it_cnt,o.mip_stat!=as&&o.mip_stat!=ss?(e.mip_stat=o.mip_stat,l()):c()))}var i,s,o,u;(e==null||e.magic!=_)&&h("glp_intopt: P = "+e+"; invalid problem object"),e.tree!=null&&h("glp_intopt: operation not allowed"),t==null&&(t={},Kt(t)),t.msg_lev!=ps&&t.msg_lev!=ds&&t.msg_lev!=vs&&t.msg_lev!=ms&&t.msg_lev!=gs&&h("glp_intopt: msg_lev = "+t.msg_lev+"; invalid parameter"),t.br_tech!=As&&t.br_tech!=Os&&t.br_tech!=Ms&&t.br_tech!=_s&&t.br_tech!=Ds&&h("glp_intopt: br_tech = "+t.br_tech+"; invalid parameter"),t.bt_tech!=Ps&&t.bt_tech!=Hs&&t.bt_tech!=Bs&&t.bt_tech!=js&&h("glp_intopt: bt_tech = "+t.bt_tech+"; invalid parameter"),0<t.tol_int&&t.tol_int<1||h("glp_intopt: tol_int = "+t.tol_int+"; invalid parameter"),0<t.tol_obj&&t.tol_obj<1||h("glp_intopt: tol_obj = "+t.tol_obj+"; invalid parameter"),t.tm_lim<0&&h("glp_intopt: tm_lim = "+t.tm_lim+"; invalid parameter"),t.out_frq<0&&h("glp_intopt: out_frq = "+t.out_frq+"; invalid parameter"),t.out_dly<0&&h("glp_intopt: out_dly = "+t.out_dly+"; invalid parameter"),0<=t.cb_size&&t.cb_size<=256||h("glp_intopt: cb_size = "+t.cb_size+"; invalid parameter"),t.pp_tech!=Fs&&t.pp_tech!=Is&&t.pp_tech!=qs&&h("glp_intopt: pp_tech = "+t.pp_tech+"; invalid parameter"),t.mip_gap<0&&h("glp_intopt: mip_gap = "+t.mip_gap+"; invalid parameter"),t.mir_cuts!=Js&&t.mir_cuts!=Ks&&h("glp_intopt: mir_cuts = "+t.mir_cuts+"; invalid parameter"),t.gmi_cuts!=Js&&t.gmi_cuts!=Ks&&h("glp_intopt: gmi_cuts = "+t.gmi_cuts+"; invalid parameter"),t.cov_cuts!=Js&&t.cov_cuts!=Ks&&h("glp_intopt: cov_cuts = "+t.cov_cuts+"; invalid parameter"),t.clq_cuts!=Js&&t.clq_cuts!=Ks&&h("glp_intopt: clq_cuts = "+t.clq_cuts+"; invalid parameter"),t.presolve!=Js&&t.presolve!=Ks&&h("glp_intopt: presolve = "+t.presolve+"; invalid parameter"),t.binarize!=Js&&t.binarize!=Ks&&h("glp_intopt: binarize = "+t.binarize+"; invalid parameter"),t.fp_heur!=Js&&t.fp_heur!=Ks&&h("glp_intopt: fp_heur = "+t.fp_heur+"; invalid parameter"),e.mip_stat=is,e.mip_obj=0;for(i=1;i<=e.m;i++){var a=e.row[i];if(a.type==zi&&a.lb>=a.ub)return t.msg_lev>=ds&&d("glp_intopt: row "+i+": lb = "+a.lb+", ub = "+a.ub+"; incorrect bounds"),o=fo,o}for(s=1;s<=e.n;s++){u=e.col[s];if(u.type==zi&&u.lb>=u.ub)return t.msg_lev>=ds&&d("glp_intopt: column "+s+": lb = "+u.lb+", ub = "+u.ub+"; incorrect bounds"),o=fo,o}for(s=1;s<=e.n;s++){u=e.col[s];if(u.kind!=Fi)continue;if(u.type==Ri||u.type==zi)if(u.lb!=Math.floor(u.lb))return t.msg_lev>=ds&&d("glp_intopt: integer column "+s+" has non-integer lower bound "+u.lb+""),o=fo,o;if(u.type==Ui||u.type==zi)if(u.ub!=Math.floor(u.ub))return t.msg_lev>=ds&&d("glp_intopt: integer column "+s+" has non-integer upper bound "+u.ub+""),o=fo,o;if(u.type==Wi&&u.lb!=Math.floor(u.lb))return t.msg_lev>=ds&&d("glp_intopt: integer column "+s+" has non-integer fixed value "+u.lb+""),o=fo,o}if(t.msg_lev>=ms){var f=Vt(e),l=$t(e),c;d("GLPK Integer Optimizer, v"+T()+""),d(e.m+" row"+(e.m==1?"":"s")+", "+e.n+" column"+(e.n==1?"":"s")+", "+e.nnz+" non-zero"+(e.nnz==1?"":"s")+""),l==0?c="none of":f==1&&l==1?c="":l==1?c="one of":l==f?c="all of":c=l+" of",d(f+" integer variable"+(f==1?"":"s")+", "+c+" which "+(l==1?"is":"are")+" binary")}return t.presolve?o=r(e,t):o=n(e,t),o},Kt=e.glp_init_iocp=function(e){e.msg_lev=ms,e.br_tech=_s,e.bt_tech=Bs,e.tol_int=1e-5,e.tol_obj=1e-7,e.tm_lim=s,e.out_frq=5e3,e.out_dly=1e4,e.cb_func=null,e.cb_info=null,e.cb_size=0,e.pp_tech=qs,e.mip_gap=0,e.mir_cuts=Ks,e.gmi_cuts=Ks,e.cov_cuts=Ks,e.clq_cuts=Ks,e.presolve=Ks,e.binarize=Ks,e.fp_heur=Ks},Qt=e.glp_mip_status=function(e){return e.mip_stat},Gt=e.glp_mip_obj_val=function(e){return e.mip_obj},Yt=e.glp_mip_row_val=function(e,t){return 1<=t&&t<=e.m||h("glp_mip_row_val: i = "+t+"; row number out of range"),e.row[t].mipx},Zt=e.glp_mip_col_val=function(e,t){return 1<=t&&t<=e.n||h("glp_mip_col_val: j = "+t+"; column number out of range"),e.col[t].mipx},tn=e.glp_bf_exists=function(e){return e.m==0||e.valid},nn=e.glp_factorize=function(e){function t(e,t,n,r){var i=e.m,s,o,u;p(1<=t&&t<=i),o=e.head[t];if(o<=i)u=1,n[1]=o,r[1]=1;else{u=0;for(s=e.col[o-i].ptr;s!=null;s=s.c_next)u++,n[u]=s.row.i,r[u]=-s.row.rii*s.val*s.col.sjj}return u}var n=e.m,r=e.n,i=e.row,s=e.col,o=e.head,u,a,f,l;e.valid=0,u=0;for(a=1;a<=n+r;a++){a<=n?(f=i[a].stat,i[a].bind=0):(f=s[a-n].stat,s[a-n].bind=0);if(f==Xi){u++;if(u>n)return l=oo,l;o[u]=a,a<=n?i[a].bind=u:s[a-n].bind=u}}if(u<n)return l=oo,l;if(n>0){e.bfd==null&&(e.bfd=or(),on(e));switch(ar(e.bfd,n,e.head,t,e)){case 0:break;case tr:return l=uo,l;case nr:return l=ao,l;default:p(e!=e)}e.valid=1}return l=0,l},rn=e.glp_bf_updated=function(e){return e.m!=0&&!e.valid&&h("glp_bf_update: basis factorization does not exist"),e.m==0?0:hr(e.bfd)},sn=e.glp_get_bfcp=function(e,t){var n=e.bfcp;n==null?(t.type=ls,t.lu_size=0,t.piv_tol=.1,t.piv_lim=4,t.suhl=Js,t.eps_tol=1e-15,t.max_gro=1e10,t.nfs_max=100,t.upd_tol=1e-6,t.nrs_max=100,t.rs_size=0):v(t,n)},un=e.glp_set_bfcp=function(e,t){var n=e.bfcp;t==null?n!=null&&(e.bfcp=null):(n==null&&(n=e.bfcp={}),v(n,t),n.type!=ls&&n.type!=cs&&n.type!=hs&&h("glp_set_bfcp: type = "+n.type+"; invalid parameter"),n.lu_size<0&&h("glp_set_bfcp: lu_size = "+n.lu_size+"; invalid parameter"),0<n.piv_tol&&n.piv_tol<1||h("glp_set_bfcp: piv_tol = "+n.piv_tol+"; invalid parameter"),n.piv_lim<1&&h("glp_set_bfcp: piv_lim = "+n.piv_lim+"; invalid parameter"),n.suhl!=Js&&n.suhl!=Ks&&h("glp_set_bfcp: suhl = "+n.suhl+"; invalid parameter"),0<=n.eps_tol&&n.eps_tol<=1e-6||h("glp_set_bfcp: eps_tol = "+n.eps_tol+"; invalid parameter"),n.max_gro<1&&h("glp_set_bfcp: max_gro = "+n.max_gro+"; invalid parameter"),1<=n.nfs_max&&n.nfs_max<=32767||h("glp_set_bfcp: nfs_max = "+n.nfs_max+"; invalid parameter"),0<n.upd_tol&&n.upd_tol<1||h("glp_set_bfcp: upd_tol = "+n.upd_tol+"; invalid parameter"),1<=n.nrs_max&&n.nrs_max<=32767||h("glp_set_bfcp: nrs_max = "+n.nrs_max+"; invalid parameter"),n.rs_size<0&&h("glp_set_bfcp: rs_size = "+n.nrs_max+"; invalid parameter"),n.rs_size==0&&(n.rs_size=20*n.nrs_max)),e.bfd!=null&&on(e)},an=e.glp_get_bhead=function(e,t){return e.m!=0&&!e.valid&&h("glp_get_bhead: basis factorization does not exist"),1<=t&&t<=e.m||h("glp_get_bhead: k = "+t+"; index out of range"),e.head[t]},fn=e.glp_get_row_bind=function(e,t){return e.m!=0&&!e.valid&&h("glp_get_row_bind: basis factorization does not exist"),1<=t&&t<=e.m||h("glp_get_row_bind: i = "+t+"; row number out of range"),e.row[t].bind},ln=e.glp_get_col_bind=function(e,t){return e.m!=0&&!e.valid&&h("glp_get_col_bind: basis factorization does not exist"),1<=t&&t<=e.n||h("glp_get_col_bind: j = "+t+"; column number out of range"),e.col[t].bind},cn=e.glp_ftran=function(e,t){var n=e.m,r=e.row,i=e.col,s,o;n!=0&&!e.valid&&h("glp_ftran: basis factorization does not exist");for(s=1;s<=n;s++)t[s]*=r[s].rii;n>0&&fr(e.bfd,t);for(s=1;s<=n;s++)o=e.head[s],o<=n?t[s]/=r[o].rii:t[s]*=i[o-n].sjj},hn=e.glp_btran=function(e,t){var n=e.m,r=e.row,i=e.col,s,o;n!=0&&!e.valid&&h("glp_btran: basis factorization does not exist");for(s=1;s<=n;s++)o=e.head[s],o<=n?t[s]/=r[o].rii:t[s]*=i[o-n].sjj;n>0&&lr(e.bfd,t);for(s=1;s<=n;s++)t[s]*=r[s].rii},pn=e.glp_warm_up=function(e){var t,n,r,i,s,o,u,a,f,l;e.pbs_stat=e.dbs_stat=is,e.obj_val=0,e.some=0;for(i=1;i<=e.m;i++)t=e.row[i],t.prim=t.dual=0;for(s=1;s<=e.n;s++)n=e.col[s],n.prim=n.dual=0;if(!tn(e)){u=nn(e);if(u!=0)return u}l=new Array(1+e.m);for(i=1;i<=e.m;i++)l[i]=0;for(i=1;i<=e.m;i++){t=e.row[i];if(t.stat==Xi)continue;t.stat==Vi?t.prim=t.lb:t.stat==$i?t.prim=t.ub:t.stat==Ji?t.prim=0:t.stat==Ki?t.prim=t.lb:p(t!=t),l[i]-=t.prim}for(s=1;s<=e.n;s++){n=e.col[s];if(n.stat==Xi)continue;n.stat==Vi?n.prim=n.lb:n.stat==$i?n.prim=n.ub:n.stat==Ji?n.prim=0:n.stat==Ki?n.prim=n.lb:p(n!=n);if(n.prim!=0)for(r=n.ptr;r!=null;r=r.c_next)l[r.row.i]+=r.val*n.prim}cn(e,l),e.pbs_stat=ss;for(i=1;i<=e.m;i++){t=e.row[i];if(t.stat!=Xi)continue;t.prim=l[t.bind],o=t.type;if(o==Ri||o==zi||o==Wi)a=1e-6+1e-9*Math.abs(t.lb),t.prim<t.lb-a&&(e.pbs_stat=os);if(o==Ui||o==zi||o==Wi)a=1e-6+1e-9*Math.abs(t.ub),t.prim>t.ub+a&&(e.pbs_stat=os)}for(s=1;s<=e.n;s++){n=e.col[s];if(n.stat!=Xi)continue;n.prim=l[n.bind],o=n.type;if(o==Ri||o==zi||o==Wi)a=1e-6+1e-9*Math.abs(n.lb),n.prim<n.lb-a&&(e.pbs_stat=os);if(o==Ui||o==zi||o==Wi)a=1e-6+1e-9*Math.abs(n.ub),n.prim>n.ub+a&&(e.pbs_stat=os)}e.obj_val=e.c0;for(s=1;s<=e.n;s++)n=e.col[s],e.obj_val+=n.coef*n.prim;for(i=1;i<=e.m;i++)l[i]=0;for(s=1;s<=e.n;s++)n=e.col[s],n.stat==Xi&&(l[n.bind]=n.coef);hn(e,l),e.dbs_stat=ss;for(i=1;i<=e.m;i++){t=e.row[i];if(t.stat==Xi){t.dual=0;continue}t.dual=-l[i],o=t.type,f=e.dir==Hi?+t.dual:-t.dual;if((o==qi||o==Ri)&&f<-0.00001||(o==qi||o==Ui)&&f>1e-5)e.dbs_stat=os}for(s=1;s<=e.n;s++){n=e.col[s];if(n.stat==Xi){n.dual=0;continue}n.dual=n.coef;for(r=n.ptr;r!=null;r=r.c_next)n.dual+=r.val*l[r.row.i];o=n.type,f=e.dir==Hi?+n.dual:-n.dual;if((o==qi||o==Ri)&&f<-0.00001||(o==qi||o==Ui)&&f>1e-5)e.dbs_stat=os}return 0},dn=e.glp_eval_tab_row=function(e,t,n,r){var i=e.m,s=e.n,o,u,a,f,l,c,d,v;i!=0&&!e.valid&&h("glp_eval_tab_row: basis factorization does not exist"),1<=t&&t<=i+s||h("glp_eval_tab_row: k = "+t+"; variable number out of range"),t<=i?o=fn(e,t):o=ln(e,t-i),o==0&&h("glp_eval_tab_row: k = "+t+"; variable must be basic"),p(1<=o&&o<=i),d=new Array(1+i),l=new Array(1+i),v=new Array(1+i);for(u=1;u<=i;u++)d[u]=0;d[o]=1,hn(e,d),a=0;for(t=1;t<=i+s;t++){if(t<=i){if(jt(e,t)==Xi)continue;c=-d[t]}else{if(qt(e,t-i)==Xi)continue;f=yt(e,t-i,l,v),c=0;for(u=1;u<=f;u++)c+=d[l[u]]*v[u]}c!=0&&(a++,n[a]=t,r[a]=c)}return p(a<=s),a},vn=e.glp_eval_tab_col=function(e,t,n,r){var i=e.m,s=e.n,o,u,a,f;i!=0&&!e.valid&&h("glp_eval_tab_col: basis factorization does not exist"),1<=t&&t<=i+s||h("glp_eval_tab_col: k = "+t+"; variable number out of range"),t<=i?a=jt(e,t):a=qt(e,t-i),a==Xi&&h("glp_eval_tab_col: k = "+t+"; variable must be non-basic"),f=new Array(1+i);for(o=1;o<=i;o++)f[o]=0;if(t<=i)f[t]=-1;else{u=yt(e,t-i,n,r);for(o=1;o<=u;o++)f[n[o]]=r[o]}cn(e,f),u=0;for(o=1;o<=i;o++)f[o]!=0&&(u++,n[u]=an(e,o),r[u]=f[o]);return u},mn=e.glp_transform_row=function(e,t,n,r){var i,s,o,u,a,f,l,c,d,v,m,g,y;tn(e)||h("glp_transform_row: basis factorization does not exist "),u=st(e),a=ot(e),v=new Array(1+a);for(s=1;s<=a;s++)v[s]=0;0<=t&&t<=a||h("glp_transform_row: len = "+t+"; invalid row length");for(f=1;f<=t;f++)s=n[f],1<=s&&s<=a||h("glp_transform_row: ind["+f+"] = "+s+"; column index out of range"),r[f]==0&&h("glp_transform_row: val["+f+"] = 0; zero coefficient not allowed"),v[s]!=0&&h("glp_transform_row: ind["+f+"] = "+s+"; duplicate column indices not allowed"),v[s]=r[f];m=new Array(1+u);for(i=1;i<=u;i++)o=an(e,i),p(1<=o&&o<=u+a),m[i]=o<=u?0:v[o-u];g=m,hn(e,g),t=0;for(i=1;i<=u;i++)jt(e,i)!=Xi&&(d=-g[i],d!=0&&(t++,n[t]=i,r[t]=d));c=new Array(1+u),y=new Array(1+u);for(s=1;s<=a;s++)if(qt(e,s)!=Xi){d=v[s],l=yt(e,s,c,y);for(f=1;f<=l;f++)d+=y[f]*g[c[f]];d!=0&&(t++,n[t]=u+s,r[t]=d)}return p(t<=a),t},gn=e.glp_transform_col=function(e,t,n,r){var i,s,o,u,a;tn(e)||h("glp_transform_col: basis factorization does not exist "),s=st(e),u=new Array(1+s);for(i=1;i<=s;i++)u[i]=0;0<=t&&t<=s||h("glp_transform_col: len = "+t+"; invalid column length");for(o=1;o<=t;o++)i=n[o],1<=i&&i<=s||h("glp_transform_col: ind["+o+"] = "+i+"; row index out of range"),r[o]==0&&h("glp_transform_col: val["+o+"] = 0; zero coefficient not allowed"),u[i]!=0&&h("glp_transform_col: ind["+o+"] = "+i+"; duplicate row indices not allowed"),u[i]=r[o];a=u,cn(e,a),t=0;for(i=1;i<=s;i++)a[i]!=0&&(t++,n[t]=an(e,i),r[t]=a[i]);return t},yn=e.glp_prim_rtest=function(e,t,r,i,s,o){var u,a,f,l,c,d,v,m,g,y,b,w,E,S;Pt(e)!=ss&&h("glp_prim_rtest: basic solution is not primal feasible "),s!=+1&&s!=-1&&h("glp_prim_rtest: dir = "+s+"; invalid parameter"),0<o&&o<1||h("glp_prim_rtest: eps = "+o+"; invalid parameter"),a=st(e),f=ot(e),l=0,S=n,g=0;for(c=1;c<=t;c++){u=r[c],1<=u&&u<=a+f||h("glp_prim_rtest: ind["+c+"] = "+u+"; variable number out of range"),u<=a?(d=ft(e,u),b=lt(e,u),w=ct(e,u),v=jt(e,u),y=Ft(e,u)):(d=ht(e,u-a),b=pt(e,u-a),w=dt(e,u-a),v=qt(e,u-a),y=Rt(e,u-a)),v!=Xi&&h("glp_prim_rtest: ind["+c+"] = "+u+"; non-basic variable not allowed"),m=s>0?+i[c]:-i[c];if(d==qi)continue;if(d==Ri){if(m>-o)continue;E=(b-y)/m}else if(d==Ui){if(m<+o)continue;E=(w-y)/m}else if(d==zi)if(m<0){if(m>-o)continue;E=(b-y)/m}else{if(m<+o)continue;E=(w-y)/m}else if(d==Wi){if(-o<m&&m<+o)continue;E=0}else p(d!=d);E<0&&(E=0);if(S>E||S==E&&g<Math.abs(m))l=c,S=E,g=Math.abs(m)}return l},bn=e.glp_dual_rtest=function(e,t,r,i,s,o){var u,a,f,l,c,d,v,m,g,y,b,w;Ht(e)!=ss&&h("glp_dual_rtest: basic solution is not dual feasible"),s!=+1&&s!=-1&&h("glp_dual_rtest: dir = "+s+"; invalid parameter"),0<o&&o<1||h("glp_dual_rtest: eps = "+o+"; invalid parameter"),a=st(e),f=ot(e),y=it(e)==Hi?1:-1,l=0,w=n,m=0;for(c=1;c<=t;c++){u=r[c],1<=u&&u<=a+f||h("glp_dual_rtest: ind["+c+"] = "+u+"; variable number out of range"),u<=a?(d=jt(e,u),g=It(e,u)):(d=qt(e,u-a),g=Ut(e,u-a)),d==Xi&&h("glp_dual_rtest: ind["+c+"] = "+u+"; basic variable not allowed"),v=s>0?+i[c]:-i[c];if(d==Vi){if(v<+o)continue;b=y*g/v}else if(d==$i){if(v>-o)continue;b=y*g/v}else if(d==Ji){if(-o<v&&v<+o)continue;b=0}else{if(d==Ki)continue;p(d!=d)}b<0&&(b=0);if(w>b||w==b&&m<Math.abs(v))l=c,w=b,m=Math.abs(v)}return l},En=e.glp_analyze_bound=function(e,t,r){function k(){f<0?(x=g,T=l):(N=g,C=l)}var i,s,o,u,a,f,l,c,d,v,m,g,y,b,w,E,S,x,T,N,C;x=T=N=C=null,(e==null||e.magic!=_)&&h("glp_analyze_bound: P = "+e+"; invalid problem object"),o=e.m,u=e.n,(e.pbs_stat!=ss||e.dbs_stat!=ss)&&h("glp_analyze_bound: optimal basic solution required"),o!=0&&!e.valid&&h("glp_analyze_bound: basis factorization required"),1<=t&&t<=o+u||h("glp_analyze_bound: k = "+t+"; variable number out of range"),t<=o?(i=e.row[t],a=i.stat,m=i.prim):(s=e.col[t-o],a=s.stat,m=s.prim),a==Xi&&h("glp_analyze_bound: k = "+t+"; basic variable not allowed "),v=new Array(1+o),S=new Array(1+o),c=vn(e,t,v,S),p(0<=c&&c<=o);for(f=-1;f<=1;f+=2){d=yn(e,c,v,S,f,1e-9);if(d==0){l=0,g=f<0?-n:+n,k();continue}p(1<=d&&d<=c),l=v[d],l<=o?(i=e.row[l],y=lt(e,i.i),b=ct(e,i.i),a=i.stat,w=i.prim):(s=e.col[l-o],y=pt(e,s.j),b=dt(e,s.j),a=s.stat,w=s.prim),p(a==Xi),f<0&&S[d]>0||f>0&&S[d]<0?(p(y!=-n),E=y-w):(p(b!=+n),E=b-w),p(S[d]!=0),g=m+E/S[d],k()}r(x,T,N,C)},Sn=e.glp_analyze_coef=function(e,t,r){function U(){l<0?(B=C,j=d,F=k):(I=C,q=d,R=k)}var i,s,o,u,a,f,l,c,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,D,P,H,B=null,j=null,F=null,I=null,q=null,R=null;(e==null||e.magic!=_)&&h("glp_analyze_coef: P = "+e+"; invalid problem object"),o=e.m,u=e.n,(e.pbs_stat!=ss||e.dbs_stat!=ss)&&h("glp_analyze_coef: optimal basic solution required"),o!=0&&!e.valid&&h("glp_analyze_coef: basis factorization required"),1<=t&&t<=o+u||h("glp_analyze_coef: k = "+t+"; variable number out of range"),t<=o?(i=e.row[t],a=i.type,S=i.lb,x=i.ub,T=0,f=i.stat,N=i.prim):(s=e.col[t-o],a=s.type,S=s.lb,x=s.ub,T=s.coef,f=s.stat,N=s.prim),f!=Xi&&h("glp_analyze_coef: k = "+t+"; non-basic variable not allowed"),w=new Array(1+o),H=new Array(1+o),E=new Array(1+u),P=new Array(1+u),y=dn(e,t,E,P),p(0<=y&&y<=u);for(l=-1;l<=1;l+=2){e.dir==Hi?v=-l:e.dir==Bi?v=+l:p(e!=e),b=bn(e,y,E,P,v,1e-9);if(b==0){C=l<0?-n:+n,d=0,k=N,U();continue}p(1<=b&&b<=y),d=E[b],p(1<=d&&d<=o+u),d<=o?(i=e.row[d],f=i.stat,L=i.dual):(s=e.col[d-o],f=s.stat,L=s.dual),p(P[b]!=0),A=-L/P[b],C=T+A,l<0&&P[b]>0||l>0&&P[b]<0?v=1:v=-1,e.dir==Bi&&(v=-v),v>0?p(f==Vi||f==Ji):p(f==$i||f==Ji),m=vn(e,d,w,H),t<=o?(i=e.row[t],i.type=qi,i.lb=i.ub=0):(s=e.col[t-o],s.type=qi,s.lb=s.ub=0),g=yn(e,m,w,H,v,1e-9),t<=o?(i=e.row[t],i.type=a,i.lb=S,i.ub=x):(s=e.col[t-o],s.type=a,s.lb=S,s.ub=x);if(g==0){v<0&&P[b]>0||v>0&&P[b]<0?k=-n:k=+n,U();continue}p(1<=g&&g<=m),c=w[g],p(1<=c&&c<=o+u),p(c!=t),c<=o?(i=e.row[c],p(i.stat==Xi),O=lt(e,i.i),M=ct(e,i.i),D=i.prim):(s=e.col[c-o],p(s.stat==Xi),O=pt(e,s.j),M=dt(e,s.j),D=s.prim),v<0&&H[g]>0||v>0&&H[g]<0?(p(O!=-n),A=O-D):(p(M!=+n),A=M-D),p(H[g]!=0),k=N+P[b]/H[g]*A,U()}callback(B,j,F,I,q,R)},Xn=e.glp_mpl_alloc_wksp=function(){return cb()},Vn=e._glp_mpl_init_rand=function(e,t){e.phase!=0&&h("glp_mpl_init_rand: invalid call sequence\n"),rE(e.rand,t)},$n=e.glp_mpl_read_model=function(e,t,n,r){var i;return e.phase!=0&&h("glp_mpl_read_model: invalid call sequence"),i=hb(e,t,n,r),i==1||i==2?i=0:i==4?i=1:p(i!=i),i},Jn=e.glp_mpl_read_model_from_string=function(e,t,n,r){var i=0;return $n(e,t,function(){return i<n.length?n[i++]:-1},r)},Kn=e.glp_mpl_read_data=function(e,t,n){var r;return e.phase!=1&&e.phase!=2&&h("glp_mpl_read_data: invalid call sequence"),r=pb(e,t,n),r==2?r=0:r==4?r=1:p(r!=r),r},Qn=e.glp_mpl_read_data_from_string=function(e,t,n){var r=0;return Kn(e,t,function(){return r<n.length?n[r++]:-1})},Gn=e.glp_mpl_generate=function(e,t,n){var r;return e.phase!=1&&e.phase!=2&&h("glp_mpl_generate: invalid call sequence\n"),r=db(e,t,n),r==3?r=0:r==4&&(r=1),r},Yn=e.glp_mpl_build_prob=function(e,t){var n,r,i,s,o,u,a,f,l,c,v,m;e.phase!=3&&h("glp_mpl_build_prob: invalid call sequence\n"),Z(t),H(t,vb(e)),n=mb(e),n>0&&F(t,n);for(i=1;i<=n;i++){q(t,i,yb(e,i)),a=wb(e,i,function(e,t){c=e,v=t});switch(a){case yd:a=qi;break;case bd:a=Ri;break;case wd:a=Ui;break;case Ed:a=zi;break;case Sd:a=Wi;break;default:p(a!=a)}a==zi&&Math.abs(c-v)<1e-9*(1+Math.abs(c))&&(a=Wi,Math.abs(c)<=Math.abs(v)?v=c:c=v),U(t,i,a,c,v),Sb(e,i)!=0&&d("glp_mpl_build_prob: row "+yb(e,i)+"; constant term "+Sb(e,i)+" ignored")}r=gb(e),r>0&&I(t,r);for(s=1;s<=r;s++){R(t,s,xb(e,s)),u=Tb(e,s);switch(u){case Cd:break;case kd:case Ld:Wt(t,s,Fi);break;default:p(u!=u)}a=Nb(e,s,function(e,t){c=e,v=t});switch(a){case yd:a=qi;break;case bd:a=Ri;break;case wd:a=Ui;break;case Ed:a=zi;break;case Sd:a=Wi;break;default:p(a!=a)}if(u==Ld){if(a==qi||a==Ui||c<0)c=0;if(a==qi||a==Ri||v>1)v=1;a=zi}a==zi&&Math.abs(c-v)<1e-9*(1+Math.abs(c))&&(a=Wi,Math.abs(c)<=Math.abs(v)?v=c:c=v),z(t,s,a,c,v)}l=new Array(1+r),m=new Array(1+r);for(i=1;i<=n;i++)f=Eb(e,i,l,m),X(t,i,f,l,m);for(i=1;i<=n;i++){u=bb(e,i);if(u==Td||u==Nd){B(t,yb(e,i)),j(t,u==Td?Hi:Bi),W(t,0,Sb(e,i)),f=Eb(e,i,l,m);for(o=1;o<=f;o++)W(t,l[o],m[o]);break}}},Zn=e.glp_mpl_postsolve=function(e,t,n){var r,i,s,o,u,a,f,l;(e.phase!=3||!!e.flag_p)&&h("glp_mpl_postsolve: invalid call sequence"),n!=ts&&n!=ns&&n!=rs&&h("glp_mpl_postsolve: sol = "+n+"; invalid parameter"),s=mb(e),o=gb(e),(s!=st(t)||o!=ot(t))&&h("glp_mpl_postsolve: wrong problem object\n");if(!Cb(e))return 0;for(r=1;r<=s;r++)n==ts?(u=jt(t,r),f=Ft(t,r),l=It(t,r)):n==ns?(u=0,f=glp_ipt_row_prim(t,r),l=glp_ipt_row_dual(t,r)):n==rs?(u=0,f=Yt(t,r),l=0):p(n!=n),Math.abs(f)<1e-9&&(f=0),Math.abs(l)<1e-9&&(l=0),kb(e,r,u,f,l);for(i=1;i<=o;i++)n==ts?(u=qt(t,i),f=Rt(t,i),l=Ut(t,i)):n==ns?(u=0,f=glp_ipt_col_prim(t,i),l=glp_ipt_col_dual(t,i)):n==rs?(u=0,f=Zt(t,i),l=0):p(n!=n),Math.abs(f)<1e-9&&(f=0),Math.abs(l)<1e-9&&(l=0),Lb(e,i,u,f,l);return a=Ab(e),a==3?a=0:a==4&&(a=1),a},er=e.glp_mpl_free_wksp=function(e){Ob(e)};const tr=1,nr=2,rr=3,ir=4,sr=5,dr="!\"#$%&()/,.;?@_`'{}|~";var vr=e.glp_read_lp=function(e,t,r){function D(e,t){throw new Error(e.count+": "+t)}function P(e,t){d(e.count+": warning: "+t)}function H(e){var t;p(e.c!=c),e.c=="\n"&&e.count++,t=e.callback(),t<0?e.c=="\n"?(e.count--,t=c):(P(e,"missing final end of line"),t="\n"):t!="\n"&&(N(t)?t=" ":C(t)&&D(e,"invalid control character "+t.charCodeAt(0))),e.c=t}function V(e){e.image+=e.c,H(e)}function $(e,t){return e.toLowerCase()==t.toLowerCase()?1:0}function J(e){function n(){e.token=y;while(L(e.c)||O(dr,e.c)>=0)V(e);t&&($(e.image,"minimize")?e.token=s:$(e.image,"minimum")?e.token=s:$(e.image,"min")?e.token=s:$(e.image,"maximize")?e.token=o:$(e.image,"maximum")?e.token=o:$(e.image,"max")?e.token=o:$(e.image,"subject")?e.c==" "&&(H(e),M(e.c)=="t"&&(e.token=u,e.image+=" ",V(e),M(e.c)!="o"&&D(e,"keyword `subject to' incomplete"),V(e),k(e.c)&&D(e,"keyword `"+e.image+e.c+"...' not recognized"))):$(e.image,"such")?e.c==" "&&(H(e),M(e.c)=="t"&&(e.token=u,e.image+=" ",V(e),M(e.c)!="h"&&D(e,"keyword `such that' incomplete"),V(e),M(e.c)!="a"&&D(e,"keyword `such that' incomplete"),V(e),M(e.c)!="t"&&D(e,"keyword `such that' incomplete"),V(e),k(e.c)&&D(e,"keyword `"+e.image+e.c+"...' not recognized"))):$(e.image,"st")?e.token=u:$(e.image,"s.t.")?e.token=u:$(e.image,"st.")?e.token=u:$(e.image,"bounds")?e.token=a:$(e.image,"bound")?e.token=a:$(e.image,"general")?e.token=f:$(e.image,"generals")?e.token=f:$(e.image,"gen")?e.token=f:$(e.image,"integer")?e.token=l:$(e.image,"integers")?e.token=l:$(e.image,"int")?e.token=l:$(e.image,"binary")?e.token=h:$(e.image,"binaries")?e.token=h:$(e.image,"bin")?e.token=h:$(e.image,"end")&&(e.token=v))}var t;e.token=-1,e.image="",e.value=0;for(;;){t=0;while(e.c==" ")H(e);if(e.c==c)e.token=i;else if(e.c=="\n"){H(e);if(!k(e.c))continue;t=1,n()}else{if(e.c=="\\"){while(e.c!="\n")H(e);continue}if(k(e.c)||e.c!="."&&O(dr,e.c)>=0)n();else if(A(e.c)||e.c=="."){e.token=b;while(A(e.c))V(e);if(e.c=="."){V(e),e.image.length==1&&!A(e.c)&&D(e,"invalid use of decimal point");while(A(e.c))V(e)}if(e.c=="e"||e.c=="E"){V(e),(e.c=="+"||e.c=="-")&&V(e),A(e.c)||D(e,"numeric constant `"+e.image+"' incomplete");while(A(e.c))V(e)}e.value=Number(e.image),e.value==Number.NaN&&D(e,"numeric constant `"+e.image+"' out of range")}else e.c=="+"?(e.token=w,V(e)):e.c=="-"?(e.token=E,V(e)):e.c==":"?(e.token=S,V(e)):e.c=="<"?(e.token=x,V(e),e.c=="="&&V(e)):e.c==">"?(e.token=T,V(e),e.c=="="&&V(e)):e.c=="="?(e.token=_,V(e),e.c=="<"?(e.token=x,V(e)):e.c==">"&&(e.token=T,V(e))):D(e,"character `"+e.c+"' not recognized")}break}while(e.c==" ")H(e)}function Q(e,t){var r=Et(e.P,t);if(r==0){r=I(e.P,1),R(e.P,r,t);if(e.n_max<r){var i=e.n_max,s=e.ind,o=e.val,u=e.flag,a=e.lb,f=e.ub;e.n_max+=e.n_max,e.ind=new Array(1+e.n_max),m(e.ind,1,s,1,i),e.val=new Array(1+e.n_max),m(e.val,1,o,1,i),e.flag=new Array(1+e.n_max),g(e.flag,1,0,e.n_max),m(e.flag,1,u,1,i),e.lb=new Array(1+e.n_max),m(e.lb,1,a,1,i),e.ub=new Array(1+e.n_max),m(e.ub,1,f,1,i)}e.lb[r]=+n,e.ub[r]=-n}return r}function G(e){var t,n,r=0,i,s,o;for(;;){e.token==w?(s=1,J(e)):e.token==E?(s=-1,J(e)):s=1,e.token==b?(o=e.value,J(e)):o=1,e.token!=y&&D(e,"missing variable name"),t=Q(e,e.image),e.flag[t]&&D(e,"multiple use of variable `"+e.image+"' not allowed"),r++,e.ind[r]=t,e.val[r]=s*o,e.flag[t]=1,J(e);if(e.token==w||e.token==E)continue;for(n=1;n<=r;n++)e.flag[e.ind[n]]=0;i=0;for(n=1;n<=r;n++)e.val[n]!=0&&(i++,e.ind[i]=e.ind[n],e.val[i]=e.val[n]);break}return i}function Y(e){var t,n;e.token==s?j(e.P,Hi):e.token==o?j(e.P,Bi):p(e!=e),J(e),e.token==y&&e.c==":"?(B(e.P,e.image),J(e),p(e.token==S),J(e)):B(e.P,"obj"),n=G(e);for(t=1;t<=n;t++)W(e.P,e.ind[t],e.val[t])}function et(e){var t,n,r,i;p(e.token==u),J(e);for(;;){t=F(e.P,1),e.token==y&&e.c==":"?(wt(e.P,e.image)!=0&&D(e,"constraint `"+e.image+"' multiply defined"),q(e.P,t,e.image),J(e),p(e.token==S),J(e)):q(e.P,t,"r."+e.count),n=G(e),X(e.P,t,n,e.ind,e.val),e.token==x?(r=Ui,J(e)):e.token==T?(r=Ri,J(e)):e.token==_?(r=Wi,J(e)):D(e,"missing constraint sense"),e.token==w?(i=1,J(e)):e.token==E?(i=-1,J(e)):i=1,e.token!=b&&D(e,"missing right-hand side"),U(e.P,t,r,i*e.value,i*e.value),e.c!="\n"&&e.c!=c&&D(e,"invalid symbol(s) beyond right-hand side"),J(e);if(e.token==w||e.token==E||e.token==b||e.token==y)continue;break}}function tt(e,t,r){e.lb[t]!=+n&&P(e,"lower bound of variable `"+at(e.P,t)+"' redefined"),e.lb[t]=r}function nt(e,t,r){e.ub[t]!=-n&&P(e,"upper bound of variable `"+at(e.P,t)+"' redefined"),e.ub[t]=r}function rt(e){var t,r,i,s;p(e.token==a),J(e);for(;;){if(e.token!=w&&e.token!=E&&e.token!=b&&e.token!=y)return;e.token==w||e.token==E?(r=1,s=e.token==w?1:-1,J(e),e.token==b?(i=s*e.value,J(e)):$(e.image,"infinity")||$(e.image,"inf")?(s>0&&D(e,"invalid use of `+inf' as lower bound"),i=-n,J(e)):D(e,"missing lower bound")):e.token==b?(r=1,i=e.value,J(e)):r=0,r&&(e.token!=x&&D(e,"missing `<', `<=', or `=<' after lower bound"),J(e)),e.token!=y&&D(e,"missing variable name"),t=Q(e,e.image),r&&tt(e,t,i),J(e),e.token==x?(J(e),e.token==w||e.token==E?(s=e.token==w?1:-1,J(e),e.token==b?(nt(e,t,s*e.value),J(e)):$(e.image,"infinity")||$(e.image,"inf")?(s<0&&D(e,"invalid use of `-inf' as upper bound"),nt(e,t,+n),J(e)):D(e,"missing upper bound")):e.token==b?(nt(e,t,e.value),J(e)):D(e,"missing upper bound")):e.token==T?(r&&D(e,"invalid bound definition"),J(e),e.token==w||e.token==E?(s=e.token==w?1:-1,J(e),e.token==b?(tt(e,t,s*e.value),J(e)):$(e.image,"infinity")||$(e.image,"inf")==0?(s>0&&D(e,"invalid use of `+inf' as lower bound"),tt(e,t,-n),J(e)):D(e,"missing lower bound")):e.token==b?(tt(e,t,e.value),J(e)):D(e,"missing lower bound")):e.token==_?(r&&D(e,"invalid bound definition"),J(e),e.token==w||e.token==E?(s=e.token==w?1:-1,J(e),e.token==b?(tt(e,t,s*e.value),nt(e,t,s*e.value),J(e)):D(e,"missing fixed value")):e.token==b?(tt(e,t,e.value),nt(e,t,e.value),J(e)):D(e,"missing fixed value")):$(e.image,"free")?(r&&D(e,"invalid bound definition"),tt(e,t,-n),nt(e,t,+n),J(e)):r||D(e,"invalid bound definition")}}function it(e){var t,n;e.token==f?(n=0,J(e)):e.token==l?(n=0,J(e)):e.token==h?(n=1,J(e)):p(e!=e);while(e.token==y)t=Q(e,e.image),Wt(e.P,t,Fi),n&&(tt(e,t,0),nt(e,t,1)),J(e)}function vt(){return ot!=0&&Z(e),ot}const i=0,s=1,o=2,u=3,a=4,f=5,l=6,h=7,v=8,y=9,b=10,w=11,E=12,S=13,x=14,T=15,_=16;var st={},ot;d("Reading problem data"),t==null&&(t={}),pr("glp_read_lp",t),st.P=e,st.parm=t,st.callback=r,st.count=0,st.c="\n",st.token=i,st.image="",st.value=0,st.n_max=100,st.ind=new Array(1+st.n_max),st.val=new Array(1+st.n_max),st.flag=new Array(1+st.n_max),g(st.flag,1,0,st.n_max),st.lb=new Array(1+st.n_max),st.ub=new Array(1+st.n_max),Z(e),bt(e),J(st),st.token!=s&&st.token!=o&&D(st,"`minimize' or `maximize' keyword missing"),Y(st),st.token!=u&&D(st,"constraints section missing"),et(st),st.token==a&&rt(st);while(st.token==f||st.token==l||st.token==h)it(st);st.token==v?J(st):st.token==i?P(st,"keyword `end' missing"):D(st,"symbol "+st.image+" in wrong position"),st.token!=i&&D(st,"extra symbol(s) detected beyond `end'");var ut,ft,lt,ct;for(ut=1;ut<=e.n;ut++)lt=st.lb[ut],ct=st.ub[ut],lt==+n&&(lt=0),ct==-n&&(ct=+n),lt==-n&&ct==+n?ft=qi:ct==+n?ft=Ri:lt==-n?ft=Ui:lt!=ct?ft=zi:ft=Wi,z(st.P,ut,ft,lt,ct);d(e.m+" row"+(e.m==1?"":"s")+", "+e.n+" column"+(e.n==1?"":"s")+", "+e.nnz+" non-zero"+(e.nnz==1?"":"s"));if(Vt(e)>0){var ht=Vt(e),pt=$t(e);if(ht==1)pt==0?d("One variable is integer"):d("One variable is binary");else{var dt=ht+" integer variables, ";pt==0?dt+="none":pt==1?dt+="one":pt==ht?dt+="all":dt+=pt,d(dt+" of which "+(pt==1?"is":"are")+" binary")}}return d(st.count+" lines were read"),St(e),K(e),ot=0,vt()},mr=e.glp_write_lp=function(e,t,n){function r(e){if(e[0]==".")return 1;if(A(e[0]))return 1;for(var t=0;t<e.length;t++)if(!L(e[t])&&O(dr,e[t])<0)return 1;return 0}function i(e){for(var t=0;t<e.length;t++)e[t]==" "?e[t]="_":e[t]=="-"?e[t]="~":e[t]=="["?e[t]="(":e[t]=="]"&&(e[t]=")")}function s(e,t){function s(){return t==0?"obj":"r_"+t}var n;return t==0?n=rt(e.P):n=ut(e.P,t),n==null?s():(i(n),r(n)?s():n)}function o(e,t){function s(){return"x_"+t}var n=at(e.P,t);return n==null?s():(i(n),r(n)?s():n)}function S(){return n("End"),g++,d(g+" lines were written"),0}var u={},a,f,l,c,h,v,m,g,y,b,w,E;d("Writing problem data"),t==null&&(t={}),pr("glp_write_lp",t),u.P=e,u.parm=t,g=0,n("\\* Problem: "+(e.name==null?"Unknown":e.name)+" *\\"),g++,n(""),g++;if(e.m>0&&e.n>0){e.dir==Hi?(n("Minimize"),g++):e.dir==Bi?(n("Maximize"),g++):p(e!=e),E=s(u,0),b=" "+E+":",v=0;for(h=1;h<=e.n;h++){f=e.col[h];if(f.coef!=0||f.ptr==null)v++,E=o(u,h),f.coef==0?w=" + 0 "+E:f.coef==+1?w=" + "+E:f.coef==-1?w=" - "+E:f.coef>0?w=" + "+f.coef+" "+E:w=" - "+ -f.coef+" "+E,b.length+w.length>72&&(n(b),b="",g++),b+=w}v==0&&(w=" 0 "+o(u,1),b+=w),n(b),g++,e.c0!=0&&(n("\\* constant term = "+e.c0+" *\\"),g++),n(""),g++,n("Subject To"),g++;for(c=1;c<=e.m;c++){a=e.row[c];if(a.type==qi)continue;E=s(u,c),b=" "+E+":";for(l=a.ptr;l!=null;l=l.r_next)E=o(u,l.col.j),l.val==+1?w=" + "+E:l.val==-1?w=" - "+E:l.val>0?w=" + "+l.val+" "+E:w=" - "+ -l.val+" "+E,b.length+w.length>72&&(n(b),b="",g++),b+=w;a.type==zi?(w=" - ~r_"+c,b.length+w.length>72&&(n(b),b="",g++),b+=w):a.ptr==null&&(w=" 0 "+o(u,1),b+=w),a.type==Ri?w=" >= "+a.lb:a.type==Ui?w=" <= "+a.ub:a.type==zi||a.type==Wi?w=" = "+a.lb:p(a!=a),b.length+w.length>72&&(n(b),b="",g++),b+=w,n(b),g++}n(""),g++,m=0;for(c=1;c<=e.m;c++){a=e.row[c];if(a.type!=zi)continue;m||(n("Bounds"),m=1,g++),n(" 0 <= ~r_"+c+" <= "+a.ub-a.lb),g++}for(h=1;h<=e.n;h++){f=e.col[h];if(f.type==Ri&&f.lb==0)continue;m||(n("Bounds"),m=1,g++),E=o(u,h),f.type==qi?(n(" "+E+" free"),g++):f.type==Ri?(n(" "+E+" >= "+f.lb),g++):f.type==Ui?(n(" -Inf <= "+E+" <= "+f.ub),g++):f.type==zi?(n(" "+f.lb+" <= "+E+" <= "+f.ub),g++):f.type==Wi?(n(" "+E+" = "+f.lb),g++):p(f!=f)}m&&n(""),g++,m=0;for(h=1;h<=e.n;h++){f=e.col[h];if(f.kind==ji)continue;p(f.kind==Fi),m||(n("Generals"),m=1,g++),n(" "+o(u,h)),g++}return m&&(n(""),g++),S()}return d("Warning: problem has no rows/columns"),n("\\* WARNING: PROBLEM HAS NO ROWS/COLUMNS *\\"),g++,n(""),g++,S()},gr=e.glp_read_lp_from_string=function(e,t,n){var r=0;return vr(e,t,function(){return r<n.length?n[r++]:-1})};const yr=1,br=2,wr=3,Er=4,Sr=5,fi=0,li=5,Di=e.GLP_MAJOR_VERSION=4,Pi=e.GLP_MINOR_VERSION=47,Hi=e.GLP_MIN=1,Bi=e.GLP_MAX=2,ji=e.GLP_CV=1,Fi=e.GLP_IV=2,Ii=e.GLP_BV=3,qi=e.GLP_FR=e.GLP_FR=1,Ri=e.GLP_LO=e.GLP_LO=2,Ui=e.GLP_UP=e.GLP_UP=3,zi=e.GLP_DB=e.GLP_DB=4,Wi=e.GLP_FX=e.GLP_FX=5,Xi=e.GLP_BS=1,Vi=e.GLP_NL=2,$i=e.GLP_NU=3,Ji=e.GLP_NF=4,Ki=e.GLP_NS=5,Qi=e.GLP_SF_GM=1,Gi=e.GLP_SF_EQ=16,Yi=e.GLP_SF_2N=32,Zi=e.GLP_SF_SKIP=64,es=e.GLP_SF_AUTO=128,ts=e.GLP_SOL=1,ns=e.GLP_IPT=2,rs=e.GLP_MIP=3,is=e.GLP_UNDEF=1,ss=e.GLP_FEAS=2,os=e.GLP_INFEAS=3,us=e.GLP_NOFEAS=4,as=e.GLP_OPT=5,fs=e.GLP_UNBND=6,ls=e.GLP_BF_FT=1,cs=e.GLP_BF_BG=2,hs=e.GLP_BF_GR=3,ps=e.GLP_MSG_OFF=0,ds=e.GLP_MSG_ERR=1,vs=e.GLP_MSG_ON=2,ms=e.GLP_MSG_ALL=3,gs=e.GLP_MSG_DBG=4,ys=e.GLP_PRIMAL=1,bs=e.GLP_DUALP=2,ws=e.GLP_DUAL=3,Es=e.GLP_PT_STD=17,Ss=e.GLP_PT_PSE=34,xs=e.GLP_RT_STD=17,Ts=e.GLP_RT_HAR=34,Ns=e.GLP_ORD_NONE=0,Cs=e.GLP_ORD_QMD=1,ks=e.GLP_ORD_AMD=2,Ls=e.GLP_ORD_SYMAMD=3,As=e.GLP_BR_FFV=1,Os=e.GLP_BR_LFV=2,Ms=e.GLP_BR_MFV=3,_s=e.GLP_BR_DTH=4,Ds=e.GLP_BR_PCH=5,Ps=e.GLP_BT_DFS=1,Hs=e.GLP_BT_BFS=2,Bs=e.GLP_BT_BLB=3,js=e.GLP_BT_BPH=4,Fs=e.GLP_PP_NONE=0,Is=e.GLP_PP_ROOT=1,qs=e.GLP_PP_ALL=2,Rs=e.GLP_RF_REG=0,Us=e.GLP_RF_LAZY=1,zs=e.GLP_RF_CUT=2,Ws=e.GLP_RF_GMI=1,Xs=e.GLP_RF_MIR=2,Vs=e.GLP_RF_COV=3,$s=e.GLP_RF_CLQ=4,Js=e.GLP_ON=1,Ks=e.GLP_OFF=0,Qs=e.GLP_IROWGEN=1,Gs=e.GLP_IBINGO=2,Ys=e.GLP_IHEUR=3,Zs=e.GLP_ICUTGEN=4,eo=e.GLP_IBRANCH=5,to=e.GLP_ISELECT=6,no=e.GLP_IPREPRO=7,ro=e.GLP_NO_BRNCH=0,io=e.GLP_DN_BRNCH=1,so=e.GLP_UP_BRNCH=2,oo=e.GLP_EBADB=1,uo=e.GLP_ESING=2,ao=e.GLP_ECOND=3,fo=e.GLP_EBOUND=4,lo=e.GLP_EFAIL=5,co=e.GLP_EOBJLL=6,ho=e.GLP_EOBJUL=7,po=e.GLP_EITLIM=8,vo=e.GLP_ETMLIM=9,mo=e.GLP_ENOPFS=10,go=e.GLP_ENODFS=11,yo=e.GLP_EROOT=12,bo=e.GLP_ESTOP=13,wo=e.GLP_EMIPGAP=14,Eo=e.GLP_ENOFEAS=15,So=e.GLP_ENOCVG=16,xo=e.GLP_EINSTAB=17,To=e.GLP_EDATA=18,No=e.GLP_ERANGE=19,Co=e.GLP_KKT_PE=1,ko=e.GLP_KKT_PB=2,Lo=e.GLP_KKT_DE=3,Ao=e.GLP_KKT_DB=4,Oo=e.GLP_KKT_CS=5,Mo=e.GLP_MPS_DECK=1,_o=e.GLP_MPS_FILE=2,Do=e.GLP_ASN_MIN=1,Po=e.GLP_ASN_MAX=2,Ho=e.GLP_ASN_MMP=3,Bo=e.LPX_LP=100,jo=e.LPX_MIP=101,Fo=e.LPX_FR=110,Io=e.LPX_LO=111,qo=e.LPX_UP=112,Ro=e.LPX_DB=113,Uo=e.LPX_FX=114,zo=e.LPX_MIN=120,Wo=e.LPX_MAX=121,Xo=e.LPX_P_UNDEF=132,Vo=e.LPX_P_FEAS=133,$o=e.LPX_P_INFEAS=134,Jo=e.LPX_P_NOFEAS=135,Ko=e.LPX_D_UNDEF=136,Qo=e.LPX_D_FEAS=137,Go=e.LPX_D_INFEAS=138,Yo=e.LPX_D_NOFEAS=139,Zo=e.LPX_BS=140,eu=e.LPX_NL=141,tu=e.LPX_NU=142,nu=e.LPX_NF=143,ru=e.LPX_NS=144,iu=e.LPX_T_UNDEF=150,su=e.LPX_T_OPT=151,ou=e.LPX_CV=160,uu=e.LPX_IV=161,au=e.LPX_I_UNDEF=170,fu=e.LPX_I_OPT=171,lu=e.LPX_I_FEAS=172,cu=e.LPX_I_NOFEAS=173,hu=e.LPX_OPT=180,pu=e.LPX_FEAS=181,du=e.LPX_INFEAS=182,vu=e.LPX_NOFEAS=183,mu=e.LPX_UNBND=184,gu=e.LPX_UNDEF=185,yu=e.LPX_E_OK=200,bu=e.LPX_E_EMPTY=201,wu=e.LPX_E_BADB=202,Eu=e.LPX_E_INFEAS=203,Su=e.LPX_E_FAULT=204,xu=e.LPX_E_OBJLL=205,Tu=e.LPX_E_OBJUL=206,Nu=e.LPX_E_ITLIM=207,Cu=e.LPX_E_TMLIM=208,ku=e.LPX_E_NOFEAS=209,Lu=e.LPX_E_INSTAB=210,Au=e.LPX_E_SING=211,Ou=e.LPX_E_NOCONV=212,Mu=e.LPX_E_NOPFS=213,_u=e.LPX_E_NODFS=214,Du=e.LPX_E_MIPGAP=215,Pu=e.LPX_K_MSGLEV=300,Hu=e.LPX_K_SCALE=301,Bu=e.LPX_K_DUAL=302,ju=e.LPX_K_PRICE=303,Fu=e.LPX_K_RELAX=304,Iu=e.LPX_K_TOLBND=305,qu=e.LPX_K_TOLDJ=306,Ru=e.LPX_K_TOLPIV=307,Uu=e.LPX_K_ROUND=308,zu=e.LPX_K_OBJLL=309,Wu=e.LPX_K_OBJUL=310,Xu=e.LPX_K_ITLIM=311,Vu=e.LPX_K_ITCNT=312,$u=e.LPX_K_TMLIM=313,Ju=e.LPX_K_OUTFRQ=314,Ku=e.LPX_K_OUTDLY=315,Qu=e.LPX_K_BRANCH=316,Gu=e.LPX_K_BTRACK=317,Yu=e.LPX_K_TOLINT=318,Zu=e.LPX_K_TOLOBJ=319,ea=e.LPX_K_MPSINFO=320,ta=e.LPX_K_MPSOBJ=321,na=e.LPX_K_MPSORIG=322,ra=e.LPX_K_MPSWIDE=323,ia=e.LPX_K_MPSFREE=324,sa=e.LPX_K_MPSSKIP=325,oa=e.LPX_K_LPTORIG=326,ua=e.LPX_K_PRESOL=327,aa=e.LPX_K_BINARIZE=328,fa=e.LPX_K_USECUTS=329,la=e.LPX_K_BFTYPE=330,ca=e.LPX_K_MIPGAP=331,ha=e.LPX_C_COVER=1,pa=e.LPX_C_CLIQUE=2,da=e.LPX_C_GOMORY=4,va=e.LPX_C_MIR=8,ma=e.LPX_C_ALL=255,Ta=1;LPF_ECOND=2,LPF_ELIMIT=3;const Na=0;if(Na)function _a(e,t,n,r){var i=e.m,s=e.B,o,u,a,f=0,l,c,h;for(o=1;o<=i;o++){l=0,h=1;for(u=1;u<=i;u++)t?c=s[i*(u-1)+o]*n[u]:c=s[i*(o-1)+u]*n[u],h<Math.abs(c)&&(h=Math.abs(c)),l+=c;a=Math.abs(l-r[o])/h,f<a&&(f=a)}f>1e-8&&d((t?"lpf_btran":"lpf_ftran")+": dmax = "+f+"; relative error too large")}const Xl=1,Vl=2,uc=-1,ac=101,fc=102,lc=103,cc=104,hc=105,pc=106,dc=107,vc=108,mc=109,gc=110,yc=111,bc=112,wc=113,Ec=114,Sc=115,xc=116,Tc=117,Nc=118,Cc=119,kc=120,Lc=121,Ac=122,Oc=123,Mc=124,_c=125,Dc=126,Pc=127,Hc=100,Bc=60,jc=1024,Fc=201,Ic=202,qc=203,Rc=204,Uc=205,zc=206,Wc=207,Xc=208,Vc=209,$c=210,Jc=211,Kc=212,Qc=213,Gc=214,Yc=215,Zc=216,eh=217,th=218,nh=219,rh=220,ih=221,sh=222,oh=223,uh=224,ah=225,fh=226,lh=227,ch=228,hh=229,ph=230,dh=231,vh=232,mh=233,gh=234,yh=235,bh=236,wh=237,Eh=238,Sh=239,xh=240,Th=241,Nh=242,Ch=243,kh=244,Lh=245,Ah=246,Oh=247,Mh=248,_h=249,Dh=250,Ph=251,Hh=252,Bh=0,jh=1,Fh=2,Ih=3,qh=4,Rh=5,Uh=301,zh=302,Wh=303,Xh=304,Vh=305,$h=306,Jh=307,Kh=308,Qh=309,Gh=310,Yh=311,Zh=312,ep=313,tp=314,np=315,rp=316,ip=317,sp=318,op=319,up=320,ap=321,fp=322,lp=323,cp=324,hp=325,pp=326,dp=327,vp=328,mp=329,gp=330,yp=331,bp=332,wp=333,Ep=334,Sp=335,xp=336,Tp=337,Np=338,Cp=339,kp=340,Lp=341,Ap=342,Op=343,Mp=344,_p=345,Dp=346,Pp=347,Hp=348,Bp=349,jp=350,Fp=351,Ip=352,qp=353,Rp=354,Up=355,zp=356,Wp=357,Xp=358,Vp=359,$p=360,Jp=361,Kp=362,Qp=363,Gp=364,Yp=365,Zp=366,ed=367,td=368,nd=369,rd=370,id=371,sd=372,od=373,ud=374,ad=375,fd=376,ld=377,cd=378,hd=379,pd=380,dd=381,vd=382,md=383,gd=384,yd=401,bd=402,wd=403,Ed=404,Sd=405,xd=411,Td=412,Nd=413,Cd=421,kd=422,Ld=423;var my=e.mpl_tab_num_args=function(e){return e.na},gy=e.mpl_tab_get_arg=function(e,t){return p(1<=t&&t<=e.na),e.arg[t]},yy=e.mpl_tab_num_flds=function(e){return e.nf},by=e.mpl_tab_get_name=function(e,t){return p(1<=t&&t<=e.nf),e.name[t]},wy=e.mpl_tab_get_type=function(e,t){return p(1<=t&&t<=e.nf),e.type[t]},Ey=e.mpl_tab_get_num=function(e,t){return p(1<=t&&t<=e.nf),p(e.type[t]=="N"),e.num[t]},Sy=e.mpl_tab_get_str=function(e,t){return p(1<=t&&t<=e.nf),p(e.type[t]=="S"),p(e.str[t]!=null),e.str[t]},xy=e.mpl_tab_set_num=function(e,t,n){p(1<=t&&t<=e.nf),p(e.type[t]=="?"),e.type[t]="N",e.num[t]=n},Ty=e.mpl_tab_set_str=function(e,t,n){p(1<=t&&t<=e.nf),p(e.type[t]=="?"),p(n.length<=Hc),p(e.str[t]!=null),e.type[t]="S",e.str[t]=n},cb=e.mpl_initialize=function(){var e={};return e.line=0,e.c=0,e.token=0,e.imlen=0,e.image="",e.value=0,e.b_token=0,e.b_imlen=0,e.b_image="",e.b_value=0,e.f_dots=0,e.f_scan=0,e.f_token=0,e.f_imlen=0,e.f_image="",e.f_value=0,e.context=new Array(Bc),g(e.context,0," ",Bc),e.c_ptr=0,e.flag_d=0,e.tree={},e.model=null,e.flag_x=0,e.as_within=0,e.as_in=0,e.as_binary=0,e.flag_s=0,e.a_list=null,e.sym_buf="",e.tup_buf="",e.rand=nE(),e.flag_p=0,e.stmt=null,e.dca=null,e.m=0,e.n=0,e.row=null,e.col=null,e.in_fp=null,e.in_file=null,e.out_fp=null,e.out_file=null,e.prt_fp=null,e.prt_file=null,e.phase=0,e.mod_file=null,e.mpl_buf="",e},hb=function(e,t,n,r){function i(){return d(e.line+" line"+(e.line==1?"":"s")+" were read"),ib(e),e.phase}e.phase!=0&&h("mpl_read_model: invalid call sequence"),n==null&&h("mpl_read_model: no input specified"),e.phase=1,d("Reading model section from "+t+" ..."),nb(e,t,n),qv(e),e.model==null&&fb(e,"empty model section not allowed"),e.mod_file=e.in_file,Gy(e);if(Bd(e,"data")){if(r)return lb(e,"data section ignored"),i();e.flag_d=1,Pd(e),e.token!=Th&&fb(e,"semicolon missing where expected"),Pd(e),e.phase=2,d("Reading data section from "+t+" ..."),fm(e)}return Fv(e),i()},pb=function(e,t,n){return e.phase!=1&&e.phase!=2&&h("mpl_read_data: invalid call sequence"),n==null&&h("mpl_read_data: no input specified"),e.phase=2,d("Reading data section from "+t+" ..."),e.flag_d=1,nb(e,t,n),Jv(e,"data")&&(Pd(e),e.token!=Th&&fb(e,"semicolon missing where expected"),Pd(e)),fm(e),Fv(e),d(e.line+" line"+(e.line==1?"":"s")+" were read"),ib(e),e.phase},db=e.mpl_generate=function(e,t,n){return e.phase!=1&&e.phase!=2&&h("mpl_generate: invalid call sequence"),e.phase=3,sb(e,t,n),Yy(e),ab(e),Zy(e),d("Model has been successfully generated"),e.phase},vb=e.mpl_get_prob_name=function(e){return e.mod_file},mb=e.mpl_get_num_rows=function(e){return e.phase!=3&&h("mpl_get_num_rows: invalid call sequence"),e.m},gb=e.mpl_get_num_cols=function(e){return e.phase!=3&&h("mpl_get_num_cols: invalid call sequence"),e.n},yb=e.mpl_get_row_name=function(e,t){e.phase!=3&&h("mpl_get_row_name: invalid call sequence"),1<=t&&t<=e.m||h("mpl_get_row_name: i = "+t+"; row number out of range");var n=e.row[t].con.name,r=n.length;return p(r<=255),n+=Xm(e,"[",e.row[t].memb.tuple).slice(0,255),n.length==255&&(n=n.slice(0,252)+"..."),p(n.length<=255),n},bb=bb=function(e,t){var n;e.phase!=3&&h("mpl_get_row_kind: invalid call sequence"),1<=t&&t<=e.m||h("mpl_get_row_kind: i = "+t+"; row number out of range");switch(e.row[t].con.type){case lc:n=xd;break;case xc:n=Td;break;case Sc:n=Nd;break;default:p(e!=e)}return n},wb=e.mpl_get_row_bnds=function(e,t,r){var i,s,o,u;return e.phase!=3&&h("mpl_get_row_bnds: invalid call sequence"),1<=t&&t<=e.m||h("mpl_get_row_bnds: i = "+t+"; row number out of range"),i=e.row[t],o=i.con.lbnd==null?-n:i.lbnd,u=i.con.ubnd==null?+n:i.ubnd,o==-n&&u==+n?(s=yd,o=u=0):u==+n?(s=bd,u=0):o==-n?(s=wd,o=0):i.con.lbnd!=i.con.ubnd?s=Ed:s=Sd,r(o,u),s},Eb=e.mpl_get_mat_row=function(e,t,n,r){var i,s=0;e.phase!=3&&h("mpl_get_mat_row: invalid call sequence"),1<=t&&t<=e.m||h("mpl_get_mat_row: i = "+t+"; row number out of range");for(i=e.row[t].form;i!=null;i=i.next)p(i.var!=null),s++,p(s<=e.n),n!=null&&(n[s]=i.var.j),r!=null&&(r[s]=i.coef);return s},Sb=e.mpl_get_row_c0=function(e,t){var n,r;return e.phase!=3&&h("mpl_get_row_c0: invalid call sequence"),1<=t&&t<=e.m||h("mpl_get_row_c0: i = "+t+"; row number out of range"),n=e.row[t],n.con.lbnd==null&&n.con.ubnd==null?r=-n.lbnd:r=0,r},xb=e.mpl_get_col_name=function(e,t){e.phase!=3&&h("mpl_get_col_name: invalid call sequence"),1<=t&&t<=e.n||h("mpl_get_col_name: j = "+t+"; column number out of range");var n=e.col[t].var.name,r=n.length;return p(r<=255),n+=Xm(e,"[",e.col[t].memb.tuple),n.length==255&&(n=n.slice(0,252)+"..."),p(n.length<=255),n},Tb=e.mpl_get_col_kind=function(e,t){var n;e.phase!=3&&h("mpl_get_col_kind: invalid call sequence"),1<=t&&t<=e.n||h("mpl_get_col_kind: j = "+t+"; column number out of range");switch(e.col[t].var.type){case Nc:n=Cd;break;case wc:n=kd;break;case ac:n=Ld;break;default:p(e!=e)}return n},Nb=e.mpl_get_col_bnds=function(e,t,r){var i,s,o,u;return e.phase!=3&&h("mpl_get_col_bnds: invalid call sequence"),1<=t&&t<=e.n||h("mpl_get_col_bnds: j = "+t+"; column number out of range"),i=e.col[t],o=i.var.lbnd==null?-n:i.lbnd,u=i.var.ubnd==null?+n:i.ubnd,o==-n&&u==+n?(s=yd,o=u=0):u==+n?(s=bd,u=0):o==-n?(s=wd,o=0):i.var.lbnd!=i.var.ubnd?s=Ed:s=Sd,r(o,u),s},Cb=e.mpl_has_solve_stmt=function(e){return e.phase!=3&&h("mpl_has_solve_stmt: invalid call sequence"),e.flag_s},kb=e.mpl_put_row_soln=function(e,t,n,r,i){p(e.phase==3),p(1<=t&&t<=e.m),e.row[t].stat=n,e.row[t].prim=r,e.row[t].dual=i},Lb=e.mpl_put_col_soln=function(e,t,n,r,i){p(e.phase==3),p(1<=t&&t<=e.n),e.col[t].stat=n,e.col[t].prim=r,e.col[t].dual=i},Ab=e.mpl_postsolve=function(e){return(e.phase!=3||!!e.flag_p)&&h("mpl_postsolve: invalid call sequence"),eb(e),ab(e),d("Model has been successfully processed"),e.phase},Ob=e.mpl_terminate=function(e){switch(e.phase){case 0:case 1:case 2:case 3:tb(e),p(e.a_list==null),p(e.dca==null);break;case 4:for(var t=e.a_list;t!=null;t=t.next)t.tree!=null&&delete t.tree;ky(e);break;default:p(e!=e)}};const _b=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],Db=["January","February","March","April","May","June","July","August","September","October","November","December"],aE=1,fE=2,lE=1,cE=2,hE=0,pE=1e-10;if(hE)function _a(e,t){var n=e.n,r=e.f,i=e.u,s=e.p,o=e.c,u,a,f,l,c=0,h,v;p(o!=null);for(u=1;u<=n;u++)for(a=1;a<=n;a++){h=0;for(f=1;f<=n;f++)h+=r[vE(e,u,f)]*o[vE(e,f,a)];f=s[a],v=u<=f?i[mE(e,u,f)]:0,l=Math.abs(h-v)/(1+Math.abs(v)),c<l&&(c=l)}c>1e-8&&d(t+": dmax = "+c+"; relative error too large")}var kE=e.glp_scale_prob=function(e,t){function n(e,t,n){var r,i,s;p(1<=t&&t<=e.m),i=1;for(r=e.row[t].ptr;r!=null;r=r.r_next){s=Math.abs(r.val),n&&(s*=r.row.rii*r.col.sjj);if(r.r_prev==null||i>s)i=s}return i}function r(e,t,n){var r,i,s;p(1<=t&&t<=e.m),i=1;for(r=e.row[t].ptr;r!=null;r=r.r_next){s=Math.abs(r.val),n&&(s*=r.row.rii*r.col.sjj);if(r.r_prev==null||i<s)i=s}return i}function i(e,t,n){var r,i,s;p(1<=t&&t<=e.n),i=1;for(r=e.col[t].ptr;r!=null;r=r.c_next){s=Math.abs(r.val),n&&(s*=r.row.rii*r.col.sjj);if(r.c_prev==null||i>s)i=s}return i}function s(e,t,n){var r,i,s;p(1<=t&&t<=e.n),i=1;for(r=e.col[t].ptr;r!=null;r=r.c_next){s=Math.abs(r.val),n&&(s*=r.row.rii*r.col.sjj);if(r.c_prev==null||i<s)i=s}return i}function o(e,t){var r,i,s;i=1;for(r=1;r<=e.m;r++){s=n(e,r,t);if(r==1||i>s)i=s}return i}function u(e,t){var n,i,s;i=1;for(n=1;n<=e.m;n++){s=r(e,n,t);if(n==1||i<s)i=s}return i}function a(e,t){var n,i,o,u;p(t==0||t==1);for(o=0;o<=1;o++)if(o==t)for(n=1;n<=e.m;n++)u=r(e,n,1),xt(e,n,Nt(e,n)/u);else for(i=1;i<=e.n;i++)u=s(e,i,1),Tt(e,i,Ct(e,i)/u)}function f(e,t){var o,u,a,f;p(t==0||t==1);for(a=0;a<=1;a++)if(a==t)for(o=1;o<=e.m;o++)f=n(e,o,1)*r(e,o,1),xt(e,o,Nt(e,o)/Math.sqrt(f));else for(u=1;u<=e.n;u++)f=i(e,u,1)*s(e,u,1),Tt(e,u,Ct(e,u)/Math.sqrt(f))}function l(e){var t,i,s;i=1;for(t=1;t<=e.m;t++){s=r(e,t,1)/n(e,t,1);if(t==1||i<s)i=s}return i}function c(e){var t,n,r;n=1;for(t=1;t<=e.n;t++){r=s(e,t,1)/i(e,t,1);if(t==1||n<r)n=r}return n}function v(e,t,n){var r,i,s=0,a;i=l(e)>c(e);for(r=1;r<=t;r++){a=s,s=u(e,1)/o(e,1);if(r>1&&s>n*a)break;f(e,i)}}function m(e,t){function n(e,t,n,r){return e+": min|aij| = "+t+"  max|aij| = "+n+"  ratio = "+r+""}var r,i,s;d("Scaling..."),kt(e),r=o(e,1),i=u(e,1),s=i/r,d(n(" A",r,i,s));if(r>=.1&&i<=10){d("Problem data seem to be well scaled");if(t&Zi)return}t&Qi&&(v(e,15,.9),r=o(e,1),i=u(e,1),s=i/r,d(n("GM",r,i,s))),t&Gi&&(a(e,l(e)>c(e)),r=o(e,1),i=u(e,1),s=i/r,d(n("EQ",r,i,s)));if(t&Yi){var f,h;for(f=1;f<=e.m;f++)xt(e,f,ba(Nt(e,f)));for(h=1;h<=e.n;h++)Tt(e,h,ba(Ct(e,h)));r=o(e,1),i=u(e,1),s=i/r,d(n("2N",r,i,s))}}t&~(Qi|Gi|Yi|Zi|es)&&h("glp_scale_prob: flags = "+t+"; invalid scaling options"),t&es&&(t=Qi|Gi|Zi),m(e,t)}})(typeof exports=="object"&&exports||this);